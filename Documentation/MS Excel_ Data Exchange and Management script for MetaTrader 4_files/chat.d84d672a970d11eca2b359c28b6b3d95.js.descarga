!function(){"use strict";var n,t,r={};function i(n){if(n in r){for(var t=r[n],i=0,e=arguments.length<=1?0:arguments.length-1;i<e;i++)t=t.replace("{".concat(i,"}"),i+1<1||arguments.length<=i+1?undefined:arguments[i+1]);return t}return"["+n+"]"}function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e(n)}function o(n){var t="";return n===undefined?t="undefined error":"object"===e(n)?"stack"in n&&n.stack?("message"in n&&n.message&&(t+=n.message+"\r\n"),t+=n.stack):"message"in n&&n.message?t=n.message:"type"in n&&n.type&&(t=n.type):t=n,t}function u(n){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},u(n)}function c(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==u(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===u(o)?o:String(o)),i)}var e,o}!function(n){n[n.u=0]="INFO",n[n.v=1]="WARNING",n[n.ERROR=2]="ERROR",n[n.g=3]="ATTENTION",n[n._=4]="DEBUG",n[n.S=5]="SPLITTER"}(n||(n={})),function(n){n[n.j=0]="WEB_SOCKET",n[n.O=1]="SYSTEM",n[n.T=2]="USER",n[n.k=3]="STORE",n[n.A=4]="PARSE",n[n._=5]="DEBUG",n[n.R=6]="SEND",n[n.C=7]="RECEIVED",n[n.I=8]="DB",n[n.M=9]="ROUTER"}(t||(t={}));var f={0:"#4aa838",1:"#d19520",2:"#a83838",3:"#a89238",4:"#474d95",5:"#797979"},a={0:"#4aa838",1:"#5c9651",2:"#5a83b1",3:"#7d3a7b",4:"#967948",5:"#8fa838",6:"#284071",7:"#71284a",8:"#7b4bbd",9:"#be7e2a"},s={0:"WebSocket",1:"System",2:"User",3:"Store",4:"Parse",5:"Debug",6:"◀ Out",7:"▶ In ",8:"DB",9:"Router"},l=function(){function t(n){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.enabled=!1,this.startText=n}var r,i,e;return r=t,i=[{key:"color",value:function(n){return"".concat("color:#fff;padding:2px 4px;margin-right:8px;border-radius:2px;","background:").concat(n,";")}},{key:"enable",value:function(){this.enabled=!0}},{key:"message",value:function(t,r,i){var e,u=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;if(this.enabled&&window.console&&window.console.log)if((i instanceof Error||i instanceof Event)&&(i=o(i)),window.document.documentMode)console.log("".concat(this.startText,": ").concat(s[r],": ").concat(i));else{var c=[this.color("#3878a8")],l="%c".concat(this.startText),h=s[r],v=this.color(t===n.u||t===n._?a[r]:f[t]);h&&(c.push(v),l+="%c".concat(h)),u&&(c.push(v),l+="%c".concat(u)),l+="%c".concat(i),c.push("color: inherit;"),(e=window.console).log.apply(e,[l].concat(c))}}},{key:"info",value:function(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(n.u,t,r,i)}},{key:"warning",value:function(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(n.v,t,r,i)}},{key:"error",value:function(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(n.ERROR,t,r,i)}},{key:"attention",value:function(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(n.g,t,r,i)}},{key:"debug",value:function(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(n._,t,r,i)}}],i&&c(r.prototype,i),e&&c(r,e),Object.defineProperty(r,"prototype",{writable:!1}),t}(),h=new l("Messages");var v,d,b=["zip","txt","log","mqh","ex5","mq5","mq4","ex4","mt5","set","tpl","cl","py","sqlite","csv","ipynb","gif","png","jpg","jpeg","webp"],y="\0\0\0\0\0\0\0\0",p="0000000000000000",m=8,w=4,g=1,_="6F49000000000000",S={P:6,U:41,N:51,D:52,B:53,L:54,$:55,W:56,F:57,G:58,q:59,H:62,Y:63,V:64,X:44,J:68,K:67,Z:73,nn:75,tn:76,rn:77,un:78,cn:81,fn:82,an:83,sn:84,ln:85,hn:86,vn:87,dn:88,bn:89,yn:90,pn:91,mn:92,wn:93,gn:94,_n:95,Sn:97,jn:98,On:99,En:109,Tn:110,kn:111,An:112,Rn:113,Cn:125,xn:127,In:128},j={Mn:-1,Pn:-2,Un:-3,Nn:-4,Dn:-5,Bn:-6,Ln:-7,$n:-8,zn:-9,Wn:-10,Fn:-11,Gn:-12,qn:-13,Hn:-14,Yn:-15,Vn:-16,Xn:1,Qn:2,Jn:3,Kn:4},O={Zn:0,nt:1,tt:2,rt:3},E={et:1,ot:2,ut:3,ct:4,ft:5,st:6},T={URL:1,lt:2,ht:3,vt:4,dt:6,bt:7,ot:8},k=0,A={yt:1,wt:2,gt:3,_t:4,St:5,jt:6,Ot:7},R={Et:1,Tt:2,kt:4,At:8,Rt:16,Ct:32,xt:64,It:128},C={Mt:0,Pt:1,Ut:2,Nt:4},x=1,I=3,M=7;!function(n){n[n.Dt=28261]="ENGLISH",n[n.Bt=30066]="RUSSIAN",n[n.Lt=25956]="GERMAN",n[n.$t=24938]="JAPAN",n[n.zt=29281]="ARABIC",n[n.Wt=26746]="CHINESE",n[n.Ft=29300]="TURKISH",n[n.Gt=29808]="PORTUGUESE",n[n.qt=29541]="SPANISH",n[n.Ht=29801]="ITALIAN",n[n.Yt=28523]="KOREAN",n[n.Vt=29286]="FRENCH",n[n.NONE=0]="NONE"}(v||(v={})),function(n){n[n.en=28261]="en",n[n.ru=30066]="ru",n[n.de=25956]="de",n[n.ja=24938]="ja",n[n.ar=29281]="ar",n[n.zh=26746]="zh",n[n.tr=29300]="tr",n[n.pt=29808]="pt",n[n.es=29541]="es",n[n.it=29801]="it",n[n.ko=28523]="ko",n[n.fr=29286]="fr",n[n.none=0]="none"}(d||(d={}));var P,U={Xt:0,Qt:1,Jt:2},N={Kt:1,Zt:0},D={nr:1,rr:2},B={ir:1,er:2,ur:3,cr:4},L=20,$={sr:0,lr:1},z={sr:25,lr:48},W={sr:40,lr:40},F={sr:295,lr:512},G=10485760;!function(n){n.hr="dev",n.vr="prod"}(P||(P={}));var q=1e3,H=2e3;function Y(n){return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n>=48&&n<=57?n-48:0}function V(n){for(var t=[],r=0,i=0;r<n.length;){var e=n.charCodeAt(r++);if(e<128)t[i++]=String.fromCharCode(e);else if(e>191&&e<224){var o=n.charCodeAt(r++);t[i++]=String.fromCharCode((31&e)<<6|63&o)}else if(e>239&&e<365){var u=((7&e)<<18|(63&n.charCodeAt(r++))<<12|(63&n.charCodeAt(r++))<<6|63&n.charCodeAt(r++))-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(1023&u))}else{var c=n.charCodeAt(r++),f=n.charCodeAt(r++);t[i++]=String.fromCharCode((15&e)<<12|(63&c)<<6|63&f)}}return t.join("")}function X(n){for(var t=BigInt(0),r=n.length;r>0;r--)t=t*BigInt(256)+BigInt(n.charCodeAt(r-1));return t}function Q(n){for(var t="",r=0;r<n.length;r++){var i=15&n.charCodeAt(r),e=n.charCodeAt(r)>>4&15;t+=e<10?String.fromCharCode(e+48):String.fromCharCode(e+55),t+=i<10?String.fromCharCode(i+48):String.fromCharCode(i+55)}return t}function J(n){if(n.length%2)return"";for(var t="",r=0;r+1<n.length;r+=2){var i=Y(n.charCodeAt(r+0)),e=Y(n.charCodeAt(r+1));t+=String.fromCharCode(16*i+e)}return t}function K(n){for(var t="",r=n.length-1;r>=0;r--){var i=15&n.charCodeAt(r),e=n.charCodeAt(r)>>4&15;t+=e<10?String.fromCharCode(e+48):String.fromCharCode(e+55),t+=i<10?String.fromCharCode(i+48):String.fromCharCode(i+55)}return t}function Z(n){for(var t="",r=n.length;r>0;r-=2)t+=n.substring(r-2,r);return parseInt(t,16)}function nn(n){for(var t="0000000000000000"+n.toString(16).toUpperCase(),r="",i=(t=t.substring(t.length-16)).length;i>0;i-=2)r+=t.substring(i-2,i);return r}function tn(n){for(var t=[],r=0,i=0;i<n.length;i++){var e=n.charCodeAt(i);e<128?t[r++]=String.fromCharCode(e):e<2048?(t[r++]=String.fromCharCode(e>>6|192),t[r++]=String.fromCharCode(63&e|128)):55296==(64512&e)&&i+1<n.length&&56320==(64512&n.charCodeAt(i+1))?(e=65536+((1023&e)<<10)+(1023&n.charCodeAt(++i)),t[r++]=String.fromCharCode(e>>18|240),t[r++]=String.fromCharCode(e>>12&63|128),t[r++]=String.fromCharCode(e>>6&63|128),t[r++]=String.fromCharCode(63&e|128)):(t[r++]=String.fromCharCode(e>>12|224),t[r++]=String.fromCharCode(e>>6&63|128),t[r++]=String.fromCharCode(63&e|128))}return t.join("")}function rn(n,t){return function(n,t){for(var r=Math.min(n.length,t.length);r>0;r--){if(n.charCodeAt(r-1)<t.charCodeAt(r-1))return-1;if(n.charCodeAt(r-1)>t.charCodeAt(r-1))return 1}return n.length<t.length?-1:n.length>t.length?1:0}(J(n),J(t))}function en(n){for(var t=0,r=0;r<n.length;r++)t=256*t+n.charCodeAt(n.length-r-1);return new Date(t/1e4-116444736e5)}var on=undefined;function un(n){var t="function"==typeof Map?new Map:undefined;return un=function(n){if(null===n||(r=n,-1===Function.toString.call(r).indexOf("[native code]")))return n;var r;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(n))return t.get(n);t.set(n,i)}function i(){return cn(n,arguments,vn(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),sn(i,n)},un(n)}function cn(n,t,r){return cn=hn()?Reflect.construct.bind():function(n,t,r){var i=[null];i.push.apply(i,t);var e=new(Function.bind.apply(n,i));return r&&sn(e,r.prototype),e},cn.apply(null,arguments)}function fn(n){return function(n){if(Array.isArray(n))return mn(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||pn(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&sn(n,t)}function sn(n,t){return sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},sn(n,t)}function ln(n){var t=hn();return function(){var r,i=vn(n);if(t){var e=vn(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===wn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(this,r)}}function hn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}function vn(n){return vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vn(n)}function dn(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==wn(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==wn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===wn(o)?o:String(o)),i)}var e,o}function yn(n,t,r){return t&&bn(n.prototype,t),r&&bn(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}function pn(n,t){if(n){if("string"==typeof n)return mn(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mn(n,t):void 0}}function mn(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function wn(n){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},wn(n)}function gn(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function _n(){}var Sn,jn=function(n){return gn(this,on),n}.bind(undefined);function On(n){return n()}function En(){return Object.create(null)}function Tn(n){n.forEach(On)}function kn(n){return"function"==typeof n}function An(n,t){return n!=n?t==t:n!==t||n&&"object"===wn(n)||"function"==typeof n}function Rn(n,t){return Sn||(Sn=document.createElement("a")),Sn.href=t,n===Sn.href}function Cn(n){return 0===Object.keys(n).length}function xn(n){var t=this;if(null==n)return _n;for(var r=arguments.length,i=new Array(r>1?r-1:0),e=1;e<r;e++)i[e-1]=arguments[e];var o=n.subscribe.apply(n,i);return o.unsubscribe?function(){return gn(this,t),o.unsubscribe()}.bind(this):o}function In(n){var t,r=this;return xn(n,function(n){return gn(this,r),t=n}.bind(this))(),t}function Mn(n,t,r){n.$$.on_destroy.push(xn(t,r))}function Pn(n,t,r,i){if(n){var e=Un(n,t,r,i);return n[0](e)}}function Un(n,t,r,i){return n[1]&&i?function(n,t){for(var r in t)n[r]=t[r];return n}(r.ctx.slice(),n[1](i(t))):r.ctx}function Nn(n,t,r,i){if(n[2]&&i){var e=n[2](i(r));if(t.dirty===undefined)return e;if("object"===wn(e)){for(var o=[],u=Math.max(t.dirty.length,e.length),c=0;c<u;c+=1)o[c]=t.dirty[c]|e[c];return o}return t.dirty|e}return t.dirty}function Dn(n,t,r,i,e,o){if(e){var u=Un(t,r,i,o);n.p(u,e)}}function Bn(n){if(n.ctx.length>32){for(var t=[],r=n.ctx.length/32,i=0;i<r;i++)t[i]=-1;return t}return-1}function Ln(n,t,r){return n.set(r),t}(function(n,t){return gn(this,on),Object.prototype.hasOwnProperty.call(n,t)}).bind(undefined);var $n="undefined"!=typeof window,zn=$n?function(){return gn(this,on),window.performance.now()}.bind(undefined):function(){return gn(this,on),Date.now()}.bind(undefined),Wn=$n?function(n){return gn(this,on),requestAnimationFrame(n)}.bind(undefined):_n;var Fn=new Set;function Gn(n){var t=this;Fn.forEach(function(r){gn(this,t),r.c(n)||(Fn["delete"](r),r.f())}.bind(this)),0!==Fn.size&&Wn(Gn)}function qn(n){var t,r=this;return 0===Fn.size&&Wn(Gn),{promise:new Promise(function(i){gn(this,r),Fn.add(t={c:n,f:i})}.bind(this)),abort:function(){Fn["delete"](t)}}}var Hn;function Yn(n,t){n.appendChild(t)}function Vn(n,t,r){var i=Xn(n);if(!i.getElementById(t)){var e=tt("style");e.id=t,e.textContent=r,Jn(i,e)}}function Xn(n){if(!n)return document;var t=n.getRootNode?n.getRootNode():n.ownerDocument;return t&&t.host?t:n.ownerDocument}function Qn(n){var t=tt("style");return Jn(Xn(n),t),t.sheet}function Jn(n,t){return Yn(n.head||n,t),t.sheet}function Kn(n,t,r){n.insertBefore(t,r||null)}function Zn(n){n.parentNode&&n.parentNode.removeChild(n)}function nt(n,t){for(var r=0;r<n.length;r+=1)n[r]&&n[r].d(t)}function tt(n){return document.createElement(n)}function rt(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function it(n){return document.createTextNode(n)}function et(){return it(" ")}function ot(){return it("")}function ut(n,t,r,i){var e=this;return n.addEventListener(t,r,i),function(){return gn(this,e),n.removeEventListener(t,r,i)}.bind(this)}function ct(n){return function(t){return t.preventDefault(),n.call(this,t)}}function ft(n){return function(t){return t.stopPropagation(),n.call(this,t)}}function at(n,t,r){null==r?n.removeAttribute(t):n.getAttribute(t)!==r&&n.setAttribute(t,r)}function st(n,t){t=""+t,n.wholeText!==t&&(n.data=t)}function lt(n,t){n.value=null==t?"":t}function ht(n,t){try{n.type=t}catch(r){}}function vt(n,t,r,i){null===r?n.style.removeProperty(t):n.style.setProperty(t,r,i?"important":"")}function dt(n,t){for(var r=0;r<n.options.length;r+=1){var i=n.options[r];if(i.__value===t)return void(i.selected=!0)}n.selectedIndex=-1}function bt(){if(Hn===undefined){Hn=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(n){Hn=!0}}return Hn}function yt(n,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},i=r.bubbles,e=void 0!==i&&i,o=r.cancelable,u=void 0!==o&&o,c=document.createEvent("CustomEvent");return c.initCustomEvent(n,e,u,t),c}var pt=function(){function n(){var t=arguments.length>0&&arguments[0]!==undefined&&arguments[0];dn(this,n),this.is_svg=!1,this.is_svg=t,this.e=this.n=null}return yn(n,[{key:"c",value:function(n){this.h(n)}},{key:"m",value:function(n,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this.e||(this.is_svg?this.e=rt(t.nodeName):this.e=tt(t.nodeName),this.t=t,this.c(n)),this.i(r)}},{key:"h",value:function(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}},{key:"i",value:function(n){for(var t=0;t<this.n.length;t+=1)Kn(this.t,this.n[t],n)}},{key:"p",value:function(n){this.d(),this.h(n),this.i(this.a)}},{key:"d",value:function(){this.n.forEach(Zn)}}]),n}();var mt,wt=new Map,gt=0;function _t(n,t,r,i,e,o,u){for(var c=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0,f=16.666/i,a="{\n",s=0;s<=1;s+=f){var l=t+(r-t)*o(s);a+=100*s+"%{".concat(u(l,1-l),"}\n")}var h=a+"100% {".concat(u(r,1-r),"}\n}"),v="__svelte_".concat(function(n){for(var t=5381,r=n.length;r--;)t=(t<<5)-t^n.charCodeAt(r);return t>>>0}(h),"_").concat(c),d=Xn(n),b=wt.get(d)||function(n,t){var r={stylesheet:Qn(t),rules:{}};return wt.set(n,r),r}(d,n),y=b.stylesheet,p=b.rules;p[v]||(p[v]=!0,y.insertRule("@keyframes ".concat(v," ").concat(h),y.cssRules.length));var m=n.style.animation||"";return n.style.animation="".concat(m?"".concat(m,", "):"").concat(v," ").concat(i,"ms linear ").concat(e,"ms 1 both"),gt+=1,v}function St(n,t){var r=this,i=(n.style.animation||"").split(", "),e=i.filter(t?function(n){return gn(this,r),n.indexOf(t)<0}.bind(this):function(n){return gn(this,r),-1===n.indexOf("__svelte")}.bind(this)),o=i.length-e.length;o&&(n.style.animation=e.join(", "),(gt-=o)||function(){var n=this;Wn(function(){var t=this;gn(this,n),gt||(wt.forEach(function(n){gn(this,t);var r=n.stylesheet.ownerNode;r&&Zn(r)}.bind(this)),wt.clear())}.bind(this))}())}function jt(n){mt=n}function Ot(){if(!mt)throw new Error("Function called outside component initialization");return mt}function Et(n){Ot().$$.on_mount.push(n)}function Tt(){var n=this,t=Ot();return function(r,i){var e=this,o=(arguments.length>2&&arguments[2]!==undefined?arguments[2]:{}).cancelable,u=void 0!==o&&o;gn(this,n);var c=t.$$.callbacks[r];if(c){var f=yt(r,i,{cancelable:u});return c.slice().forEach(function(n){gn(this,e),n.call(t,f)}.bind(this)),!f.defaultPrevented}return!0}.bind(this)}function kt(n,t){var r=this,i=n.$$.callbacks[t.type];i&&i.slice().forEach(function(n){return gn(this,r),n.call(this,t)}.bind(this))}var At=[],Rt=[],Ct=[],xt=[],It=Promise.resolve(),Mt=!1;function Pt(){Mt||(Mt=!0,It.then(zt))}function Ut(){return Pt(),It}function Nt(n){Ct.push(n)}function Dt(n){xt.push(n)}var Bt,Lt=new Set,$t=0;function zt(){if(0===$t){var n=mt;do{try{for(;$t<At.length;){var t=At[$t];$t++,jt(t),Wt(t.$$)}}catch(e){throw At.length=0,$t=0,e}for(jt(null),At.length=0,$t=0;Rt.length;)Rt.pop()();for(var r=0;r<Ct.length;r+=1){var i=Ct[r];Lt.has(i)||(Lt.add(i),i())}Ct.length=0}while(At.length);for(;xt.length;)xt.pop()();Mt=!1,Lt.clear(),jt(n)}}function Wt(n){if(null!==n.fragment){n.update(),Tn(n.before_update);var t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(Nt)}}function Ft(){var n=this;return Bt||(Bt=Promise.resolve()).then(function(){gn(this,n),Bt=null}.bind(this)),Bt}function Gt(n,t,r){n.dispatchEvent(yt("".concat(t?"intro":"outro").concat(r)))}var qt,Ht=new Set;function Yt(){qt={r:0,c:[],p:qt}}function Vt(){qt.r||Tn(qt.c),qt=qt.p}function Xt(n,t){n&&n.i&&(Ht["delete"](n),n.i(t))}function Qt(n,t,r,i){var e=this;if(n&&n.o){if(Ht.has(n))return;Ht.add(n),qt.c.push(function(){gn(this,e),Ht["delete"](n),i&&(r&&n.d(1),i())}.bind(this)),n.o(t)}else i&&i()}var Jt={duration:0};function Kt(n,t,r,i){var e={direction:"both"},o=t(n,r,e),u=i?0:1,c=null,f=null,a=null;function s(){a&&St(n,a)}function l(n,t){var r=n.b-u;return t*=Math.abs(r),{a:u,b:n.b,d:r,duration:t,start:n.start,end:n.start+t,group:n.group}}function h(t){var r=this,i=o||Jt,e=i.delay,h=void 0===e?0:e,v=i.duration,d=void 0===v?300:v,b=i.easing,y=void 0===b?jn:b,p=i.tick,m=void 0===p?_n:p,w=i.css,g={start:zn()+h,b:t};t||(g.group=qt,qt.r+=1),c||f?f=g:(w&&(s(),a=_t(n,u,t,d,h,y,w)),t&&m(0,1),c=l(g,d),Nt(function(){return gn(this,r),Gt(n,t,"start")}.bind(this)),qn(function(t){if(gn(this,r),f&&t>f.start&&(c=l(f,d),f=null,Gt(n,c.b,"start"),w&&(s(),a=_t(n,u,c.b,c.duration,0,y,o.css))),c)if(t>=c.end)m(u=c.b,1-u),Gt(n,c.b,"end"),f||(c.b?s():--c.group.r||Tn(c.group.c)),c=null;else if(t>=c.start){var i=t-c.start;u=c.a+c.d*y(i/c.duration),m(u,1-u)}return!(!c&&!f)}.bind(this)))}return{run:function(n){var t=this;kn(o)?Ft().then(function(){gn(this,t),o=o(e),h(n)}.bind(this)):h(n)},end:function(){s(),c=f=null}}}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Zt(n,t){var r=this;Qt(n,1,1,function(){gn(this,r),t["delete"](n.key)}.bind(this))}function nr(n,t,r,i,e,o,u,c,f,a,s,l){for(var h=n.length,v=o.length,d=h,b={};d--;)b[n[d].key]=d;var y=[],p=new Map,m=new Map;for(d=v;d--;){var w=l(e,o,d),g=r(w),_=u.get(g);_?i&&_.p(w,t):(_=a(g,w)).c(),p.set(g,y[d]=_),g in b&&m.set(g,Math.abs(d-b[g]))}var S=new Set,j=new Set;function O(n){Xt(n,1),n.m(c,s),u.set(n.key,n),s=n.first,v--}for(;h&&v;){var E=y[v-1],T=n[h-1],k=E.key,A=T.key;E===T?(s=E.first,h--,v--):p.has(A)?!u.has(k)||S.has(k)?O(E):j.has(A)?h--:m.get(k)>m.get(A)?(j.add(k),O(E)):(S.add(A),h--):(f(T,u),h--)}for(;h--;){var R=n[h];p.has(R.key)||f(R,u)}for(;v;)O(y[v-1]);return y}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);(function(){return gn(this,on),""}).bind(undefined);function tr(n,t,r){var i=n.$$.props[t];i!==undefined&&(n.$$.bound[i]=r,r(n.$$.ctx[i]))}function rr(n){n&&n.c()}function ir(n,t,r,i){var e=this,o=n.$$,u=o.fragment,c=o.after_update;u&&u.m(t,r),i||Nt(function(){gn(this,e);var t,r=n.$$.on_mount.map(On).filter(kn);n.$$.on_destroy?(t=n.$$.on_destroy).push.apply(t,fn(r)):Tn(r);n.$$.on_mount=[]}.bind(this)),c.forEach(Nt)}function er(n,t){var r=n.$$;null!==r.fragment&&(Tn(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function or(n,t,r,i,e,o,u){var c=this,f=arguments.length>7&&arguments[7]!==undefined?arguments[7]:[-1],a=mt;jt(n);var s=n.$$={fragment:null,ctx:[],props:o,update:_n,not_equal:e,bound:En(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:En(),dirty:f,skip_bound:!1,root:t.target||a.$$.root};u&&u(s.root);var l,h=!1;if(s.ctx=r?r(n,t.props||{},function(t,r){gn(this,c);var i=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?undefined:arguments[2]:r;return s.ctx&&e(s.ctx[t],s.ctx[t]=i)&&(!s.skip_bound&&s.bound[t]&&s.bound[t](i),h&&function(n,t){-1===n.$$.dirty[0]&&(At.push(n),Pt(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}(n,t)),r}.bind(this)):[],s.update(),h=!0,Tn(s.before_update),s.fragment=!!i&&i(s.ctx),t.target){if(t.hydrate){!0;var v=(l=t.target,Array.from(l.childNodes));s.fragment&&s.fragment.l(v),v.forEach(Zn)}else s.fragment&&s.fragment.c();t.intro&&Xt(n.$$.fragment),ir(n,t.target,t.anchor,t.customElement),!1,zt()}jt(a)}"function"==typeof HTMLElement&&HTMLElement;var ur=function(){function n(){dn(this,n)}return yn(n,[{key:"$destroy",value:function(){er(this,1),this.$destroy=_n}},{key:"$on",value:function(n,t){var r=this;if(!kn(t))return _n;var i=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return i.push(t),function(){gn(this,r);var n=i.indexOf(t);-1!==n&&i.splice(n,1)}.bind(this)}},{key:"$set",value:function(n){this.$$set&&!Cn(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}]),n}();function cr(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function fr(n,t){var r="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=function(n,t){if(!n)return;if("string"==typeof n)return ar(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ar(n,t)}(n))||t&&n&&"number"==typeof n.length){r&&(n=r);var i=0,e=function(){};return{s:e,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){r=r.call(n)},n:function(){var n=r.next();return u=n.done,n},e:function(n){c=!0,o=n},f:function(){try{u||null==r["return"]||r["return"]()}finally{if(c)throw o}}}}function ar(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}var sr=[];function lr(n){var t,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_n,i=new Set;function e(r){if(An(n,r)&&(n=r,t)){var e,o=!sr.length,u=fr(i);try{for(u.s();!(e=u.n()).done;){var c=e.value;c[1](),sr.push(c,n)}}catch(a){u.e(a)}finally{u.f()}if(o){for(var f=0;f<sr.length;f+=2)sr[f][0](sr[f+1]);sr.length=0}}}return{set:e,update:function(t){e(t(n))},subscribe:function(o){var u=this,c=[o,arguments.length>1&&arguments[1]!==undefined?arguments[1]:_n];return i.add(c),1===i.size&&(t=r(e)||_n),o(n),function(){cr(this,u),i["delete"](c),0===i.size&&(t(),t=null)}.bind(this)}}}function hr(n,t,r){var i,e,o=this,u=!Array.isArray(n),c=u?[n]:n,f=t.length<2;return i=r,e=function(n){var r=this;cr(this,o);var i=!1,e=[],a=0,s=_n,l=function(){if(cr(this,r),!a){s();var i=t(u?e[0]:e,n);f?n(i):s=kn(i)?i:_n}}.bind(this),h=c.map(function(n,t){var o=this;return cr(this,r),xn(n,function(n){cr(this,o),e[t]=n,a&=~(1<<t),i&&l()}.bind(this),function(){cr(this,o),a|=1<<t}.bind(this))}.bind(this));return i=!0,l(),function(){Tn(h),s()}}.bind(this),{subscribe:lr(i,e).subscribe}}function vr(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function dr(n,t){var r="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=function(n,t){if(!n)return;if("string"==typeof n)return br(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return br(n,t)}(n))||t&&n&&"number"==typeof n.length){r&&(n=r);var i=0,e=function(){};return{s:e,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){r=r.call(n)},n:function(){var n=r.next();return u=n.done,n},e:function(n){c=!0,o=n},f:function(){try{u||null==r["return"]||r["return"]()}finally{if(c)throw o}}}}function br(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function yr(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==pr(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==pr(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===pr(o)?o:String(o)),i)}var e,o}function pr(n){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},pr(n)}function mr(){}var wr=[],gr=function(){function n(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:mr;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.subscribers=new Set,this._systemName="",this.stop=null,this.value=this,this.start=t}var t,r,i;return t=n,r=[{key:"set",value:function(n){var t,r;if(t=this.value,r=n,Boolean(t!=t?r==r:t!==r||t&&"object"===pr(t)||"function"==typeof t)&&(this.value=n,this.stop)){var i,e=!wr.length,o=dr(this.subscribers);try{for(o.s();!(i=o.n()).done;){var u=i.value;u[1](),wr.push(u,this.value)}}catch(f){o.e(f)}finally{o.f()}if(e){for(var c=0;c<wr.length;c+=2)wr[c][0](wr[c+1]);wr.length=0}}}},{key:"update",value:function(n){this.set(n(this.value))}},{key:"subscribe",value:function(n){var t=this,r=[n,arguments.length>1&&arguments[1]!==undefined?arguments[1]:mr];return this.subscribers.add(r),1===this.subscribers.size&&(this.stop=this.start(this.set)||mr),n(this.value),function(){vr(this,t),this.subscribers["delete"](r),0===this.subscribers.size&&this.stop&&(this.stop(),this.stop=null)}.bind(this)}},{key:"refresh",value:function(){var n=this;this.update(function(t){return vr(this,n),t}.bind(this))}}],r&&yr(t.prototype,r),i&&yr(t,i),Object.defineProperty(t,"prototype",{writable:!1}),n}();function _r(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Er(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Er(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Er(o)?o:String(o)),i)}var e,o}function Sr(n,t){return Sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Sr(n,t)}function jr(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Or(n);if(t){var e=Or(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===Er(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(this,r)}}function Or(n){return Or=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Or(n)}function Er(n){return Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Er(n)}var Tr=undefined&&undefined.__decorate||function(n,t,r,i){var e,o=arguments.length,u=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===("undefined"==typeof Reflect?"undefined":Er(Reflect))&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,r,i);else for(var c=n.length-1;c>=0;c--)(e=n[c])&&(u=(o<3?e(u):o>3?e(t,r,u):e(t,r))||u);return o>3&&u&&Object.defineProperty(t,r,u),u},kr=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Sr(n,t)}(o,n);var t,r,i,e=jr(o);function o(){var n;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=e.apply(this,arguments))._systemName="layout",n.window=!1,n.edit=!1,n.search=!1,n.errorWindow=!1,n.addMembers=!1,n.create=!1,n.listMembers=!1,n.info=!1,n["delete"]=!1,n.error=!1,n}return t=o,(r=[{key:"setLayout",value:function(n){n.window!==undefined&&(this.window=n.window),n.edit!==undefined&&(this.edit=n.edit),n.search!==undefined&&(this.search=n.search),n.errorWindow!==undefined&&(this.errorWindow=n.errorWindow),n.addMembers!==undefined&&(this.addMembers=n.addMembers),n.create!==undefined&&(this.create=n.create),n.listMembers!==undefined&&(this.listMembers=n.listMembers),n.info!==undefined&&(this.info=n.info),n["delete"]!==undefined&&(this["delete"]=n["delete"]),n.error!==undefined&&(this.error=n.error)}}])&&_r(t.prototype,r),i&&_r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),o}(gr);Tr([function(n,t,r){var i=r.value;r.value=function(){for(var n=this,t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var o=i.apply(this,r);return o instanceof Promise?o.then(function(){return vr(this,n),this.set(this)}.bind(this)):this.set(this),o}}],kr.prototype,"setLayout",null);var Ar=new kr,Rr=undefined;var Cr=lr(undefined);Cr.subscribe(function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,Rr),Ar.setLayout({errorWindow:!!n})}.bind(undefined));var xr,Ir,Mr,Pr,Ur,Nr,Dr,Br,Lr,$r,zr,Wr,Fr={chatId:"",changeId:"",authorId:"",authorName:"",type:0,isPublic:0,isLimited:0,isClosed:0,lastUpdate:"",extraId:"",name:"",description:"",links:"",inviteLink:"",language:0,countAdmins:0,countModers:0,countInvited:0,countReaders:0,countMembers:0,avatarIsPresent:0,lastSeen:"",lastAccess:"",perms:0,isMuted:0,isSubscribed:0,date:new Date,created:new Date,dateText:""},Gr="en",qr=!1,Hr=48,Yr=54,Vr=512,Xr=!1;function Qr(n){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];Xr=t,xr=n.mode,Ir=n.complaintKey,Mr=n.userId,Pr=n.userLogin,Gr=n.language,n.playSounds,n.accessLevel,Ur=n.friendlyHosts,Nr=n.readonly,Br=n.token,Lr=n.url,$r=n.version,zr=n.uniq;var r=document.documentElement.clientWidth;qr=r<=414,xr===P.hr&&(Xr=!0),Dr=n.type===$.sr,Hr=Dr?z.sr:z.lr,Yr=Dr?W.sr:W.lr,Vr=Dr||qr?F.sr:F.lr}function Jr(n){var t="";return n.type===O.rt?n.inviteLink?t="/".concat(Gr,"/channels/").concat(encodeURI(n.inviteLink)):n.chatId&&(t="/".concat(Gr,"/channels/").concat(n.chatId.toLowerCase())):n.chatId&&(t="/".concat(Gr,"/messages/").concat(n.chatId.toLowerCase())),t}function Kr(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Zr(n){return n.replace(/&/g,"").replace(/</g,"").replace(/>/g,"")}function ni(n){return ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ni(n)}window.localizationList=window.localizationList||{},window.localizationInited=!1;window.mqGlobal?window.mqGlobal.Language:window.currentLanguage;var ti,ri={};function ii(n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(window.localizationList[t]=n[t])}function ei(n){if(window.localizationInited||function(){var n=document.body.querySelectorAll('script[type="application/json"]');window.localizationInited=!0;for(var t=0,r=n.length;t<r;t++){var i=n[t];if("translate"===i.getAttribute("data-type")){var e=i.innerHTML;if(e){try{e=JSON.parse(e)}catch(o){e=null,console.warn(o)}e&&"object"===ni(e)&&ii(e)}}}}(),!n)return window.localizationList;var t,r=window.localizationList;if(n in ri)t=ri[n];else{for(var i=n.split("."),e=0,o=i.length;e<o&&i[e]in r;e++)r=r[i[e]];if("string"==typeof r&&(t=r),!t)return"["+n+"]";ri[n]=t}for(var u=0,c=arguments.length<=1?0:arguments.length-1;u<c;u++)t=t.replace("{"+u+"}",u+1<1||arguments.length<=u+1?undefined:arguments[u+1]);return t}function oi(n){return oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},oi(n)}var ui={weekday:["Mo","Tu","We","Th","Fr","Sa","Su"],weekdayFull:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthFull:["January","February","March","April","May","June","July","August","September","October","November","December"]},ci={date:undefined,dateTime:undefined};function fi(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())}function ai(n,t){return(fi(n)-fi(t))/864e5|0}function si(n){var t=n.dateTime;switch(n.type){case"datetime":case"datestandardtime":return hi(t)+" "+vi(t);case"date":case"datestandard":return hi(t);case"shortDate":return ci.shortDate.format(t);case"shortDateTime":return ci.shortDate.format(t)+" "+vi(t);case"time":return vi(t);case"shortMonth":return ci.shortMonth?ci.shortMonth.format(t):yi(t);case"longMonth":return ci.shortMonth?ci.longMonth.format(t):yi(t);default:throw new Error("Datetime type '"+n.type+"' is not supported")}}function li(n){var t="object"!==oi(n.dateTime)?new Date(n.dateTime):n.dateTime;if(!ti)return n.type="datestandard",si(n);var r=new Date,i=ai(t,r);switch(n.type){case"datetime":return 0===i?ci.time.format(t):ci.relative&&i>=-1?ci.relative.format(i,"day")+", "+ci.time.format(t):r.getFullYear()===t.getFullYear()?ci.shortDate.format(t)+", "+ci.time.format(t):hi(t)+", "+vi(t);case"date":return ci.relative&&i>=-2&&i<=0?ci.relative.format(i,"day"):r.getFullYear()===t.getFullYear()?ci.longDate.format(t):ci.datestandard.format(t).replace(/-/g,".");default:return 0===i?ci.time.format(t):ci.relative&&i>=-1?ci.relative.format(i,"day"):r.getFullYear()===t.getFullYear()?ci.shortDate.format(t):ci.datestandard.format(t).replace(/-/g,".")}}function hi(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:".";return n.getFullYear()+t+di(n.getMonth()+1)+t+di(n.getDate())}function vi(n){return di(n.getHours())+":"+di(n.getMinutes())}function di(n){return("0"+n).slice(-2)}function bi(n){var t=n.date,r=n.dateLocal,i=void 0===r||r,e=i?t.getFullYear():t.getUTCFullYear(),o=(e=(e="0000"+e).substring(e.length-4))+".";return o+=((e=(i?t.getMonth():t.getUTCMonth())+1)<10?"0"+e:e)+".",o+=((e=i?t.getDate():t.getUTCDate())<10?"0"+e:e)+" ",o+=((e=i?t.getHours():t.getUTCHours())<10?"0"+e:e)+":",o+=(e=i?t.getMinutes():t.getUTCMinutes())<10?"0"+e:e}function yi(n){return"".concat(ei("monthsShort.".concat(n.getMonth())))}!function(){if(ti=window.Intl!==undefined){var n={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1},t={year:"numeric",month:"long",day:"numeric"},r={year:"numeric",month:"2-digit",day:"2-digit"},i={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},e={day:"numeric",month:"short"},o={day:"numeric",month:"long"},u={hour:"numeric",minute:"numeric",hour12:!1},c={month:"short"},f={month:"long"},a={weekday:"short"},s={weekday:"long"},l={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1},h=document.documentElement.lang||"en-GB";switch(h){case"ru":h="ru-RU";break;case"zh":h="zh-CN";break;case"en":h="en-GB"}var v=[h,"en"];ci.dateTime=new window.Intl.DateTimeFormat(v,n),ci.date=new window.Intl.DateTimeFormat(v,t),ci.datestandard=new window.Intl.DateTimeFormat(["lt-LT","ko-KR","en"],r),ci.datestandardtime=new window.Intl.DateTimeFormat(["lt-LT","ko-KR","en"],i),ci.shortDate=new window.Intl.DateTimeFormat(v,e),ci.longDate=new window.Intl.DateTimeFormat(v,o),ci.time=new window.Intl.DateTimeFormat(v,u),ci.relative=window.Intl.RelativeTimeFormat?new window.Intl.RelativeTimeFormat(v,{numeric:"auto"}):null,ci.shortMonth=new window.Intl.DateTimeFormat(v,c),ci.longMonth=new window.Intl.DateTimeFormat(v,f),ci.shortWeekday=new window.Intl.DateTimeFormat(v,a),ci.longWeekday=new window.Intl.DateTimeFormat(v,s),ci.humanreadabledate=new window.Intl.DateTimeFormat(v,l),function(){ui={month:[],monthFull:[],weekday:[],weekdayFull:[]};for(var n=0;n<12;n++){var t=new Date(2020,n,10),r=ci.shortMonth.format(t).replace(".","");r=r.charAt(0).toUpperCase()+r.slice(1,3);var i=ci.longMonth.format(t);i=i.charAt(0).toUpperCase()+i.slice(1),ui.month.push(r),ui.monthFull.push(i)}for(var e=0;e<7;e++){var o=new Date(2020,9,5+e),u=ci.shortWeekday.format(o);u=u.charAt(0).toUpperCase()+u.slice(1);var c=ci.longWeekday.format(o);c=c.charAt(0).toUpperCase()+c.slice(1),ui.weekday.push(u),ui.weekdayFull.push(c)}}()}}();var pi,mi=["bytes","kb","mb","gb","tb"];function wi(n,t,r){var i=t;if(t.recType!==E.ot)return i;var e=n.getBinary(32),o=n.getInt32(),u=function(n){if(0==n)return"0 Byte";var t=parseInt(Math.floor(Math.log(n)/Math.log(1024)),10);return Math.round(n/Math.pow(1024,t)*100)/100+" "+mi[t]}(o),c=n.getString16(),f=n.getString16(),a="",s=0,l=0,h=0,v=null;return n.isEnded()||(n.getUint16(),s=n.getInt8(),l=n.getInt32(),h=n.getInt32(),(v=n.getBlob(n.Size(),"image/png"))&&(a=URL.createObjectURL(v)),(s||l||h)&&(i.preview={type:s,width:l,height:h,src:a},v&&(i.preview.blob=v))),i.hash=e,i.fileSize=o,i.fileSizeString=u,i.mime=c,i.fileName=f,i.url="https://"+Lr+"/attach/0x"+r,i}function gi(n,r,i){var e=n.getReader32();if(e.Size()<=0)return r;switch(r.recType){case E.et:return function(n,r,i){var e=r;if(r.recType!==E.et)return e;var o=n.getBinary(n.getUint32()),u=n.getReader32(),c=Kr(V(o));if(e.text=c,!u)return e;for(e.tags={};!u.isEnded();)try{var f=u.getUint8();u.getUint16(),u.getUint16();var a=u.getReader16();if(0===a.Size())return e;if(f===T.dt){var s=a.getString16(),l=a.getString16(),v=a.getString16(),d=a.getString16(),b=void 0;0!==a.Size()&&(b={width:a.getInt16(),height:a.getInt16(),hash:a.getUint8(),src:"https://"+Lr+"/enrichment/0x"+i}),e.tags.enrich={url:s,title:l,siteName:v,description:d,preview:b}}else if(f===T.bt){var y=Q(a.getBinary(8)),p=a.getUint8(),m=Q(a.getBinary(8)),w=a.getString16(),g=Kr(a.getString16());e.tags.quote={citedId:y,citedType:p,citedUser:m,citedAuthor:w,citedText:g}}else if(f===T.ot){var _=a.getUint8();a.getUint8();for(var S=[];!a.isEnded();)S.push(Q(a.getBinary(8)));e.tags.files={type:_,linkedIds:S}}}catch(j){h.error(t.A,j)}return e}(e,r,i);case E.ct:return function(n,t){var r=t;if(t.recType!==E.ct)return r;var i=n.getUint8();switch(r.type=i,i){case A.yt:case A.wt:r.userId=Q(n.getBinary(8)),r.userName=n.getString16();break;case A.gt:case A._t:case A.St:r.changeValue=n.getUint8();break;case A.jt:case A.Ot:r.name=n.getString16()}return r}(e,r);case E.ot:return wi(e,r,i)}return r}function _i(n){try{var r=n.getReader32(),i=r.getBinary(8),e=r.getBinary(8),o=Zr(r.getString16()),u=r.getUint32(),c=r.getUint8(),f=r.getBinary(8),a=en(i);return c===E.st?null:gi(r,{messageId:Q(i),authorId:Q(e),authorName:o,sequence:u,recType:c,date:a,dateText:bi({date:a}),linkId:Q(f)},K(i))}catch(s){h.error(t.A,s)}return null}function Si(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;try{var i=n.getReader32(),e=undefined;r&&(i=(e=i).getReader32());var o=i.getBinary(8),u=i.getBinary(8),c=i.getBinary(8),f=Zr(i.getString16()),a=i.getUint8(),s=i.getUint8(),l=i.getUint8(),v=i.getUint8(),d=i.getBinary(8),b=i.getBinary(8),y=i.getString16(),p=Kr(i.getString16()),m=Zr(i.getString16()),w=Zr(i.getString16()),g=i.getInt32(),_=i.getInt32(),S=i.getInt32(),j=i.getInt32(),O=i.getInt32(),E=i.getUint8();i.getBinary(32);var T=i.getBinary(8),k=i.getBinary(8),A=i.getInt16(),R=0!==i.getInt8(),C=0;try{C=i.getInt8()}catch(B){h.error(t.A,B)}var x=en(d),I=Q(o),M=Q(c),P=Q(u),U="";E&&(U="https://"+Lr+"/avatar/0x"+K(o)+"?"+P);var N={chatId:I,changeId:P,authorId:M,authorName:f,type:a,isPublic:s,isLimited:l,isClosed:v,lastUpdate:Q(d),extraId:Q(b),name:y,description:p,links:m,inviteLink:w,language:g,countAdmins:_,countModers:S,countInvited:j,countReaders:O,countMembers:_+S+j+O,avatarIsPresent:E,avatar:U,lastSeen:Q(T),lastAccess:Q(k),perms:A,isMuted:R?1:0,isSubscribed:C,date:x,dateText:bi({date:x}),created:en(o)};if(r&&e&&!e.isEnded())try{var D=_i(e);D&&(N.topMessage=D)}catch(B){h.error(t.A,B)}return N}catch(B){return h.error(t.A,B),null}}function ji(n){var t=n;if(delete t.changeId,delete t.authorId,delete t.authorName,delete t.isPublic,delete t.isLimited,delete t.isClosed,delete t.lastUpdate,delete t.extraId,delete t.links,delete t.countAdmins,delete t.countModers,delete t.countInvited,delete t.countReaders,delete t.countMembers,delete t.lastSeen,delete t.lastAccess,delete t.perms,delete t.isMuted,delete t.isSubscribed,t.topMessage){var r=t.topMessage;delete r.authorId,delete r.sequence,delete r.linkId,r.recType===E.ot&&r.hash&&delete r.hash}return Object.assign(t,{timestamp:(new Date).getTime()})}function Oi(n){var t=n.getBinary(8),r=_i(n);return r?{chatId:Q(t),message:r}:{chatId:Q(t)}}function Ei(n,t){return{result:t,messageId:Q(n.getBinary(8))}}function Ti(n,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:N.Kt,e={chats:[],result:r};if(!n)return e;try{for(;!n.isEnded();){var o=Si(n,i);o&&e.chats.push(o)}}catch(u){h.error(t.A,u)}return e}!function(n){n[n.INT_8=0]="INT_8",n[n.UINT_8=1]="UINT_8",n[n.STRING_8=2]="STRING_8",n[n.INT_16=3]="INT_16",n[n.UINT_16=4]="UINT_16",n[n.STRING_16=5]="STRING_16",n[n.INT_32=6]="INT_32",n[n.UINT_32=7]="UINT_32",n[n.STRING_32=8]="STRING_32",n[n.INT_64=9]="INT_64",n[n.INT_64_HEX=10]="INT_64_HEX",n[n.INT_64_HEX_BE=11]="INT_64_HEX_BE",n[n.UINT_8_32=12]="UINT_8_32",n[n.dr=13]="ARRAY",n[n.br=14]="BLOCK"}(pi||(pi={}));var ki=[{name:"userId",type:pi.INT_64_HEX_BE},{name:"userName",type:pi.STRING_16},{name:"userLogin",type:pi.STRING_16},{name:"userAvatar",type:pi.STRING_16},{name:"isDeleted",type:pi.UINT_8}];function Ai(n){var t=n.getReader32();return{userId:Q(t.getBinary(8)),userName:Zr(t.getString16()),userLogin:t.getString16(),userAvatar:t.getString16(),isDeleted:t.getUint8()}}function Ri(n){for(var r=[];!n.isEnded();)try{r.push(Ai(n))}catch(i){h.error(t.A,i)}return r}function Ci(n,t){var r=this,i={};return t.forEach(function(t){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,r);var e="";switch(t.type){case pi.INT_8:e=n.getInt8();break;case pi.UINT_8:e=n.getUint8();break;case pi.STRING_8:e=n.getString8();break;case pi.INT_16:e=n.getInt16();break;case pi.UINT_16:e=n.getUint16();break;case pi.STRING_16:e=n.getString16();break;case pi.INT_32:e=n.getInt32();break;case pi.UINT_32:e=n.getUint32();break;case pi.STRING_32:e=n.getString32();break;case pi.INT_64:e=n.getBinary(8);break;case pi.INT_64_HEX_BE:e=Q(n.getBinary(8));break;case pi.INT_64_HEX:e=K(n.getBinary(8));break;case pi.UINT_8_32:e=n.getBinary(32);break;case pi.dr:if(!("struct"in t)||!t.struct)throw new Error("Struct is empty");for(e=[];!n.isEnded();)try{var o=n.getReader32();e.push(Ci(o,t.struct))}catch(u){console.warn(u)}break;case pi.br:if(!("struct"in t)||!t.struct)throw new Error("Struct is empty");e=Ci(n.getReader32(),t.struct);break;default:throw new Error("Unknown type")}i[t.name]=e}.bind(this)),i}var xi=[{name:"chatId",type:pi.INT_64_HEX_BE},{name:"userId",type:pi.INT_64_HEX_BE},{name:"isDelete",type:pi.UINT_8},{name:"perm",type:pi.UINT_16}];var Ii=[{name:"user",type:pi.br,struct:ki},{name:"perms",type:pi.UINT_16}],Mi=[{name:"chatId",type:pi.INT_64_HEX_BE},{name:"users",type:pi.dr,struct:Ii}];var Pi=[{name:"users",type:pi.dr,struct:ki}];var Ui=[{name:"chatId",type:pi.INT_64_HEX_BE},{name:"userId",type:pi.INT_64_HEX_BE},{name:"userName",type:pi.STRING_16},{name:"permission",type:pi.UINT_16},{name:"isDeleted",type:pi.UINT_8}];var Ni=[{name:"count",type:pi.UINT_32}];var Di=[{name:"chatId",type:pi.INT_64_HEX_BE}];function Bi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Li(n){var t=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:N.Zt,e=N.Zt;return new Promise(function(o,u){var c=this;if(Bi(this,t),n){var f=[{Uint8:i},{String16:n},{Uint8:e},{Uint32:r}];Wr.send(S.an,f).then(function(n){var t=n.reader,r=n.result;Bi(this,c);var i=Ti(t,r,e);o(i)}.bind(this))["catch"](function(n){Bi(this,c),u(n)}.bind(this))}else u(new Error("Keyword is empty"))}.bind(this))}function $i(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function zi(n,t){var r=this;return new Promise(function(i,e){var o=this;if($i(this,r),n)if(t){var u=J(n),c=J(t);Wr.send(S.mn,[u,c]).then(function(n){var t=n.result;$i(this,o),i(t)}.bind(this))["catch"](function(n){$i(this,o),e(n)}.bind(this))}else e(new Error("Last access is empty"));else e(new Error("Chat id is empty"))}.bind(this))}function Wi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Fi(n,r){var i=this,e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return new Promise(function(o,u){var c=this;if(Wi(this,i),0!==parseInt(n,16))if(n){var f=J(n),a=r?J(r):y,s=[f,{Uint8:e},a,{Uint32:4096}];Wr.send(S.F,s).then(function(n){var r=n.result,i=n.reader;Wi(this,c);var e=function(n,r){for(var i=n.getUint8(),e=n.getBinary(8),o=n.getBinary(8),u=n.getInt16(),c={result:r,isAscending:i,chatId:Q(e),lastAccess:Q(o),perms:u,messages:[]};!n.isEnded();)try{var f=_i(n);if(!f)continue;c.messages.push(f)}catch(a){h.error(t.A,a)}return c}(i,r);o(e)}.bind(this))["catch"](function(n){Wi(this,c),u(n)}.bind(this))}else u(new Error("Chat id is empty"));else u(new Error("Chat id is zero"))}.bind(this))}function Gi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function qi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Hi(n){if(n===undefined)return 0;if("string"==typeof n)return n.length;if(Array.isArray(n)){for(var t=0,r=0;r<n.length;++r)t+=Hi(n[r]);return t}return"String"in n&&n.String!==undefined?tn(n.String).length:"String8"in n&&n.String8!==undefined?tn(n.String8).length+1:"String16"in n&&n.String16!==undefined?tn(n.String16).length+2:"String32"in n&&n.String32!==undefined?tn(n.String32).length+4:"Uint8"in n||"Int8"in n?1:"Uint16"in n||"Int16"in n?2:"Uint32"in n||"Int32"in n?4:0}function Yi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Vi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Xi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Qi(n,t,r,i){var e,o,u,c=this;if(n<t.byteLength){var f=Math.min(131072,t.byteLength-n);if(function(n,t){var r=this;return new Promise(function(i,e){var o=this;Vi(this,r),Wr.send(S.jn,[{Uint32:t}],n).then(function(n){var t=n.reader,r=n.result,e=n.id;Vi(this,o);var u=function(n,t){return{result:t,sizeUploaded:n.getInt32()}}(t,r);i(Object.assign(u,{id:e}))}.bind(this))["catch"](function(n){Vi(this,o),e(n)}.bind(this))}.bind(this))}(f,n).then(function(e){var o=e.result,u=e.id;Xi(this,c),o!==j.Qn?o===j.Xn&&Wr.setRequest(u,{resolve:r,reject:i}):Qi(n,t,r,i)}.bind(this))["catch"](function(n){Xi(this,c),i(n)}.bind(this)),f>1e3)for(var a=0,s=1;s<=10;s++){var l=Math.floor(s*f/10);e=n+a,o=n+l,u=void 0,u=t.slice(e,o),Wr.directSend(u),a=l}else{var h=t.slice(n);Wr.directSend(h)}n+=f}else i(new Error("Offset => byteLength"))}function Ji(n){var r=this;return new Promise(function(i,e){if(Xi(this,r),n){var o=new FileReader;o.onloadend=function(){if(o.readyState!==FileReader.DONE)return h.error(t.O,"read file error","Prepare file"),void e(new Error("read file error"));Qi(0,o.result,i,e)},o.readAsArrayBuffer(n)}else e(new Error("File is undefined"))}.bind(this))}function Ki(n){return function(n){if(Array.isArray(n))return Zi(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"==typeof n)return Zi(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zi(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zi(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function ne(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var te=window.Uint8Array?new Uint8Array([139,22,96,224,115,20,103,83,95,225,254,248,9,43,105,26,39,200,253,236,146,105,43,153,4,74,142,140,44,204,239,233,137,90,166,229,193,243,253,164,31,83,99,67,154,127,243,184,19,54,180,200,198,59,213,81,215,22,74,96,224,79,170,166]):undefined;function re(n){var r=this;return new Promise(function(i,e){if(ne(this,r),n)if(te){var o=new FileReader,u=n.slice(0,n.size);o.onloadend=function(){var r=this;if(o.readyState!==FileReader.DONE)return h.error(t.O,"read file error","Prepare file"),void e(new Error("read file error"));var u=o.result,c=new Uint8Array(u.byteLength+te.byteLength);if(c.set(new Uint8Array(u)),c.set(te,u.byteLength),window.crypto)window.crypto.subtle.digest("SHA-256",u).then(function(e){var o=this;ne(this,r);var u=String.fromCharCode.apply(null,Ki(new Uint8Array(e)));window.crypto.subtle.digest("SHA-256",c).then(function(t){ne(this,o);var r=String.fromCharCode.apply(null,Ki(new Uint8Array(t)));i({cipherKey:r,hash:u,fileSize:n.size,mime:n.type,fileName:n.name,file:n})}.bind(this))["catch"](function(n){ne(this,o),h.error(t.O,n)}.bind(this))}.bind(this))["catch"](function(n){ne(this,r),h.error(t.O,n)}.bind(this));else if(window.msCrypto){var f=window.msCrypto.subtle.digest("SHA-256",u);f.oncomplete=function(){var t=String.fromCharCode.apply(null,Ki(new Uint8Array(f.result))),r=window.msCrypto.subtle.digest("SHA-256",c);r.oncomplete=function(){var e=String.fromCharCode.apply(null,Ki(new Uint8Array(r.result)));i({cipherKey:e,hash:t,fileSize:n.size,mime:n.type,fileName:n.name,file:n})}}}else e(new Error("The browser doesn't support crypto"))},o.readAsArrayBuffer(u)}else e(new Error("The browser doesn't support Uint8Array"));else e(new Error("File is undefined"))}.bind(this))}function ie(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ee(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function oe(n,t){var r=this,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:100,o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;return new Promise(function(u,c){var f=this;ee(this,r);var a=t?J(t):y,s=[{Uint8:i},a,{Uint8:o},{Uint32:e},{Uint8:n}];Wr.send(S.xn,s).then(function(n){var t=n.result,r=n.reader;ee(this,f);var i=Ti(r,t);u(i)}.bind(this))["catch"](function(n){ee(this,f),c(n)}.bind(this))}.bind(this))}function ue(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ce(n){var t=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:100,e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;return new Promise(function(o,u){var c=this;ue(this,t);var f=n?J(n):y,a=[{Uint8:r},f,{Uint8:e},{Uint32:i}];Wr.send(S.W,a).then(function(n){var t=n.result,r=n.reader;ue(this,c);var i=Ti(r,t);o(i)}.bind(this))["catch"](function(n){ue(this,c),u(n)}.bind(this))}.bind(this))}function fe(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ae(n){var t=this;return new Promise(function(r,i){var e=this;if(fe(this,t),n&&n.length){var o=[];n.forEach(function(n){fe(this,e),o.push(J(n))}.bind(this)),Wr.send(S.tn,o).then(function(n){var t=n.reader;fe(this,e);var i=Ri(t);r(i)}.bind(this))["catch"](function(n){fe(this,e),i(n)}.bind(this))}else i(new Error("Users id is empty"))}.bind(this))}function se(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function le(n){var t=this;return new Promise(function(r,i){var e=this;if(se(this,t),n){var o=[],u=n.isPublic?n.inviteLink:"";if(n.type===O.tt)o=[{Uint8:O.tt},{Uint8:n.isPublic},{Uint8:n.isLimited?1:0},{String16:n.name},{String16:n.description},{String16:n.links},{String16:u},{Uint32:n.language}];else if(n.type===O.rt)o=[{Uint8:O.rt},{Uint8:n.isPublic},{String16:n.name},{String16:n.description},{String16:n.links},{String16:u},{Uint32:n.language}];else{var c=n.userId?J(n.userId):y;o=[{Uint8:O.nt},c]}Wr.send(S.B,o).then(function(n){var t=n.reader;se(this,e),r(function(n){return Ci(n,Di).chatId}(t))}.bind(this))["catch"](function(n){se(this,e),i(n)}.bind(this))}else i(new Error("Chat object is empty"))}.bind(this))}function he(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ve(n,t){var r=this;return new Promise(function(i,e){var o=this;if(he(this,r),t)if(0!==parseInt(t,16))if(!(u=n)||!u.size||["image/gif","image/jpeg","image/png"].indexOf(u.type)<0)e(new Error("File is not valid"));else{var u,c=J(t);re(n).then(function(n){var t=this;he(this,o);var r=n.cipherKey,u=n.hash,f=n.fileSize,a=n.mime,s=n.fileName,l=n.file,h=[c,{Uint8:1},r,u,{Uint32:f},{String16:a},{String16:s}];Wr.send(S.dn,h).then(function(n){var r=this,o=n.result;he(this,t),o!==j.Qn?i():Ji(l).then(function(){he(this,r),i()}.bind(this))["catch"](function(n){he(this,r),e(n)}.bind(this))}.bind(this))["catch"](function(n){he(this,t),e(n)}.bind(this))}.bind(this))["catch"](function(n){he(this,o),e(n)}.bind(this))}else e(new Error("Chat id is zero"));else e(new Error("Chat id is empty"))}.bind(this))}function de(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function be(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ye(n){var t=this;return new Promise(function(r,i){var e=this;if(be(this,t),n)if(0!==parseInt(n.chatId,16)){var o=J(n.chatId),u=n.isPublic?n.inviteLink:"",c=[o,{Uint8:n.isPublic},{Uint8:n.isLimited?1:0},{Uint8:n.isClosed?1:0},{String16:n.name},{String16:n.description},{String16:n.links},{String16:u},{Uint32:n.language}];Wr.send(S.D,c).then(function(n){var t=n.result;be(this,e),r(t)}.bind(this))["catch"](function(n){be(this,e),i(n)}.bind(this))}else i(new Error("Chat id is zero"));else i(new Error("Chat object is empty"))}.bind(this))}function pe(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function me(n,t){var r=this,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:100;return new Promise(function(e,o){var u=this;if(pe(this,r),n)if(0!==parseInt(n,16)){var c=[J(n),t=t?J(t):y,{Uint32:i}];Wr.send(S.rn,c).then(function(n){var t=n.result,r=n.reader;pe(this,u);var i=function(n){return Ci(n,Mi)}(r);e({result:t,data:i})}.bind(this))["catch"](function(n){pe(this,u),o(n)}.bind(this))}else o(new Error("Chat id is zero"));else o(new Error("Chat id is empty"))}.bind(this))}function we(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ge(n,t){var r=this,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,e=arguments.length>3&&arguments[3]!==undefined&&arguments[3];return new Promise(function(o,u){var c=this;if(we(this,r),0!==parseInt(n,16))if(0!==parseInt(t,16))if(n)if(t){var f=[J(n),J(t),{Uint8:e?1:0},{Uint16:i}];Wr.send(S.N,f).then(function(n){var t=n.reader;we(this,c),o(function(n){return Ci(n,xi)}(t))}.bind(this))["catch"](function(n){we(this,c),u(n)}.bind(this))}else u(new Error("User id is empty"));else u(new Error("Chat id is empty"));else u(new Error("User id is zero"));else u(new Error("Chat id is zero"))}.bind(this))}function _e(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Se(){var n=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:B.ur,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;return new Promise(function(e,o){var u=this;_e(this,n);var c=y;i&&(c=J(i));var f=[{Uint8:t},c,{Uint32:r}];Wr.send(S.sn,f).then(function(n){var t=n.reader;_e(this,u),e(function(n){return Ci(n,Pi).users}(t))}.bind(this))["catch"](function(n){_e(this,u),o(n)}.bind(this))}.bind(this))}function je(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Oe(n){var t=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;return new Promise(function(i,e){var o=this;if(je(this,t),n){var u=[{String16:n},{Uint32:r}];Wr.send(S.nn,u).then(function(n){var t=n.reader;je(this,o);var r=Ri(t);i(r)}.bind(this))["catch"](function(n){je(this,o),e(n)}.bind(this))}else e(new Error("Keyword is empty"))}.bind(this))}function Ee(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Te(){var n=this,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:U.Xt,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:v.NONE,e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1,o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:10,u=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;return new Promise(function(c,f){var a=this;Ee(this,n);var s=[{Uint8:u},{Uint8:r},{Uint32:i},{Uint8:e},{Uint32:o}];Wr.send(S.On,s).then(function(n){var r=n.reader;Ee(this,a);var i=function(n,r){var i=[];if(!n)return i;try{for(;!n.isEnded();){var e=Si(n,r);e&&i.push(ji(e))}}catch(o){h.error(t.A,o)}return i}(r,e);c(i)}.bind(this))["catch"](function(n){Ee(this,a),f(n)}.bind(this))}.bind(this))}function ke(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ae(n){var t=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return new Promise(function(i,e){var o=this;ke(this,t),0!==parseInt(n,16)?Wr.send(S.gn,[J(n),{Uint8:r}]).then(function(n){var t=n.reader;ke(this,o);var u=Si(t,r);u?i(u):e(new Error("Chat parse error"))}.bind(this))["catch"](function(n){ke(this,o),e(n)}.bind(this)):e(new Error("Chat id is zero"))}.bind(this))}function Re(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ce(){var n=this;return new Promise(function(t,r){var i=this;Re(this,n),Wr.send(S.In,null).then(function(n){var r=n.reader;Re(this,i);var e=function(n){return Ci(n,Ni).count}(r);t(e)}.bind(this))["catch"](function(n){Re(this,i),r(n)}.bind(this))}.bind(this))}function xe(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ie(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Me(n){var t=this;return new Promise(function(r,i){var e=this;Ie(this,t);var o=[{Uint8:m},{Uint8:w},{Uint32:g},J(n)];Wr.send(S.G,o).then(function(n){var t=n.reader;Ie(this,e);var i=function(n){var t=n.getBinary(8),r=n.getString16(),i=n.getInt32();return{userId:Q(t),userName:r,userFlags:i,yr:!!(i&R.It),pr:!!(i&R.At)}}(t);r(i)}.bind(this))["catch"](function(n){Ie(this,e),i(n)}.bind(this))}.bind(this))}for(var Pe=navigator.userAgent,Ue=navigator.appVersion,Ne=Pe.match(/Android/i),De=Pe.match(/BlackBerry/i),Be=Pe.match(/iPhone|iPad|iPod/i),Le=Pe.match(/Opera Mini/i),$e=Pe.match(/IEMobile/i),ze=(Pe.indexOf("MSIE"),Pe.indexOf("Gecko/"),!!document.documentMode),We=Ne||De||Be||Le||$e,Fe="",Ge=[{name:"Windows 10",regex:/(Windows 10.0|Windows NT 10.0)/},{name:"Windows 8.1",regex:/(Windows 8.1|Windows NT 6.3)/},{name:"Windows 8",regex:/(Windows 8|Windows NT 6.2)/},{name:"Windows 7",regex:/(Windows 7|Windows NT 6.1)/},{name:"Windows Vista",regex:/Windows NT 6.0/},{name:"Windows Server 2003",regex:/Windows NT 5.2/},{name:"Windows XP",regex:/(Windows NT 5.1|Windows XP)/},{name:"Windows 2000",regex:/(Windows NT 5.0|Windows 2000)/},{name:"Windows ME",regex:/(Win 9x 4.90|Windows ME)/},{name:"Windows 98",regex:/(Windows 98|Win98)/},{name:"Windows 95",regex:/(Windows 95|Win95|Windows_95)/},{name:"Windows NT 4.0",regex:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{name:"Windows CE",regex:/Windows CE/},{name:"Windows 3.11",regex:/Win16/},{name:"Android",regex:/Android/},{name:"Open BSD",regex:/OpenBSD/},{name:"Sun OS",regex:/SunOS/},{name:"Chrome OS",regex:/CrOS/},{name:"Linux",regex:/(Linux|X11(?!.*CrOS))/},{name:"iOS",regex:/(iPhone|iPad|iPod)/},{name:"Mac OS X",regex:/Mac OS X/},{name:"Mac OS",regex:/(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{name:"QNX",regex:/QNX/},{name:"UNIX",regex:/UNIX/},{name:"BeOS",regex:/BeOS/},{name:"OS/2",regex:/OS\/2/},{name:"Search Bot",regex:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],qe=0,He=Ge.length;qe<He;qe++){var Ye=Ge[qe];if(Ye.regex.test(Pe)){Fe=Ye.name;break}}var Ve="",Xe=[];switch(/Windows/.test(Fe)&&((Xe=/Windows (.*)/.exec(Fe))&&Xe.length&&Xe.length>1&&(Ve=Xe[1]),Fe="Windows"),Fe){case"Mac OS":case"Mac OS X":case"Android":(Xe=/(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([._\d]+)/.exec(Pe))&&Xe.length&&Xe.length>1&&(Ve=Xe[1].replace(/_/g,"."));break;case"iOS":(Xe=/OS (\d+)_(\d+)_?(\d+)?/.exec(Ue))&&Xe.length&&Xe.length>2&&(Ve="".concat(Xe[1],".'").concat(Xe[2],".").concat(Xe.length>3?Xe[3]:0))}function Qe(){var n=0,t=0;if(Ve){var r=Ve.split(".");n=parseInt(r[0],10),r.length>1&&(t=parseInt(r[1],10))}var i=100*n+t,e=J(Mr),o=function(n){if(n.length%2)return"";for(var t="",r=n.length-2;r>=0;r-=2){var i=Y(n.charCodeAt(r+0)),e=Y(n.charCodeAt(r+1));t+=String.fromCharCode(16*i+e)}return t}(zr),u=[{Uint8:m},{Uint8:w},{Uint32:g},{Uint32:0},e,{Uint32:i},{Uint32:0},{Uint8:2},o,{Uint8:0},{Uint32:0}];Wr.send(S.P,u,undefined)}function Je(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ke(n){var t=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:N.Kt;return new Promise(function(i,e){var o=this;Je(this,t);var u=J(n);Wr.send(S.wn,[u,{Uint8:r}]).then(function(n){var t=n.result;Je(this,o),i(t)}.bind(this))["catch"](function(n){Je(this,o),e(n)}.bind(this))}.bind(this))}function Ze(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var no=50,to=20;function ro(){var n=this,r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:O.tt,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined,e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:to;return new Promise(function(u,c){Ze(this,n);var f=1,a=[];o<=0?c(new Error("Count is zero")):function s(){var n=this;f>no&&u(a),oe(r,i,e,o).then(function(t){Ze(this,n),a=a.concat(t.chats),t.result===j.Qn&&t.chats.length?(f++,i=e===N.Zt?t.chats[t.chats.length-1].lastUpdate:t.chats[0].lastUpdate,s()):u(a)}.bind(this))["catch"](function(r){Ze(this,n),h.error(t.O,r),u(a)}.bind(this))}()}.bind(this))}var io=window.globalStorage();function eo(n){var t=this;return new Promise(function(r,i){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,t),io&&io.supported?io.getItem(n,(function(t,i){r(t===n?i:"")})):i(new Error("Local storage is not supported"))}.bind(this))}function oo(n,t){io&&io.supported&&io.setItem(n,t)}function uo(n){io&&io.supported&&io.removeItem(n)}var co,fo,ao,so=lr([]),lo=lr([]);function ho(n){var t,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;return function(){for(var i=this,e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];clearTimeout(t),t=setTimeout(function(){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,i),n.apply(void 0,o)}.bind(this),r)}}var vo=undefined;function bo(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var yo=lr(0),po=99,mo=!1,wo=ho((function(){var n=this;if(!co||co===_)return;Ce().then(function(t){bo(this,n),yo.set(t)}.bind(this))["catch"](function(r){bo(this,n),h.error(t.O,r,"Unread")}.bind(this))}),500);function go(n){return rn(n.lastUpdate||p,n.lastAccess||p)>0}function _o(n,t){if(n){var r=n.querySelector(".notify-icon_messages");if(r){var i=r.querySelector(".notify-icon_count");i&&r.removeChild(i),t>0&&(r.innerHTML='<i class="notify-icon_count">'.concat(t,"</i>"))}}}function So(){var n=this;mo||(mo=!0,yo.subscribe(function(t){bo(this,n),function(n){oo("mql5_chats_unread","".concat(n))}(t=Math.min(t,po))}.bind(this)))}function jo(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Oo(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oo(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oo(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Eo(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}yo.subscribe(function(n){bo(this,vo),function(n){var t=document.getElementById("notifyMessages");t&&_o(t,n);var r=document.getElementById("notifyMessagesMobile");r&&_o(r,n);!function(n){var t=document.getElementById("counterMessagesMenu");if(!t)return;t.innerHTML=n>0?"<i>".concat(n,"</i>"):""}(n)}(n=Math.min(n,po))}.bind(undefined));var To=lr([]),ko=lr([]),Ao=lr([]),Ro=lr([]),Co=!0,xo=!0,Io=!0,Mo=!0,Po=!1,Uo=!1,No=lr([]),Do=lr(0);function Bo(n,t){var r=n.topMessage?n.topMessage.messageId:n.lastUpdate;return rn(t.topMessage?t.topMessage.messageId:t.lastUpdate,r)}function Lo(n){var t=this;return n.filter(function(n){return Eo(this,t),n.authorId===co}.bind(this))}function $o(n){var t=To;switch(n){case O.Zn:t=To;break;case O.nt:t=ko;break;case O.tt:t=Ao;break;case O.rt:t=Ro}return t}function zo(n,t){switch(n){case O.nt:xo=t;break;case O.tt:Io=t;break;case O.rt:Mo=t;break;default:Co=t}}function Wo(n){var t=this,r=p,i=In(n);return i.length?(i.forEach(function(n){Eo(this,t),rn(n.lastUpdate,r)>0&&(r=n.lastUpdate)}.bind(this)),r):r}function Fo(n){var t=this;To.update(function(r){var i=this;return Eo(this,t),r.filter(function(t){return Eo(this,i),t.chatId!==n}.bind(this))}.bind(this)),ko.update(function(r){var i=this;return Eo(this,t),r.filter(function(t){return Eo(this,i),t.chatId!==n}.bind(this))}.bind(this)),Ao.update(function(r){var i=this;return Eo(this,t),r.filter(function(t){return Eo(this,i),t.chatId!==n}.bind(this))}.bind(this)),Ro.update(function(r){var i=this;return Eo(this,t),r.filter(function(t){return Eo(this,i),t.chatId!==n}.bind(this))}.bind(this))}function Go(n,t){n=n.sort(Bo),$o(t).set(n)}function qo(){var n=this,r=[];r.push(ce(undefined,N.Zt,L).then(function(t){Eo(this,n),Yo(t.chats,O.Zn)}.bind(this))["catch"](function(r){Eo(this,n),h.error(t.k,r)}.bind(this))),r.push(oe(O.nt,undefined,N.Zt,L).then(function(t){Eo(this,n),Yo(t.chats,O.nt)}.bind(this))["catch"](function(r){Eo(this,n),h.error(t.k,r)}.bind(this))),r.push(ro(O.tt).then(function(t){Eo(this,n),Yo(t,O.tt)}.bind(this))),r.push(ro(O.rt).then(function(t){Eo(this,n),Yo(t,O.rt)}.bind(this))),Promise.allSettled(r).then(function(){Eo(this,n),Uo=!0}.bind(this))}function Ho(n){var r=this,i=function(n){var t=!1;switch(n){case O.nt:t=xo;break;case O.tt:t=Io;break;case O.rt:t=Mo;break;default:t=Co}return t}(n);if(i&&!Po){Po=!0;var e=$o(n),o=In(e),u=undefined;switch(o.length&&(u=function(n){var t=this,r=p,i=In(n);return i.length?(i.forEach(function(n){Eo(this,t),r===p&&(r=n.lastUpdate),rn(r,n.lastUpdate)>0&&(r=n.lastUpdate)}.bind(this)),r):r}(e)),n){case O.nt:case O.tt:case O.rt:oe(n,u,N.Zt,L).then(function(t){Eo(this,r),t.chats.length&&t.result===j.Qn||zo(n,!1),Yo(t.chats,n),Po=!1}.bind(this))["catch"](function(n){Eo(this,r),h.error(t.k,n),Po=!1}.bind(this));break;case O.Zn:ce(u,N.Zt,L).then(function(t){Eo(this,r),t.chats.length&&t.result===j.Qn||zo(n,!1),Yo(t.chats,n),Po=!1}.bind(this))["catch"](function(n){Eo(this,r),h.error(t.k,n),Po=!1}.bind(this))}}}function Yo(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:O.Zn;n&&n.length&&function(n,t){var r=this;t.update(function(t){var i=this;return Eo(this,r),t.length?(n.forEach(function(n){Eo(this,i);for(var r=!1,e=0,o=t.length;e<o;e++)if(t[e].chatId===n.chatId){n.isSubscribed?t.splice(e,1,n):t.splice(e,1),r=!0;break}!r&&n.isSubscribed&&t.push(n)}.bind(this)),t.sort(Bo),t):(n.sort(Bo),n)}.bind(this))}(n,$o(t))}function Vo(n,t){var r=this;t.update(function(t){if(Eo(this,r),!t.length)return n.isSubscribed&&t.push(n),t;for(var i=!1,e=0,o=t.length;e<o;e++){if(t[e].chatId===n.chatId){n.isSubscribed?t.splice(e,1,n):t.splice(e,1),i=!0;break}}return i&&(t=t.sort(Bo)),!i&&n.isSubscribed&&(rn(n.lastUpdate,t[0].lastUpdate)?t.unshift(n):t.push(n)),t}.bind(this))}function Xo(n){Vo(n,To),Vo(n,$o(n.type))}function Qo(n,t,r){var i=this;r.update(function(r){Eo(this,i);for(var e=0,o=r.length;e<o;e++){var u=r[e];if(u.chatId===n){u.lastSeen=t;break}}return r}.bind(this))}function Jo(n,t,r){var i=this;r.update(function(r){Eo(this,i);for(var e=0,o=r.length;e<o;e++){var u=r[e];if(u.chatId===n){u.lastAccess!==t&&(wo(),u.lastAccess=t);break}}return r}.bind(this))}function Ko(n,t){Jo(n.chatId,t,To),Jo(n.chatId,t,$o(n.type))}function Zo(n,t,r){var i=this;r.update(function(r){Eo(this,i);for(var e=0,o=r.length;e<o;e++){var u=r[e];if(u.chatId===n){u.isMuted=t;break}}return r}.bind(this))}function nu(n,t){Zo(n.chatId,t,To),Zo(n.chatId,t,$o(n.type))}function tu(){var n=this;Do.subscribe(function(t){Eo(this,n),oo("mql5_chats_type","".concat(t))}.bind(this)),Ao.subscribe(function(t){var r;Eo(this,n),r=Lo(t),so.set(r)}.bind(this)),Ro.subscribe(function(t){var r;Eo(this,n),r=Lo(t),lo.set(r)}.bind(this));var t=hr([To,ko,Ao,Ro],function(t){Eo(this,n);var r=[],i=jo(t,4),e=i[0],o=i[1],u=i[2],c=i[3];return e.length&&r.push(O.Zn),o.length&&r.push(O.nt),u.length&&r.push(O.tt),c.length&&r.push(O.rt),!~r.indexOf(In(Do))&&Uo&&Do.set(O.Zn),wo(),r}.bind(this));t.subscribe(function(t){Eo(this,n),No.set(t)}.bind(this))}var ru=undefined;var iu=lr(Fr);function eu(){return In(iu)}iu.subscribe(function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,ru),!!n&&n.type===O.nt}.bind(undefined));var ou=/^\/[a-z]{2}\/.*/;function uu(n){if(n){ou.test(n)&&(n=n.substring(3));var t=document.getElementById("langmenu");if(t){var r=t.querySelectorAll("a");if(r.length)for(var i=0,e=r.length;i<e;i++){var o=r[i].getAttribute("href");if(o){var u=o.substring(0,3);r[i].setAttribute("href",u+n)}}}}}function cu(n,t){var r="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=function(n,t){if(!n)return;if("string"==typeof n)return fu(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fu(n,t)}(n))||t&&n&&"number"==typeof n.length){r&&(n=r);var i=0,e=function(){};return{s:e,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){r=r.call(n)},n:function(){var n=r.next();return u=n.done,n},e:function(n){c=!0,o=n},f:function(){try{u||null==r["return"]||r["return"]()}finally{if(c)throw o}}}}function fu(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}var au,su=/^{([a-z]*)}$/i,lu=new Set,hu=window.location.pathname,vu=!1;function du(n){return n.replace(/(^\/+|\/+$)/g,"").split("/")}function bu(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:t.M;Xr&&h.debug(r,n)}function yu(){var n,t=window.location.pathname,r=undefined,i=du(t),e={},o=cu(lu);try{for(o.s();!(n=o.n()).done;){var u=n.value,c=du(u.path),f=Math.max(i.length,c.length);e={};for(var a=f-1;a>=0;a--){var s=i[a],l=c[a];if(s===undefined||l===undefined)break;if(su.test(l)){var h=su.exec(l);h&&(e[h[1]]=s),0===a&&(r=u)}else{if(s!==l)break;0===a&&(r=u)}}if(r)break}}catch(v){o.e(v)}finally{o.f()}r&&r.callback(e)}function pu(n){var r=arguments.length>1&&arguments[1]!==undefined&&arguments[1],i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(vu){var e=function(n){var t=window.location,r="";return n===t.pathname?r:r=t.origin?"".concat(t.origin).concat(n):"".concat(t.protocol,"//").concat(t.hostname).concat(n)}(n||hu);if(uu(n),e){var o=Object.assign(Object.assign({},i),{key:"".concat(Date.now())});try{if(r)return bu("Replace state: ".concat(n)),void window.history.replaceState(o,document.title,e);bu("Push state: ".concat(n)),window.history.pushState(o,document.title,e)}catch(u){try{window.location[r?"replace":"assign"](e)}catch(c){h.error(t.M,c)}h.error(t.M,u)}}}}function mu(n){lu.add(n)}function wu(){vu&&pu(hu)}var gu=lr();function _u(n){var t=eu();!t||t.chatId!==n&&t.inviteLink!==n?pu(Jr(t),!0):Su(iu)}function Su(n){var t=this,r=In(n);if(!ao&&!(r.perms&C.Nt)||r.type===O.nt)return pu(Jr(r),!0),void ju();gu.set(Ou(In(n))),Ar.setLayout({edit:!0}),pu(Jr(r)+"/edit"),au=n.subscribe(function(n){if(function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,t),!n)return au=undefined,void ju();var r=In(gu);if(r){var i=Ou(n);i.avatarError=r.avatarError,i.errorDescription=r.errorDescription,i.errorCommon=r.errorCommon,i.errorInviteLink=r.errorInviteLink,i.errorName=r.errorName,i.avatarIsPresent=r.avatarIsPresent,i.avatarToUpload=r.avatarToUpload,gu.set(i)}}.bind(this))}function ju(){var n=eu();n&&Ar.window&&Ar.edit&&pu(Jr(n)),Ar.setLayout({edit:!1}),au&&au()}function Ou(n){return{chatId:n.chatId,type:n.type,isPublic:n.isPublic,isLimited:!!n.isLimited,isClosed:!!n.isClosed,name:n.name,description:n.description,links:n.links,inviteLink:n.inviteLink,language:n.language,avatar:n.avatar,avatarToUpload:undefined,avatarIsPresent:!!n.avatarIsPresent,authorId:n.authorId,countMembers:n.countMembers,isSubscribed:n.isSubscribed,perms:n.perms,errorInviteLink:"",errorCommon:"",errorName:!1,errorDescription:!1,avatarError:undefined,created:n.created}}function Eu(n){var t=eu();t&&n.chatId===t.chatId&&(iu.set(n),pu(Jr(n),!0))}function Tu(){if(In(Ar).window){var n=eu();n&&!n.isSubscribed&&Fo(n.chatId),Ar.setLayout({window:!1}),iu.set(Fr),wu()}}function ku(){Tu(),Cr.set(i("chatNotFound","javascript:void(false);","window.closeAllPopupsChat();","button button_small button_blue"))}function Au(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ru(n){var r=this,e=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1],o=arguments.length>2?arguments[2]:undefined,u=arguments.length>3?arguments[3]:undefined;Tu(),ae([n]).then(function(n){if(Au(this,r),n&&n.length){var t=n[0],o=Zr(t.userName||t.userLogin||""),c='<a href="/'.concat(Gr,"/users/").concat(t.userLogin||"",'" target="_blank">').concat(o,"</a>"),f='<div class="chat-error-window__text">'.concat(i(u,c),"</div>");e&&(f+='<a href="/'.concat(Gr,"/users/").concat(t.userLogin||"",'" target="_blank" class="button button_small button_blue">\n                ').concat(i("friendAddToChat"),"\n                </a>")),Cr.set(f)}}.bind(this))["catch"](function(n){Au(this,r);var e='<div class="chat-error-window__text">'.concat(i(o),"</div>");Cr.set(e),h.error(t.O,n)}.bind(this))}var Cu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function xu(n){var t,r,i,e,o,u,c,f="",a=0;for(n=function(n){n=n.replace(/\r\n/g,"\n");for(var t="",r=0;r<n.length;r++){var i=n.charCodeAt(r);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}(n);a<n.length;)e=(t=n.charCodeAt(a++))>>2,o=(3&t)<<4|(r=n.charCodeAt(a++))>>4,u=(15&r)<<2|(i=n.charCodeAt(a++))>>6,c=63&i,isNaN(r)?u=c=64:isNaN(i)&&(c=64),f=f+Cu.charAt(e)+Cu.charAt(o)+Cu.charAt(u)+Cu.charAt(c);return f}function Iu(n){if(!n)return"";var t,r,i,e,o,u,c="",f=0;for(n=n.replace(/[^A-Za-z0-9+/=]/g,"");f<n.length;)t=Cu.indexOf(n.charAt(f++))<<2|(e=Cu.indexOf(n.charAt(f++)))>>4,r=(15&e)<<4|(o=Cu.indexOf(n.charAt(f++)))>>2,i=(3&o)<<6|(u=Cu.indexOf(n.charAt(f++))),c+=String.fromCharCode(t),64!==o&&(c+=String.fromCharCode(r)),64!==u&&(c+=String.fromCharCode(i));return c=function(n){var t="",r=0,i=0,e=0,o=0;for(;r<n.length;)(i=n.charCodeAt(r))<128?(t+=String.fromCharCode(i),r++):i>191&&i<224?(e=n.charCodeAt(r+1),t+=String.fromCharCode((31&i)<<6|63&e),r+=2):(e=n.charCodeAt(r+1),o=n.charCodeAt(r+2),t+=String.fromCharCode((15&i)<<12|(63&e)<<6|63&o),r+=3);return t}(c),c}var Mu,Pu=100,Uu=36e5,Nu={};function Du(n){var t=this,r=(new Date).getTime();n.forEach(function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,t),n.timestamp&&r-n.timestamp<Uu&&(Nu[n.userId]||(Nu[n.userId]=lr(n)))}.bind(this))}function Bu(n){return Bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Bu(n)}function Lu(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var $u=0;function zu(n){var t=this,r=/msg[0-9].mql5.(dev|com)/;return n.forEach(function(n){Lu(this,t);var i=n.avatar;i&&(n.avatar=i.replace(r,Lr)),n.date=new Date(n.date),n.topMessage&&(n.topMessage.date=new Date(n.topMessage.date))}.bind(this)),n}function Wu(){oo("mql5_chats_verify","".concat((new Date).getTime()))}function Fu(){uo("mql5_chats_tok"),uo("mql5_chats"),uo("mql5_chats_verify"),uo("mql5_chats_connect"),uo("mql5_chats_unread"),oo("mql5_chats_tok","".concat(Mu||"",";").concat($u)),To.set([]),ko.set([]),Ao.set([]),Ro.set([]),qo(),Wu()}function Gu(n){var r=this;return new Promise(function(i){if(Lu(this,r),!n||!n.length)return qo(),Wu(),void i();var e=undefined;try{(n=Iu(n))&&(e=JSON.parse(n))}catch(o){h.error(t.k,o)}if(!e||"object"!==Bu(e))return qo(),Wu(),void i();e.group=e.group||[],e.channel=e.channel||[],e.users=e.users||[],Array.isArray(e.group)||(e.group=[]),Array.isArray(e.channel)||(e.channel=[]),h.info(t.k,"received group: ".concat(e.group.length)),h.info(t.k,"received channel: ".concat(e.channel.length)),e.group=zu(e.group),e.channel=zu(e.channel),e.users=function(n){var t=this,r=/'msg[0-9].mql5.(dev|com)'/;return n.forEach(function(n){Lu(this,t);var i=n.userAvatar;i&&(n.userAvatar=i.replace(r,Lr))}.bind(this)),n}(e.users),Ao.set(e.group),Ro.set(e.channel),Du(e.users),function(){var n=this,r=[];r.push(ce(undefined,N.Zt,L).then(function(t){Eo(this,n),Yo(t.chats,O.Zn)}.bind(this))["catch"](function(r){Eo(this,n),h.error(t.k,r)}.bind(this))),r.push(oe(O.nt,undefined,N.Zt,L).then(function(t){Eo(this,n),Yo(t.chats,O.nt)}.bind(this))["catch"](function(r){Eo(this,n),h.error(t.k,r)}.bind(this))),r.push(oe(O.tt,Wo(Ao),N.Kt,L).then(function(t){Eo(this,n),Yo(t.chats,O.tt)}.bind(this))["catch"](function(r){Eo(this,n),h.error(t.k,r)}.bind(this))),r.push(oe(O.rt,Wo(Ro),N.Kt,L).then(function(t){Eo(this,n),Yo(t.chats,O.rt)}.bind(this))["catch"](function(r){Eo(this,n),h.error(t.k,r)}.bind(this))),Promise.allSettled(r).then(function(){Eo(this,n),Uo=!0}.bind(this))}(),function(){var n=this;eo("mql5_chats_verify").then(function(r){var i=this;if(Lu(this,n),r&&r.length){var e=parseInt(r,10);isNaN(e)?Wu():(new Date).getTime()-e>36e5&&(h.info(t.k,"Verify chats"),ro(O.tt).then(function(n){Lu(this,i),Go(n,O.tt)}.bind(this)),ro(O.rt).then(function(n){Lu(this,i),Go(n,O.rt)}.bind(this)),Wu())}else Wu()}.bind(this))["catch"](function(r){Lu(this,n),h.error(t.O,r)}.bind(this))}(),i()}.bind(this))}function qu(n){var t=this;return new Promise(function(r){if(Lu(this,t),!n||!n.length)return Do.set(0),void r();var i=parseInt(n,10);isNaN(i)?Do.set(0):Do.set(i),r()}.bind(this))}function Hu(n){var r=this;return new Promise(function(i){var e=this;if(Lu(this,r),!n||!n.length)return Fu(),void i();var o=n.split(";");if(2!==o.length)return Fu(),void i();var u=o[0],c=parseInt(o[1],10);if(u!==Mu||c!==$u)return Fu(),void i();eo("mql5_chats_type").then(qu).then(function(){return Lu(this,e),eo("mql5_chats").then(Gu)}.bind(this)).then(i)["catch"](function(n){Lu(this,e),h.error(t.O,n),i()}.bind(this))}.bind(this))}function Yu(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Vu,Xu,Qu=[],Ju=lr([]),Ku=lr(p);function Zu(n){var t=this;0!==parseInt(n,16)&&(Qu.push(n),Ju.update(function(r){Yu(this,t);for(var i=0,e=r.length;i<e;i++)(r[i].linkId&&r[i].linkId===n||r[i].messageId===n)&&(r.splice(i,1),i--,e--);return r}.bind(this)))}function nc(n){var t=this;Qu.push(n),Ju.update(function(r){Yu(this,t);for(var i=0,e=r.length;i<e;i++)if(r[i].messageId===n){r.splice(i,1);break}return r}.bind(this))}function tc(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var rc={};function ic(n,r){var i=this;return new Promise(function(e,o){var u=this;tc(this,i);var c=function(n){for(var t=In(Ju),r=null,i=0,e=t.length;i<e;i++)if(t[i].messageId===n){r=t[i];break}return r}(n);c?e({message:c,key:r}):function(n){var t=this;return new Promise(function(r,i){var e=this;if(Gi(this,t),0!==parseInt(n,16))if(n){var o=J(n);Wr.send(S._n,[o]).then(function(n){var t=n.reader;Gi(this,e),r(Oi(t))}.bind(this))["catch"](function(n){Gi(this,e),i(n)}.bind(this))}else i(new Error("Message id is empty"));else i(new Error("Message id is zero"))}.bind(this))}(n).then(function(n){tc(this,u);var t=n.message;t?e({message:t,key:r}):o(new Error("Message is empty"))}.bind(this))["catch"](function(n){tc(this,u),h.error(t.O,n),o(n)}.bind(this))}.bind(this))}function ec(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function oc(n){var t=this;return n.sort(function(n,r){return ec(this,t),n.date>r.date?1:n.date<r.date?-1:0}.bind(this)),n}function uc(n){var r=this;return new Promise(function(i){var e=this;ec(this,r),Ju.update(function(r){var o=this;ec(this,e);var u=0;return n.forEach(function(n){var i=this;ec(this,o),(!Vu||rn(n.messageId,Vu)<0)&&function(n){Vu=n}(n.messageId),(!Xu||rn(n.messageId,Xu)>0)&&function(n){Xu=n}(n.messageId),n.recType!==E.ut&&n.recType!==E.ft&&(~Qu.indexOf(n.messageId)||(n.linkId&&parseInt(n.linkId,16)>0&&nc(n.linkId),n.recType===E.et&&n.tags&&(n.tags.quote||n.tags.files)?(u++,function(n){var r=this,i=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return new Promise(function(e,o){var u=this;if(tc(this,r),n.recType===E.et&&n.tags)if(rc[n.messageId])e(rc[n.messageId]);else{var c=[],f=n.tags;f&&(f.quote&&!i&&c.push(ic(f.quote.citedId,"quote")),f.files&&f.files.linkedIds.forEach(function(n){tc(this,u),Zu(n),c.push(ic(n,"file"))}.bind(this)));var a=[];Promise.allSettled(c).then(function(r){var i=this;tc(this,u);var o={};r.forEach(function(n){var r=this;if(tc(this,i),"fulfilled"===n.status){var e=n.value,u=e.message;"quote"===e.key?u.recType===E.et?o.quote=u:o.quote||(o.quote=u):u.recType===E.ot&&function(){tc(this,r),u.preview&&u.preview.type&&u.fileSize<G?(o.media||(o.media=[]),o.media.push(u)):(o.files||(o.files=[]),o.files.push(u))}.bind(this)()}else"rejected"===n.status&&h.warning(t.O,n.reason)}.bind(this)),a.length?Promise.allSettled(a).then(function(){tc(this,i),n.parsedTags=o,rc[n.messageId]=n,e(n)}.bind(this)):(n.parsedTags=o,rc[n.messageId]=n,e(n))}.bind(this))}else o(new Error("Message does not contain tags"))}.bind(this))}(n).then(function(n){ec(this,i),function(n){var t=this;Ju.update(function(r){return ec(this,t),~Qu.indexOf(n.messageId)||n.recType===E.ft?r:(n.linkId&&parseInt(n.linkId,16)>0&&nc(n.linkId),r.push(n),oc(r))}.bind(this))}(n)}.bind(this))["catch"](function(n){ec(this,i),h.error(t.k,n)}.bind(this))):(u++,r.push(n))))}.bind(this)),i(u),oc(r)}.bind(this))}.bind(this))}function cc(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var fc=lr(!1),ac=lr(!1);function sc(n){var t=eu();t&&n.chatId===t.chatId&&(Ko(t,n.lastAccess),uc(n.messages))}function lc(n){var t=this,r=eu();if(r&&n.chatId===r.chatId){Ko(r,n.lastAccess),ac.set(!1);var i=n.result===j.Qn,e=n.messages;uc(e).then(function(n){cc(this,t),n||hc()}.bind(this)),i&&e.length||fc.set(!0)}}function hc(){In(fc)||In(ac)||function(n){var r=this,i=eu();i&&i.chatId&&(ac.set(!0),Fi(i.chatId,n).then(lc)["catch"](function(n){cc(this,r),h.error(t.O,n)}.bind(this)))}(Vu)}function vc(){Ju.set([]),Vu=undefined,Xu=undefined,fc.set(!1),ac.set(!1);var n=eu();n&&Ku.set(n.lastAccess)}var dc,bc,yc,pc=null,mc=document.createElement("span"),wc={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var gc in wc)Object.prototype.hasOwnProperty.call(wc,gc)&&mc.style[gc]!==undefined&&(pc=wc[gc]);var _c,Sc,jc,Oc,Ec,Tc,kc,Ac,Rc,Cc,xc,Ic,Mc,Pc,Uc,Nc,Dc,Bc,Lc,$c,zc=!1,Wc={},Fc=null,Gc={},qc=200,Hc=0,Yc=null,Vc=null,Xc=null,Qc=null,Jc=null,Kc=null,Zc=null,nf=null,tf=!1,rf=pc;function ef(){Wc.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,Wc.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function of(){ef(),dc=document.createElement("div"),document.body.appendChild(dc),dc.className="light-box",We&&dc.classList.add("light-box_mobile");var n=document.createElement("div");n.className="light-box__shadow",dc.appendChild(n),n.addEventListener("click",bf),n.addEventListener("touchstart",bf),(bc=document.createElement("div")).className="light-box__content",dc.appendChild(bc),(Zc=document.createElement("div")).className="light-box__attachment-area",bc.appendChild(Zc),(yc=document.createElement("div")).className="light-box__footer",bc.appendChild(yc);var t=document.createElement("div");t.className="light-box__close",t.addEventListener("click",bf),t.addEventListener("touchstart",bf),t.innerHTML='<i class="icons-lightbox icons-lightbox_close"></i>',t.setAttribute("title",ei("lightBox.close")),yc.appendChild(t),(nf=document.createElement("div")).className="light-box__show-full",yc.appendChild(nf),nf.addEventListener("click",uf),nf.addEventListener("touchstart",uf),nf.innerHTML='<i class="icons-lightbox icons-lightbox_uncollapse"></i>',nf.setAttribute("title",ei("lightBox.showOriginal")),(Vc=document.createElement("a")).className="light-box__save",Vc.setAttribute("target","_blank"),Vc.innerHTML='<i class="icons-lightbox icons-lightbox_save"></i>',Vc.setAttribute("title",ei("lightBox.save")),yc.appendChild(Vc),Kc&&((Sc=document.createElement("div")).className="light-box__prev",Sc.innerHTML='<i class="icons-lightbox icons-lightbox_prev"></i>',Sc.addEventListener("click",df),Sc.addEventListener("touchstart",df),Sc.setAttribute("title",ei("lightBox.previous")),bc.appendChild(Sc),(_c=document.createElement("div")).className="light-box__next",_c.innerHTML='<i class="icons-lightbox icons-lightbox_next"></i>',_c.addEventListener("click",vf),_c.addEventListener("touchstart",vf),_c.setAttribute("title",ei("lightBox.next")),bc.appendChild(_c)),jc=window.pageYOffset||document.documentElement.scrollTop,document.body.classList.add("light-box-showed"),document.body.style.top="-"+jc+"px",bc.style.transition="none",bc.style.width="300px",bc.style.height="300px",bc.style.marginTop="-150px",bc.style.marginLeft="-150px",bc.style.transition="all 0.3s ease-out",window.addEventListener("resize",hf),document.addEventListener("keydown",yf)}function uf(n){function t(){Kc&&(cf(Sc,0===Qc),cf(_c,Qc===Hc-1)),nf.setAttribute("title",ei("lightBox.showOriginal")),dc.classList.remove("light-box_full-size"),nf.firstChild.className="icons-lightbox icons-lightbox_uncollapse",document.addEventListener&&document.removeEventListener(rf,t)}var r,i;((n=n||window.event)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),zc)?(hf(),document.addEventListener?document.addEventListener(rf,t):t()):(dc.classList.add("light-box_full-size"),nf.firstChild.className="icons-lightbox icons-lightbox_collapse",nf.setAttribute("title",ei("lightBox.collapse")),Kc&&(cf(Sc,!0),cf(_c,!0)),r=Wc.width<=Gc.width+40?Wc.width-40:Gc.width+20,i=Wc.height<=Gc.height+80?Wc.height-80:Gc.height,bc.style.width=r+"px",bc.style.marginLeft="-"+r/2+"px",bc.style.height=i+"px",bc.style.marginTop="-"+(i/2+20)+"px");zc=!zc}function cf(n,t){n&&(t?n.classList.add("light-box__disabled"):n.classList.remove("light-box__disabled"))}function ff(){Xc.addEventListener("error",ff),Zc.classList.add("light-box__on-error"),Zc.innerHTML="",(Yc=document.createElement("div")).className="light-box__error-message",Yc.innerHTML=ei("lightBox.errorLoading")+"<br>",Zc.appendChild(Yc);var n=ei("lightBox.linkToImg"),t=document.createElement("a");t.setAttribute("href",Fc),t.setAttribute("title",n),t.setAttribute("target","_blank"),t.innerText=n,Yc.appendChild(t)}function af(){if(Xc){document.addEventListener&&bc.removeEventListener(rf,lf),Yc&&(Yc.parentNode&&Yc.parentNode.removeChild(Yc),Yc=null,Zc.classList.remove("light-box__on-error"));var n=Gc.width,t=Gc.height;Gc.width=Xc.offsetWidth,Gc.height=Xc.offsetHeight,cf(nf,!(Gc.width>Wc.width||Gc.height>Wc.height)),Jc&&(Jc.removeEventListener("load",af),Jc.removeEventListener("error",ff),Jc.parentNode&&Jc.parentNode.removeChild(Jc),Jc=null),document.addEventListener?(n!==Gc.width&&t!==Gc.height?bc.addEventListener(rf,lf):lf(),hf()):(hf(),lf())}}function sf(n,t){Fc=n,Jc=Xc,cf(nf,!0),Jc&&(Jc.removeEventListener("load",af),Jc.removeEventListener("error",ff),Jc.parentNode===document.body&&(Jc.parentNode.removeChild(Jc),Jc=null),Xc=null),(Xc=new Image).addEventListener("load",af),Xc.addEventListener("error",ff),t&&Xc.setAttribute("srcset",t),Xc.setAttribute("src",n+(ze?"?"+Math.random():"")),Xc.classList.add("light-box__attachment-loading"),document.body.appendChild(Xc),Kc&&(cf(Sc,0===Qc),cf(_c,Qc===Hc-1)),Vc.setAttribute("href",n)}function lf(){Zc.innerHTML="",Xc.classList.remove("light-box__attachment-loading"),Zc.appendChild(Xc),document.addEventListener&&bc.removeEventListener(rf,lf)}function hf(){ef();var n,t=Gc.width,r=Gc.height,i=t>r;t&&r&&(i?(n=t/r,t>Wc.width-40&&(r=(t=Wc.width-40)/n),r>Wc.height-80&&(n=r/t,t=(r=Wc.height-80)/n)):(n=r/t,r>Wc.height-80&&(t=(r=Wc.height-80)/n),t>Wc.width-40&&(n=t/r,r=(t=Wc.width-40)/n)),t<qc&&(t=qc,r=i?t/n:t*n),bc.style.width=t+"px",bc.style.marginLeft="-"+t/2+"px",bc.style.height=r+"px",bc.style.marginTop="-"+(r/2+20)+"px")}function vf(n){Kc&&((n=n||window.event)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),Qc++,sf(Kc[Qc]))}function df(n){Kc&&((n=n||window.event)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),Qc--,sf(Kc[Qc]))}function bf(n){tf=!1,(n=n||window.event)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),document.body.removeChild(dc),Xc&&(Xc.parentNode.removeChild(Xc),Xc.removeEventListener("load",af)),document.body.classList.remove("light-box-showed"),window.scrollTo(0,jc),window.removeEventListener("resize",hf),document.removeEventListener("keydown",yf),Xc=null,document.body.style.top=""}function yf(n){var t=(n=n||window.event).keyCode||n.which;27===t&&bf(n),39===t&&Qc!==Hc-1&&vf(n),37===t&&0!==Qc&&df(n)}function pf(n){Gc=n}function mf(n){return new Promise((function(t){hf(),n.classList.remove("light-box__attachment-loading"),Zc.appendChild(n),document.addEventListener&&bc.removeEventListener(rf,lf),t()}))}function wf(){cf(nf,!0),cf(Vc,!0)}function gf(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined,i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;tf=!0,(Hc=(Kc=t)&&Kc.length||1)<=1?Kc=null:Qc=Kc.indexOf(n),of(),sf(n,r),i?wf():(cf(nf,!1),cf(Vc,!1))}function _f(){return tf}function Sf(n){var t=(n=Math.floor(n))%60;return parseInt(n/60,10)+":"+(n<10?"0"+t:t)}function jf(){var n=Ec.currentTime/Ec.duration*100;Bc.value=n,Lc.style.width=n+"%"}function Of(){var n=100*Ec.volume;Nc.value=n,Dc.style.width=n+"%",0!==parseInt(n,10)?Rc.innerHTML='<i class="icons-player icons-player_sound"></i>':Rc.innerHTML='<i class="icons-player icons-player_mute"></i>'}function Ef(){var n=document.createElement("div");n.className="light-box__time-line",n.innerHTML='<div class="light-box__time-line__bg"></div>',($c=document.createElement("div")).className="light-box__time-line__buffered",n.appendChild($c),(Lc=document.createElement("div")).className="light-box__time-line__value",n.appendChild(Lc),(Bc=document.createElement("input")).className="light-box__time-line__range",Bc.setAttribute("type","range"),Bc.setAttribute("min",0),Bc.setAttribute("max",100),Bc.setAttribute("value",0);var t=!1;return Bc.addEventListener("mousemove",(function(n){n.stopPropagation(),t&&(Ec.currentTime=Ec.duration*(Bc.value/100))})),Bc.addEventListener("mousedown",(function(n){n.stopPropagation(),t=!0})),Bc.addEventListener("mouseup",(function(n){n.stopPropagation(),t=!1})),Bc.addEventListener("change",(function(){Ec.currentTime=Ec.duration*(Bc.value/100)})),n.appendChild(Bc),function(){var n=Ec.duration;if(n>0)for(var t=0;t<Ec.buffered.length;t++)if(Ec.buffered.start(Ec.buffered.length-1-t)<=Ec.currentTime){$c.style.width=Ec.buffered.end(Ec.buffered.length-1-t)/n*100+"%";break}}(),n}function Tf(){document.fullscreenElement||(Uc=!0,kf())}function kf(n){n&&n.stopPropagation(),Uc?(Pc.innerHTML='<i class="icons-player icons-player_expand"></i>',kc.removeEventListener(Ic[3],Tf),document[Ic[1]]()):(kc[Ic[0]](),Pc.innerHTML='<i class="icons-player icons-player_collapsed"></i>',kc.addEventListener(Ic[3],Tf)),Uc=!Uc}function Af(n){n&&n.stopPropagation(),Ec.paused||Ec.ended?Ec.play():Ec.pause()}function Rf(){var n;(Tc=document.createElement("div")).className="light-box__controls light-box__controls_active",(Ac=document.createElement("div")).className="light-box__play",Ac.innerHTML='<i class="icons-player icons-player_play"></i>',Ac.addEventListener("click",Af),Tc.appendChild(Ac),(Rc=document.createElement("div")).className="light-box__sound",Rc.innerHTML='<i class="icons-player icons-player_sound"></i>',Rc.addEventListener("click",(function(n){n.stopPropagation(),Ec.muted?(Ec.muted=!1,Ec.volume=1):(Ec.muted=!0,Ec.volume=0)})),Tc.appendChild(Rc),Tc.appendChild(((n=document.createElement("div")).className="light-box__sound-line",n.innerHTML='<div class="light-box__sound-line__bg"></div>',(Dc=document.createElement("div")).className="light-box__sound-line__value",n.appendChild(Dc),(Nc=document.createElement("input")).className="light-box__time-line__range",Nc.setAttribute("type","range"),Nc.setAttribute("min",0),Nc.setAttribute("max",100),Nc.setAttribute("value",0),Nc.addEventListener("mousemove",(function(n){n.stopPropagation(),Ec.volume=Nc.value/100})),Nc.addEventListener("change",(function(){Ec.volume=Nc.value/100})),Of(),n.appendChild(Nc),n));var t=document.createElement("a");t.className="light-box__download",t.innerHTML='<i class="icons-player icons-player_download"></i>',t.setAttribute("href",Ec.currentSrc),t.setAttribute("target","_blank"),Tc.appendChild(t),Ic?((Pc=document.createElement("div")).className="light-box__full-screen",Pc.innerHTML='<i class="icons-player icons-player_expand"></i>',Pc.addEventListener("click",kf),Tc.appendChild(Pc)):Tc.classList.add("light-box__controls_no-full-screen");var r=document.createElement("div");return r.className="light-box__time",(Cc=document.createElement("span")).className="light-box__time__current",Cc.innerText="0:00",r.appendChild(Cc),r.insertAdjacentHTML("beforeend",' / <span class="light-box__time__full">'.concat(Sf(Ec.duration),"</span>")),Tc.appendChild(r),Tc.appendChild(Ef()),Tc}function Cf(){Mc.innerHTML='<i class="icons-player icons-player_stop-big"></i>',Mc.classList.remove("light-box__disabled")}function xf(){var n=this;Ec.removeEventListener("canplay",xf);var t=Ec.videoWidth;t<330&&(t=330),pf({width:t,height:Ec.videoHeight}),Oc&&Oc.parentNode&&Oc.parentNode.removeChild(Oc),(kc=document.createElement("div")).className="light-box__attachment-area",kc.appendChild(Rf()),kc.appendChild(Ec),kc.appendChild(((Mc=document.createElement("div")).className="light-box__status light-box__status_animated light-box__disabled",Mc.innerHTML='<i class="icons-player icons-player_play-big"></i>',Mc.addEventListener("animationend",(function(){Mc.classList.add("light-box__disabled")})),Mc)),Ec.addEventListener("play",(function(){Mc.innerHTML='<i class="icons-player icons-player_play-big"></i>',Mc.classList.remove("light-box__disabled"),Ac.innerHTML='<i class="icons-player icons-player_stop"></i>',Tc.classList.remove("light-box__controls_active"),kc.classList.add("light-box__hide-cursor")})),Ec.addEventListener("pause",(function(){Cf(),Ac.innerHTML='<i class="icons-player icons-player_play"></i>',Tc.classList.add("light-box__controls_active"),kc.classList.remove("light-box__hide-cursor"),jf()})),Ec.addEventListener("ended",(function(){Cf(),Ac.innerHTML='<i class="icons-player icons-player_play"></i>',Tc.classList.add("light-box__controls_active"),kc.classList.remove("light-box__hide-cursor"),jf()})),Ec.addEventListener("progress",(function(){jf()})),Ec.addEventListener("timeupdate",(function(){Cc.innerText=Sf(Ec.currentTime),jf()})),Ec.addEventListener("click",Af),Ec.addEventListener("mousemove",(function(){Tc.classList.add("light-box__controls_active"),kc.classList.remove("light-box__hide-cursor"),clearTimeout(xc),xc=setTimeout((function(){Ec.paused||Ec.ended||(Tc.classList.remove("light-box__controls_active"),kc.classList.add("light-box__hide-cursor"))}),1e3)})),Ec.addEventListener("volumechange",Of),mf(kc).then(function(){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,n),Ec.classList.remove("light-box__attachment-loading")}.bind(this))}function If(n){var t=n.src,r=n.type,i=n.preview;Ic=function(){for(var n,t=document.createElement("span"),r=[["requestFullScreen","cancelFullScreen","fullScreen","fullscreenchange"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitIsFullScreen","webkitfullscreenchange"],["mozRequestFullScreen","mozCancelFullScreen","mozfullScreen","mozfullscreenchange"]],i=0,e=r.length;i<e;i++)if(t[r[i][0]]){n=r[i];break}return n}(),of(),function(n){var t=n.src,r=void 0===t?null:t;r&&((Oc=document.createElement("img")).className="light-box__attachment-loading",document.body.appendChild(Oc),Oc.addEventListener("load",(function(){pf({width:Oc.offsetWidth,height:Oc.offsetHeight}),mf(Oc)})),Oc.setAttribute("src",r))}({src:i}),function(n){var t=n.src,r=void 0===t?null:t,i=n.preview,e=void 0===i?null:i,o=n.type;if(r){(Ec=document.createElement("video")).className="light-box__attachment-loading",e&&Ec.setAttribute("poster",e),document.body.appendChild(Ec);var u=document.createElement("source");u.setAttribute("type",o+';codecs="avc1.42E01E, mp4a.40.2"'),u.setAttribute("src",r),Ec.appendChild(u);var c=document.createElement("div");c.className="light-box__error-message",c.innerHTML=ei("lightBox.notSupport")+'<a href="'.concat(r,'" target="_blank">').concat(ei("lightBox.linkToVideo"),"</a>"),Ec.appendChild(c),Ec.addEventListener("canplay",xf),u.addEventListener("error",(function(){pf({width:300,height:300}),c.innerHTML=ei("lightBox.errorLoading")+'<br><a href="'.concat(r,'" target="_blank">').concat(ei("lightBox.linkToVideo"),"</a>"),mf(c)}))}}({src:t,preview:i,type:r}),wf()}function Mf(){return _f()}function Pf(n,t){var r,i,e,o,u=0;function c(){u=Date.now(),i=undefined,r=n.apply(o,e),i||(e=undefined,o=undefined)}return function(){o=this;for(var f=arguments.length,a=new Array(f),s=0;s<f;s++)a[s]=arguments[s];e=a;var l=Date.now(),h=t-(l-u);return h<=0||h>t?(i&&(clearTimeout(i),i=undefined),u=l,r=n.apply(o,e)):i||(i=setTimeout(c,h)),r}}var Uf=Pf((function(){for(var n={group:[],channel:[],users:[]},t=In(Ao),r=In(Ro),i=0,e=0,o=t.length;e<o&&!(i>500);e++)n.group.push(t[e]),i++;for(var u=0,c=r.length;u<c&&!(i>q);u++)n.channel.push(r[u]),i++;n.users=function(){var n=0,t=[];for(var r in Nu)if(Object.prototype.hasOwnProperty.call(Nu,r)){if(n>Pu)break;t.push(In(Nu[r])),n++}return t}(),oo("mql5_chats",xu(JSON.stringify(n)))}),1e3);function Nf(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Df(){Ar.setLayout({create:!1}),ju(),Cr.set(undefined)}function Bf(n){var r=this;Ae(n.chatId).then(function(n){Nf(this,r),n&&(Eu(n),Xo(n))}.bind(this))["catch"](function(n){Nf(this,r),h.error(t.O,n,"Main")}.bind(this))}function Lf(n){var t,r;t=n.chatId,r=n.lastSeen,Qo(t,r,To),Qo(t,r,ko),Qo(t,r,Ao),Qo(t,r,Ro)}function $f(n){n.isDeleted&&Fo(n.chatId),n.permission&C.Ut||function(n){var t=eu();t&&n===t.chatId&&ju()}(n.chatId),n.isDeleted?function(n){Fo(n.chatId);var t=eu();t&&t.chatId===n.chatId&&Tu()}(n):Bf(n)}function zf(n){var r=this;return new Promise(function(i,e){var o=this;Nf(this,r),n?(!function(n,r){if(n)h.error(t.O,n);else{var i=eu();if(i&&r&&i.chatId===r.chatId){var e=r.message;e&&(e.recType===E.ut?e.linkId&&nc(e.linkId):uc([e]))}}}(undefined,n),Ae(n.chatId).then(function(r){var e=this;if(Nf(this,o),r){i(r),Eu(r),Xo(r);var u=eu();u&&u.chatId===n.chatId&&r.lastAccess!==r.lastUpdate&&(Ku.set(r.lastAccess),zi(r.chatId,r.lastUpdate).then(function(){Nf(this,e),Ko(u,r.lastUpdate)}.bind(this))["catch"](function(n){Nf(this,e),h.error(t.O,n,"Main")}.bind(this)))}}.bind(this))["catch"](function(n){Nf(this,o),h.error(t.O,n,"Main")}.bind(this))):e(new Error("Data is undefined"))}.bind(this))}function Wf(){var n=this;So(),function(n,r){var i=this;return new Promise(function(e){var o=this;Lu(this,i),Mu=n,$u=r,eo("mql5_chats_tok").then(Hu).then(e)["catch"](function(n){Lu(this,o),h.error(t.O,n),e()}.bind(this))}.bind(this))}(Pr,$r).then(function(){Nf(this,n),tu(),Ao.subscribe(Uf),Ro.subscribe(Uf)}.bind(this)),window.HotKeys.Add(27,(function(){_f()||Mf()||(Df(),Tu(),Dr||Ar.setLayout({search:!1}))})),!0}function Ff(){return d[Gr]}function Gf(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function qf(n){var r=this,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;"number"==typeof n&&(n=nn(n)),le({type:O.nt,isPublic:0,name:"",description:"",links:"",inviteLink:"",language:0,userId:n}).then(function(n){var e=this;Gf(this,r),Ae(n).then(function(n){Gf(this,e),n&&(parseInt(n.lastAccess,16)||window.fz&&window.fz("track","MQL5+Chat+New"),Eu(n),Xo(n),Vf(n),i&&i())}.bind(this))["catch"](function(r){Gf(this,e),h.error(t.T,r,"Open"),Fo(n),ku()}.bind(this))}.bind(this))["catch"](function(i){var e=this;if(Gf(this,r),parseInt(i.name,10)===j.Yn){var o=Z(n)-1;Se(B.ur,1,nn(o)).then(function(t){Gf(this,e),!i&&t&&t.length&&t[0].userId===n?Ru(n,!1,"friendWaitingPair","friendWaitingPairWithName"):Ru(n,!0,"errorUserNonChatablePrivacyFriends","privacyOnlyFriendsWithName")}.bind(this))["catch"](function(n){Gf(this,e),h.error(t.T,n,"Open")}.bind(this))}else h.error(t.T,i,"Open")}.bind(this))}function Hf(n){var r=this,i=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return new Promise(function(e,o){var u=this;(Gf(this,r),n)?/^[0-9a-fA-F]{16}$/.test(n)?Yf(n,i).then(e)["catch"](o):function(n){var t=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return new Promise(function(i,e){var o=this;xe(this,t),n?Wr.send(S.L,[{String16:n},{Uint8:r}]).then(function(n){var t=n.reader;xe(this,o);var r=Si(t,N.Kt);r?i(r):e(new Error("Parse error"))}.bind(this))["catch"](function(n){xe(this,o),e(n)}.bind(this)):e(new Error("Chat invite link is empty"))}.bind(this))}(decodeURI(n)).then(function(n){Gf(this,u),Vf(n,i),e(n)}.bind(this))["catch"](function(n){Gf(this,u),ku(),h.error(t.T,n,"Open"),o(n)}.bind(this)):o(new Error("id or link name is empty"))}.bind(this))}function Yf(n){var r=this,i=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return new Promise(function(e,o){var u=this;Gf(this,r);var c=function(n){for(var t=In(To),r=undefined,i=0,e=t.length;i<e;i++){var o=t[i];if(o.chatId===n){r=o;break}}return r}(n);if(c)return Vf(c,i),void e(c);Ae(n).then(function(n){Gf(this,u),n&&(n.isSubscribed&&(Eu(n),Xo(n)),Vf(n,i),e(n))}.bind(this))["catch"](function(r){Gf(this,u),h.error(t.T,r,"Open"),Fo(n),ku(),o(r)}.bind(this))}.bind(this))}function Vf(n){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];if(n){var r=eu();Ar.window&&r&&r.chatId===n.chatId||(Df(),function(n){arguments.length>1&&arguments[1]!==undefined&&arguments[1]||pu(Jr(n)),Ar.setLayout({window:!0}),iu.set(n)}(n,t),Dr||t||uu(Jr(n)))}}function Xf(n){return Xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Xf(n)}function Qf(n){return function(n){if(Array.isArray(n))return Jf(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"==typeof n)return Jf(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jf(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jf(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Kf(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Xf(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Xf(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Xf(o)?o:String(o)),i)}var e,o}var Zf=function(){function n(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.dataView=t,this.pos=r,this.posEnd=i!==undefined?r+i:t.byteLength}var t,r,i;return t=n,r=[{key:"Size",value:function(){return this.posEnd-this.pos}},{key:"advance",value:function(n){if(this.pos+n>this.posEnd)throw new Error("Buffer overflow");this.pos+=n}},{key:"isEnded",value:function(){return this.pos>=this.posEnd}},{key:"getInt32",value:function(){if(this.pos+4>this.posEnd)throw new Error("Buffer overflow");var n=this.dataView.getInt32(this.pos,!0);return this.pos+=4,n}},{key:"getUint32",value:function(){if(this.pos+4>this.posEnd)throw new Error("Buffer overflow");var n=this.dataView.getUint32(this.pos,!0);return this.pos+=4,n}},{key:"getInt16",value:function(){if(this.pos+2>this.posEnd)throw new Error("Buffer overflow");var n=this.dataView.getInt16(this.pos,!0);return this.pos+=2,n}},{key:"getUint16",value:function(){if(this.pos+2>this.posEnd)throw new Error("Buffer overflow");var n=this.dataView.getUint16(this.pos,!0);return this.pos+=2,n}},{key:"getInt8",value:function(){if(this.pos>=this.posEnd)throw new Error("Buffer overflow");return this.dataView.getInt8(this.pos++)}},{key:"getUint8",value:function(){if(this.pos>=this.posEnd)throw new Error("Buffer overflow");return this.dataView.getUint8(this.pos++)}},{key:"getString8",value:function(){var n=this.getUint8();return V(this.getBinary(n))}},{key:"getString16",value:function(){var n=this.getUint16();return V(this.getBinary(n))}},{key:"getString32",value:function(){var n=this.getUint32();return V(this.getBinary(n))}},{key:"getInt64NumberLikeString",value:function(){var n=!(arguments.length>0&&arguments[0]!==undefined)||arguments[0],t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];if(this.pos+8>this.posEnd)throw new Error("Buffer overflow");var r=new Uint8Array(this.dataView.buffer,this.pos,8);n&&(this.pos+=8);for(var i=t&&r.length>0&&r[0]>=128,e=[],o=r.length-1;o>=0;o--){var u=r[o];i&&(u=256-(o===r.length-1?0:1)-u);for(var c=0,f=e.length;u>0||c<f;c++)u+=256*(e[c]||0),e[c]=u%10,u=(u-e[c])/10}return(i?"-":"")+e.reverse().join("")}},{key:"getBinary",value:function(n){if(0===n)return"";if(this.pos+n>this.posEnd)throw new Error("Buffer overflow");var t=new Uint8Array(this.dataView.buffer,this.pos,n),r=String.fromCharCode.apply(null,Qf(t));return this.pos+=n,r}},{key:"getBlob",value:function(n,t){if(0===n)return null;if(this.pos+n>this.posEnd)throw new Error("Buffer overflow");var r=[new Uint8Array(this.dataView.buffer,this.pos,n)],i=new Blob(r,{type:t});return this.pos+=n,i}},{key:"getReader32",value:function(){var t=this.getUint32();if(t>this.posEnd-this.pos)throw new Error("Buffer overflow");var r=new n(this.dataView,this.pos,t);return this.pos+=t,r}},{key:"getReader16",value:function(){var t=this.getUint16();if(t>this.posEnd-this.pos)throw new Error("Buffer overflow");var r=new n(this.dataView,this.pos,t);return this.pos+=t,r}}],r&&Kf(t.prototype,r),i&&Kf(t,i),Object.defineProperty(t,"prototype",{writable:!1}),n}();function na(n,t,r){if("string"==typeof r)for(var i=0;i<r.length;i++)n.setUint8(t++,r.charCodeAt(i));else if(Array.isArray(r))for(var e=0;e<r.length;++e)t=na(n,t,r[e]);else if("String"in r&&r.String!==undefined||"String8"in r&&r.String8!==undefined||"String16"in r&&r.String16!==undefined||"String32"in r&&r.String32!==undefined){var o="";"String8"in r&&r.String8!==undefined?(o=tn(r.String8),n.setUint8(t++,o.length)):"String16"in r&&r.String16!==undefined?(o=tn(r.String16),n.setUint16(t,o.length,!0),t+=2):"String32"in r&&r.String32!==undefined?(o=tn(r.String32),n.setUint32(t,o.length,!0),t+=4):r.String!==undefined&&(o=tn(r.String));for(var u=0;u<o.length;u++)n.setUint8(t++,o.charCodeAt(u))}else"Uint8"in r&&r.Uint8!==undefined?n.setUint8(t++,r.Uint8):"Int8"in r&&r.Int8!==undefined?n.setInt8(t++,r.Int8):"Uint16"in r&&r.Uint16!==undefined?(n.setUint16(t,r.Uint16,!0),t+=2):"Int16"in r&&r.Int16!==undefined?(n.setInt16(t,r.Int16,!0),t+=2):"Uint32"in r&&r.Uint32!==undefined?(n.setUint32(t,r.Uint32,!0),t+=4):"Int32"in r&&r.Int32!==undefined?(n.setInt32(t,r.Int32,!0),t+=4):"Uint64"in r&&r.Uint64!==undefined&&(n.setBigUint64(t,r.Uint64,!0),t+=8);return t}function ta(n){return ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ta(n)}function ra(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ia(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==ta(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==ta(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===ta(o)?o:String(o)),i)}var e,o}var ea=function(){function n(t,r){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.counterId=0,this.debug=!1,this.connecting=!1,this.requests=new Map,this.listeners=new Map,this.url=t,this.debug=r,this.connecting=!1,this.reconnectTimeout=2e3,this.init=this.init.bind(this)}var r,i,e;return r=n,i=[{key:"getReconnectInterval",value:function(){var n=this.reconnectTimeout;return this.reconnectTimeout*=(3+Math.random())/2,Math.min(n,3e4)}},{key:"close",value:function(){window.removeEventListener("beforeunload",this.handleBeforeunload),this.socket&&(this.socket.removeEventListener("open",this.handleOpen),this.socket.removeEventListener("error",this.handleError),this.socket.removeEventListener("message",this.handleMessage),this.socket.removeEventListener("close",this.handleClose),this.socket.close())}},{key:"reconnect",value:function(){var n=this;h.info(t.j,"reconnect"),setTimeout(function(){ra(this,n),this.close(),this.connect()}.bind(this),this.getReconnectInterval())}},{key:"reset",value:function(){this.requests=new Map}},{key:"handleOpen",value:function(){this.connecting=!1,h.info(t.j,"connected"),this.reconnectTimeout=2e3,this.onOpen&&this.onOpen()}},{key:"handleError",value:function(n){var r="Error";r=this.socket&&this.socket.readyState===this.socket.CLOSED?"WebSocket connection to '".concat(this.url,"' failed"):o(n),h.error(t.j,r),this.onError&&this.onError(new Error(r)),this.connecting=!1,this.socket.close()}},{key:"failResultToText",value:function(n){switch(n){case j.Mn:return"Generic fail";case j.Pn:return"Access denied";case j.Un:return"Invalid parameters";case j.Nn:return"Invalid request";case j.Dn:return"Invalid version (of protocol or something)";case j.Bn:return"Failed call, we need disconnect";case j.Ln:return"Out of memory situation";case j.$n:return"Sql query error";case j.zn:return"User banned to interact with other user";case j.Wn:return"Network problems";case j.Fn:return"File/data too big";case j.Gn:return"Data didn't exist";case j.qn:return"Duplicate";case j.Hn:return"User banned temporary for too many messages or assigning";case j.Yn:return"Messaging disallowed with this user (due only-friends checkbox)";case j.Vn:return"Something interrupted request processing";default:return"[UNKNOWN_RESULT]"}}},{key:"outputDebug",value:function(n,t){if(this.debug){var r=new Date,i="0".concat(r.getHours()).slice(-2),e="0".concat(r.getMinutes()).slice(-2),o="0".concat(r.getSeconds()).slice(-2),u="00".concat(r.getMilliseconds()).slice(-3);h.debug(t,"".concat(i,":").concat(e,":").concat(o,":").concat(u," ").concat(n))}}},{key:"off",value:function(n,t){var r=this.listeners.get(n);r&&r.has(t)&&r["delete"](t)}},{key:"on",value:function(n,t){var r=this.listeners.get(n);r||(r=new Set,this.listeners.set(n,r)),r.add(t)}},{key:"setRequest",value:function(n,t){this.requests.set(n,t)}},{key:"deleteRequest",value:function(n){var t=this.requests.get(n);t&&t.counter&&clearTimeout(t.counter),this.requests["delete"](n)}},{key:"trigger",value:function(n,t){var r=this,i=this.listeners.get(n);i&&i.forEach(function(n){ra(this,r),n(t)}.bind(this))}},{key:"handleMessage",value:function(n){if(this.messagePartial){var r=new Uint8Array(n.data),i=new Uint8Array(this.messagePartial.byteLength+r.byteLength);i.set(this.messagePartial,0),i.set(r,this.messagePartial.byteLength),this.messagePartial=i}else this.messagePartial=new Uint8Array(n.data);var e=new DataView(this.messagePartial.buffer);if(!(e.byteLength<13)){var o=e.getUint8(0),u=new Zf(e,1,8).getBinary(8),c=e.getUint32(9,!0);if(!(e.byteLength<c+13)){var f,a=new Zf(e,13),s=this.messagePartial.buffer.byteLength;switch(this.messagePartial.byteLength>c+13?this.messagePartial=this.messagePartial.slice(c+13):this.messagePartial=undefined,o){case S.U:case S.H:case S.Y:case S.V:case S.J:f=undefined;break;default:f=a.getInt8()}if(this.debug)try{var l=window.BigInt?X(u):K(u),v="id: ".concat(l.toString(),", code: ").concat(o,",");v+=" length: ".concat(s," byte").concat(f?", result: ".concat(f):""," "),this.outputDebug(v,t.C)}catch(b){h.error(t.O,b)}var d=this.requests.get(u);if(d&&f!==undefined)if(this.deleteRequest(u),f>0)d.resolve({result:f,reader:a,id:u});else{h.error(t.j,"code ".concat(o,": ").concat(f," ").concat(this.failResultToText(f)));var b=new Error("An error occurred. Code: ".concat(f));f===j.Pn?b=new Error("Access denied"):f===j.zn?b=new Error("Your account is banned"):f===j.Hn&&(b=new Error("Your account is temporarily banned")),b.name="".concat(f),d.reject(b)}this.trigger(o,a)}}}},{key:"handleClose",value:function(n){n.wasClean?h.warning(t.j,"connection was closed by the server-side"):h.warning(t.j,"connection was suddenly closed"),this.reconnect()}},{key:"handleBeforeunload",value:function(){oo("mql5_chats_connect","".concat((new Date).getTime())),this.close()}},{key:"sendData",value:function(n,r,i){var e=this,o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;if(this.socket.readyState!==this.socket.OPEN)return setTimeout(function(){ra(this,e),this.sendData(n,r,i,o)}.bind(this),1e3),void h.warning(t.j,"WebSocket not open, try resend after timeout");var u=13+(r?Hi(r):0),c=new ArrayBuffer(u),f=new DataView(c);f.setUint8(0,n),i?na(f,1,i):(f.setUint32(1,287454020,!1),f.setUint32(5,1432778632,!1)),f.setUint32(9,u+(o||0)-13,!0),r&&na(f,13,r);try{if(this.debug){var a=window.BigInt?X(i):K(i),s="id: ".concat(a,", code: ").concat(n,",");s+=" length: ".concat(c.byteLength," byte"),this.outputDebug(s,t.R)}return void this.socket.send(c)}catch(l){h.error(t.j,l,"Send message"),this.socket&&this.socket.readyState===this.socket.OPEN||(h.warning(t.j,"WebSocket closed, try reconnect"),this.reconnect())}}},{key:"send",value:function(n,r){var i=this,e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;return new Promise(function(o,u){var c=this;if(ra(this,i),!this.socket){var f="WebSocket not created";return h.warning(t.j,f),void u(new Error(f))}this.counterId++;var a=function(n){for(var t=n,r="",i=0;i<8;i++)r+=String.fromCharCode(t%256),t=t/256|0;return r}(this.counterId),s=undefined;n!==S.P&&n!==S.un&&(s=setTimeout(function(){ra(this,c);var t=this.requests.get(a);t&&t.reject(new Error("Timed out in 10 sec. Error ".concat(n)))}.bind(this),1e4)),this.requests.set(a,{resolve:o,reject:u,counter:s}),this.sendData(n,r,a,e)}.bind(this))}},{key:"directSend",value:function(n){var r=this;if(this.socket.readyState!==this.socket.OPEN)return setTimeout(function(){ra(this,r),this.directSend(n)}.bind(this),1e3),void h.warning(t.j,"WebSocket not open, try resend after timeout");this.debug&&h.info(t.R,"block length: ".concat(n.byteLength," byte")),this.socket.send(n)}},{key:"init",value:function(n,r){var i=this;this.onOpen=n,this.onError=r,Promise.resolve().then(function(){if(ra(this,i),!window.WebSocket)return h.warning(t.j,"WebSocket is not supported by this browser"),void r(new Error("WebSocket is not supported by this browser"));this.connect()}.bind(this))}},{key:"connect",value:function(){var n=this;if(!this.connecting){if(this.connecting=!0,"visible"!==document.visibilityState){var r=function(){ra(this,n),"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",r),this.connecting=!1,this.connect())}.bind(this);return h.info(t.j,"сonnection postponed, document visibility is ".concat(document.visibilityState)),void document.addEventListener("visibilitychange",r)}h.info(t.j,"connecting"),this.socket=new WebSocket("wss://".concat(this.url)),this.socket.binaryType="arraybuffer",this.reset(),this.socket.addEventListener("open",this.handleOpen.bind(this)),this.socket.addEventListener("error",this.handleError.bind(this)),this.socket.addEventListener("message",this.handleMessage.bind(this)),this.socket.addEventListener("close",this.handleClose.bind(this)),window.addEventListener("beforeunload",this.handleBeforeunload.bind(this))}}}],i&&ia(r.prototype,i),e&&ia(r,e),Object.defineProperty(r,"prototype",{writable:!1}),n}();function oa(n){return oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},oa(n)}function ua(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ca(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==oa(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==oa(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===oa(o)?o:String(o)),i)}var e,o}var fa=function(){function n(t,r){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.lastNotified=0,this.storeKey=t;try{window.Audio&&(this.sound=new Audio(r||"https://c.mql5.com/i/message/new_message_click2.mp3"))}catch(i){console.error(i)}}var t,r,i;return t=n,r=[{key:"getLastNotified",value:function(){var n=this;return new Promise(function(t){var r=this;ua(this,n),eo(this.storeKey).then(function(n){if(ua(this,r),n!==undefined){var i=0;null!==n&&(i=parseInt(n,10)),i>this.lastNotified&&(this.lastNotified=i),t(this.lastNotified)}else t(this.lastNotified)}.bind(this))}.bind(this))}},{key:"setLastNotified",value:function(n){oo(this.storeKey,"".concat(n)),this.lastNotified=n}},{key:"play",value:function(n){var t=this;this.sound&&this.getLastNotified().then(function(r){var i,e=this;if(ua(this,t),(!0===window.isWindowActive||window.isLastActiveWindow())&&r<n){try{var o=null===(i=this.sound)||void 0===i?void 0:i.play();o!==undefined&&o.then(function(){ua(this,e)}.bind(this))["catch"](function(n){ua(this,e),console.error(n)}.bind(this))}catch(u){console.error(u)}this.setLastNotified(n)}}.bind(this))}}],r&&ca(t.prototype,r),i&&ca(t,i),Object.defineProperty(t,"prototype",{writable:!1}),n}();function aa(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var sa,la=!1;function ha(){var n=this;return sa||(sa=new Promise(function(r,i){var e,o=this;aa(this,n),e=new ea(Lr,Xr),Wr=e;var u=new fa("mql5_chats_last_notified","https://c.mql5.com/i/message/new_message_click2.mp3");Wr.on(S.H,function(n){aa(this,o);var t=Si(n);t&&Bf(t)}.bind(this)),Wr.on(S.J,function(n){aa(this,o);var t=function(n){var t=n.getBinary(8),r=n.getBinary(8);return{chatId:Q(t),lastSeen:Q(r)}}(n);Lf(t)}.bind(this)),Wr.on(S.V,function(n){aa(this,o);var t=function(n){return Ci(n,Ui)}(n);$f(t)}.bind(this)),Wr.on(S.Y,function(n){var r=this;aa(this,o);var i=Oi(n);zf(i).then(function(n){if(aa(this,r),!n.isMuted){var t=i.message;t&&t.authorId!==Mr&&u.play(t.date.getTime())}}.bind(this))["catch"](function(n){aa(this,r),h.error(t.j,n)}.bind(this))}.bind(this)),Wr.init(function(){var n=this;aa(this,o),h.info(t.j,"authorization"),Qe(),Me(Br).then(function(i){var e;aa(this,n),h.info(t.j,"authorized"),co=(e=i).userId,e.userName,e.userFlags,fo=e.yr,ao=e.pr,function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;Wr.send(S.un,[{Uint8:n?1:0}])}(N.Kt),la?(function(){var n=this;h.info(t.k,"get chat updates"),ce(Wo(To),N.Kt,L).then(function(t){Eo(this,n),Yo(t.chats,O.Zn)}.bind(this))["catch"](function(r){Eo(this,n),h.error(t.k,r)}.bind(this)),oe(O.nt,Wo(ko),N.Kt,L).then(function(t){Eo(this,n),Yo(t.chats,O.nt)}.bind(this))["catch"](function(r){Eo(this,n),h.error(t.k,r)}.bind(this)),oe(O.tt,Wo(Ao),N.Kt,L).then(function(t){Eo(this,n),Yo(t.chats,O.tt)}.bind(this))["catch"](function(r){Eo(this,n),h.error(t.k,r)}.bind(this)),oe(O.rt,Wo(Ro),N.Kt,L).then(function(t){Eo(this,n),Yo(t.chats,O.rt)}.bind(this))["catch"](function(r){Eo(this,n),h.error(t.k,r)}.bind(this))}(),function(){var n=this,r=eu();r&&r.chatId&&Ar.window&&(h.info(t.O,"get message updates"),Fi(r.chatId,Xu,N.Kt).then(sc)["catch"](function(r){cc(this,n),h.error(t.O,r)}.bind(this)))}()):r(),la=!0}.bind(this))["catch"](function(r){aa(this,n),h.error(t.j,new Error("auth failed: ".concat(r.message))),Wr.close(),i(r)}.bind(this))}.bind(this),function(n){aa(this,o),i(n)}.bind(this))}.bind(this)),sa)}function va(n){return va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},va(n)}function da(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var ba=400,ya=354,pa={width:ba,height:ya};function ma(n,t){pa.width=n,pa.height=t,oo("chat",JSON.stringify(pa))}var wa=undefined;var ga=lr(undefined);function _a(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Sa(n){var t=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},i=r.delay,e=void 0===i?0:i,o=r.duration,u=void 0===o?400:o,c=r.easing,f=void 0===c?jn:c,a=+getComputedStyle(n).opacity;return{delay:e,duration:u,easing:f,css:function(n){return _a(this,t),"opacity: ".concat(n*a)}.bind(this)}}function ja(n){return ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ja(n)}function Oa(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==ja(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==ja(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===ja(o)?o:String(o)),i)}var e,o}function Ea(n,t){return Ea=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Ea(n,t)}function Ta(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Aa(n);if(t){var e=Aa(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===ja(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ka(n)}(this,r)}}function ka(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Aa(n){return Aa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Aa(n)}function Ra(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ca(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return xa(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xa(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xa(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Ia(n){var t,r,i,e,o;return{c:function(){t=tt("div"),r=tt("div"),i=it(n[0]),at(r,"class","alert alert_danger"),at(t,"class","chat-error")},m:function(n,e){Kn(n,t,e),Yn(t,r),Yn(r,i),o=!0},p:function(n,t){var r=Ca(t,1)[0];(!o||1&r)&&st(i,n[0])},i:function(n){var t=this;o||(Nt(function(){Ra(this,t),e||(e=Kt(r,Sa,{duration:200},!0)),e.run(1)}.bind(this)),o=!0)},o:function(n){e||(e=Kt(r,Sa,{duration:200},!1)),e.run(0),o=!1},d:function(n){n&&Zn(t),n&&e&&e.end()}}}function Ma(n,t,r){var i,e=this;return Mn(n,ga,function(n){return Ra(this,e),r(0,i=n)}.bind(this)),Et(function(){var n=this;Ra(this,e),setTimeout(function(){Ra(this,n),Ln(ga,i=undefined,i)}.bind(this),5e3)}.bind(this)),[i]}ga.subscribe(function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,wa),Ar.setLayout({error:!!n})}.bind(undefined));var Pa=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Ea(n,t)}(o,n);var t,r,i,e=Ta(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(ka(t=e.call(this)),n,Ma,Ia,An,{}),t}return t=o,r&&Oa(t.prototype,r),i&&Oa(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Ua=Pa;function Na(n){return Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Na(n)}var Da=undefined;function Ba(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Na(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Na(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Na(o)?o:String(o)),i)}var e,o}function La(n,t){return La=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},La(n,t)}function $a(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Wa(n);if(t){var e=Wa(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===Na(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return za(n)}(this,r)}}function za(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Wa(n){return Wa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wa(n)}function Fa(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Ga(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ga(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ga(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function qa(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Ha=function(n){return qa(this,Da),{}}.bind(undefined),Ya=function(n){return qa(this,Da),{}}.bind(undefined);function Va(n){var t,r,e,o,u,c,f,a,s,l,h,v,d=n[2].content,b=Pn(d,n,n[1],Ya);return{c:function(){t=tt("div"),r=tt("div"),e=tt("div"),o=tt("i"),u=et(),c=tt("div"),b&&b.c(),f=et(),a=tt("div"),s=tt("i"),at(o,"class","icons-chat icons-chat_chat-big"),at(c,"class","chat-error-window__text"),at(e,"class","chat-error-window__content"),at(r,"class","chat-error-window ui"),at(s,"class","icons-chat icons-chat_close-gray"),at(a,"class","chat-error-window__close"),at(a,"title",i("close")),at(t,"class","chat-window"+(Dr?" chat-window_widget":""))},m:function(i,d){Kn(i,t,d),Yn(t,r),Yn(r,e),Yn(e,o),Yn(e,u),Yn(e,c),b&&b.m(c,null),Yn(t,f),Yn(t,a),Yn(a,s),l=!0,h||(v=[ut(a,"keyup",Xa),ut(a,"click",n[0])],h=!0)},p:function(n,t){var r=Fa(t,1)[0];b&&b.p&&(!l||2&r)&&Dn(b,d,n,n[1],l?Nn(d,n[1],r,Ha):Bn(n[1]),Ya)},i:function(n){l||(Xt(b,n),l=!0)},o:function(n){Qt(b,n),l=!1},d:function(n){n&&Zn(t),b&&b.d(n),h=!1,Tn(v)}}}var Xa=function(){qa(this,Da)}.bind(undefined);function Qa(n,t,r){var i=this,e=t.$$slots,o=void 0===e?{}:e,u=t.$$scope,c=Tt();return n.$$set=function(n){qa(this,i),"$$scope"in n&&r(1,u=n.$$scope)}.bind(this),[function(){wu(),c("close")},u,o]}var Ja=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&La(n,t)}(o,n);var t,r,i,e=$a(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(za(t=e.call(this)),n,Qa,Va,An,{}),t}return t=o,r&&Ba(t.prototype,r),i&&Ba(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Ka=Ja;function Za(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ns(n){var r=this,i=n.chatId,e=n.isDelete;n.userId===co&&(e?Fo(i):Ae(i).then(function(n){Za(this,r),n&&(Eu(n),Xo(n))}.bind(this))["catch"](function(n){Za(this,r),h.error(t.O,n)}.bind(this)))}function ts(n){return ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ts(n)}var rs=undefined;function is(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==ts(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==ts(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===ts(o)?o:String(o)),i)}var e,o}function es(n,t){return es=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},es(n,t)}function os(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=cs(n);if(t){var e=cs(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===ts(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return us(n)}(this,r)}}function us(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function cs(n){return cs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cs(n)}function fs(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return as(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return as(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function as(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function ss(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var ls=function(n){return ss(this,rs),{}}.bind(undefined),hs=function(n){return ss(this,rs),{}}.bind(undefined),vs=function(n){return ss(this,rs),{}}.bind(undefined),ds=function(n){return ss(this,rs),{}}.bind(undefined),bs=function(n){return ss(this,rs),{}}.bind(undefined),ys=function(n){return ss(this,rs),{}}.bind(undefined);function ps(n){var t,r,i=n[12].title,e=Pn(i,n,n[11],ys);return{c:function(){t=tt("div"),e&&e.c(),at(t,"class","chat-dialog__title")},m:function(n,i){Kn(n,t,i),e&&e.m(t,null),r=!0},p:function(n,t){e&&e.p&&(!r||2048&t)&&Dn(e,i,n,n[11],r?Nn(i,n[11],t,bs):Bn(n[11]),ys)},i:function(n){r||(Xt(e,n),r=!0)},o:function(n){Qt(e,n),r=!1},d:function(n){n&&Zn(t),e&&e.d(n)}}}function ms(n){var t,r,i=n[12].buttons,e=Pn(i,n,n[11],hs);return{c:function(){t=tt("div"),e&&e.c(),at(t,"class","chat-dialog__buttons")},m:function(n,i){Kn(n,t,i),e&&e.m(t,null),r=!0},p:function(n,t){e&&e.p&&(!r||2048&t)&&Dn(e,i,n,n[11],r?Nn(i,n[11],t,ls):Bn(n[11]),hs)},i:function(n){r||(Xt(e,n),r=!0)},o:function(n){Qt(e,n),r=!1},d:function(n){n&&Zn(t),e&&e.d(n)}}}function ws(n){var t,r,i,e,o,u,c,f,a,s,l,h,v,d=n[0]&&ps(n),b=n[12].content,y=Pn(b,n,n[11],ds),p=n[1]&&ms(n);return{c:function(){var a=this;t=tt("div"),r=et(),i=tt("div"),(e=tt("div")).innerHTML='<i class="icons-ux icons-ux_close-gray"></i>',o=et(),d&&d.c(),u=et(),c=tt("div"),y&&y.c(),f=et(),p&&p.c(),at(t,"class","chat-dialog__shadow"),at(e,"class","chat-dialog__close qa-dialog-close"),at(c,"class","chat-dialog__content"),at(i,"class","chat-dialog__container ui"),vt(i,"top",n[4]),vt(i,"left",n[5]),vt(i,"bottom",n[7]),vt(i,"right",n[6]),vt(i,"transform","translate3d("+n[8]+", "+n[9]+", 0)"),Nt(function(){return ss(this,a),n[13].call(i)}.bind(this))},m:function(s,b){Kn(s,t,b),Kn(s,r,b),Kn(s,i,b),Yn(i,e),Yn(i,o),d&&d.m(i,null),Yn(i,u),Yn(i,c),y&&y.m(c,null),Yn(i,f),p&&p.m(i,null),a=function(n,t){var r=this;"static"===getComputedStyle(n).position&&(n.style.position="relative");var i=tt("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;var e,o=bt();return o?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",e=ut(window,"message",function(n){gn(this,r),n.source===i.contentWindow&&t()}.bind(this))):(i.src="about:blank",i.onload=function(){gn(this,r),e=ut(i.contentWindow,"resize",t)}.bind(this)),Yn(n,i),function(){gn(this,r),(o||e&&i.contentWindow)&&e(),Zn(i)}.bind(this)}(i,n[13].bind(i)),l=!0,h||(v=[ut(t,"keyup",gs),ut(t,"click",n[10]),ut(e,"click",n[10]),ut(e,"keyup",_s)],h=!0)},p:function(n,t){var r=this,e=fs(t,1)[0];n[0]?d?(d.p(n,e),1&e&&Xt(d,1)):((d=ps(n)).c(),Xt(d,1),d.m(i,u)):d&&(Yt(),Qt(d,1,1,function(){ss(this,r),d=null}.bind(this)),Vt()),y&&y.p&&(!l||2048&e)&&Dn(y,b,n,n[11],l?Nn(b,n[11],e,vs):Bn(n[11]),ds),n[1]?p?(p.p(n,e),2&e&&Xt(p,1)):((p=ms(n)).c(),Xt(p,1),p.m(i,null)):p&&(Yt(),Qt(p,1,1,function(){ss(this,r),p=null}.bind(this)),Vt()),(!l||16&e)&&vt(i,"top",n[4]),(!l||32&e)&&vt(i,"left",n[5]),(!l||128&e)&&vt(i,"bottom",n[7]),(!l||64&e)&&vt(i,"right",n[6]),(!l||768&e)&&vt(i,"transform","translate3d("+n[8]+", "+n[9]+", 0)")},i:function(n){var t=this;l||(Xt(d),Xt(y,n),Xt(p),n&&Nt(function(){ss(this,t),s||(s=Kt(i,Sa,{duration:150},!0)),s.run(1)}.bind(this)),l=!0)},o:function(n){Qt(d),Qt(y,n),Qt(p),n&&(s||(s=Kt(i,Sa,{duration:150},!1)),s.run(0)),l=!1},d:function(n){n&&Zn(t),n&&Zn(r),n&&Zn(i),d&&d.d(),y&&y.d(n),p&&p.d(),a(),n&&s&&s.end(),h=!1,Tn(v)}}}var gs=function(){ss(this,rs)}.bind(undefined),_s=function(){ss(this,rs)}.bind(undefined);function Ss(n,t,r){var i,e,o=this,u=t.$$slots,c=void 0===u?{}:u,f=t.$$scope,a=t.withTitle,s=void 0===a||a,l=t.withButtons,h=void 0===l||l,v=Tt(),d="50%",b="50%",y="auto",p="auto",m="0",w="0";var g,_=Pf((function(){var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;n-16<=i?(r(5,b="".concat(8,"px")),r(6,y="".concat(8,"px")),r(8,m=0)):(r(5,b="50%"),r(6,y="auto"),r(8,m="".concat(Math.round(-1*(i/2+8)),"px"))),t-16<=e?(r(4,d="".concat(8,"px")),r(7,p="".concat(8,"px")),r(9,w=0)):(r(4,d="50%"),r(7,p="auto"),r(9,w="".concat(Math.round(-1*(e/2+8)),"px")))}),300);Et(function(){var n=this;return ss(this,o),window.addEventListener("resize",_),function(){ss(this,n),window.removeEventListener("resize",_)}.bind(this)}.bind(this)),g=function(){ss(this,o),_()}.bind(this),Ot().$$.after_update.push(g);var S=function(){ss(this,o),v("close")}.bind(this);return n.$$set=function(n){ss(this,o),"withTitle"in n&&r(0,s=n.withTitle),"withButtons"in n&&r(1,h=n.withButtons),"$$scope"in n&&r(11,f=n.$$scope)}.bind(this),[s,h,i,e,d,b,y,p,m,w,S,f,c,function(){i=this.offsetWidth,e=this.offsetHeight,r(2,i),r(3,e)}]}var js=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&es(n,t)}(o,n);var t,r,i,e=os(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(us(t=e.call(this)),n,Ss,ws,An,{withTitle:0,withButtons:1}),t}return t=o,r&&is(t.prototype,r),i&&is(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Os=js;function Es(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ts(n){return Ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ts(n)}function ks(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Ts(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Ts(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Ts(o)?o:String(o)),i)}var e,o}function As(n,t){return As=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},As(n,t)}function Rs(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=xs(n);if(t){var e=xs(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===Ts(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cs(n)}(this,r)}}function Cs(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function xs(n){return xs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xs(n)}function Is(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ms(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Ps(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ps(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ps(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Us(n){var t;return{c:function(){(t=tt("span")).textContent="".concat(i("deletion")),at(t,"slot","title")},m:function(n,r){Kn(n,t,r)},p:_n,d:function(n){n&&Zn(t)}}}function Ns(n){var t,r;return{c:function(){t=tt("div"),at(r=tt("div"),"class","chat-alert-text"),at(t,"slot","content")},m:function(i,e){Kn(i,t,e),Yn(t,r),r.innerHTML=n[0]},p:_n,d:function(n){n&&Zn(t)}}}function Ds(n){var t,r,e,o,u,c;return{c:function(){t=tt("span"),(r=tt("button")).textContent="".concat(i("cancel")),e=et(),(o=tt("button")).textContent="".concat(i("deleteUpper")),at(r,"class","button button_white qa-dialog-cancel"),at(o,"class","button button_red qa-dialog-ok"),at(t,"slot","buttons")},m:function(i,f){Kn(i,t,f),Yn(t,r),Yn(t,e),Yn(t,o),u||(c=[ut(r,"click",n[1]),ut(o,"click",n[2])],u=!0)},p:_n,d:function(n){n&&Zn(t),u=!1,Tn(c)}}}function Bs(n){var t,r;return(t=new Os({props:{$$slots:{buttons:[Ds],content:[Ns],title:[Us]},$$scope:{ctx:n}}})).$on("close",n[1]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i=Ms(r,1)[0],e={};128&i&&(e.$$scope={dirty:i,ctx:n}),t.$set(e)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function Ls(n,r,e){var o,u,c=this;Mn(n,iu,function(n){return Is(this,c),e(4,o=n)}.bind(this)),Mn(n,Ar,function(n){return Is(this,c),e(5,u=n)}.bind(this));var f="deleteChatConfirm",a=o.type===O.nt;switch(o.type){case O.tt:f="deletionTextGroup";break;case O.rt:f="deletionTextChannel"}function s(){Ln(Ar,u["delete"]=!1,u)}return[i(f,'<b>"'.concat(Zr(o.name),'"</b>')),s,function(){var n=this;ao?(!function(n){var t=this;new Promise(function(r,i){var e=this;if(Es(this,t),n){var o=J(n);Wr.send(S.kn,[o]).then(function(){Es(this,e),r("Success")}.bind(this))["catch"](function(n){Es(this,e),i(n)}.bind(this))}else i(new Error("Chat id is empty"))}.bind(this))}(o.chatId),o.type===O.rt?window.fz&&window.fz("event",{name:"MQL5+Chat+Channel+Delete",unit:"Type",value:o.isPublic?"public":"private"}):o.type===O.tt?window.fz&&window.fz("event",{name:"MQL5+Chat+Group+Delete",unit:"Type",value:o.isPublic?"public":"private"}):window.fz&&window.fz("track","MQL5+Chat+Delete"),s(),Ln(Ar,u.edit=!1,u)):a&&ge(o.chatId,co,0,!0).then(function(t){Is(this,n),ns(t),window.fz&&window.fz("track","MQL5+Chat+Delete"),Ln(iu,o.isSubscribed=N.Zt,o)}.bind(this))["catch"](function(r){Is(this,n),h.error(t.T,r)}.bind(this))}]}var $s=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&As(n,t)}(o,n);var t,r,i,e=Rs(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Cs(t=e.call(this)),n,Ls,Bs,An,{}),t}return t=o,r&&ks(t.prototype,r),i&&ks(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),zs=$s;function Ws(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Fs(n){var r=this;return Nu[n]||(Nu[n]=lr({userId:n}),ae([n]).then(function(n){var t=this;Ws(this,r);var i=(new Date).getTime();n.forEach(function(n){Ws(this,t),n.timestamp=i,Nu[n.userId].set(n)}.bind(this)),Uf()}.bind(this))["catch"](function(n){Ws(this,r),h.error(t.O,n)}.bind(this))),Nu[n]}function Gs(n){return d[n]?i(d[n]):"Unknown"}function qs(n){return qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},qs(n)}function Hs(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==qs(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==qs(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===qs(o)?o:String(o)),i)}var e,o}function Ys(n,t){return Ys=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Ys(n,t)}function Vs(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Qs(n);if(t){var e=Qs(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===qs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xs(n)}(this,r)}}function Xs(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Qs(n){return Qs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qs(n)}function Js(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ks(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Zs(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zs(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zs(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function nl(n,t,r){var i=n.slice();return i[3]=t[r],i}function tl(n){var t,r,i=n[3][0]+"";return{c:function(){t=tt("a"),r=it(i),at(t,"href",n[3][1]),at(t,"rel","noreferrer"),at(t,"target","_blank"),at(t,"title",n[3][0])},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:_n,d:function(n){n&&Zn(t)}}}function rl(n){for(var t,r=n[0],i=[],e=0;e<r.length;e+=1)i[e]=tl(nl(n,r,e));return{c:function(){for(var n=0;n<i.length;n+=1)i[n].c();t=ot()},m:function(n,r){for(var e=0;e<i.length;e+=1)i[e].m(n,r);Kn(n,t,r)},p:function(n,e){var o=Ks(e,1)[0];if(1&o){var u;for(r=n[0],u=0;u<r.length;u+=1){var c=nl(n,r,u);i[u]?i[u].p(c,o):(i[u]=tl(c),i[u].c(),i[u].m(t.parentNode,t))}for(;u<i.length;u+=1)i[u].d(1);i.length=r.length}},i:_n,o:_n,d:function(n){nt(i,n),n&&Zn(t)}}}function il(n,t,r){var i=this,e=t.links,o=e.split(","),u=[];return n.$$set=function(n){Js(this,i),"links"in n&&r(1,e=n.links)}.bind(this),o.forEach(function(n){Js(this,i),n=n.trim();for(var t="https://www.mql5.com/go?link=".concat(encodeURIComponent(n)),r=0,e=Ur.length;r<e;r++)if(n.indexOf(Ur[r])>-1){t=n;break}u.push([n,t])}.bind(this)),[u,e]}var el=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Ys(n,t)}(o,n);var t,r,i,e=Vs(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Xs(t=e.call(this)),n,il,rl,An,{links:1}),t}return t=o,r&&Hs(t.prototype,r),i&&Hs(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),ol=el;function ul(n){if(!n)return"0";var t=n.toFixed(2).split("."),r=t[0],i=t[1];return i=0===parseInt(i,10)?"":".".concat(i),Math.abs(parseInt(r,10))>=1e3&&(r=r.replace(/\B(?=(\d{3})+(?!\d))/g," ")),r+i}function cl(n){return cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},cl(n)}var fl=undefined;function al(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==cl(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==cl(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===cl(o)?o:String(o)),i)}var e,o}function sl(n,t){return sl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},sl(n,t)}function ll(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=vl(n);if(t){var e=vl(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===cl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hl(n)}(this,r)}}function hl(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function vl(n){return vl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vl(n)}function dl(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return bl(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bl(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bl(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function yl(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function pl(n){var t;return{c:function(){at(t=tt("i"),"class","icons-chat icons-chat_no-image")},m:function(n,r){Kn(n,t,r)},p:_n,d:function(n){n&&Zn(t)}}}function ml(n){var t,r;return{c:function(){Rn((t=tt("img")).src,r=n[1].avatar)||at(t,"src",r),at(t,"alt",""),at(t,"loading","lazy")},m:function(n,r){Kn(n,t,r)},p:function(n,i){2&i&&!Rn(t.src,r=n[1].avatar)&&at(t,"src",r)},d:function(n){n&&Zn(t)}}}function wl(n){var t,r,i=n[1].description+"";return{c:function(){t=tt("div"),r=it(i),at(t,"class","chat-info__desc")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,t){2&t&&i!==(i=n[1].description+"")&&st(r,i)},d:function(n){n&&Zn(t)}}}function gl(n){var t,r,e,o,u,c,f,a,s,l,h,v;return{c:function(){t=tt("div"),r=tt("div"),(e=tt("div")).textContent="".concat(i("notifications")),o=et(),u=tt("div"),c=tt("input"),a=et(),s=tt("label"),at(e,"class","chat-info__toggle-text"),ht(c,"checkbox"),at(c,"class","toggle-btn__checkbox"),at(c,"name","isMuted"),at(c,"id","chatIsMuted"),c.checked=f=!n[1].isMuted,at(s,"for","chatIsMuted"),at(s,"title",l=i(n[1].isMuted?"unmute":"mute")),at(u,"class","toggle-btn"),at(r,"class","chat-info__toggle"),at(t,"class","chat-info__item")},m:function(i,f){Kn(i,t,f),Yn(t,r),Yn(r,e),Yn(r,o),Yn(r,u),Yn(u,c),Yn(u,a),Yn(u,s),h||(v=ut(c,"change",n[13]),h=!0)},p:function(n,t){2&t&&f!==(f=!n[1].isMuted)&&(c.checked=f),2&t&&l!==(l=i(n[1].isMuted?"unmute":"mute"))&&at(s,"title",l)},d:function(n){n&&Zn(t),h=!1,v()}}}function _l(n){var t,r,e,o,u,c;return u=new ol({props:{links:n[1].links}}),{c:function(){t=tt("div"),(r=tt("div")).textContent="".concat(i("usefulLinks")),e=et(),o=tt("div"),rr(u.$$.fragment),at(r,"class","chat-info__label"),at(o,"class","chat-info__links"),at(t,"class","chat-info__item")},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(t,e),Yn(t,o),ir(u,o,null),c=!0},p:function(n,t){var r={};2&t&&(r.links=n[1].links),u.$set(r)},i:function(n){c||(Xt(u.$$.fragment,n),c=!0)},o:function(n){Qt(u.$$.fragment,n),c=!1},d:function(n){n&&Zn(t),er(u)}}}function Sl(n){var t,r,e,o,u,c,f,a,s,l,h,v,d=n[0]&&jl(n);return{c:function(){t=tt("div"),(r=tt("div")).textContent="".concat(i(n[9]?"urlGroup":"urlChannel")),e=et(),o=tt("div"),d&&d.c(),u=et(),c=tt("a"),f=it(n[2]),a=et(),(s=tt("span")).innerHTML='<i class="icons-chat icons-chat_copy"></i>',at(r,"class","chat-info__label"),at(c,"href",n[2]),at(s,"class","chat-info__copy"),at(o,"class","chat-info__invite-link"),at(t,"class","chat-info__item")},m:function(i,b){Kn(i,t,b),Yn(t,r),Yn(t,e),Yn(t,o),d&&d.m(o,null),Yn(o,u),Yn(o,c),Yn(c,f),Yn(o,a),Yn(o,s),l=!0,h||(v=[ut(s,"keyup",Rl),ut(s,"click",n[17])],h=!0)},p:function(n,t){var r=this;n[0]?d?(d.p(n,t),1&t&&Xt(d,1)):((d=jl(n)).c(),Xt(d,1),d.m(o,u)):d&&(Yt(),Qt(d,1,1,function(){yl(this,r),d=null}.bind(this)),Vt()),(!l||4&t)&&st(f,n[2]),(!l||4&t)&&at(c,"href",n[2])},i:function(n){l||(Xt(d),l=!0)},o:function(n){Qt(d),l=!1},d:function(n){n&&Zn(t),d&&d.d(),h=!1,Tn(v)}}}function jl(n){var t,r,e;return{c:function(){(t=tt("span")).textContent="".concat(i("copied")),at(t,"class","chat-info__copied")},m:function(n,r){Kn(n,t,r),e=!0},p:_n,i:function(n){var i=this;e||(Nt(function(){yl(this,i),r||(r=Kt(t,Sa,{},!0)),r.run(1)}.bind(this)),e=!0)},o:function(n){r||(r=Kt(t,Sa,{},!1)),r.run(0),e=!1},d:function(n){n&&Zn(t),n&&r&&r.end()}}}function Ol(n){var t,r,e;return{c:function(){(t=tt("a")).textContent="".concat(i("membersList")),at(t,"href","/")},m:function(i,o){Kn(i,t,o),r||(e=ut(t,"click",ct(n[18])),r=!0)},p:_n,d:function(n){n&&Zn(t),r=!1,e()}}}function El(n){var t,r,e,o,u,c,f,a,s,l,h,v,d,b,y,p,m,w,g,_,S,j,O,E,T,k=i("membersCount",ul(n[1].countMembers))+"";function A(n,t){return n[1].avatar?ml:pl}var R=A(n),x=R(n),I=n[1].description&&wl(n),M=n[1].isSubscribed&&gl(n),P=n[1].links&&_l(n),U=n[1].inviteLink&&Sl(n),N=(n[10]||n[1].isSubscribed&&(n[9]||n[8]&&n[1].perms&C.Ut))&&Ol(n),D=n[10]&&function(n){var t,r,e,o,u,c,f,a,s,l,h,v,d,b,y,p=n[1].authorName+"",m=bi({date:n[1].created})+"",w=Gs(n[1].language)+"";return{c:function(){t=tt("div"),(r=tt("div")).textContent="".concat(i("owner")),e=et(),o=tt("a"),u=it(p),c=et(),f=tt("div"),(a=tt("div")).textContent="".concat(i("created")),s=et(),l=it(m),h=et(),v=tt("div"),(d=tt("div")).textContent="".concat(i("chatLanguage")),b=et(),y=it(w),at(r,"class","chat-info__label"),at(o,"href",n[3]),at(o,"target","_blank"),at(t,"class","chat-info__item"),at(a,"class","chat-info__label"),at(f,"class","chat-info__item"),at(d,"class","chat-info__label"),at(v,"class","chat-info__item")},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(t,e),Yn(t,o),Yn(o,u),Kn(n,c,i),Kn(n,f,i),Yn(f,a),Yn(f,s),Yn(f,l),Kn(n,h,i),Kn(n,v,i),Yn(v,d),Yn(v,b),Yn(v,y)},p:function(n,t){2&t&&p!==(p=n[1].authorName+"")&&st(u,p),8&t&&at(o,"href",n[3]),2&t&&m!==(m=bi({date:n[1].created})+"")&&st(l,m),2&t&&w!==(w=Gs(n[1].language)+"")&&st(y,w)},d:function(n){n&&Zn(t),n&&Zn(c),n&&Zn(f),n&&Zn(h),n&&Zn(v)}}}(n);return{c:function(){t=tt("div"),r=tt("div"),e=tt("div"),x.c(),o=et(),u=tt("div"),c=tt("div"),f=it(n[11]),a=et(),I&&I.c(),s=et(),l=tt("div"),M&&M.c(),h=et(),v=tt("div"),d=tt("div"),b=it(n[4]),y=et(),p=it(n[5]),m=et(),P&&P.c(),w=et(),U&&U.c(),g=et(),_=tt("div"),S=tt("div"),j=it(k),O=et(),N&&N.c(),E=et(),D&&D.c(),at(e,"class","chat-info__avatar"),at(c,"class","chat-info__title"),at(c,"title",n[11]),at(u,"class","chat-info__content"),at(r,"class","chat-info"),at(d,"class","chat-info__label"),at(v,"class","chat-info__item"),at(S,"class","chat-info__label"),at(_,"class","chat-info__item"),at(l,"class","chat-info-list"),at(t,"slot","content")},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(r,e),x.m(e,null),Yn(r,o),Yn(r,u),Yn(u,c),Yn(c,f),Yn(u,a),I&&I.m(u,null),Yn(t,s),Yn(t,l),M&&M.m(l,null),Yn(l,h),Yn(l,v),Yn(v,d),Yn(d,b),Yn(v,y),Yn(v,p),Yn(l,m),P&&P.m(l,null),Yn(l,w),U&&U.m(l,null),Yn(l,g),Yn(l,_),Yn(_,S),Yn(S,j),Yn(_,O),N&&N.m(_,null),Yn(l,E),D&&D.m(l,null),T=!0},p:function(n,t){var r=this;R===(R=A(n))&&x?x.p(n,t):(x.d(1),(x=R(n))&&(x.c(),x.m(e,null))),n[1].description?I?I.p(n,t):((I=wl(n)).c(),I.m(u,null)):I&&(I.d(1),I=null),n[1].isSubscribed?M?M.p(n,t):((M=gl(n)).c(),M.m(l,h)):M&&(M.d(1),M=null),(!T||16&t)&&st(b,n[4]),(!T||32&t)&&st(p,n[5]),n[1].links?P?(P.p(n,t),2&t&&Xt(P,1)):((P=_l(n)).c(),Xt(P,1),P.m(l,w)):P&&(Yt(),Qt(P,1,1,function(){yl(this,r),P=null}.bind(this)),Vt()),n[1].inviteLink?U?(U.p(n,t),2&t&&Xt(U,1)):((U=Sl(n)).c(),Xt(U,1),U.m(l,g)):U&&(Yt(),Qt(U,1,1,function(){yl(this,r),U=null}.bind(this)),Vt()),(!T||2&t)&&k!==(k=i("membersCount",ul(n[1].countMembers))+"")&&st(j,k),n[10]||n[1].isSubscribed&&(n[9]||n[8]&&n[1].perms&C.Ut)?N?N.p(n,t):((N=Ol(n)).c(),N.m(_,null)):N&&(N.d(1),N=null),n[10]&&D.p(n,t)},i:function(n){T||(Xt(P),Xt(U),T=!0)},o:function(n){Qt(P),Qt(U),T=!1},d:function(n){n&&Zn(t),x.d(),I&&I.d(),M&&M.d(),P&&P.d(),U&&U.d(),N&&N.d(),D&&D.d()}}}function Tl(n){var t,r,e,o,u=i("chatEdit")+"";return{c:function(){t=tt("button"),r=it(u),at(t,"class","button button_white"),at(t,"title",i("chatEdit"))},m:function(i,u){Kn(i,t,u),Yn(t,r),e||(o=ut(t,"click",ct(n[15])),e=!0)},p:_n,d:function(n){n&&Zn(t),e=!1,o()}}}function kl(n){var t,r,e=(n[10]||n[1].perms&C.Nt)&&Tl(n),o=n[10]&&function(n){var t,r,e,o,u=i("deleteUpper")+"";return{c:function(){t=tt("button"),r=it(u),at(t,"class","button button_white-and-red"),at(t,"title",i("deleteUpper"))},m:function(i,u){Kn(i,t,u),Yn(t,r),e||(o=ut(t,"click",ct(n[16])),e=!0)},p:_n,d:function(n){n&&Zn(t),e=!1,o()}}}(n);return{c:function(){t=tt("div"),e&&e.c(),r=et(),o&&o.c(),at(t,"slot","buttons"),at(t,"class","chat-info__buttons")},m:function(n,i){Kn(n,t,i),e&&e.m(t,null),Yn(t,r),o&&o.m(t,null)},p:function(n,i){n[10]||n[1].perms&C.Nt?e?e.p(n,i):((e=Tl(n)).c(),e.m(t,r)):e&&(e.d(1),e=null),n[10]&&o.p(n,i)},d:function(n){n&&Zn(t),e&&e.d(),o&&o.d()}}}function Al(n){var t,r;return(t=new Os({props:{withButtons:n[10]||!!(n[1].perms&C.Nt),withTitle:!1,$$slots:{buttons:[kl],content:[El]},$$scope:{ctx:n}}})).$on("close",n[19]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i=dl(r,1)[0],e={};2&i&&(e.withButtons=n[10]||!!(n[1].perms&C.Nt)),2097343&i&&(e.$$scope={dirty:i,ctx:n}),t.$set(e)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}var Rl=function(){yl(this,fl)}.bind(undefined);function Cl(n,t,r){var e,o,u,c=this,f=_n,a=function(){var n=this;return yl(this,c),f(),f=xn(s,function(t){return yl(this,n),r(14,o=t)}.bind(this)),s}.bind(this);Mn(n,iu,function(n){return yl(this,c),r(1,e=n)}.bind(this)),Mn(n,Ar,function(n){return yl(this,c),r(7,u=n)}.bind(this)),n.$$.on_destroy.push(function(){return yl(this,c),f()}.bind(this));var s,l=e.type===O.rt,h=e.type===O.tt,v=ao,d=e.name,b=Tt(),y=!1,p="",m="",w="",g="",_=function(){yl(this,c),b("close")}.bind(this);var S=function(){yl(this,c),Su(iu),_()}.bind(this),E=function(){yl(this,c),Ln(Ar,u["delete"]=!0,u),_()}.bind(this),T=function(){yl(this,c),function(n){var t=document.createElement("textarea");if(t.value=n,t.style.position="fixed",t.style.left="9999px",document.body.appendChild(t),t.focus(),Be){var r=document.createRange();r.selectNodeContents(t);var i=window.getSelection();i.removeAllRanges(),i.addRange(r),t.setSelectionRange(0,999999)}else t.select();document.execCommand("copy"),t.blur(),document.body.removeChild(t)}(p),r(0,y=!0)}.bind(this),k=function(){yl(this,c),Ln(Ar,u.listMembers=!0,u),_()}.bind(this);return n.$$.update=function(){var t=this;if(yl(this,c),2&n.$$.dirty){var u=e.isPublic;h?(r(4,w=i(u?"publicChat":"privateChat")),r(5,g=i(u?"publicChatDesc":"privateChatDesc"))):(r(4,w=i(u?"publicChannel":"privateChannel")),r(5,g=i(u?"publicChannelDesc":"privateChannelDesc")))}2&n.$$.dirty&&r(2,p="https://www.mql5.com/".concat(Gr,"/").concat(l?"channels":"groups","/").concat(e.inviteLink)),16386&n.$$.dirty&&v&&!o&&a(r(6,s=Fs(e.authorId))),16384&n.$$.dirty&&o&&o.userLogin&&r(3,m="/".concat(Gr,"/users/").concat(o.userLogin)),1&n.$$.dirty&&y&&setTimeout(function(){yl(this,t),r(0,y=!1)}.bind(this),2e3)}.bind(this),[y,e,p,m,w,g,s,u,l,h,v,d,_,function(n){var t=this;if(n&&n.target){var r=n.target.checked?0:1;Ke(e.chatId,r).then(function(n){yl(this,t),n===j.Xn&&nu(e,r)}.bind(this))}},o,S,E,T,k,function(t){kt.call(this,n,t)}]}var xl=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&sl(n,t)}(o,n);var t,r,i,e=ll(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(hl(t=e.call(this)),n,Cl,Al,An,{}),t}return t=o,r&&al(t.prototype,r),i&&al(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Il=xl;function Ml(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Pl=500,Ul=0,Nl=3e5,Dl=lr([]);function Bl(){var n=this;return(new Date).getTime()-Ul>Nl&&Se(B.ur,Pl).then(function(t){Ml(this,n),Ul=(new Date).getTime(),Dl.set(t)}.bind(this))["catch"](function(r){Ml(this,n),h.error(t.k,r)}.bind(this)),Dl}function Ll(n,t,r){for(var i=[],e=0,o=r.length;e<o&&!(i.length>t);e++){var u=r[e];("userName"in u&&u.userName&&~u.userName.toLowerCase().indexOf(n)||"userLogin"in u&&u.userLogin&&~u.userLogin.toLowerCase().indexOf(n))&&i.push(u)}return i}function $l(n){return $l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$l(n)}function zl(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==$l(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==$l(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===$l(o)?o:String(o)),i)}var e,o}function Wl(n,t){return Wl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Wl(n,t)}function Fl(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=ql(n);if(t){var e=ql(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===$l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gl(n)}(this,r)}}function Gl(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ql(n){return ql=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ql(n)}function Hl(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Yl(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Vl(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vl(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vl(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Xl(n){var t,r,i;return{c:function(){t=tt("span"),r=it(n[2]),at(t,"class",i="member-block__label"+n[3]),at(t,"title",n[1])},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,e){4&e&&st(r,n[2]),8&e&&i!==(i="member-block__label"+n[3])&&at(t,"class",i),2&e&&at(t,"title",n[1])},d:function(n){n&&Zn(t)}}}function Ql(n){var t,r=n[0]>0&&Xl(n);return{c:function(){r&&r.c(),t=ot()},m:function(n,i){r&&r.m(n,i),Kn(n,t,i)},p:function(n,i){var e=Yl(i,1)[0];n[0]>0?r?r.p(n,e):((r=Xl(n)).c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:_n,o:_n,d:function(n){r&&r.d(n),n&&Zn(t)}}}function Jl(n,t,r){var e=this,o=t.isAuthor,u=void 0!==o&&o,c=t.perms,f=void 0===c?0:c,a="",s="",l="";return n.$$set=function(n){Hl(this,e),"isAuthor"in n&&r(4,u=n.isAuthor),"perms"in n&&r(0,f=n.perms)}.bind(this),n.$$.update=function(){if(Hl(this,e),17&n.$$.dirty)if(u)r(2,s=i("owner")),r(3,l=" member-block__label_owner");else switch(f){case x:case C.Pt:r(1,a=i("canWriteMessages")),r(2,s=i("writer")),r(3,l=" member-block__label_writer");break;case I:case C.Ut:r(2,s=i("moderator")),r(3,l=" member-block__label_moderator");break;case M:case C.Nt:r(2,s=i("admin")),r(3,l=" member-block__label_admin")}}.bind(this),[f,a,s,l,u]}var Kl=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Wl(n,t)}(o,n);var t,r,i,e=Fl(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Gl(t=e.call(this)),n,Jl,Ql,An,{isAuthor:4,perms:0}),t}return t=o,r&&zl(t.prototype,r),i&&zl(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Zl=Kl;function nh(n,t,r){return"rgba("+function(n,t,r){var i,e,o;isFinite(n)||(n=0),isFinite(t)||(t=0),isFinite(r)||(r=0),(n/=60)<0&&(n=6- -n%6),n%=6,t=Math.max(0,Math.min(1,t/100)),r=Math.max(0,Math.min(1,r/100));var u=(1-Math.abs(2*r-1))*t,c=u*(1-Math.abs(n%2-1));n<1?(i=u,e=c,o=0):n<2?(i=c,e=u,o=0):n<3?(i=0,e=u,o=c):n<4?(i=0,e=c,o=u):n<5?(i=c,e=0,o=u):(i=u,e=0,o=c);var f=r-u/2;return[i=Math.round(255*(i+f)),e=Math.round(255*(e+f)),o=Math.round(255*(o+f))]}(77*n%360,(t||58)+n%20,(r||69)+n%20).join(",")+",1)"}function th(n){return th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},th(n)}function rh(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==th(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==th(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===th(o)?o:String(o)),i)}var e,o}function ih(n,t){return ih=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},ih(n,t)}function eh(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=uh(n);if(t){var e=uh(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===th(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oh(n)}(this,r)}}function oh(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function uh(n){return uh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uh(n)}function ch(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function fh(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return ah(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ah(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ah(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function sh(n){var t,r,i=n[2][0]+"";return{c:function(){t=tt("span"),r=it(i),at(t,"class","chat-avatar__text")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,t){4&t&&i!==(i=n[2][0]+"")&&st(r,i)},d:function(n){n&&Zn(t)}}}function lh(n){var t,r;return{c:function(){Rn((t=tt("img")).src,r=n[0].userAvatar)||at(t,"src",r),at(t,"alt",""),at(t,"title",n[2]),at(t,"width",n[1]),at(t,"height",n[1]),at(t,"loading","lazy")},m:function(n,r){Kn(n,t,r)},p:function(n,i){1&i&&!Rn(t.src,r=n[0].userAvatar)&&at(t,"src",r),4&i&&at(t,"title",n[2]),2&i&&at(t,"width",n[1]),2&i&&at(t,"height",n[1])},d:function(n){n&&Zn(t)}}}function hh(n){var t;function r(n,t){return n[0].userAvatar?lh:sh}var i=r(n),e=i(n);return{c:function(){t=tt("span"),e.c(),at(t,"class","chat-avatar"),vt(t,"background",n[3])},m:function(n,r){Kn(n,t,r),e.m(t,null)},p:function(n,o){var u=fh(o,1)[0];i===(i=r(n))&&e?e.p(n,u):(e.d(1),(e=i(n))&&(e.c(),e.m(t,null))),8&u&&vt(t,"background",n[3])},i:_n,o:_n,d:function(n){n&&Zn(t),e.d()}}}function vh(n,t,r){var e=this,o=t.data,u=t.size,c=void 0===u?40:u,f="",a="#4a76b8";return n.$$set=function(n){ch(this,e),"data"in n&&r(0,o=n.data),"size"in n&&r(1,c=n.size)}.bind(this),n.$$.update=function(){ch(this,e),1&n.$$.dirty&&(r(2,f=o.userName||"x"),o.isDeleted&&r(2,f=i("deletedAccount")),r(3,a=o.userAvatar?"#fff":nh(Z(o.userId),undefined,undefined)))}.bind(this),[o,c,f,a]}var dh=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&ih(n,t)}(o,n);var t,r,i,e=eh(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(oh(t=e.call(this)),n,vh,hh,An,{data:0,size:1}),t}return t=o,r&&rh(t.prototype,r),i&&rh(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),bh=dh;function yh(n){return yh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},yh(n)}var ph=undefined;function mh(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==yh(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==yh(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===yh(o)?o:String(o)),i)}var e,o}function wh(n,t){return wh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},wh(n,t)}function gh(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Sh(n);if(t){var e=Sh(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===yh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _h(n)}(this,r)}}function _h(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Sh(n){return Sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sh(n)}function jh(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Oh(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Eh(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Eh(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eh(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Th(n){var t,r;return t=new Zl({props:{perms:n[2].perms,isAuthor:n[2].isAuthor}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};4&r&&(i.perms=n[2].perms),4&r&&(i.isAuthor=n[2].isAuthor),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function kh(n){var t,r,i=n[4]&&Ah(n),e=n[3]&&Rh(n);return{c:function(){t=tt("span"),i&&i.c(),r=et(),e&&e.c(),at(t,"class","member-block__tools")},m:function(n,o){Kn(n,t,o),i&&i.m(t,null),Yn(t,r),e&&e.m(t,null)},p:function(n,o){n[4]?i?i.p(n,o):((i=Ah(n)).c(),i.m(t,r)):i&&(i.d(1),i=null),n[3]?e?e.p(n,o):((e=Rh(n)).c(),e.m(t,null)):e&&(e.d(1),e=null)},d:function(n){n&&Zn(t),i&&i.d(),e&&e.d()}}}function Ah(n){var t,r,e;return{c:function(){at(t=tt("i"),"class","member-block__edit icons-chat icons-chat_edit"),at(t,"title",i("edit"))},m:function(i,o){Kn(i,t,o),r||(e=[ut(t,"keyup",Ih),ut(t,"click",ct(n[8]))],r=!0)},p:_n,d:function(n){n&&Zn(t),r=!1,Tn(e)}}}function Rh(n){var t,r,e;return{c:function(){at(t=tt("i"),"class","member-block__close icons-chat icons-chat_close"),at(t,"title",i("delete"))},m:function(i,o){Kn(i,t,o),r||(e=[ut(t,"keyup",Mh),ut(t,"click",ct(n[9]))],r=!0)},p:_n,d:function(n){n&&Zn(t),r=!1,Tn(e)}}}function Ch(n){var t,r,e,o,u,c,f,a,s,l,h,v,d=(n[2].userName?n[2].userName:n[2].isDeleted?i("deletedAccount"):"")+"";e=new bh({props:{data:n[2],size:xh}});var b="perms"in n[2]&&Th(n),y=(!("isAuthor"in n[2])||!n[2].isAuthor)&&(n[3]||n[4])&&kh(n);return{c:function(){t=tt("div"),r=tt("a"),rr(e.$$.fragment),o=et(),u=tt("a"),c=it(d),f=et(),b&&b.c(),a=et(),y&&y.c(),at(r,"target","_blank"),at(r,"href",n[5]),at(r,"class","member-block__avatar"),at(u,"target","_blank"),at(u,"href",n[5]),at(u,"class","member-block__name"),at(t,"class",s="member-block"+(n[3]?" member-block_width-delete":"")+(n[4]?" member-block_width-edit":""))},m:function(i,s){Kn(i,t,s),Yn(t,r),ir(e,r,null),Yn(t,o),Yn(t,u),Yn(u,c),Yn(u,f),b&&b.m(u,null),Yn(u,a),y&&y.m(u,null),l=!0,h||(v=[ut(r,"click",n[6]),ut(u,"click",n[6])],h=!0)},p:function(n,r){var o=this,f=Oh(r,1)[0],h={};4&f&&(h.data=n[2]),e.$set(h),(!l||4&f)&&d!==(d=(n[2].userName?n[2].userName:n[2].isDeleted?i("deletedAccount"):"")+"")&&st(c,d),"perms"in n[2]?b?(b.p(n,f),4&f&&Xt(b,1)):((b=Th(n)).c(),Xt(b,1),b.m(u,a)):b&&(Yt(),Qt(b,1,1,function(){jh(this,o),b=null}.bind(this)),Vt()),"isAuthor"in n[2]&&n[2].isAuthor||!n[3]&&!n[4]?y&&(y.d(1),y=null):y?y.p(n,f):((y=kh(n)).c(),y.m(u,null)),(!l||24&f&&s!==(s="member-block"+(n[3]?" member-block_width-delete":"")+(n[4]?" member-block_width-edit":"")))&&at(t,"class",s)},i:function(n){l||(Xt(e.$$.fragment,n),Xt(b),l=!0)},o:function(n){Qt(e.$$.fragment,n),Qt(b),l=!1},d:function(n){n&&Zn(t),er(e),b&&b.d(),y&&y.d(),h=!1,Tn(v)}}}var xh=30,Ih=function(){jh(this,ph)}.bind(undefined),Mh=function(){jh(this,ph)}.bind(undefined);function Ph(n,t,r){var i=this,e=t.member,o=t.canDelete,u=void 0!==o&&o,c=t.canEdit,f=void 0!==c&&c,a=t.toEdit,s=void 0===a?undefined:a,l=t.toDelete,h=void 0===l?undefined:l,v=t.linkPreventDefault,d=void 0!==v&&v,b=Tt(),y=e.userLogin?"/".concat(Gr,"/users/").concat((e.userLogin||"").toLowerCase()):undefined;var p=function(){jh(this,i),r(0,s=e)}.bind(this),m=function(){jh(this,i),r(1,h=e)}.bind(this);return n.$$set=function(n){jh(this,i),"member"in n&&r(2,e=n.member),"canDelete"in n&&r(3,u=n.canDelete),"canEdit"in n&&r(4,f=n.canEdit),"toEdit"in n&&r(0,s=n.toEdit),"toDelete"in n&&r(1,h=n.toDelete),"linkPreventDefault"in n&&r(7,d=n.linkPreventDefault)}.bind(this),[s,h,e,u,f,y,function(n){d&&n.preventDefault(),b("click")},d,p,m]}var Uh=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&wh(n,t)}(o,n);var t,r,i,e=gh(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(_h(t=e.call(this)),n,Ph,Ch,An,{member:2,canDelete:3,canEdit:4,toEdit:0,toDelete:1,linkPreventDefault:7}),t}return t=o,r&&mh(t.prototype,r),i&&mh(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Nh=Uh;function Dh(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Bh={};function Lh(n,r,i){var e=this,o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined,u=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1,c=arguments.length>5&&arguments[5]!==undefined?arguments[5]:[];n&&(u>H/20?i&&i(c):me(n,o,20).then(function(t){var o=this,f=t.data;if(Dh(this,e),f&&f.users&&f.users.length){f.users.forEach(function(n){Dh(this,o);var t=n.user,i=t.userId,e=t.userName,u=t.userLogin,f=t.userAvatar,a=t.isDeleted,s=r===i;c.push({isAuthor:s,perms:n.perms,userId:i,userName:e,userLogin:u,userAvatar:f,isDeleted:a})}.bind(this));var a=f.users[f.users.length-1].user.userId;Lh(n,r,i,a,++u,c)}else i&&i(c)}.bind(this))["catch"](function(n){Dh(this,e),h.error(t.k,n),i&&i(c)}.bind(this)))}function $h(n,t){var r=this;return Bh[n]||(Bh[n]=lr([]),Lh(n,t,function(i){Dh(this,r),Bh[n].set(function(n,t){var r=this;return n.sort(function(n,i){Dh(this,r);var e=n.userName||n.userLogin||"",o=i.userName||n.userLogin||"";return n.userId===t||n.perms>i.perms?-1:n.perms<i.perms?1:e.localeCompare(o)}.bind(this)),n}(i,t))}.bind(this))),Bh[n]}function zh(n){return zh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zh(n)}var Wh=undefined;function Fh(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==zh(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==zh(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===zh(o)?o:String(o)),i)}var e,o}function Gh(n,t){return Gh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Gh(n,t)}function qh(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Yh(n);if(t){var e=Yh(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===zh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hh(n)}(this,r)}}function Hh(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Yh(n){return Yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yh(n)}function Vh(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Xh(n,t,r){var i=n.slice();return i[28]=t[r],i}function Qh(n,t,r){var i=n.slice();return i[31]=t[r],i}function Jh(n,t,r){var i=n.slice();return i[28]=t[r],i}var Kh=function(n){return Vh(this,Wh),{}}.bind(undefined),Zh=function(n){return Vh(this,Wh),{}}.bind(undefined);function nv(n){var t;return{c:function(){(t=tt("div")).textContent="".concat(i("foundEmpty")),at(t,"class","form-members-list__result-text")},m:function(n,r){Kn(n,t,r)},p:_n,i:_n,o:_n,d:function(n){n&&Zn(t)}}}function tv(n){for(var t,r,e,o,u=this,c=[],f=new Map,a=n[2],s=function(n){return Vh(this,u),n[28].userId}.bind(this),l=0;l<a.length;l+=1){var h=Jh(n,a,l),v=s(h);f.set(v,c[l]=iv(v,h))}return{c:function(){(t=tt("div")).textContent="".concat(i("mql5Members")),r=et();for(var n=0;n<c.length;n+=1)c[n].c();e=ot(),at(t,"class","form-members-list__title")},m:function(n,i){Kn(n,t,i),Kn(n,r,i);for(var u=0;u<c.length;u+=1)c[u].m(n,i);Kn(n,e,i),o=!0},p:function(n,t){6&t[0]&&(a=n[2],Yt(),c=nr(c,t,s,1,n,a,f,e.parentNode,Zt,iv,e,Jh),Vt())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)Xt(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Qt(c[t]);o=!1},d:function(n){n&&Zn(t),n&&Zn(r);for(var i=0;i<c.length;i+=1)c[i].d(n);n&&Zn(e)}}}function rv(n){var t;return{c:function(){(t=tt("div")).textContent="".concat(i("emptyAddMember")),at(t,"class","form-members-list__result-text")},m:function(n,r){Kn(n,t,r)},p:_n,i:_n,o:_n,d:function(n){n&&Zn(t)}}}function iv(n,t){var r,i,e;return(i=new Nh({props:{linkPreventDefault:!0,member:t[28]}})).$on("click",(function(){return t[20](t[28])})),{key:n,first:null,c:function(){r=ot(),rr(i.$$.fragment),this.first=r},m:function(n,t){Kn(n,r,t),ir(i,n,t),e=!0},p:function(n,r){t=n;var e={};4&r[0]&&(e.member=t[28]),i.$set(e)},i:function(n){e||(Xt(i.$$.fragment,n),e=!0)},o:function(n){Qt(i.$$.fragment,n),e=!1},d:function(n){n&&Zn(r),er(i,n)}}}function ev(n){for(var t,r,e,o,u=this,c=[],f=new Map,a=n[4],s=function(n){return Vh(this,u),n[31].userId}.bind(this),l=0;l<a.length;l+=1){var h=Qh(n,a,l),v=s(h);f.set(v,c[l]=ov(v,h))}return{c:function(){(t=tt("div")).textContent="".concat(i("friends")),r=et();for(var n=0;n<c.length;n+=1)c[n].c();e=ot(),at(t,"class","form-members-list__title")},m:function(n,i){Kn(n,t,i),Kn(n,r,i);for(var u=0;u<c.length;u+=1)c[u].m(n,i);Kn(n,e,i),o=!0},p:function(n,t){18&t[0]&&(a=n[4],Yt(),c=nr(c,t,s,1,n,a,f,e.parentNode,Zt,ov,e,Qh),Vt())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)Xt(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Qt(c[t]);o=!1},d:function(n){n&&Zn(t),n&&Zn(r);for(var i=0;i<c.length;i+=1)c[i].d(n);n&&Zn(e)}}}function ov(n,t){var r,i,e;return(i=new Nh({props:{linkPreventDefault:!0,member:t[31]}})).$on("click",(function(){return t[21](t[31])})),{key:n,first:null,c:function(){r=ot(),rr(i.$$.fragment),this.first=r},m:function(n,t){Kn(n,r,t),ir(i,n,t),e=!0},p:function(n,r){t=n;var e={};16&r[0]&&(e.member=t[31]),i.$set(e)},i:function(n){e||(Xt(i.$$.fragment,n),e=!0)},o:function(n){Qt(i.$$.fragment,n),e=!1},d:function(n){n&&Zn(r),er(i,n)}}}function uv(n,t){var r,i,e,o,u=this;function c(n){t[22](n)}var f={linkPreventDefault:!0,member:t[28],canDelete:!0};return void 0!==t[3]&&(f.toDelete=t[3]),i=new Nh({props:f}),Rt.push(function(){return Vh(this,u),tr(i,"toDelete",c)}.bind(this)),{key:n,first:null,c:function(){r=ot(),rr(i.$$.fragment),this.first=r},m:function(n,t){Kn(n,r,t),ir(i,n,t),o=!0},p:function(n,r){var o=this;t=n;var u={};2&r[0]&&(u.member=t[28]),!e&&8&r[0]&&(e=!0,u.toDelete=t[3],Dt(function(){return Vh(this,o),e=!1}.bind(this))),i.$set(u)},i:function(n){o||(Xt(i.$$.fragment,n),o=!0)},o:function(n){Qt(i.$$.fragment,n),o=!1},d:function(n){n&&Zn(r),er(i,n)}}}function cv(n){var t,r,i;return{c:function(){t=tt("div"),r=tt("div"),i=it(n[5]),at(r,"class","alert alert_danger"),at(t,"class","form-members-add__errors")},m:function(n,e){Kn(n,t,e),Yn(t,r),Yn(r,i)},p:function(n,t){32&t[0]&&st(i,n[5])},d:function(n){n&&Zn(t)}}}function fv(n){var t,r,e,o,u,c,f,a,s,l,h,v,d,b,y,p,m,w,g,_,S,j,O,E=this,T=i("selectedMembers",n[1].length)+"",k=[],A=new Map,R=n[18].header,C=Pn(R,n,n[24],Zh),x=[rv,tv,nv],I=[];function M(n,t){return n[0]?n[2].length?1:2:0}h=M(n),v=I[h]=x[h](n);for(var P=!n[0]&&n[4].length&&ev(n),U=n[1],N=function(n){return Vh(this,E),n[28].userId}.bind(this),D=0;D<U.length;D+=1){var B=Xh(n,U,D),L=N(B);A.set(L,k[D]=uv(L,B))}var $=n[5]&&cv(n);return{c:function(){t=tt("div"),C&&C.c(),r=et(),e=tt("div"),o=tt("div"),u=tt("div"),c=tt("i"),f=et(),a=tt("input"),s=et(),l=tt("div"),v.c(),d=et(),P&&P.c(),b=et(),y=tt("div"),p=tt("div"),m=it(T),w=et(),g=tt("div");for(var n=0;n<k.length;n+=1)k[n].c();_=et(),$&&$.c(),at(c,"class","icons-chat icons-chat_search-gray"),ht(a,"text"),at(a,"class","input"),at(a,"placeholder",i("searchMembers")),at(u,"class","chat-members-search"),at(l,"class","form-members-list"),at(o,"class","form-members-add__left-part"),at(p,"class","form-members-selected__title"),at(g,"class","form-members-list"),at(y,"class","form-members-add__right-part"),at(e,"class","form-members-add__content"),at(t,"slot","content"),at(t,"class","form-members-add")},m:function(i,v){Kn(i,t,v),C&&C.m(t,null),Yn(t,r),Yn(t,e),Yn(e,o),Yn(o,u),Yn(u,c),Yn(u,f),Yn(u,a),lt(a,n[0]),Yn(o,s),Yn(o,l),I[h].m(l,null),Yn(l,d),P&&P.m(l,null),Yn(e,b),Yn(e,y),Yn(y,p),Yn(p,m),Yn(y,w),Yn(y,g);for(var E=0;E<k.length;E+=1)k[E].m(g,null);Yn(e,_),$&&$.m(e,null),S=!0,j||(O=ut(a,"input",n[19]),j=!0)},p:function(n,t){var r=this;C&&C.p&&(!S||16777216&t[0])&&Dn(C,R,n,n[24],S?Nn(R,n[24],t,Kh):Bn(n[24]),Zh),1&t[0]&&a.value!==n[0]&&lt(a,n[0]);var o=h;(h=M(n))===o?I[h].p(n,t):(Yt(),Qt(I[o],1,1,function(){Vh(this,r),I[o]=null}.bind(this)),Vt(),(v=I[h])?v.p(n,t):(v=I[h]=x[h](n)).c(),Xt(v,1),v.m(l,d)),!n[0]&&n[4].length?P?(P.p(n,t),17&t[0]&&Xt(P,1)):((P=ev(n)).c(),Xt(P,1),P.m(l,null)):P&&(Yt(),Qt(P,1,1,function(){Vh(this,r),P=null}.bind(this)),Vt()),(!S||2&t[0])&&T!==(T=i("selectedMembers",n[1].length)+"")&&st(m,T),10&t[0]&&(U=n[1],Yt(),k=nr(k,t,N,1,n,U,A,g,Zt,uv,null,Xh),Vt()),n[5]?$?$.p(n,t):(($=cv(n)).c(),$.m(e,null)):$&&($.d(1),$=null)},i:function(n){if(!S){Xt(C,n),Xt(v),Xt(P);for(var t=0;t<U.length;t+=1)Xt(k[t]);S=!0}},o:function(n){Qt(C,n),Qt(v),Qt(P);for(var t=0;t<k.length;t+=1)Qt(k[t]);S=!1},d:function(n){n&&Zn(t),C&&C.d(n),I[h].d(),P&&P.d();for(var r=0;r<k.length;r+=1)k[r].d();$&&$.d(),j=!1,O()}}}function av(n){var t,r,e,o,u,c,f,a,s=i("append")+"";return{c:function(){t=tt("span"),r=tt("button"),e=it(s),u=et(),(c=tt("button")).textContent="".concat(i("close")),at(r,"class","button button_green qa-dialog-ok"),r.disabled=o=!n[1].length,at(c,"class","button button_white qa-dialog-cancel"),at(t,"slot","buttons")},m:function(i,o){Kn(i,t,o),Yn(t,r),Yn(r,e),Yn(t,u),Yn(t,c),f||(a=[ut(r,"click",n[9]),ut(c,"click",n[8])],f=!0)},p:function(n,t){2&t[0]&&o!==(o=!n[1].length)&&(r.disabled=o)},d:function(n){n&&Zn(t),f=!1,Tn(a)}}}function sv(n){var t,r;return(t=new Os({props:{withTitle:!1,$$slots:{buttons:[av],content:[fv]},$$scope:{ctx:n}}})).$on("close",n[23]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};16777279&r[0]&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function lv(n,r,e){var o,u,c=this,f=r.$$slots,a=void 0===f?{}:f,s=r.$$scope,l=r.chat,v=Tt(),d={},b=$h(l.chatId,l.authorId);Mn(n,b,function(n){return Vh(this,c),e(17,u=n)}.bind(this));var y=[],p="",m=[],w=Bl();Mn(n,w,function(n){return Vh(this,c),e(16,o=n)}.bind(this));var g,_,S,j=[],E=[],T=[],k="";function A(){if(o&&u){var n=0;e(4,j=[]);for(var t=0,r=o.length;t<r;t++){var i=o[t];if(!~y.indexOf(i.userId)&&(j.push(i),++n>=3))break}}}var R=ho(function(n){var r=this;Vh(this,c),Oe(n,50).then(function(t){Vh(this,r),e(11,d[n]=t,d),e(13,E=t)}.bind(this))["catch"](function(n){Vh(this,r),h.error(t.T,n)}.bind(this))}.bind(this),300),x=function(){Vh(this,c),v("close")}.bind(this),I=function(){var n=this;Vh(this,c);var r=l.type===O.tt?C.Pt:C.Mt,o="";e(5,k="");var u=[];m.forEach(function(i){var c=this;Vh(this,n),u.push(ge(l.chatId,i.userId,r).then(function(n){Vh(this,c),ns(n);var t=n.chatId,o=i;o.perms=r,e(10,l.countMembers++,l),function(n,t){var r=this;Bh[n]&&Bh[n].update(function(n){Dh(this,r);for(var i=-1,e=0,o=n.length;e<o;e++)if(n[e].userId==t.userId){i=e;break}return~i?n.splice(i,1,t):n.push(t),n}.bind(this))}(t,o)}.bind(this))["catch"](function(n){Vh(this,c),o&&(o+=" ,"),o+=i.userName,h.error(t.T,n)}.bind(this)))}.bind(this)),Promise.allSettled(u).then(function(){var t=this;Vh(this,n),o?e(5,k=i("notAllowedAdd",o)):x(),e(1,m=[]),iu.update(function(n){return Vh(this,t),n?(l.chatId===(null==n?void 0:n.chatId)&&(n.countMembers=l.countMembers),n):n}.bind(this))}.bind(this))}.bind(this);var M=function(n){Vh(this,c),e(1,m=m.concat([n]))}.bind(this),P=function(n){Vh(this,c),e(1,m=m.concat([n]))}.bind(this);return n.$$set=function(n){Vh(this,c),"chat"in n&&e(10,l=n.chat),"$$scope"in n&&e(24,s=n.$$scope)}.bind(this),n.$$.update=function(){var t=this;if(Vh(this,c),10&n.$$.dirty[0]&&g){for(var r=m,i=0,f=r.length;i<f;i++)if(r[i].userId===g.userId){r.splice(i,1);break}e(1,m=r),e(3,g=undefined)}if(135170&n.$$.dirty[0]&&u&&(e(12,y=[]),u.forEach(function(n){Vh(this,t),y.push(n.userId)}.bind(this)),m&&m.forEach(function(n){Vh(this,t),y.push(n.userId)}.bind(this))),2049&n.$$.dirty[0]&&p&&(d[p]?e(13,E=d[p]):R(p)),12292&n.$$.dirty[0]&&E){e(2,T=[]);for(var a=0,s=E.length;a<s;a++){var l=E[a];~y.indexOf(l.userId)||T.push(l)}}147456&n.$$.dirty[0]&&!_&&u&&e(14,_=b.subscribe(A)),98304&n.$$.dirty[0]&&!S&&o&&e(15,S=w.subscribe(A)),4096&n.$$.dirty[0]&&y&&A()}.bind(this),[p,m,T,g,j,k,b,w,x,I,l,d,y,E,_,S,o,u,a,function(){p=this.value,e(0,p)},M,P,function(n){e(3,g=n),e(1,m)},function(t){kt.call(this,n,t)},s]}var hv=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Gh(n,t)}(o,n);var t,r,i,e=qh(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Hh(t=e.call(this)),n,lv,sv,An,{chat:10},null,[-1,-1]),t}return t=o,r&&Fh(t.prototype,r),i&&Fh(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),vv=hv;function dv(n){return dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},dv(n)}function bv(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==dv(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==dv(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===dv(o)?o:String(o)),i)}var e,o}function yv(n,t){return yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},yv(n,t)}function pv(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=wv(n);if(t){var e=wv(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===dv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mv(n)}(this,r)}}function mv(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function wv(n){return wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wv(n)}function gv(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function _v(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Sv(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sv(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sv(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function jv(n){var t,r,i,e=(null===(t=n[0])||void 0===t?void 0:t.userName)+"";return{c:function(){r=tt("span"),i=it(e),at(r,"slot","title")},m:function(n,t){Kn(n,r,t),Yn(r,i)},p:function(n,t){var r;1&t&&e!==(e=(null===(r=n[0])||void 0===r?void 0:r.userName)+"")&&st(i,e)},d:function(n){n&&Zn(r)}}}function Ov(n){var t,r;return{c:function(){t=tt("div"),r=it(n[7]),at(t,"class","alert alert_danger")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,t){128&t&&st(r,n[7])},d:function(n){n&&Zn(t)}}}function Ev(n){var t,r,e,o,u,c,f,a,s,l,h,v,d,b,y,p,m,w,g,_,S,j=i("moderatorDesc")+"",O=i("adminDesc")+"",E=n[7]&&Ov(n);return{c:function(){t=tt("div"),(r=tt("div")).textContent="".concat(i("permissions"),":"),e=et(),o=tt("div"),u=tt("input"),(c=tt("label")).textContent="".concat(i("postMessages")),f=et(),a=tt("div"),s=tt("input"),(l=tt("label")).textContent="".concat(i("moderator")),h=et(),v=tt("div"),d=et(),b=tt("div"),y=tt("input"),(p=tt("label")).textContent="".concat(i("admin")),m=et(),w=tt("div"),g=et(),E&&E.c(),at(r,"class","member-edit-perms__title"),ht(u,"checkbox"),at(u,"class","toggle-btn__checkbox"),at(u,"name","write"),at(u,"id","checkboxWrite"),u.disabled=n[1],at(c,"for","checkboxWrite"),at(o,"class","toggle-btn"),ht(s,"checkbox"),at(s,"class","toggle-btn__checkbox"),at(s,"name","moderate"),at(s,"id","checkboxModerate"),s.disabled=n[3],at(l,"for","checkboxModerate"),at(a,"class","toggle-btn"),at(v,"class","chat-prompt"),ht(y,"checkbox"),at(y,"class","toggle-btn__checkbox"),at(y,"name","admin"),at(y,"id","checkboxAdmin"),y.disabled=n[6],at(p,"for","checkboxAdmin"),at(b,"class","toggle-btn"),at(w,"class","chat-prompt"),at(t,"slot","content"),at(t,"class","member-edit-perms")},m:function(i,T){Kn(i,t,T),Yn(t,r),Yn(t,e),Yn(t,o),Yn(o,u),u.checked=n[2],Yn(o,c),Yn(t,f),Yn(t,a),Yn(a,s),s.checked=n[4],Yn(a,l),Yn(t,h),Yn(t,v),v.innerHTML=j,Yn(t,d),Yn(t,b),Yn(b,y),y.checked=n[5],Yn(b,p),Yn(t,m),Yn(t,w),w.innerHTML=O,Yn(t,g),E&&E.m(t,null),_||(S=[ut(u,"change",n[11]),ut(u,"change",n[12]),ut(s,"change",n[13]),ut(s,"change",n[14]),ut(y,"change",n[15]),ut(y,"change",n[16])],_=!0)},p:function(n,r){2&r&&(u.disabled=n[1]),4&r&&(u.checked=n[2]),8&r&&(s.disabled=n[3]),16&r&&(s.checked=n[4]),64&r&&(y.disabled=n[6]),32&r&&(y.checked=n[5]),n[7]?E?E.p(n,r):((E=Ov(n)).c(),E.m(t,null)):E&&(E.d(1),E=null)},d:function(n){n&&Zn(t),E&&E.d(),_=!1,Tn(S)}}}function Tv(n){var t,r,e,o,u,c,f,a,s=i("save")+"";return{c:function(){t=tt("span"),r=tt("button"),e=it(s),u=et(),(c=tt("button")).textContent="".concat(i("close")),at(r,"class","button button_green qa-dialog-ok"),r.disabled=o=!!n[7],at(c,"class","button button_white qa-dialog-cancel"),at(t,"slot","buttons")},m:function(i,o){Kn(i,t,o),Yn(t,r),Yn(r,e),Yn(t,u),Yn(t,c),f||(a=[ut(r,"click",n[9]),ut(c,"click",n[8])],f=!0)},p:function(n,t){128&t&&o!==(o=!!n[7])&&(r.disabled=o)},d:function(n){n&&Zn(t),f=!1,Tn(a)}}}function kv(n){var t,r;return(t=new Os({props:{$$slots:{buttons:[Tv],content:[Ev],title:[jv]},$$scope:{ctx:n}}})).$on("close",n[8]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i=_v(r,1)[0],e={};262399&i&&(e.$$scope={dirty:i,ctx:n}),t.$set(e)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function Av(n,r,i){var e=this,o=r.chat,u=r.member,c=!1,f=!1,a=!1,s=!1,l=!1,v=!1,d="",b=o.perms&C.Nt;for(var y in C)if(Object.prototype.hasOwnProperty.call(C,y)){if(!u)break;var p=C[y],m=!!(p&u.perms),w=u.perms>=o.perms&&!b;switch(p){case C.Pt:c=w,f=m;break;case C.Ut:a=!b,s=m;break;case C.Nt:v=!b,l=m}}var g=function(){gv(this,e),i(0,u=undefined)}.bind(this),_=function(){var n=this;if(gv(this,e),u){var r=0;f&&(r|=C.Pt),s&&(r|=C.Ut),l&&(r|=C.Nt),ge(o.chatId,u.userId,r).then(function(t){gv(this,n),ns(t),function(n,t,r){var i=this;Bh[n]&&Bh[n].update(function(n){Dh(this,i);for(var e=0,o=n.length;e<o;e++)if(n[e].userId===t){n[e].perms=r;break}return n}.bind(this))}(t.chatId,t.userId,t.perm),g()}.bind(this))["catch"](function(r){gv(this,n),h.error(t.T,r),i(7,d=r.message)}.bind(this))}}.bind(this);var S=function(){gv(this,e),f||(i(4,s=!1),i(5,l=!1))}.bind(this);var j=function(){gv(this,e),s?i(2,f=!0):i(5,l=!1)}.bind(this);var O=function(){gv(this,e),l&&(i(2,f=!0),i(4,s=!0))}.bind(this);return n.$$set=function(n){gv(this,e),"chat"in n&&i(10,o=n.chat),"member"in n&&i(0,u=n.member)}.bind(this),[u,c,f,a,s,l,v,d,g,_,o,function(){f=this.checked,i(2,f)},S,function(){s=this.checked,i(4,s)},j,function(){l=this.checked,i(5,l)},O]}var Rv=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&yv(n,t)}(o,n);var t,r,i,e=pv(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(mv(t=e.call(this)),n,Av,kv,An,{chat:10,member:0}),t}return t=o,r&&bv(t.prototype,r),i&&bv(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Cv=Rv;function xv(n){return xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xv(n)}function Iv(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==xv(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==xv(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===xv(o)?o:String(o)),i)}var e,o}function Mv(n,t){return Mv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Mv(n,t)}function Pv(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Nv(n);if(t){var e=Nv(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===xv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Uv(n)}(this,r)}}function Uv(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Nv(n){return Nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nv(n)}function Dv(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Bv(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bv(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bv(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Lv(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function $v(n){Vn(n,"c-98nz01",".chat-members-list.c-98nz01{height:400px;max-height:100%;margin-left:16px}.chat-members-list__content.c-98nz01{padding-top:16px}.alert.c-98nz01{margin-right:16px}.and-more-users.c-98nz01{height:33px;margin-bottom:12px;display:flex;align-items:center;justify-content:center;color:#767676}")}function zv(n,t,r){var i=n.slice();return i[22]=t[r],i}function Wv(n){for(var t,r,i=this,e=[],o=new Map,u=n[6],c=function(n){return Lv(this,i),n[22].userId}.bind(this),f=0;f<u.length;f+=1){var a=zv(n,u,f),s=c(a);o.set(s,e[f]=Hv(s,a))}return{c:function(){for(var n=0;n<e.length;n+=1)e[n].c();t=ot()},m:function(n,i){for(var o=0;o<e.length;o+=1)e[o].m(n,i);Kn(n,t,i),r=!0},p:function(n,r){1734&r&&(u=n[6],Yt(),e=nr(e,r,c,1,n,u,o,t.parentNode,Zt,Hv,t,zv),Vt())},i:function(n){if(!r){for(var t=0;t<u.length;t+=1)Xt(e[t]);r=!0}},o:function(n){for(var t=0;t<e.length;t+=1)Qt(e[t]);r=!1},d:function(n){for(var r=0;r<e.length;r+=1)e[r].d(n);n&&Zn(t)}}}function Fv(n){var t;return{c:function(){(t=tt("div")).textContent="".concat(i("errorUserNotFound")),at(t,"class","alert alert_warning c-98nz01")},m:function(n,r){Kn(n,t,r)},p:_n,i:_n,o:_n,d:function(n){n&&Zn(t)}}}function Gv(n){var t,r,i,e,o=this;function u(t){n[16](t)}function c(t){n[17](t)}var f={member:n[22],canEdit:!(co===n[22].userId||!n[9]||!(n[2].perms>n[22].perms||n[10])),canDelete:!(co===n[22].userId||!n[9]||!(n[2].perms>n[22].perms||n[10]))};return void 0!==n[7]&&(f.toEdit=n[7]),void 0!==n[1]&&(f.toDelete=n[1]),t=new Nh({props:f}),Rt.push(function(){return Lv(this,o),tr(t,"toEdit",u)}.bind(this)),Rt.push(function(){return Lv(this,o),tr(t,"toDelete",c)}.bind(this)),{c:function(){rr(t.$$.fragment)},m:function(n,r){ir(t,n,r),e=!0},p:function(n,e){var o=this,u={};64&e&&(u.member=n[22]),68&e&&(u.canEdit=!(co===n[22].userId||!n[9]||!(n[2].perms>n[22].perms||n[10]))),68&e&&(u.canDelete=!(co===n[22].userId||!n[9]||!(n[2].perms>n[22].perms||n[10]))),!r&&128&e&&(r=!0,u.toEdit=n[7],Dt(function(){return Lv(this,o),r=!1}.bind(this))),!i&&2&e&&(i=!0,u.toDelete=n[1],Dt(function(){return Lv(this,o),i=!1}.bind(this))),t.$set(u)},i:function(n){e||(Xt(t.$$.fragment,n),e=!0)},o:function(n){Qt(t.$$.fragment,n),e=!1},d:function(n){er(t,n)}}}function qv(n){var t,r,i=n[22].text+"";return{c:function(){t=tt("div"),r=it(i),at(t,"class","and-more-users c-98nz01")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,t){64&t&&i!==(i=n[22].text+"")&&st(r,i)},i:_n,o:_n,d:function(n){n&&Zn(t)}}}function Hv(n,t){var r,i,e,o,u,c=[qv,Gv],f=[];function a(n,t){return-1===n[22].userId?0:1}return i=a(t),e=f[i]=c[i](t),{key:n,first:null,c:function(){r=ot(),e.c(),o=ot(),this.first=r},m:function(n,t){Kn(n,r,t),f[i].m(n,t),Kn(n,o,t),u=!0},p:function(n,r){var u=this,s=i;(i=a(t=n))===s?f[i].p(t,r):(Yt(),Qt(f[s],1,1,function(){Lv(this,u),f[s]=null}.bind(this)),Vt(),(e=f[i])?e.p(t,r):(e=f[i]=c[i](t)).c(),Xt(e,1),e.m(o.parentNode,o))},i:function(n){u||(Xt(e),u=!0)},o:function(n){Qt(e),u=!1},d:function(n){n&&Zn(r),f[i].d(n),n&&Zn(o)}}}function Yv(n){var t,r,i,e=this;function o(t){n[19](t)}var u={chat:n[2]};return void 0!==n[7]&&(u.member=n[7]),t=new Cv({props:u}),Rt.push(function(){return Lv(this,e),tr(t,"member",o)}.bind(this)),{c:function(){rr(t.$$.fragment)},m:function(n,r){ir(t,n,r),i=!0},p:function(n,i){var e=this,o={};4&i&&(o.chat=n[2]),!r&&128&i&&(r=!0,o.member=n[7],Dt(function(){return Lv(this,e),r=!1}.bind(this))),t.$set(o)},i:function(n){i||(Xt(t.$$.fragment,n),i=!0)},o:function(n){Qt(t.$$.fragment,n),i=!1},d:function(n){er(t,n)}}}function Vv(n){var t,r,i,e,o,u,c,f,a,s,l,h=[Fv,Wv],v=[];function d(n,t){return n[0]&&!n[6].length?0:1}o=d(n),u=v[o]=h[o](n);var b=n[7]&&Yv(n);return{c:function(){t=tt("div"),r=tt("div"),i=et(),e=tt("div"),u.c(),c=et(),b&&b.c(),f=ot(),vt(r,"height",n[3]+"px"),at(e,"class","chat-members-list__content c-98nz01"),vt(e,"transform","translate3d(0,"+n[5]+"px,0)"),at(t,"class","chat-members-list c-98nz01")},m:function(u,h){Kn(u,t,h),Yn(t,r),Yn(t,i),Yn(t,e),v[o].m(e,null),n[18](t),Kn(u,c,h),b&&b.m(u,h),Kn(u,f,h),a=!0,s||(l=ut(t,"scroll",Pf(n[11],100)),s=!0)},p:function(n,t){var i=this,c=Dv(t,1)[0];(!a||8&c)&&vt(r,"height",n[3]+"px");var s=o;(o=d(n))===s?v[o].p(n,c):(Yt(),Qt(v[s],1,1,function(){Lv(this,i),v[s]=null}.bind(this)),Vt(),(u=v[o])?u.p(n,c):(u=v[o]=h[o](n)).c(),Xt(u,1),u.m(e,null)),(!a||32&c)&&vt(e,"transform","translate3d(0,"+n[5]+"px,0)"),n[7]?b?(b.p(n,c),128&c&&Xt(b,1)):((b=Yv(n)).c(),Xt(b,1),b.m(f.parentNode,f)):b&&(Yt(),Qt(b,1,1,function(){Lv(this,i),b=null}.bind(this)),Vt())},i:function(n){a||(Xt(u),Xt(b),a=!0)},o:function(n){Qt(u),Qt(b),a=!1},d:function(r){r&&Zn(t),v[o].d(),n[18](null),r&&Zn(c),b&&b.d(r),r&&Zn(f),s=!1,l()}}}function Xv(n,r,e){var o,u,c=this;Mn(n,iu,function(n){return Lv(this,c),e(2,o=n)}.bind(this));var f=r.searchText,a=void 0===f?"":f,s=$h(o.chatId,o.authorId);Mn(n,s,function(n){return Lv(this,c),e(15,u=n)}.bind(this));var l,v,d,b=0,y=0,p=0,m=[],w=m.length,g=!1,_=[],S=o.perms&C.Ut,j=o.perms&C.Nt;function O(){var n=l.offsetHeight;y=Math.floor(n/45)}function E(){if(l){var n=l.scrollTop,t=Math.floor(n/45),r=t-y;r<0&&(r=0),e(5,p=Math.ceil(45*r));var u=t-y;u<0&&(u=0);var c=t+2*y;e(6,m=_.slice(u,c)),o.countMembers>H&&c>=w&&g&&m.length&&m.push({userId:-1,text:i("andMoreMembers",o.countMembers-w)})}}return Et(function(){var n=this;return Lv(this,c),window.addEventListener("resize",O),O(),E(),function(){Lv(this,n),window.removeEventListener("resize",O)}.bind(this)}.bind(this)),n.$$set=function(n){Lv(this,c),"searchText"in n&&e(0,a=n.searchText)}.bind(this),n.$$.update=function(){var r=this;if(Lv(this,c),32769&n.$$.dirty)if(a){var i=a.toLowerCase();e(14,_=u.filter(function(n){return Lv(this,r),!(!(null==n?void 0:n.userName)||!(null==n?void 0:n.userLogin))&&(~n.userName.toLowerCase().indexOf(i)||~n.userLogin.toLowerCase().indexOf(i))}.bind(this)))}else e(14,_=u);6&n.$$.dirty&&d&&(ge(o.chatId,d.userId,0,!0).then(function(n){Lv(this,r),ns(n);var t=n.chatId,i=n.userId;n.isDelete&&(!function(n,t){var r=this;Bh[n]&&Bh[n].update(function(n){Dh(this,r);for(var i=0,e=n.length;i<e;i++)if(n[i].userId===t){n.splice(i,1);break}return n}.bind(this))}(t,i),Ln(iu,o.countMembers--,o))}.bind(this))["catch"](function(n){Lv(this,r),h.error(t.T,n)}.bind(this)),e(1,d=undefined)),16384&n.$$.dirty&&_&&E(),28676&n.$$.dirty&&(e(12,w=_.length),e(13,g=o.countMembers>w),e(3,b=45*(w+(g?1:0))))}.bind(this),[a,d,o,b,l,p,m,v,s,S,j,E,w,g,_,u,function(n){e(7,v=n)},function(n){e(1,d=n),e(2,o)},function(n){var t=this;Rt[n?"unshift":"push"](function(){Lv(this,t),e(4,l=n)}.bind(this))},function(n){e(7,v=n)}]}var Qv=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Mv(n,t)}(o,n);var t,r,i,e=Pv(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Uv(t=e.call(this)),n,Xv,Vv,An,{searchText:0},$v),t}return t=o,r&&Iv(t.prototype,r),i&&Iv(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Jv=Qv;function Kv(n){return Kv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Kv(n)}function Zv(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Kv(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Kv(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Kv(o)?o:String(o)),i)}var e,o}function nd(n,t){return nd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},nd(n,t)}function td(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=id(n);if(t){var e=id(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===Kv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rd(n)}(this,r)}}function rd(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function id(n){return id=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},id(n)}function ed(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return od(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return od(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function od(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function ud(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function cd(n){Vn(n,"c-x37lsg",".chat-members-window.c-x37lsg{width:600px;max-width:100%}.chat-members-window__add.c-x37lsg{float:left;margin-left:0}")}function fd(n){var t,r;return(t=new Os({props:{withTitle:!1,$$slots:{buttons:[ld],content:[ad]},$$scope:{ctx:n}}})).$on("close",n[7]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};8199&r&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function ad(n){var t,r,e,o,u,c,f,a,s,l;return f=new Jv({props:{searchText:n[1]}}),{c:function(){t=tt("div"),r=tt("div"),e=tt("i"),o=et(),u=tt("input"),c=et(),rr(f.$$.fragment),at(e,"class","icons-chat icons-chat_search-gray"),ht(u,"text"),at(u,"class","input"),at(u,"placeholder",i("searchMembers")),at(r,"class","chat-members-search"),at(t,"slot","content"),at(t,"class","chat-members-window c-x37lsg")},m:function(i,h){Kn(i,t,h),Yn(t,r),Yn(r,e),Yn(r,o),Yn(r,u),lt(u,n[1]),Yn(t,c),ir(f,t,null),a=!0,s||(l=ut(u,"input",n[6]),s=!0)},p:function(n,t){2&t&&u.value!==n[1]&&lt(u,n[1]);var r={};2&t&&(r.searchText=n[1]),f.$set(r)},i:function(n){a||(Xt(f.$$.fragment,n),a=!0)},o:function(n){Qt(f.$$.fragment,n),a=!1},d:function(n){n&&Zn(t),er(f),s=!1,l()}}}function sd(n){var t,r,e;return{c:function(){(t=tt("button")).textContent="".concat(i("addMembers")),at(t,"class","button button_blue-and-white chat-members-window__add qa-add-members c-x37lsg")},m:function(i,o){Kn(i,t,o),r||(e=ut(t,"click",n[5]),r=!0)},p:_n,d:function(n){n&&Zn(t),r=!1,e()}}}function ld(n){var t,r,e,o,u,c=n[0]&&sd(n);return{c:function(){t=tt("span"),c&&c.c(),r=et(),(e=tt("button")).textContent="".concat(i("close")),at(e,"class","button button_white qa-dialog-cancel"),at(t,"slot","buttons")},m:function(i,f){Kn(i,t,f),c&&c.m(t,null),Yn(t,r),Yn(t,e),o||(u=ut(e,"click",n[4]),o=!0)},p:function(n,i){n[0]?c?c.p(n,i):((c=sd(n)).c(),c.m(t,r)):c&&(c.d(1),c=null)},d:function(n){n&&Zn(t),c&&c.d(),o=!1,u()}}}function hd(n){var t,r,i,e=this;function o(t){n[9](t)}var u={$$slots:{header:[vd]},$$scope:{ctx:n}};return void 0!==n[3]&&(u.chat=n[3]),t=new vv({props:u}),Rt.push(function(){return ud(this,e),tr(t,"chat",o)}.bind(this)),t.$on("close",n[10]),{c:function(){rr(t.$$.fragment)},m:function(n,r){ir(t,n,r),i=!0},p:function(n,i){var e=this,o={};8196&i&&(o.$$scope={dirty:i,ctx:n}),!r&&8&i&&(r=!0,o.chat=n[3],Dt(function(){return ud(this,e),r=!1}.bind(this))),t.$set(o)},i:function(n){i||(Xt(t.$$.fragment,n),i=!0)},o:function(n){Qt(t.$$.fragment,n),i=!1},d:function(n){er(t,n)}}}function vd(n){var t,r,e,o,u,c,f,a=i("addMembers")+"";return{c:function(){t=tt("div"),r=tt("button"),e=tt("i"),o=et(),u=it(a),at(e,"class","icons-chat icons-chat_back-gray"),at(r,"title",i("back")),at(r,"class","form-members-add__header-button"),at(t,"slot","header"),at(t,"class","form-members-add__header")},m:function(i,a){Kn(i,t,a),Yn(t,r),Yn(r,e),Yn(t,o),Yn(t,u),c||(f=ut(r,"click",n[8]),c=!0)},p:_n,d:function(n){n&&Zn(t),c=!1,f()}}}function dd(n){var t,r,i,e=!n[2]&&fd(n),o=n[2]&&hd(n);return{c:function(){e&&e.c(),t=et(),o&&o.c(),r=ot()},m:function(n,u){e&&e.m(n,u),Kn(n,t,u),o&&o.m(n,u),Kn(n,r,u),i=!0},p:function(n,i){var u=this,c=ed(i,1)[0];n[2]?e&&(Yt(),Qt(e,1,1,function(){ud(this,u),e=null}.bind(this)),Vt()):e?(e.p(n,c),4&c&&Xt(e,1)):((e=fd(n)).c(),Xt(e,1),e.m(t.parentNode,t)),n[2]?o?(o.p(n,c),4&c&&Xt(o,1)):((o=hd(n)).c(),Xt(o,1),o.m(r.parentNode,r)):o&&(Yt(),Qt(o,1,1,function(){ud(this,u),o=null}.bind(this)),Vt())},i:function(n){i||(Xt(e),Xt(o),i=!0)},o:function(n){Qt(e),Qt(o),i=!1},d:function(n){e&&e.d(n),n&&Zn(t),o&&o.d(n),n&&Zn(r)}}}function bd(n,t,r){var i,e=this;Mn(n,iu,function(n){return ud(this,e),r(3,i=n)}.bind(this));var o=t.canAdd,u=void 0===o?l():o,c=Tt(),f="",a=!1,s=function(){ud(this,e),c("close")}.bind(this);function l(){return i.type===O.tt&&i.isSubscribed&&!i.isLimited||!!(i.perms&C.Ut)}var h=function(){ud(this,e),r(2,a=!0)}.bind(this);var v=function(){ud(this,e),r(2,a=!1)}.bind(this);var d=function(){ud(this,e),r(2,a=!1)}.bind(this);return n.$$set=function(n){ud(this,e),"canAdd"in n&&r(0,u=n.canAdd)}.bind(this),r(0,u=l()),[u,f,a,i,s,h,function(){f=this.value,r(1,f)},function(t){kt.call(this,n,t)},v,function(n){i=n,iu.set(i)},d]}var yd=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&nd(n,t)}(o,n);var t,r,i,e=td(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(rd(t=e.call(this)),n,bd,dd,An,{canAdd:0},cd),t}return t=o,r&&Zv(t.prototype,r),i&&Zv(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),pd=yd;function md(n){return md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},md(n)}function wd(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==md(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==md(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===md(o)?o:String(o)),i)}var e,o}function gd(n,t){return gd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},gd(n,t)}function _d(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=jd(n);if(t){var e=jd(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===md(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Sd(n)}(this,r)}}function Sd(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function jd(n){return jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jd(n)}function Od(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ed(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Td(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Td(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Td(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function kd(n){var t,r;return{c:function(){t=tt("span"),r=it(n[0]),at(t,"slot","title")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,t){1&t&&st(r,n[0])},d:function(n){n&&Zn(t)}}}function Ad(n){var t,r,e=i("unsubscribeConfirmGroup","<b>".concat(Zr(n[1].name),"</b>"))+"";return{c:function(){t=new pt(!1),r=ot(),t.a=r},m:function(n,i){t.m(e,n,i),Kn(n,r,i)},p:function(n,r){2&r&&e!==(e=i("unsubscribeConfirmGroup","<b>".concat(Zr(n[1].name),"</b>"))+"")&&t.p(e)},d:function(n){n&&Zn(r),n&&t.d()}}}function Rd(n){var t,r,e=i("unsubscribeConfirmChannel","<b>".concat(Zr(n[1].name),"</b>"))+"";return{c:function(){t=new pt(!1),r=ot(),t.a=r},m:function(n,i){t.m(e,n,i),Kn(n,r,i)},p:function(n,r){2&r&&e!==(e=i("unsubscribeConfirmChannel","<b>".concat(Zr(n[1].name),"</b>"))+"")&&t.p(e)},d:function(n){n&&Zn(r),n&&t.d()}}}function Cd(n){var t,r;function i(n,t){return n[2]?Rd:Ad}var e=i(n),o=e(n);return{c:function(){t=tt("div"),r=tt("div"),o.c(),at(r,"class","chat-alert-text"),at(t,"slot","content")},m:function(n,i){Kn(n,t,i),Yn(t,r),o.m(r,null)},p:function(n,t){e===(e=i(n))&&o?o.p(n,t):(o.d(1),(o=e(n))&&(o.c(),o.m(r,null)))},d:function(n){n&&Zn(t),o.d()}}}function xd(n){var t,r,e,o,u,c;return{c:function(){t=tt("div"),(r=tt("button")).textContent="".concat(i("close")),e=et(),(o=tt("button")).textContent="".concat(i("unsubscribe")),at(r,"class","button button_white qa-dialog-cancel"),at(o,"class","button button_green"),at(t,"slot","buttons")},m:function(i,f){Kn(i,t,f),Yn(t,r),Yn(t,e),Yn(t,o),u||(c=[ut(r,"click",ct(n[3])),ut(o,"click",ct(n[4]))],u=!0)},p:_n,d:function(n){n&&Zn(t),u=!1,Tn(c)}}}function Id(n){var t,r;return(t=new Os({props:{$$slots:{buttons:[xd],content:[Cd],title:[kd]},$$scope:{ctx:n}}})).$on("close",n[3]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i=Ed(r,1)[0],e={};135&i&&(e.$$scope={dirty:i,ctx:n}),t.$set(e)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function Md(n,r,e){var o,u,c=this;Mn(n,iu,function(n){return Od(this,c),e(1,u=n)}.bind(this));var f=r.title,a=void 0===f?i("unsubscribe"):f,s=r.withTrack,l=void 0===s||s,v=Tt();function d(){v("close")}return n.$$set=function(n){Od(this,c),"title"in n&&e(0,a=n.title),"withTrack"in n&&e(5,l=n.withTrack)}.bind(this),n.$$.update=function(){Od(this,c),2&n.$$.dirty&&e(2,o=u.type===O.rt)}.bind(this),[a,u,o,d,function(){var n=this;ge(u.chatId,co,0,!0).then(function(t){Od(this,n),u.type===O.rt?l&&window.fz&&window.fz("track","MQL5+Chat+Channel+Leave"):u.type===O.tt&&l&&window.fz&&window.fz("track","MQL5+Chat+Group+Leave"),ns(t),Ln(iu,u.isSubscribed=N.Zt,u),d()}.bind(this))["catch"](function(r){Od(this,n),d(),ga.set(r.message),h.error(t.T,r)}.bind(this))},l]}var Pd=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&gd(n,t)}(o,n);var t,r,i,e=_d(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Sd(t=e.call(this)),n,Md,Id,An,{title:0,withTrack:5}),t}return t=o,r&&wd(t.prototype,r),i&&wd(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Ud=Pd;function Nd(n){return Nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Nd(n)}function Dd(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Nd(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Nd(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Nd(o)?o:String(o)),i)}var e,o}function Bd(n,t){return Bd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Bd(n,t)}function Ld(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=zd(n);if(t){var e=zd(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===Nd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $d(n)}(this,r)}}function $d(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function zd(n){return zd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zd(n)}function Wd(n){var t,r,i;return{c:function(){at(t=tt("div"),"class","avatar-editor__draggable")},m:function(e,o){Kn(e,t,o),r||(i=[ut(t,"mousedown",n[0]),ut(t,"mousemove",n[1]),ut(t,"mouseup",n[2]),ut(t,"mouseout",n[2]),ut(t,"blur",n[2]),ut(t,"dragstart",ct(n[5]))],r=!0)},p:_n,i:_n,o:_n,d:function(n){n&&Zn(t),r=!1,Tn(i)}}}function Fd(n,t,r){var i=this,e=t.positionX,o=t.positionY,u=!1,c={x:0,y:0};return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,i),"positionX"in n&&r(3,e=n.positionX),"positionY"in n&&r(4,o=n.positionY)}.bind(this),[function(n){u=!0,c.x=n.clientX,c.y=n.clientY},function(n){if(u){var t=n.clientX,i=n.clientY,f=t-c.x,a=i-c.y;c.x=t,c.y=i,r(3,e+=f),r(4,o+=a)}},function(){u=!1},e,o,function(t){kt.call(this,n,t)}]}var Gd,qd=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Bd(n,t)}(o,n);var t,r,i,e=Ld(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or($d(t=e.call(this)),n,Fd,Wd,An,{positionX:3,positionY:4}),t}return t=o,r&&Dd(t.prototype,r),i&&Dd(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Hd=qd;function Yd(n){return Yd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Yd(n)}function Vd(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Yd(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Yd(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Yd(o)?o:String(o)),i)}var e,o}function Xd(n,t){return Xd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Xd(n,t)}function Qd(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Kd(n);if(t){var e=Kd(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===Yd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Jd(n)}(this,r)}}function Jd(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Kd(n){return Kd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kd(n)}function Zd(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function nb(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return tb(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tb(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tb(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function rb(n){var t,r,i,e,o,u;return{c:function(){t=tt("button"),at(r=tt("i"),"class",i="icons-ux icons-ux_arrow-"+n[0]),at(t,"class",e="avatar-editor__control avatar-editor__control_"+n[0]),t.disabled=n[1]},m:function(i,e){Kn(i,t,e),Yn(t,r),o||(u=[ut(t,"mousedown",ft(ct(n[6]))),ut(t,"touchstart",ft(ct(n[7]))),ut(t,"mouseup",ib),ut(t,"mouseout",ib),ut(t,"blur",ib),ut(t,"touchend",ib),ut(t,"click",ct(n[5]))],o=!0)},p:function(n,o){var u=nb(o,1)[0];1&u&&i!==(i="icons-ux icons-ux_arrow-"+n[0])&&at(r,"class",i),1&u&&e!==(e="avatar-editor__control avatar-editor__control_"+n[0])&&at(t,"class",e),2&u&&(t.disabled=n[1])},i:_n,o:_n,d:function(n){n&&Zn(t),o=!1,Tn(u)}}}function ib(){clearInterval(Gd)}function eb(n,t,r){var i=this,e=t.direction,o=t.positionX,u=t.positionY,c=t.disabled;function f(){if(!c)switch(e){case"up":r(4,u-=10);break;case"right":r(3,o+=10);break;case"down":r(4,u+=10);break;case"left":r(3,o-=10)}}var a=function(){Zd(this,i),ib(),Gd=setInterval(f,50)}.bind(this),s=function(){Zd(this,i),ib(),Gd=setInterval(f,50)}.bind(this);return n.$$set=function(n){Zd(this,i),"direction"in n&&r(0,e=n.direction),"positionX"in n&&r(3,o=n.positionX),"positionY"in n&&r(4,u=n.positionY),"disabled"in n&&r(1,c=n.disabled)}.bind(this),[e,c,f,o,u,function(t){kt.call(this,n,t)},a,s]}var ob=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Xd(n,t)}(o,n);var t,r,i,e=Qd(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Jd(t=e.call(this)),n,eb,rb,An,{direction:0,positionX:3,positionY:4,disabled:1}),t}return t=o,r&&Vd(t.prototype,r),i&&Vd(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),ub=ob;function cb(n){return cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},cb(n)}var fb=undefined;function ab(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==cb(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==cb(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===cb(o)?o:String(o)),i)}var e,o}function sb(n,t){return sb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},sb(n,t)}function lb(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=vb(n);if(t){var e=vb(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===cb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hb(n)}(this,r)}}function hb(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function vb(n){return vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vb(n)}function db(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function bb(n){var t;return{c:function(){t=it(n[2])},m:function(n,r){Kn(n,t,r)},p:function(n,r){4&r[0]&&st(t,n[2])},d:function(n){n&&Zn(t)}}}function yb(n){var t,r,i,e,o,u,c,f,a,s,l,h,v,d,b,y,p,m,w,g,_,S,j,O,E,T,k,A,R,C,x,I,M,P,U,N,D,B,L,$,z=this,W=ei("zoomIn")+"",F=ei("zoomOut")+"";function G(t){n[10](t)}function q(t){n[11](t)}function H(t){n[12](t)}var Y={direction:"up"};function V(t){n[13](t)}function X(t){n[14](t)}function Q(t){n[15](t)}void 0!==n[3]&&(Y.disabled=n[3]),void 0!==n[0]&&(Y.positionX=n[0]),void 0!==n[1]&&(Y.positionY=n[1]),r=new ub({props:Y}),Rt.push(function(){return db(this,z),tr(r,"disabled",G)}.bind(this)),Rt.push(function(){return db(this,z),tr(r,"positionX",q)}.bind(this)),Rt.push(function(){return db(this,z),tr(r,"positionY",H)}.bind(this));var J={direction:"right"};function K(t){n[16](t)}function Z(t){n[17](t)}function nn(t){n[18](t)}void 0!==n[4]&&(J.disabled=n[4]),void 0!==n[0]&&(J.positionX=n[0]),void 0!==n[1]&&(J.positionY=n[1]),c=new ub({props:J}),Rt.push(function(){return db(this,z),tr(c,"disabled",V)}.bind(this)),Rt.push(function(){return db(this,z),tr(c,"positionX",X)}.bind(this)),Rt.push(function(){return db(this,z),tr(c,"positionY",Q)}.bind(this));var tn={direction:"down"};function rn(t){n[19](t)}function en(t){n[20](t)}function on(t){n[21](t)}void 0!==n[5]&&(tn.disabled=n[5]),void 0!==n[0]&&(tn.positionX=n[0]),void 0!==n[1]&&(tn.positionY=n[1]),h=new ub({props:tn}),Rt.push(function(){return db(this,z),tr(h,"disabled",K)}.bind(this)),Rt.push(function(){return db(this,z),tr(h,"positionX",Z)}.bind(this)),Rt.push(function(){return db(this,z),tr(h,"positionY",nn)}.bind(this));var un={direction:"left"};function cn(t){n[22](t)}function fn(t){n[23](t)}void 0!==n[6]&&(un.disabled=n[6]),void 0!==n[0]&&(un.positionX=n[0]),void 0!==n[1]&&(un.positionY=n[1]),p=new ub({props:un}),Rt.push(function(){return db(this,z),tr(p,"disabled",rn)}.bind(this)),Rt.push(function(){return db(this,z),tr(p,"positionX",en)}.bind(this)),Rt.push(function(){return db(this,z),tr(p,"positionY",on)}.bind(this));var an={};void 0!==n[0]&&(an.positionX=n[0]),void 0!==n[1]&&(an.positionY=n[1]),S=new Hd({props:an}),Rt.push(function(){return db(this,z),tr(S,"positionX",cn)}.bind(this)),Rt.push(function(){return db(this,z),tr(S,"positionY",fn)}.bind(this));var sn=n[2]&&bb(n);return{c:function(){t=tt("div"),rr(r.$$.fragment),u=et(),rr(c.$$.fragment),l=et(),rr(h.$$.fragment),y=et(),rr(p.$$.fragment),_=et(),rr(S.$$.fragment),E=et(),T=tt("canvas"),k=et(),A=tt("div"),R=tt("div"),(C=tt("span")).textContent="+",x=it(W),I=et(),M=tt("div"),(P=tt("span")).textContent="-",U=it(F),N=et(),sn&&sn.c(),D=ot(),at(T,"class","avatar-editor__canvas"),at(T,"width",mb),at(T,"height",mb),at(t,"class","avatar-editor"),at(C,"class","avatar-editor__zoom-icon"),at(R,"class","avatar-editor__zoom-btn"),at(P,"class","avatar-editor__zoom-icon"),at(M,"class","avatar-editor__zoom-btn"),at(A,"class","avatar-editor__zoom")},m:function(i,e){Kn(i,t,e),ir(r,t,null),Yn(t,u),ir(c,t,null),Yn(t,l),ir(h,t,null),Yn(t,y),ir(p,t,null),Yn(t,_),ir(S,t,null),Yn(t,E),Yn(t,T),n[24](T),Kn(i,k,e),Kn(i,A,e),Yn(A,R),Yn(R,C),Yn(R,x),Yn(A,I),Yn(A,M),Yn(M,P),Yn(M,U),Kn(i,N,e),sn&&sn.m(i,e),Kn(i,D,e),B=!0,L||($=[ut(R,"keyup",wb),ut(R,"click",n[25]),ut(M,"keyup",gb),ut(M,"click",n[26])],L=!0)},p:function(n,t){var u=this,l={};!i&&8&t[0]&&(i=!0,l.disabled=n[3],Dt(function(){return db(this,u),i=!1}.bind(this))),!e&&1&t[0]&&(e=!0,l.positionX=n[0],Dt(function(){return db(this,u),e=!1}.bind(this))),!o&&2&t[0]&&(o=!0,l.positionY=n[1],Dt(function(){return db(this,u),o=!1}.bind(this))),r.$set(l);var y={};!f&&16&t[0]&&(f=!0,y.disabled=n[4],Dt(function(){return db(this,u),f=!1}.bind(this))),!a&&1&t[0]&&(a=!0,y.positionX=n[0],Dt(function(){return db(this,u),a=!1}.bind(this))),!s&&2&t[0]&&(s=!0,y.positionY=n[1],Dt(function(){return db(this,u),s=!1}.bind(this))),c.$set(y);var _={};!v&&32&t[0]&&(v=!0,_.disabled=n[5],Dt(function(){return db(this,u),v=!1}.bind(this))),!d&&1&t[0]&&(d=!0,_.positionX=n[0],Dt(function(){return db(this,u),d=!1}.bind(this))),!b&&2&t[0]&&(b=!0,_.positionY=n[1],Dt(function(){return db(this,u),b=!1}.bind(this))),h.$set(_);var E={};!m&&64&t[0]&&(m=!0,E.disabled=n[6],Dt(function(){return db(this,u),m=!1}.bind(this))),!w&&1&t[0]&&(w=!0,E.positionX=n[0],Dt(function(){return db(this,u),w=!1}.bind(this))),!g&&2&t[0]&&(g=!0,E.positionY=n[1],Dt(function(){return db(this,u),g=!1}.bind(this))),p.$set(E);var T={};!j&&1&t[0]&&(j=!0,T.positionX=n[0],Dt(function(){return db(this,u),j=!1}.bind(this))),!O&&2&t[0]&&(O=!0,T.positionY=n[1],Dt(function(){return db(this,u),O=!1}.bind(this))),S.$set(T),n[2]?sn?sn.p(n,t):((sn=bb(n)).c(),sn.m(D.parentNode,D)):sn&&(sn.d(1),sn=null)},i:function(n){B||(Xt(r.$$.fragment,n),Xt(c.$$.fragment,n),Xt(h.$$.fragment,n),Xt(p.$$.fragment,n),Xt(S.$$.fragment,n),B=!0)},o:function(n){Qt(r.$$.fragment,n),Qt(c.$$.fragment,n),Qt(h.$$.fragment,n),Qt(p.$$.fragment,n),Qt(S.$$.fragment,n),B=!1},d:function(i){i&&Zn(t),er(r),er(c),er(h),er(p),er(S),n[24](null),i&&Zn(k),i&&Zn(A),i&&Zn(N),sn&&sn.d(i),i&&Zn(D),L=!1,Tn($)}}}var pb,mb=200;var wb=function(){db(this,fb)}.bind(undefined),gb=function(){db(this,fb)}.bind(undefined);function _b(n,t,r){var i,e,o=this,u=t.file,c="",f=0,a=0,s=0,l=0,h=!1,v=!1,d=!1,b=!1;function y(){i.clearRect(0,0,mb,mb),i.drawImage(e,s,l,f,a)}function p(){var n=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=f/a;(f+=60*(n?1:-1))<mb&&(f=mb),(a=Math.round(f/t))<mb&&(a=mb,f=Math.round(a*t)),m(),y()}function m(){r(5,d=0===l),r(4,v=0===s),r(3,h=Math.abs(l-mb)===a),r(6,b=Math.abs(s-mb)===f)}Et(function(){var n=this;if(db(this,o),u.type.match(/image.*/)){var t=pb.getContext("2d");if(t){r(9,i=t),e=new Image;var s=URL.createObjectURL(u);return e.addEventListener("error",function(t){db(this,n),URL.revokeObjectURL(s),r(2,c=t.message)}.bind(this)),e.addEventListener("load",function(){db(this,n),URL.revokeObjectURL(s),f=e.width,a=e.height;var t=f/a;f>a?f=(a=mb)*t:a=(f=mb)/t,i.drawImage(e,0,0,f,a),m()}.bind(this)),e.src=s,function(){db(this,n),ib()}.bind(this)}r(2,c="Canvas context is null")}else r(2,c="File must be an image")}.bind(this));var w=function(){db(this,o),p(!0)}.bind(this),g=function(){db(this,o),p()}.bind(this);return n.$$set=function(n){db(this,o),"file"in n&&r(8,u=n.file)}.bind(this),n.$$.update=function(){var t,e;db(this,o),515&n.$$.dirty[0]&&i&&((t=s)>=0?t=0:t<-f+mb&&(t=-f+mb),(e=l)>=0?e=0:e<-a+mb&&(e=-a+mb),r(0,s=t),r(1,l=e),m(),y())}.bind(this),[s,l,c,h,v,d,b,p,u,i,function(n){r(3,h=n)},function(n){r(0,s=n)},function(n){r(1,l=n)},function(n){r(4,v=n)},function(n){r(0,s=n)},function(n){r(1,l=n)},function(n){r(5,d=n)},function(n){r(0,s=n)},function(n){r(1,l=n)},function(n){r(6,b=n)},function(n){r(0,s=n)},function(n){r(1,l=n)},function(n){r(0,s=n)},function(n){r(1,l=n)},function(n){var t=this;Rt[n?"unshift":"push"](function(){db(this,t),pb=n}.bind(this))},w,g]}var Sb=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&sb(n,t)}(o,n);var t,r,i,e=lb(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(hb(t=e.call(this)),n,_b,yb,An,{file:8},null,[-1,-1]),t}return t=o,r&&ab(t.prototype,r),i&&ab(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),jb=Sb;function Ob(n){return Ob="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ob(n)}var Eb=undefined;function Tb(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Ob(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Ob(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Ob(o)?o:String(o)),i)}var e,o}function kb(n,t){return kb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},kb(n,t)}function Ab(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Cb(n);if(t){var e=Cb(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===Ob(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Rb(n)}(this,r)}}function Rb(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Cb(n){return Cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cb(n)}function xb(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Ib=function(n){return xb(this,Eb),{}}.bind(undefined),Mb=function(n){return xb(this,Eb),{}}.bind(undefined),Pb=function(n){return xb(this,Eb),{}}.bind(undefined),Ub=function(n){return xb(this,Eb),{}}.bind(undefined),Nb=function(n){return xb(this,Eb),{}}.bind(undefined),Db=function(n){return xb(this,Eb),{}}.bind(undefined),Bb=function(n){return xb(this,Eb),{}}.bind(undefined),Lb=function(n){return xb(this,Eb),{}}.bind(undefined),$b=function(n){return xb(this,Eb),{}}.bind(undefined),zb=function(n){return xb(this,Eb),{}}.bind(undefined);function Wb(n,t,r){var i=n.slice();return i[32]=t[r][0],i[33]=t[r][1],i}function Fb(n){var t,r,i,e=n[0].errorCommon+"";return{c:function(){t=tt("div"),r=tt("div"),i=it(e),at(r,"class","alert alert_danger"),at(t,"class","chat-form__error")},m:function(n,e){Kn(n,t,e),Yn(t,r),Yn(r,i)},p:function(n,t){1&t[0]&&e!==(e=n[0].errorCommon+"")&&st(i,e)},d:function(n){n&&Zn(t)}}}function Gb(n){var t,r,e,o,u,c,f,a=i("upload")+"";return{c:function(){t=tt("div"),r=tt("i"),e=et(),o=tt("div"),u=it(a),c=tt("br"),f=it("\n                JPG GIF PNG"),at(r,"class","icons-chat icons-chat_upload"),at(t,"class","chat-form__avatar-empty")},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(t,e),Yn(t,o),Yn(o,u),Yn(o,c),Yn(o,f)},p:_n,d:function(n){n&&Zn(t)}}}function qb(n){var t,r;return{c:function(){Rn((t=tt("img")).src,r=n[0].avatar)||at(t,"src",r),at(t,"alt","")},m:function(n,r){Kn(n,t,r)},p:function(n,i){1&i[0]&&!Rn(t.src,r=n[0].avatar)&&at(t,"src",r)},d:function(n){n&&Zn(t)}}}function Hb(n){var t,r,e,o;return{c:function(){t=tt("button"),at(r=tt("i"),"class","icons-chat icons-chat_close-active"),at(t,"class","chat-form__delete-avatar"),at(t,"title",i("delete"))},m:function(i,u){Kn(i,t,u),Yn(t,r),e||(o=ut(t,"click",ct(n[12])),e=!0)},p:_n,d:function(n){n&&Zn(t),e=!1,o()}}}function Yb(n){var t,r,i=n[0].avatarError+"";return{c:function(){t=tt("div"),r=it(i),at(t,"class","chat-form__avatar-error")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,t){1&t[0]&&i!==(i=n[0].avatarError+"")&&st(r,i)},d:function(n){n&&Zn(t)}}}function Vb(n){var t,r,e,o,u,c,f=i("privateChannel")+"",a=i("publicChannel")+"";return{c:function(){t=tt("option"),r=it(f),o=tt("option"),u=it(a),t.__value="0",t.value=t.__value,t.selected=e=0===n[0].isPublic,o.__value="1",o.value=o.__value,o.selected=c=1===n[0].isPublic},m:function(n,i){Kn(n,t,i),Yn(t,r),Kn(n,o,i),Yn(o,u)},p:function(n,r){1&r[0]&&e!==(e=0===n[0].isPublic)&&(t.selected=e),1&r[0]&&c!==(c=1===n[0].isPublic)&&(o.selected=c)},d:function(n){n&&Zn(t),n&&Zn(o)}}}function Xb(n){var t,r,e,o,u,c,f=i("privateChat")+"",a=i("publicChat")+"";return{c:function(){t=tt("option"),r=it(f),o=tt("option"),u=it(a),t.__value="0",t.value=t.__value,t.selected=e=0===n[0].isPublic,o.__value="1",o.value=o.__value,o.selected=c=1===n[0].isPublic},m:function(n,i){Kn(n,t,i),Yn(t,r),Kn(n,o,i),Yn(o,u)},p:function(n,r){1&r[0]&&e!==(e=0===n[0].isPublic)&&(t.selected=e),1&r[0]&&c!==(c=1===n[0].isPublic)&&(o.selected=c)},d:function(n){n&&Zn(t),n&&Zn(o)}}}function Qb(n){var t;function r(n,t){return n[3]?Kb:Jb}var i=r(n),e=i(n);return{c:function(){t=tt("div"),e.c(),at(t,"class","chat-form__option")},m:function(n,r){Kn(n,t,r),e.m(t,null)},p:function(n,o){i===(i=r(n))&&e?e.p(n,o):(e.d(1),(e=i(n))&&(e.c(),e.m(t,null)))},d:function(n){n&&Zn(t),e.d()}}}function Jb(n){var t,r,e;return{c:function(){(t=tt("div")).textContent="".concat(i("privateChannel")),r=et(),(e=tt("span")).textContent="".concat(i("privateChannelDesc")),at(t,"class","chat-form__option-name"),at(e,"class","chat-form__desc-label")},m:function(n,i){Kn(n,t,i),Kn(n,r,i),Kn(n,e,i)},p:_n,d:function(n){n&&Zn(t),n&&Zn(r),n&&Zn(e)}}}function Kb(n){var t,r,e;return{c:function(){(t=tt("div")).textContent="".concat(i("privateChat")),r=et(),(e=tt("span")).textContent="".concat(i("privateChatDesc")),at(t,"class","chat-form__option-name"),at(e,"class","chat-form__desc-label")},m:function(n,i){Kn(n,t,i),Kn(n,r,i),Kn(n,e,i)},p:_n,d:function(n){n&&Zn(t),n&&Zn(r),n&&Zn(e)}}}function Zb(n){var t;function r(n,t){return n[3]?ty:ny}var i=r(n),e=i(n);return{c:function(){t=tt("div"),e.c(),at(t,"class","chat-form__option")},m:function(n,r){Kn(n,t,r),e.m(t,null)},p:function(n,o){i===(i=r(n))&&e?e.p(n,o):(e.d(1),(e=i(n))&&(e.c(),e.m(t,null)))},d:function(n){n&&Zn(t),e.d()}}}function ny(n){var t,r,e;return{c:function(){(t=tt("div")).textContent="".concat(i("publicChannel")),r=et(),(e=tt("span")).textContent="".concat(i("publicChannelDesc")),at(t,"class","chat-form__option-name"),at(e,"class","chat-form__desc-label")},m:function(n,i){Kn(n,t,i),Kn(n,r,i),Kn(n,e,i)},p:_n,d:function(n){n&&Zn(t),n&&Zn(r),n&&Zn(e)}}}function ty(n){var t,r,e;return{c:function(){(t=tt("div")).textContent="".concat(i("publicChat")),r=et(),(e=tt("span")).textContent="".concat(i("publicChatDesc")),at(t,"class","chat-form__option-name"),at(e,"class","chat-form__desc-label")},m:function(n,i){Kn(n,t,i),Kn(n,r,i),Kn(n,e,i)},p:_n,d:function(n){n&&Zn(t),n&&Zn(r),n&&Zn(e)}}}function ry(n){var t,r,e,o,u,c,f,a,s,l,h,v=n[0].errorInviteLink&&iy(n);return{c:function(){t=tt("div"),(r=tt("div")).textContent="".concat(i("urlChannel"),":"),e=et(),o=tt("div"),(u=tt("span")).textContent="".concat(n[6]),c=et(),f=tt("input"),s=et(),v&&v.c(),at(r,"class","chat-form__label"),at(u,"class","chat-form__invite-link-label"),at(f,"class",a="input-no-border"+(n[0].errorInviteLink?" input-no-border_error":"")),ht(f,"text"),f.disabled=n[1],at(f,"name","invite_link"),at(f,"placeholder","link"),at(o,"class","chat-form__invite-link"+(qr?" chat-form__invite-link_mobile":"")),at(t,"class","chat-form__item chat-form__item_input")},m:function(i,a){Kn(i,t,a),Yn(t,r),Yn(t,e),Yn(t,o),Yn(o,u),Yn(o,c),Yn(o,f),lt(f,n[0].inviteLink),Yn(t,s),v&&v.m(t,null),l||(h=[ut(f,"input",n[23]),ut(f,"input",n[24])],l=!0)},p:function(n,r){1&r[0]&&a!==(a="input-no-border"+(n[0].errorInviteLink?" input-no-border_error":""))&&at(f,"class",a),2&r[0]&&(f.disabled=n[1]),1&r[0]&&f.value!==n[0].inviteLink&&lt(f,n[0].inviteLink),n[0].errorInviteLink?v?v.p(n,r):((v=iy(n)).c(),v.m(t,null)):v&&(v.d(1),v=null)},d:function(n){n&&Zn(t),v&&v.d(),l=!1,Tn(h)}}}function iy(n){var t,r,i=n[0].errorInviteLink+"";return{c:function(){t=tt("span"),r=it(i),at(t,"class","field-validation-error")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,t){1&t[0]&&i!==(i=n[0].errorInviteLink+"")&&st(r,i)},d:function(n){n&&Zn(t)}}}function ey(n){var t,r="number"==typeof n[33]&&function(n){var t,r,e=i("none"!==n[32]?n[32]:"other")+"";return{c:function(){t=tt("option"),r=it(e),t.__value=n[33],t.value=t.__value},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:_n,d:function(n){n&&Zn(t)}}}(n);return{c:function(){r&&r.c(),t=ot()},m:function(n,i){r&&r.m(n,i),Kn(n,t,i)},p:function(n,t){"number"==typeof n[33]&&r.p(n,t)},d:function(n){r&&r.d(n),n&&Zn(t)}}}function oy(n){var t,r,i,e,o,u,c=n[16]["users-title"],f=Pn(c,n,n[27],zb),a=n[16].users,s=Pn(a,n,n[27],Lb),l=n[3]&&uy(n);return{c:function(){t=tt("div"),r=tt("div"),f&&f.c(),i=et(),e=tt("div"),s&&s.c(),o=et(),l&&l.c(),at(r,"class","chat-form__label"),at(e,"class","chat-form__users"),at(t,"class","chat-form__item")},m:function(n,c){Kn(n,t,c),Yn(t,r),f&&f.m(r,null),Yn(t,i),Yn(t,e),s&&s.m(e,null),Yn(e,o),l&&l.m(e,null),u=!0},p:function(n,t){f&&f.p&&(!u||134217728&t[0])&&Dn(f,c,n,n[27],u?Nn(c,n[27],t,$b):Bn(n[27]),zb),s&&s.p&&(!u||134217728&t[0])&&Dn(s,a,n,n[27],u?Nn(a,n[27],t,Bb):Bn(n[27]),Lb),n[3]?l?l.p(n,t):((l=uy(n)).c(),l.m(e,null)):l&&(l.d(1),l=null)},i:function(n){u||(Xt(f,n),Xt(s,n),u=!0)},o:function(n){Qt(f,n),Qt(s,n),u=!1},d:function(n){n&&Zn(t),f&&f.d(n),s&&s.d(n),l&&l.d()}}}function uy(n){var t,r,e,o,u,c,f,a=i("isLimitedShort")+"";return{c:function(){t=tt("div"),r=tt("input"),o=tt("label"),u=it(a),ht(r,"checkbox"),at(r,"name","isLimited"),at(r,"class","checkbox"),at(r,"id","chatIsLimited"),r.checked=e=!n[0].isLimited,at(o,"for","chatIsLimited"),at(o,"title",i("isLimited")),at(t,"class","chat-form__is-limited")},m:function(i,e){Kn(i,t,e),Yn(t,r),Yn(t,o),Yn(o,u),c||(f=ut(r,"change",n[13]),c=!0)},p:function(n,t){1&t[0]&&e!==(e=!n[0].isLimited)&&(r.checked=e)},d:function(n){n&&Zn(t),c=!1,f()}}}function cy(n){var t,r;return(t=new Os({props:{withTitle:!1,$$slots:{buttons:[ay],content:[fy]},$$scope:{ctx:n}}})).$on("close",n[7]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};134217760&r[0]&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function fy(n){var t,r;return t=new jb({props:{file:n[5],slot:"content"}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};32&r[0]&&(i.file=n[5]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function ay(n){var t,r,e,o,u,c;return{c:function(){t=tt("div"),(r=tt("button")).textContent="".concat(i("close")),e=et(),(o=tt("button")).textContent="".concat(i("save")),at(r,"class","button button_white"),at(o,"class","button button_green"),at(t,"slot","buttons")},m:function(i,f){Kn(i,t,f),Yn(t,r),Yn(t,e),Yn(t,o),u||(c=[ut(r,"click",ct(n[26])),ut(o,"click",ct(n[14]))],u=!0)},p:_n,d:function(n){n&&Zn(t),u=!1,Tn(c)}}}function sy(n){var t,r,e,o,u,c,f,a,s,l,h,v,b,y,p,m,w,g,_,S,j,O,E,T,k,A,R,C,x,I,M,P,U,N,D,B,L,$,z,W,F,G,q,H,Y,V,X,Q,J,K,Z,nn,tn,rn,en,on,un,cn,fn=i(n[3]?"chatLanguage":"channelLanguage")+"",an=i(d[n[0].language])+"",sn=n[0].errorCommon&&Fb(n);function ln(n,t){return n[0].avatar?qb:Gb}var hn=ln(n),vn=hn(n),dn=n[0].avatar&&Hb(n),bn=n[0].avatarError&&Yb(n);function yn(n,t){return n[3]?Xb:Vb}for(var pn=yn(n),mn=pn(n),wn=0===n[0].isPublic&&Qb(n),gn=1===n[0].isPublic&&Zb(n),_n=!n[3]&&1===n[0].isPublic&&ry(n),Sn=Object.entries(d),jn=[],On=0;On<Sn.length;On+=1)jn[On]=ey(Wb(n,Sn,On));var En=(n[3]||n[2])&&oy(n),kn=n[16].content,An=Pn(kn,n,n[27],Db),Rn=n[16]["button-name"],Cn=Pn(Rn,n,n[27],Ub),xn=Cn||function(n){var t,r=i(n[3]?"createGroup":"createChannel")+"";return{c:function(){t=it(r)},m:function(n,r){Kn(n,t,r)},p:function(n,e){8&e[0]&&r!==(r=i(n[3]?"createGroup":"createChannel")+"")&&st(t,r)},d:function(n){n&&Zn(t)}}}(n),In=n[16].buttons,Mn=Pn(In,n,n[27],Mb),Un=n[5]&&cy(n);return{c:function(){var d=this;t=tt("div"),r=tt("div"),sn&&sn.c(),e=et(),o=tt("div"),u=tt("div"),c=tt("div"),f=tt("input"),a=et(),vn.c(),s=et(),dn&&dn.c(),l=et(),h=tt("div"),v=tt("input"),y=et(),p=tt("input"),w=et(),bn&&bn.c(),_=et(),S=tt("div"),j=tt("i"),O=et(),E=tt("select"),mn.c(),T=et(),wn&&wn.c(),k=et(),gn&&gn.c(),R=et(),C=tt("div"),(x=tt("div")).textContent="".concat(i("links"),":"),I=et(),M=tt("input"),P=et(),_n&&_n.c(),U=et(),N=tt("div"),D=tt("i"),B=et(),L=tt("select");for(var on=0;on<jn.length;on+=1)jn[on].c();$=et(),z=tt("div"),W=tt("div"),F=it(fn),G=et(),q=tt("span"),H=it(an),V=et(),En&&En.c(),X=et(),An&&An.c(),Q=et(),J=tt("div"),(K=tt("button")).textContent="".concat(i("cancel")),Z=et(),nn=tt("button"),xn&&xn.c(),tn=et(),Mn&&Mn.c(),rn=et(),Un&&Un.c(),en=ot(),f.disabled=n[1],ht(f,"file"),at(f,"title",i("fileDesc")),at(f,"accept",ly),at(f,"name","avatar"),at(c,"class","chat-form__avatar box-file"),v.disabled=n[1],ht(v,"text"),at(v,"class",b="input-no-border chat-form__name"+(n[0].errorName?" input-no-border_error":"")),at(v,"placeholder",i("nameNSymbols",60)),at(v,"maxlength","60"),p.disabled=n[1],ht(p,"text"),at(p,"class",m="input-no-border"+(n[0].errorDescription?" input-no-border_error":"")),at(p,"placeholder",i("descNSymbols",90)),at(p,"maxlength","90"),at(h,"class","chat-form__avatar-form"),at(u,"class",g="chat-form__avatar-block"+(n[0].avatarError?" chat-form__avatar-block_error":"")),at(o,"class","chat-form__item"),at(j,"class","icons-ux icons-ux_arrow-down-gray"),at(E,"name","ispublic"),E.disabled=n[1],at(S,"class",A="chat-form__options"+(n[1]?" chat-form__options_disabled":"")),at(x,"class","chat-form__label"),at(M,"autocomplete","off"),at(M,"class","input-no-border"),at(M,"placeholder",i("linksPlaceholder")),ht(M,"text"),M.disabled=n[1],at(C,"class","chat-form__item chat-form__item_input"),at(D,"class","icons-ux icons-ux_arrow-down-gray"),at(L,"name","language"),L.disabled=n[1],void 0===n[0].language&&Nt(function(){return xb(this,d),n[25].call(L)}.bind(this)),at(W,"class","chat-form__option-name"),at(q,"class","chat-form__desc-label"),at(z,"class","chat-form__option"),at(N,"class",Y="chat-form__options"+(n[1]?" chat-form__options_disabled":"")),at(K,"class","button button_white"),at(nn,"class","button button_green"),nn.disabled=n[1],at(J,"class","chat-form__buttons"),at(r,"class","chat-form__content"),at(t,"class","chat-form")},m:function(i,d){Kn(i,t,d),Yn(t,r),sn&&sn.m(r,null),Yn(r,e),Yn(r,o),Yn(o,u),Yn(u,c),Yn(c,f),n[17](f),Yn(c,a),vn.m(c,null),Yn(c,s),dn&&dn.m(c,null),Yn(u,l),Yn(u,h),Yn(h,v),lt(v,n[0].name),Yn(h,y),Yn(h,p),lt(p,n[0].description),Yn(h,w),bn&&bn.m(h,null),Yn(r,_),Yn(r,S),Yn(S,j),Yn(S,O),Yn(S,E),mn.m(E,null),Yn(S,T),wn&&wn.m(S,null),Yn(S,k),gn&&gn.m(S,null),Yn(r,R),Yn(r,C),Yn(C,x),Yn(C,I),Yn(C,M),lt(M,n[0].links),Yn(r,P),_n&&_n.m(r,null),Yn(r,U),Yn(r,N),Yn(N,D),Yn(N,B),Yn(N,L);for(var b=0;b<jn.length;b+=1)jn[b].m(L,null);dt(L,n[0].language),Yn(N,$),Yn(N,z),Yn(z,W),Yn(W,F),Yn(z,G),Yn(z,q),Yn(q,H),Yn(r,V),En&&En.m(r,null),Yn(r,X),An&&An.m(r,null),Yn(r,Q),Yn(r,J),Yn(J,K),Yn(J,Z),Yn(J,nn),xn&&xn.m(nn,null),Yn(J,tn),Mn&&Mn.m(J,null),Kn(i,rn,d),Un&&Un.m(i,d),Kn(i,en,d),on=!0,un||(cn=[ut(f,"input",n[11]),ut(v,"input",n[18]),ut(v,"input",n[19]),ut(p,"input",n[20]),ut(p,"input",n[21]),ut(E,"change",n[9]),ut(M,"input",n[22]),ut(L,"change",n[25]),ut(K,"click",ct(n[8])),ut(nn,"click",ct(n[10]))],un=!0)},p:function(n,t){var o=this;if(n[0].errorCommon?sn?sn.p(n,t):((sn=Fb(n)).c(),sn.m(r,e)):sn&&(sn.d(1),sn=null),(!on||2&t[0])&&(f.disabled=n[1]),hn===(hn=ln(n))&&vn?vn.p(n,t):(vn.d(1),(vn=hn(n))&&(vn.c(),vn.m(c,s))),n[0].avatar?dn?dn.p(n,t):((dn=Hb(n)).c(),dn.m(c,null)):dn&&(dn.d(1),dn=null),(!on||2&t[0])&&(v.disabled=n[1]),(!on||1&t[0]&&b!==(b="input-no-border chat-form__name"+(n[0].errorName?" input-no-border_error":"")))&&at(v,"class",b),1&t[0]&&v.value!==n[0].name&&lt(v,n[0].name),(!on||2&t[0])&&(p.disabled=n[1]),(!on||1&t[0]&&m!==(m="input-no-border"+(n[0].errorDescription?" input-no-border_error":"")))&&at(p,"class",m),1&t[0]&&p.value!==n[0].description&&lt(p,n[0].description),n[0].avatarError?bn?bn.p(n,t):((bn=Yb(n)).c(),bn.m(h,null)):bn&&(bn.d(1),bn=null),(!on||1&t[0]&&g!==(g="chat-form__avatar-block"+(n[0].avatarError?" chat-form__avatar-block_error":"")))&&at(u,"class",g),pn===(pn=yn(n))&&mn?mn.p(n,t):(mn.d(1),(mn=pn(n))&&(mn.c(),mn.m(E,null))),(!on||2&t[0])&&(E.disabled=n[1]),0===n[0].isPublic?wn?wn.p(n,t):((wn=Qb(n)).c(),wn.m(S,k)):wn&&(wn.d(1),wn=null),1===n[0].isPublic?gn?gn.p(n,t):((gn=Zb(n)).c(),gn.m(S,null)):gn&&(gn.d(1),gn=null),(!on||2&t[0]&&A!==(A="chat-form__options"+(n[1]?" chat-form__options_disabled":"")))&&at(S,"class",A),(!on||2&t[0])&&(M.disabled=n[1]),1&t[0]&&M.value!==n[0].links&&lt(M,n[0].links),n[3]||1!==n[0].isPublic?_n&&(_n.d(1),_n=null):_n?_n.p(n,t):((_n=ry(n)).c(),_n.m(r,U)),0&t){var a;for(Sn=Object.entries(d),a=0;a<Sn.length;a+=1){var l=Wb(n,Sn,a);jn[a]?jn[a].p(l,t):(jn[a]=ey(l),jn[a].c(),jn[a].m(L,null))}for(;a<jn.length;a+=1)jn[a].d(1);jn.length=Sn.length}(!on||2&t[0])&&(L.disabled=n[1]),1&t[0]&&dt(L,n[0].language),(!on||8&t[0])&&fn!==(fn=i(n[3]?"chatLanguage":"channelLanguage")+"")&&st(F,fn),(!on||1&t[0])&&an!==(an=i(d[n[0].language])+"")&&st(H,an),(!on||2&t[0]&&Y!==(Y="chat-form__options"+(n[1]?" chat-form__options_disabled":"")))&&at(N,"class",Y),n[3]||n[2]?En?(En.p(n,t),12&t[0]&&Xt(En,1)):((En=oy(n)).c(),Xt(En,1),En.m(r,X)):En&&(Yt(),Qt(En,1,1,function(){xb(this,o),En=null}.bind(this)),Vt()),An&&An.p&&(!on||134217728&t[0])&&Dn(An,kn,n,n[27],on?Nn(kn,n[27],t,Nb):Bn(n[27]),Db),Cn?Cn.p&&(!on||134217728&t[0])&&Dn(Cn,Rn,n,n[27],on?Nn(Rn,n[27],t,Pb):Bn(n[27]),Ub):xn&&xn.p&&(!on||8&t[0])&&xn.p(n,on?t:[-1,-1]),(!on||2&t[0])&&(nn.disabled=n[1]),Mn&&Mn.p&&(!on||134217728&t[0])&&Dn(Mn,In,n,n[27],on?Nn(In,n[27],t,Ib):Bn(n[27]),Mb),n[5]?Un?(Un.p(n,t),32&t[0]&&Xt(Un,1)):((Un=cy(n)).c(),Xt(Un,1),Un.m(en.parentNode,en)):Un&&(Yt(),Qt(Un,1,1,function(){xb(this,o),Un=null}.bind(this)),Vt())},i:function(n){on||(Xt(En),Xt(An,n),Xt(xn,n),Xt(Mn,n),Xt(Un),on=!0)},o:function(n){Qt(En),Qt(An,n),Qt(xn,n),Qt(Mn,n),Qt(Un),on=!1},d:function(r){r&&Zn(t),sn&&sn.d(),n[17](null),vn.d(),dn&&dn.d(),bn&&bn.d(),mn.d(),wn&&wn.d(),gn&&gn.d(),_n&&_n.d(),nt(jn,r),En&&En.d(),An&&An.d(r),xn&&xn.d(r),Mn&&Mn.d(r),r&&Zn(rn),Un&&Un.d(r),r&&Zn(en),un=!1,Tn(cn)}}}var ly=".png, .jpg, .jpeg, .gif",hy=200;function vy(n,t,r){var e,o,u=this,c=t.$$slots,f=void 0===c?{}:c,a=t.$$scope,s=Tt(),l=t.chat,h=t.disabled,v=void 0!==h&&h,d=t.withUsers,b=void 0!==d&&d,y=-1,p=undefined,m="".concat(qr?"":"https://www.mql5.com","/").concat(Gr,"/channels/");function w(){o&&(r(4,o.type="",o),r(4,o.value="",o),r(4,o.type="file",o))}var g=function(){xb(this,u),r(5,p=undefined),w()}.bind(this),_=function(){xb(this,u),s("close")}.bind(this);var S=function(){xb(this,u);var n=!1;if(l.inviteLink.length&&(l.inviteLink.length<5||!/^[a-zA-Z][a-zA-Z0-9_]{4,63}$/.test(l.inviteLink))&&r(0,l.errorInviteLink=i("urlChannelDesc",5),l),l.name.length<3&&(r(0,l.errorName=!0,l),n=!0),l.isPublic&&l.description.length<3&&(r(0,l.errorDescription=!0,l),n=!0),l.isPublic&&!l.avatar){var t=e?"pleaseUploadAvatar":"pleaseUploadAvatarChannel";r(0,l.avatarError=i(t),l),n=!0}l.isPublic&&l.errorInviteLink&&(n=!0),n||s("submit")}.bind(this);var j=function(){xb(this,u),r(0,l.errorName=l.name.length<3,l)}.bind(this);var E=function(){xb(this,u),r(0,l.errorDescription=l.description.length<3,l)}.bind(this);var T=function(){var n=this;xb(this,u),setTimeout(function(){xb(this,n),l.errorInviteLink&&r(0,l.errorInviteLink=undefined,l)}.bind(this),0)}.bind(this);var k=function(){xb(this,u),r(5,p=undefined)}.bind(this);return n.$$set=function(n){xb(this,u),"chat"in n&&r(0,l=n.chat),"disabled"in n&&r(1,v=n.disabled),"withUsers"in n&&r(2,b=n.withUsers),"$$scope"in n&&r(27,a=n.$$scope)}.bind(this),n.$$.update=function(){xb(this,u),32769&n.$$.dirty[0]&&(y===l.isPublic||l.isPublic||(l.avatarError&&r(0,l.avatarError=undefined,l),l.errorDescription&&r(0,l.errorDescription=!1,l)),r(15,y=l.isPublic)),1&n.$$.dirty[0]&&r(3,e=l.type===O.tt)}.bind(this),[l,v,b,e,o,p,m,g,_,function(n){var t=n.target;r(0,l.isPublic=parseInt(t.value,10)?1:0,l)},S,function(n){var t=n.target;if(t.files){var e=t.files[0];if(e){var o=new FileReader;o.onload=function(n){var t,o=new Image;o.onload=function(){var n=o.width,t=o.height;n>=hy&&t>=hy?function(n){r(5,p=n)}(e):r(0,l.avatarError=i("avatarErrorSize",hy,hy),l)},o.src=null===(t=n.target)||void 0===t?void 0:t.result},o.readAsDataURL(e)}else r(0,l.avatar=undefined,l)}},function(){r(0,l.avatar=undefined,l),r(0,l.avatarIsPresent=!1,l),r(0,l.avatarToUpload=undefined,l)},function(n){n&&n.target&&r(0,l.isLimited=!n.target.checked,l)},function(){var n=this;(function(){var n=this;return new Promise(function(t,r){var i=this;db(this,n),pb?pb.toBlob?pb.toBlob(function(n){db(this,i),n?t(Object.assign(n,{lastModified:(new Date).getTime(),name:"avatar",webkitRelativePath:""})):r(new Error("Blob is null"))}.bind(this)):r(new Error("toBlob is undefined")):r(new Error("Canvas is undefined"))}.bind(this))})().then(function(t){var i,e;xb(this,n),i=t,e=URL.createObjectURL(i),r(0,l.avatarToUpload=i,l),r(0,l.avatar=e,l),r(0,l.avatarError=undefined,l),r(0,l.avatarIsPresent=!0,l),w(),r(5,p=undefined)}.bind(this))},y,f,function(n){var t=this;Rt[n?"unshift":"push"](function(){xb(this,t),r(4,o=n)}.bind(this))},function(){l.name=this.value,r(0,l),r(15,y)},j,function(){l.description=this.value,r(0,l),r(15,y)},E,function(){l.links=this.value,r(0,l),r(15,y)},T,function(){l.inviteLink=this.value,r(0,l),r(15,y)},function(){var n,t;l.language=(t=(n=this).querySelector(":checked")||n.options[0])&&t.__value,r(0,l),r(15,y)},k,a]}var dy=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&kb(n,t)}(o,n);var t,r,i,e=Ab(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Rb(t=e.call(this)),n,vy,sy,An,{chat:0,disabled:1,withUsers:2},null,[-1,-1]),t}return t=o,r&&Tb(t.prototype,r),i&&Tb(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),by=dy;function yy(n){return yy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},yy(n)}function py(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==yy(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==yy(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===yy(o)?o:String(o)),i)}var e,o}function my(n,t){return my=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},my(n,t)}function wy(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=_y(n);if(t){var e=_y(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===yy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gy(n)}(this,r)}}function gy(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _y(n){return _y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_y(n)}function Sy(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function jy(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Oy(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oy(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oy(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Ey(n){var t,r,e=i("membersCount",ul(n[1].countMembers))+"";return{c:function(){t=tt("div"),r=it(e),at(t,"slot","users-title")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,t){2&t&&e!==(e=i("membersCount",ul(n[1].countMembers))+"")&&st(r,e)},d:function(n){n&&Zn(t)}}}function Ty(n){var t,r,e,o,u;return{c:function(){t=tt("div"),r=tt("div"),(e=tt("a")).textContent="".concat(i("editMembers")),at(e,"href","/#"),at(e,"class","chat-form__users-button qa-edit-members"),at(t,"slot","users"),at(t,"class","chat-form__users-block")},m:function(i,c){Kn(i,t,c),Yn(t,r),Yn(r,e),o||(u=ut(e,"click",ct(n[15])),o=!0)},p:_n,d:function(n){n&&Zn(t),o=!1,u()}}}function ky(n){var t,r=(n[2].userName||n[2].userLogin)+"";return{c:function(){t=it(r)},m:function(n,r){Kn(n,t,r)},p:function(n,i){4&i&&r!==(r=(n[2].userName||n[2].userLogin)+"")&&st(t,r)},d:function(n){n&&Zn(t)}}}function Ay(n){var t,r=i("deletedAccount")+"";return{c:function(){t=it(r)},m:function(n,r){Kn(n,t,r)},p:_n,d:function(n){n&&Zn(t)}}}function Ry(n){var t,r,e;return{c:function(){(t=tt("button")).textContent="".concat(i("unsubscribe")),at(t,"class","button button_yellow")},m:function(i,o){Kn(i,t,o),r||(e=ut(t,"click",n[13]),r=!0)},p:_n,d:function(n){n&&Zn(t),r=!1,e()}}}function Cy(n){var t,r,e,o,u,c,f,a,s,l,h,v,d=ao&&function(n){var t,r,e,o,u,c,f,a,s,l=bi({date:n[1].created})+"";function h(n,t){return n[2].isDeleted?Ay:ky}var v=h(n),d=v(n);return{c:function(){t=tt("div"),(r=tt("div")).textContent="".concat(i("owner")),e=et(),o=tt("a"),d.c(),u=et(),c=tt("div"),(f=tt("div")).textContent="".concat(i("created")),a=et(),s=it(l),at(r,"class","chat-info__label"),at(o,"href",n[3]),at(o,"target","_blank"),at(t,"class","chat-form__item"),at(f,"class","chat-info__label"),at(c,"class","chat-form__item")},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(t,e),Yn(t,o),d.m(o,null),Kn(n,u,i),Kn(n,c,i),Yn(c,f),Yn(c,a),Yn(c,s)},p:function(n,t){v===(v=h(n))&&d?d.p(n,t):(d.d(1),(d=v(n))&&(d.c(),d.m(o,null))),8&t&&at(o,"href",n[3]),2&t&&l!==(l=bi({date:n[1].created})+"")&&st(s,l)},d:function(n){n&&Zn(t),d.d(),n&&Zn(u),n&&Zn(c)}}}(n),b=n[8]&&(!n[6]||1===n[1].countMembers)&&Ry(n),y=ao&&function(n){var t,r,e;return{c:function(){(t=tt("button")).textContent="".concat(i("deleteUpper")),at(t,"class","button button_red")},m:function(i,o){Kn(i,t,o),r||(e=ut(t,"click",n[14]),r=!0)},p:_n,d:function(n){n&&Zn(t),r=!1,e()}}}(n);return{c:function(){t=tt("div"),d&&d.c(),r=et(),e=tt("div"),(o=tt("div")).textContent="".concat(i("management")),u=et(),c=tt("div"),f=tt("button"),a=it(n[7]),s=et(),b&&b.c(),l=et(),y&&y.c(),at(o,"class","chat-form__label"),at(f,"class","button button_white"),at(c,"class","chat-form__buttons chat-form__buttons_without-margin"),at(e,"class","chat-form__item"),at(t,"slot","content")},m:function(i,p){Kn(i,t,p),d&&d.m(t,null),Yn(t,r),Yn(t,e),Yn(e,o),Yn(e,u),Yn(e,c),Yn(c,f),Yn(f,a),Yn(c,s),b&&b.m(c,null),Yn(c,l),y&&y.m(c,null),h||(v=ut(f,"click",n[12]),h=!0)},p:function(n,t){ao&&d.p(n,t),128&t&&st(a,n[7]),!n[8]||n[6]&&1!==n[1].countMembers?b&&(b.d(1),b=null):b?b.p(n,t):((b=Ry(n)).c(),b.m(c,l)),ao&&y.p(n,t)},d:function(n){n&&Zn(t),d&&d.d(),b&&b.d(),y&&y.d(),h=!1,v()}}}function xy(n){var t;return{c:function(){(t=tt("span")).textContent="".concat(i("save")),at(t,"slot","button-name")},m:function(n,r){Kn(n,t,r)},p:_n,d:function(n){n&&Zn(t)}}}function Iy(n){var t,r,i;return(r=new by({props:{chat:n[1],withUsers:!0,disabled:n[1].isClosed,$$slots:{"button-name":[xy],content:[Cy],users:[Ty],"users-title":[Ey]},$$scope:{ctx:n}}})).$on("close",n[11]),r.$on("submit",n[10]),{c:function(){t=tt("div"),rr(r.$$.fragment),at(t,"slot","content")},m:function(n,e){Kn(n,t,e),ir(r,t,null),i=!0},p:function(n,t){var i={};2&t&&(i.chat=n[1]),2&t&&(i.disabled=n[1].isClosed),2098158&t&&(i.$$scope={dirty:t,ctx:n}),r.$set(i)},i:function(n){i||(Xt(r.$$.fragment,n),i=!0)},o:function(n){Qt(r.$$.fragment,n),i=!1},d:function(n){n&&Zn(t),er(r)}}}function My(n){var t,r;return(t=new Ud({})).$on("close",n[16]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:_n,i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function Py(n){var t,r,i,e;(t=new Os({props:{withTitle:!1,withButtons:!1,$$slots:{content:[Iy]},$$scope:{ctx:n}}})).$on("close",n[11]);var o=n[5]&&My(n);return{c:function(){rr(t.$$.fragment),r=et(),o&&o.c(),i=ot()},m:function(n,u){ir(t,n,u),Kn(n,r,u),o&&o.m(n,u),Kn(n,i,u),e=!0},p:function(n,r){var e=this,u=jy(r,1)[0],c={};2098158&u&&(c.$$scope={dirty:u,ctx:n}),t.$set(c),n[5]?o?(o.p(n,u),32&u&&Xt(o,1)):((o=My(n)).c(),Xt(o,1),o.m(i.parentNode,i)):o&&(Yt(),Qt(o,1,1,function(){Sy(this,e),o=null}.bind(this)),Vt())},i:function(n){e||(Xt(t.$$.fragment,n),Xt(o),e=!0)},o:function(n){Qt(t.$$.fragment,n),Qt(o),e=!1},d:function(n){er(t,n),n&&Zn(r),o&&o.d(n),n&&Zn(i)}}}function Uy(n,r,e){var o,u,c,f,a,s,l,v=this,d=_n,b=function(){var n=this;return Sy(this,v),d(),d=xn(m,function(t){return Sy(this,n),e(1,f=t)}.bind(this)),m}.bind(this),y=_n,p=function(){var n=this;return Sy(this,v),y(),y=xn(w,function(t){return Sy(this,n),e(2,s=t)}.bind(this)),w}.bind(this);Mn(n,iu,function(n){return Sy(this,v),e(17,a=n)}.bind(this)),Mn(n,Ar,function(n){return Sy(this,v),e(9,l=n)}.bind(this)),n.$$.on_destroy.push(function(){return Sy(this,v),d()}.bind(this)),n.$$.on_destroy.push(function(){return Sy(this,v),y()}.bind(this));var m=r.chat;b();var w,g=Tt(),_="",E=!1;function T(){var n=this;ao&&!f.isSubscribed&&Ae(f.chatId).then(function(t){Sy(this,n),t&&Eu(t)}.bind(this))["catch"](function(r){Sy(this,n),h.error(t.O,r,"Main")}.bind(this)),k()}function k(){ju(),g("close")}var A=function(){Sy(this,v),e(5,E=!0)}.bind(this),R=function(){Sy(this,v),Ln(Ar,l["delete"]=!0,l)}.bind(this),C=function(){Sy(this,v),Ln(Ar,l.listMembers=!0,l)}.bind(this),x=function(){Sy(this,v),e(5,E=!1)}.bind(this);return n.$$set=function(n){Sy(this,v),"chat"in n&&b(e(0,m=n.chat))}.bind(this),n.$$.update=function(){Sy(this,v),2&n.$$.dirty&&e(8,o=f.authorId===co),2&n.$$.dirty&&e(6,u=f.type===O.tt),2&n.$$.dirty&&e(7,c=f.isClosed?i(u?"openGroup":"openChannel"):i(u?"closeGroup":"closeChannel")),6&n.$$.dirty&&ao&&!s&&p(e(4,w=Fs(f.authorId))),4&n.$$.dirty&&s&&s.userLogin&&e(3,_="/".concat(Gr,"/users/").concat(s.userLogin))}.bind(this),[m,f,s,_,w,E,u,c,o,l,function(){var n=this;Ln(m,f.errorCommon="",f),ye(f).then(function(){var r=this;Sy(this,n),f.avatarIsPresent&&f.avatarToUpload?ve(f.avatarToUpload,f.chatId).then(T)["catch"](function(n){Sy(this,r),Ln(m,f.avatarError=n.message,f),h.error(t.T,n,"Upload avatar")}.bind(this)):f.avatarIsPresent?T():function(n){var t=this;return new Promise(function(r,i){var e=this;if(de(this,t),n)if(0!==parseInt(n,16)){var o=[J(n),{Uint8:0}];Wr.send(S.dn,o).then(function(){de(this,e),r()}.bind(this))["catch"](function(n){de(this,e),i(n)}.bind(this))}else i(new Error("Chat id is zero"));else i(new Error("Chat id is empty"))}.bind(this))}(f.chatId).then(T)["catch"](function(n){Sy(this,r),Ln(m,f.errorCommon=n.message,f),h.error(t.T,n,"Delete avatar")}.bind(this))}.bind(this))["catch"](function(r){Sy(this,n),h.error(t.T,r,"Edit chat");var e=r;parseInt(e.name,10)===j.qn?Ln(m,f.errorInviteLink=i("inviteLinkExists"),f):Ln(m,f.errorCommon=e.message,f)}.bind(this))},k,function(){var n=this,r=Ou(a);r.isClosed=!r.isClosed,Ln(m,f=r,f),ye(f).then(function(){Sy(this,n)}.bind(this))["catch"](function(r){Sy(this,n),h.error(t.T,r,"Close chat")}.bind(this))},A,R,C,x]}var Ny=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&my(n,t)}(o,n);var t,r,i,e=wy(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(gy(t=e.call(this)),n,Uy,Py,An,{chat:0}),t}return t=o,r&&py(t.prototype,r),i&&py(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Dy=Ny,By=undefined;function Ly(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var $y,zy=lr(undefined),Wy=lr([]),Fy=lr(""),Gy={};function qy(n){Gy[n]||(Gy[n]={text:"",files:[],reply:undefined})}function Hy(){var n=eu();n&&Gy[n.chatId]?(zy.set(Gy[n.chatId].reply),Wy.set(Gy[n.chatId].files),Fy.set(Gy[n.chatId].text)):(zy.set(undefined),Wy.set([]),Fy.set(""))}function Yy(n){if(n){var t=n.split(".");if(t&&t.length){var r=t.pop();if(r)return r.toLowerCase()}}}function Vy(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Xy(n){return function(n){if(Array.isArray(n))return Qy(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"==typeof n)return Qy(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qy(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qy(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Jy(n,t,r){var i=this,e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:b;n&&n.addEventListener("paste",function(n){if(Vy(this,i),n){var o=n.clipboardData;if(o&&o.files&&o.files.length){var u=o.files;t&&t(function(n){var t=this,i=[];return(n=Xy(n))&&n.length?(n.forEach(function(n){Vy(this,t);var o=Yy(n.name);~e.indexOf(o)?i.push(n):r&&r("".concat(ei("errorInvalidExtension"),": ").concat(n.name))}.bind(this)),i):i}(u))}}}.bind(this))}function Ky(n){return Ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ky(n)}function Zy(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function np(n){var t=this,r=n.tag,i=void 0===r?"div":r,e=n.attributes,o=void 0===e?undefined:e,u=n.classList,c=void 0===u?undefined:u,f=n.listeners,a=void 0===f?undefined:f,s=n.properties,l=void 0===s?undefined:s,h=n.children,v=void 0===h?undefined:h,d=n.fzEvent,b=void 0===d?undefined:d,y=n.fzEventAction,p=void 0===y?"click":y,m=i instanceof Node?i:document.createElement(i);(c&&c.forEach(function(n){Zy(this,t),n&&m.classList.add(n)}.bind(this)),o)&&Object.keys(o).forEach(function(n){Zy(this,t),m.setAttribute(n,o[n])}.bind(this));l&&Object.keys(l).forEach(function(n){Zy(this,t),m[n]=l[n]}.bind(this));a&&Object.keys(a).forEach(function(n){Zy(this,t),m.addEventListener(n,a[n])}.bind(this));if(b&&m.addEventListener(p,function(){Zy(this,t),"object"===Ky(b)?window.fz&&window.fz("event",b):window.fz&&window.fz("track",b)}.bind(this)),!v)return m;if("string"==typeof v)m.innerHTML=v;else if(v instanceof Node)m.appendChild(v);else for(var w=0,g=v.length;w<g;w++){var _=v[w];_&&("string"!=typeof _?(_ instanceof Node||(_=np(_)),m.appendChild(_)):m.insertAdjacentHTML("beforeend",_))}return m}function tp(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function rp(n){return function(n){if(Array.isArray(n))return ip(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"==typeof n)return ip(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ip(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ip(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function ep(n,t,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:b;if(n){var e,o=np({classList:["drag-and-drop","hidden"],listeners:{dragover:c,dragenter:c,dragleave:f,drop:function(n){if(!n)return;n.stopPropagation(),n.preventDefault();var e=n.dataTransfer;if(!e||!e.files||!e.files.length)return void f();var o=e.files;t&&t(function(n){var t=this,e=[];if(n=rp(n),!n||!n.length)return e;return n.forEach(function(n){tp(this,t);var o=Yy(n.name);~i.indexOf(o)?e.push(n):r&&r("".concat(ei("errorInvalidExtension"),": ").concat(n.name))}.bind(this)),e}(o));f()}},children:[np({classList:["drag-and-drop__title"],children:ei("dragAndDrop")})]}),u=np({classList:["drag-and-drop__errors"]});n.appendChild(o),n.appendChild(u),n.addEventListener("dragover",c),n.addEventListener("dragenter",c)}function c(n){n&&(n.stopPropagation(),n.preventDefault(),n.dataTransfer&&n.dataTransfer.items&&n.dataTransfer.items.length?(clearTimeout(e),n.dataTransfer.dropEffect="copy",o.classList.remove("hidden")):f())}function f(){var n=this;clearTimeout(e),e=setTimeout(function(){tp(this,n),o.classList.add("hidden")}.bind(this),100)}}function op(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function up(n,t){var r=this;return new Promise(function(i,e){var o=this;if(op(this,r),n)if(n.type.match(/image.*/)){var u=new Image,c=URL.createObjectURL(n),f=setTimeout(function(){return op(this,o),URL.revokeObjectURL(c),u.removeEventListener("error",a),u.removeEventListener("load",s),e(new Error("Loading error"))}.bind(this),1e4);u.addEventListener("error",a),u.addEventListener("load",s),u.src=c}else e(new Error("File must be an image"));else e(new Error("File is undefined"));function a(n){return URL.revokeObjectURL(c),clearTimeout(f),e(n)}function s(){URL.revokeObjectURL(c),clearTimeout(f);var r=document.createElement("canvas"),o=!1,a=u.width,s=u.height,l=a/s,h=Math.max(a/s,s/a);if(t.maxRatio!==undefined&&h>t.maxRatio)return e(new Error("Max aspect ratio is ".concat(t.maxRatio)));t.maxWidth!==undefined&&a>t.maxWidth&&(a=t.maxWidth,s=t.maxWidth/l,o=!0),t.maxHeight!==undefined&&s>t.maxHeight&&(s=t.maxHeight,a=t.maxHeight*l,o=!0),r.width=a,r.height=s;var v=r.getContext("2d");if(!v)return e(new Error("Canvas context is null"));v.drawImage(u,0,0,a,s);var d=n.type,b=t.type;b&&function(n){for(var t=Object.entries($y),r=0,i=t.length;r<i;r++)if(t[r][1]===n)return!0;return!1}(b)||(b=$y.mr);var y=function(n,t){for(var r=n.split(","),i=function(n){var t=n.split(",")[0].match(/:(.*?);/);if(t)return t[1]}(n),e=atob(r[1]),o=e.length,u=new Uint8Array(o);o--;)u[o]=e.charCodeAt(o);if(t!==undefined&&(i=t),!i)throw new Error("Mime type is undefined");return new Blob([u],{type:i})}(r.toDataURL(b,t.quality),d);return y.size>n.size&&!o?i(n):i(Object.assign(y,{lastModified:n.lastModified,name:n.name,webkitRelativePath:n.webkitRelativePath}))}}.bind(this))}function cp(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function fp(n,t,r){var e=this;return new Promise(function(o,u){if(cp(this,e),n&&n.length){var c=[],f=[];s()}else u(new Error("File list is empty"));function a(n){var i=this;(function(n,t){var r=this;return new Promise(function(i,e){var o=this;if(ie(this,r),0!==parseInt(n,16))if(n)if(t){var u=J(n);re(t).then(function(n){var t=this;ie(this,o);var r=n.cipherKey,c=n.hash,f=n.fileSize,a=n.mime,s=n.fileName,l=n.file,h=[u,{Uint8:E.ot},r,c,{Uint32:f},{String16:a},{String16:s}];Wr.send(S.$,h).then(function(n){var r=this,o=n.result,u=n.reader;ie(this,t);var c=Ei(u,o),f=c.messageId;o!==j.Qn||0!==parseInt(f,16)?i(c):Ji(l).then(function(n){var t=n.reader,e=n.result;ie(this,r);var o=Ei(t,e);i(o)}.bind(this))["catch"](function(n){ie(this,r),e(n)}.bind(this))}.bind(this))["catch"](function(n){ie(this,t),e(n)}.bind(this))}.bind(this))["catch"](function(n){ie(this,o),e(n)}.bind(this))}else e(new Error("File is empty"));else e(new Error("Chat id is empty"));else e(new Error("Chat id is zero"))}.bind(this))})(t,n).then(function(n){cp(this,i),r&&r(n.messageId),c.push(n.messageId),s()}.bind(this))["catch"](function(t){cp(this,i),f.push("".concat(t.message,": ").concat(n.name)),s()}.bind(this))}function s(){var r=this;if(n&&n.length&&t){var e=n[0];if(e){n.shift();var u=Yy(e.name);if(u&&~b.indexOf(u)){if(e.type.match(/image.*/)&&!e.type.includes("/gif"))return void up(e,{quality:.7,type:e.type,maxWidth:4032,maxHeight:4032,maxRatio:20}).then(a)["catch"](function(n){cp(this,r),f.push("".concat(n.message,": ").concat(e.name)),s()}.bind(this));a(e)}else f.push("".concat(i("invalidType"),": ").concat(e.name)),s()}else o({uploaded:c,errors:f})}else o({uploaded:c,errors:f})}}.bind(this))}function ap(n){var t="other";switch(n){case"txt":case"log":t="txt";break;case"mq4":case"mq5":case"set":case"tpl":case"mqh":case"ex4":case"ex5":t="mql";break;case"gif":case"jpg":case"png":case"jpeg":case"webp":t="media";break;case"zip":case"7z":case"rar":t="archive";break;default:t="other"}return t}function sp(n){return sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},sp(n)}function lp(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==sp(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==sp(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===sp(o)?o:String(o)),i)}var e,o}function hp(n,t){return hp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},hp(n,t)}function vp(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=bp(n);if(t){var e=bp(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===sp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dp(n)}(this,r)}}function dp(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function bp(n){return bp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bp(n)}function yp(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return pp(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pp(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pp(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function mp(n){var t,r,i,e,o,u,c,f,a=n[0].fileName+"";return{c:function(){t=tt("div"),r=tt("a"),i=tt("i"),e=et(),o=tt("span"),u=it(a),at(i,"class","icons-chat icons-chat_"+n[1]),at(o,"class","chat-attach__name"),at(r,"href",c=n[0].url),at(r,"target","_blank"),at(r,"title",f=n[0].fileName+" ("+n[0].fileSizeString+")"),at(t,"class","chat-attach")},m:function(n,c){Kn(n,t,c),Yn(t,r),Yn(r,i),Yn(r,e),Yn(r,o),Yn(o,u)},p:function(n,t){var i=yp(t,1)[0];1&i&&a!==(a=n[0].fileName+"")&&st(u,a),1&i&&c!==(c=n[0].url)&&at(r,"href",c),1&i&&f!==(f=n[0].fileName+" ("+n[0].fileSizeString+")")&&at(r,"title",f)},i:_n,o:_n,d:function(n){n&&Zn(t)}}}function wp(n,t,r){var i=this,e=t.data,o=ap(Yy(e.fileName)||"");return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,i),"data"in n&&r(0,e=n.data)}.bind(this),[e,o]}zy.subscribe(function(n){Ly(this,By);var t=eu();t&&(qy(t.chatId),Gy[t.chatId].reply=n)}.bind(undefined)),Wy.subscribe(function(n){Ly(this,By);var t=eu();t&&(qy(t.chatId),Gy[t.chatId].files=n)}.bind(undefined)),Fy.subscribe(function(n){Ly(this,By);var t=eu();t&&(qy(t.chatId),Gy[t.chatId].text=n)}.bind(undefined)),function(n){n.wr="image/png",n.mr="image/jpeg",n.gr="image/gif"}($y||($y={}));var gp=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&hp(n,t)}(o,n);var t,r,i,e=vp(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(dp(t=e.call(this)),n,wp,mp,An,{data:0}),t}return t=o,r&&lp(t.prototype,r),i&&lp(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),_p=gp;function Sp(n){return Sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Sp(n)}function jp(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Sp(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Sp(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Sp(o)?o:String(o)),i)}var e,o}function Op(n,t){return Op=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Op(n,t)}function Ep(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=kp(n);if(t){var e=kp(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===Sp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tp(n)}(this,r)}}function Tp(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function kp(n){return kp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kp(n)}function Ap(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Rp(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rp(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rp(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Cp(n){var t,r,i,e,o=n[0].fileSizeString+"";return{c:function(){(t=tt("span")).innerHTML='<i class="icons-chat icons-chat_play"></i>',r=et(),i=tt("span"),e=it(o),at(t,"class","chat-media__play"),at(i,"class","chat-media__size")},m:function(n,o){Kn(n,t,o),Kn(n,r,o),Kn(n,i,o),Yn(i,e)},p:function(n,t){1&Ap(t,1)[0]&&o!==(o=n[0].fileSizeString+"")&&st(e,o)},i:_n,o:_n,d:function(n){n&&Zn(t),n&&Zn(r),n&&Zn(i)}}}function xp(n,t,r){var i=this,e=t.data;return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,i),"data"in n&&r(0,e=n.data)}.bind(this),[e]}var Ip=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Op(n,t)}(o,n);var t,r,i,e=Ep(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Tp(t=e.call(this)),n,xp,Cp,An,{data:0}),t}return t=o,r&&jp(t.prototype,r),i&&jp(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Mp=Ip;function Pp(n){return Pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Pp(n)}function Up(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Pp(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Pp(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Pp(o)?o:String(o)),i)}var e,o}function Np(n,t){return Np=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Np(n,t)}function Dp(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Lp(n);if(t){var e=Lp(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===Pp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bp(n)}(this,r)}}function Bp(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Lp(n){return Lp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lp(n)}function $p(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return zp(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zp(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zp(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Wp(n){var t,r,i,e,o;return{c:function(){Rn((t=tt("img")).src,r=n[0].url)||at(t,"src",r),at(t,"width",n[1]),at(t,"height",n[2]),at(t,"loading","lazy"),at(t,"alt",i=n[0].fileName)},m:function(n,r){Kn(n,t,r),e||(o=[ut(t,"load",Fp),ut(t,"error",Gp)],e=!0)},p:function(n,e){var o=$p(e,1)[0];1&o&&!Rn(t.src,r=n[0].url)&&at(t,"src",r),2&o&&at(t,"width",n[1]),4&o&&at(t,"height",n[2]),1&o&&i!==(i=n[0].fileName)&&at(t,"alt",i)},i:_n,o:_n,d:function(n){n&&Zn(t),e=!1,Tn(o)}}}function Fp(n){var t=n.target.parentNode;t&&(t.style.backgroundImage="none")}function Gp(n){var t=n.target,r=t.parentNode;r&&r.removeChild(t)}function qp(n,t,r){var i=this,e=t.data,o=t.width,u=void 0===o?0:o,c=t.height,f=void 0===c?0:c;return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,i),"data"in n&&r(0,e=n.data),"width"in n&&r(1,u=n.width),"height"in n&&r(2,f=n.height)}.bind(this),[e,u,f]}var Hp=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Np(n,t)}(o,n);var t,r,i,e=Dp(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Bp(t=e.call(this)),n,qp,Wp,An,{data:0,width:1,height:2}),t}return t=o,r&&Up(t.prototype,r),i&&Up(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Yp=Hp;function Vp(n){return Vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vp(n)}function Xp(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Vp(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Vp(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Vp(o)?o:String(o)),i)}var e,o}function Qp(n,t){return Qp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Qp(n,t)}function Jp(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Zp(n);if(t){var e=Zp(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===Vp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Kp(n)}(this,r)}}function Kp(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Zp(n){return Zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zp(n)}function nm(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function tm(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return rm(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rm(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rm(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function im(n){var t,r;return t=new _p({props:{data:n[0]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function em(n){var t,r,i,e,o,u,c,f,a=[um,om],s=[];return i=function(n,t){return n[3]?0:1}(n),e=s[i]=a[i](n),{c:function(){t=tt("figure"),r=tt("a"),e.c(),at(r,"href",o=n[0].url),at(r,"title",n[2]),at(r,"target","_blank"),at(r,"class","chat-media__preview"),vt(r,"width",n[1].width?"".concat(n[1].width,"px"):"auto"),vt(r,"height",n[1].height?"".concat(n[1].height,"px"):"auto"),vt(r,"background-image","url("+n[0].preview.src+")"),vt(r,"background-size",(n[1].width?"".concat(n[1].width,"px"):"auto")+" auto"),at(t,"class","chat-media")},m:function(e,o){Kn(e,t,o),Yn(t,r),s[i].m(r,null),u=!0,c||(f=ut(r,"click",ct(n[4])),c=!0)},p:function(n,t){e.p(n,t),(!u||1&t&&o!==(o=n[0].url))&&at(r,"href",o),(!u||1&t)&&vt(r,"background-image","url("+n[0].preview.src+")")},i:function(n){u||(Xt(e),u=!0)},o:function(n){Qt(e),u=!1},d:function(n){n&&Zn(t),s[i].d(),c=!1,f()}}}function om(n){var t,r;return t=new Mp({props:{data:n[0]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function um(n){var t,r;return t=new Yp({props:{data:n[0],width:n[1].width,height:n[1].height}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function cm(n){var t,r,i,e,o=[em,im],u=[];function c(n,t){return n[0].preview&&n[0].fileSize<G?0:1}return t=c(n),r=u[t]=o[t](n),{c:function(){r.c(),i=ot()},m:function(n,r){u[t].m(n,r),Kn(n,i,r),e=!0},p:function(n,e){var f=this,a=tm(e,1)[0],s=t;(t=c(n))===s?u[t].p(n,a):(Yt(),Qt(u[s],1,1,function(){nm(this,f),u[s]=null}.bind(this)),Vt(),(r=u[t])?r.p(n,a):(r=u[t]=o[t](n)).c(),Xt(r,1),r.m(i.parentNode,i))},i:function(n){e||(Xt(r),e=!0)},o:function(n){Qt(r),e=!1},d:function(n){u[t].d(n),n&&Zn(i)}}}function fm(n,t,r){var i=this,e=t.data,o=function(n){if(!n.preview)return{width:0,height:0};var t=window.innerWidth,r=Vr,i=t-32-Hr-8,e=n.preview.width,o=n.preview.height;return i<r&&(r=i),e>r?o>n.preview.width?(o=r,e/=n.preview.height/r):(e=r,o/=n.preview.width/r):o>r&&(o=r,e/=n.preview.height/r),{width:e,height:o}}(e),u=e.fileName+" ("+e.fileSizeString+")",c=0===e.mime.toLowerCase().indexOf("image");return n.$$set=function(n){nm(this,i),"data"in n&&r(0,e=n.data)}.bind(this),[e,o,u,c,function(){var n;c?gf(e.url):If({src:e.url,type:e.mime,preview:null===(n=e.preview)||void 0===n?void 0:n.src})}]}var am=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Qp(n,t)}(o,n);var t,r,i,e=Jp(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Kp(t=e.call(this)),n,fm,cm,An,{data:0}),t}return t=o,r&&Xp(t.prototype,r),i&&Xp(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),sm=am;function lm(n){return lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},lm(n)}function hm(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==lm(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==lm(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===lm(o)?o:String(o)),i)}var e,o}function vm(n,t){return vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},vm(n,t)}function dm(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=ym(n);if(t){var e=ym(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===lm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bm(n)}(this,r)}}function bm(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ym(n){return ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ym(n)}function pm(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return mm(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mm(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mm(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function wm(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function gm(n){var t,r,i,e,o,u;function c(n,t){return n[1].type===O.rt?Sm:_m}var f=c(n),a=f(n),s=[Em,Om,jm],l=[];function h(n,t){return n[0].recType===E.ut?0:n[0].recType===E.et?1:n[0].recType===E.ot?2:-1}return~(e=h(n))&&(o=l[e]=s[e](n)),{c:function(){t=tt("div"),a.c(),r=et(),i=tt("div"),o&&o.c(),at(i,"class","chat-quote__content"),at(t,"class","chat-quote")},m:function(n,o){Kn(n,t,o),a.m(t,null),Yn(t,r),Yn(t,i),~e&&l[e].m(i,null),u=!0},p:function(n,u){var v=this;f===(f=c(n))&&a?a.p(n,u):(a.d(1),(a=f(n))&&(a.c(),a.m(t,r)));var d=e;(e=h(n))===d?~e&&l[e].p(n,u):(o&&(Yt(),Qt(l[d],1,1,function(){wm(this,v),l[d]=null}.bind(this)),Vt()),~e?((o=l[e])?o.p(n,u):(o=l[e]=s[e](n)).c(),Xt(o,1),o.m(i,null)):o=null)},i:function(n){u||(Xt(o),u=!0)},o:function(n){Qt(o),u=!1},d:function(n){n&&Zn(t),a.d(),~e&&l[e].d()}}}function _m(n){var t,r,i=n[0].authorName+"";return{c:function(){t=tt("div"),r=it(i),at(t,"class","chat-quote__author")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,t){1&t&&i!==(i=n[0].authorName+"")&&st(r,i)},d:function(n){n&&Zn(t)}}}function Sm(n){var t,r,i,e=n[1].name+"";return{c:function(){t=tt("div"),r=it(e),at(t,"class","chat-quote__author"),at(t,"title",i=ao?n[0].authorName:"")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,o){2&o&&e!==(e=n[1].name+"")&&st(r,e),1&o&&i!==(i=ao?n[0].authorName:"")&&at(t,"title",i)},d:function(n){n&&Zn(t)}}}function jm(n){var t,r,i,e,o=[km,Tm],u=[];function c(n,t){return n[0].preview?0:1}return t=c(n),r=u[t]=o[t](n),{c:function(){r.c(),i=ot()},m:function(n,r){u[t].m(n,r),Kn(n,i,r),e=!0},p:function(n,e){var f=this,a=t;(t=c(n))===a?u[t].p(n,e):(Yt(),Qt(u[a],1,1,function(){wm(this,f),u[a]=null}.bind(this)),Vt(),(r=u[t])?r.p(n,e):(r=u[t]=o[t](n)).c(),Xt(r,1),r.m(i.parentNode,i))},i:function(n){e||(Xt(r),e=!0)},o:function(n){Qt(r),e=!1},d:function(n){u[t].d(n),n&&Zn(i)}}}function Om(n){var t,r,i=n[0].text+"";return{c:function(){t=new pt(!1),r=ot(),t.a=r},m:function(n,e){t.m(i,n,e),Kn(n,r,e)},p:function(n,r){1&r&&i!==(i=n[0].text+"")&&t.p(i)},i:_n,o:_n,d:function(n){n&&Zn(r),n&&t.d()}}}function Em(n){var t;return{c:function(){(t=tt("span")).textContent="".concat(i("deleted")),at(t,"class","chat-quote__deleted")},m:function(n,r){Kn(n,t,r)},p:_n,i:_n,o:_n,d:function(n){n&&Zn(t)}}}function Tm(n){var t,r;return t=new _p({props:{data:n[0]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function km(n){var t,r;return t=new sm({props:{data:n[0]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function Am(n){var t,r,i=n[0]&&gm(n);return{c:function(){i&&i.c(),t=ot()},m:function(n,e){i&&i.m(n,e),Kn(n,t,e),r=!0},p:function(n,r){var e=this,o=pm(r,1)[0];n[0]?i?(i.p(n,o),1&o&&Xt(i,1)):((i=gm(n)).c(),Xt(i,1),i.m(t.parentNode,t)):i&&(Yt(),Qt(i,1,1,function(){wm(this,e),i=null}.bind(this)),Vt())},i:function(n){r||(Xt(i),r=!0)},o:function(n){Qt(i),r=!1},d:function(n){i&&i.d(n),n&&Zn(t)}}}function Rm(n,t,r){var i=this,e=t.message,o=t.chat;return n.$$set=function(n){wm(this,i),"message"in n&&r(0,e=n.message),"chat"in n&&r(1,o=n.chat)}.bind(this),[e,o]}var Cm=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&vm(n,t)}(o,n);var t,r,i,e=dm(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(bm(t=e.call(this)),n,Rm,Am,An,{message:0,chat:1}),t}return t=o,r&&hm(t.prototype,r),i&&hm(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),xm=Cm;function Im(n){return Im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Im(n)}var Mm=undefined;function Pm(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Im(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Im(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Im(o)?o:String(o)),i)}var e,o}function Um(n,t){return Um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Um(n,t)}function Nm(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Bm(n);if(t){var e=Bm(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===Im(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Dm(n)}(this,r)}}function Dm(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Bm(n){return Bm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bm(n)}function Lm(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function $m(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return zm(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zm(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zm(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Wm(n,t,r){var i=n.slice();return i[14]=t[r],i}function Fm(n,t,r){var i=n.slice();return i[14]=t[r],i}function Gm(n){var t,r,e,o,u,c,f;return o=new xm({props:{message:n[7],chat:n[3]}}),{c:function(){t=tt("div"),r=tt("i"),e=et(),rr(o.$$.fragment),at(r,"class","chat-attach-container__close icons-chat icons-chat_close-dark"),at(r,"title",i("delete")),at(t,"class","chat-quote-preview")},m:function(i,a){Kn(i,t,a),Yn(t,r),Yn(t,e),ir(o,t,null),u=!0,c||(f=[ut(r,"keyup",Jm),ut(r,"click",n[9])],c=!0)},p:function(n,t){var r={};128&t&&(r.message=n[7]),8&t&&(r.chat=n[3]),o.$set(r)},i:function(n){u||(Xt(o.$$.fragment,n),u=!0)},o:function(n){Qt(o.$$.fragment,n),u=!1},d:function(n){n&&Zn(t),er(o),c=!1,Tn(f)}}}function qm(n){var t,r,e,o,u,c,f,a=n[4].length&&Hm(n),s=n[5].length&&Vm(n);return{c:function(){t=tt("div"),r=tt("i"),e=et(),o=tt("div"),a&&a.c(),u=et(),s&&s.c(),at(r,"class","chat-attach-container__close icons-chat icons-chat_close-dark"),at(r,"title",i("delete")),at(o,"class","chat-preview-list"),at(t,"class","chat-attach-container")},m:function(i,l){Kn(i,t,l),Yn(t,r),Yn(t,e),Yn(t,o),a&&a.m(o,null),Yn(o,u),s&&s.m(o,null),c||(f=[ut(r,"keyup",Km),ut(r,"click",n[10])],c=!0)},p:function(n,t){n[4].length?a?a.p(n,t):((a=Hm(n)).c(),a.m(o,u)):a&&(a.d(1),a=null),n[5].length?s?s.p(n,t):((s=Vm(n)).c(),s.m(o,null)):s&&(s.d(1),s=null)},d:function(n){n&&Zn(t),a&&a.d(),s&&s.d(),c=!1,Tn(f)}}}function Hm(n){for(var t,r=n[4],i=[],e=0;e<r.length;e+=1)i[e]=Ym(Fm(n,r,e));return{c:function(){t=tt("ul");for(var n=0;n<i.length;n+=1)i[n].c();at(t,"class","chat-preview-list__block")},m:function(n,r){Kn(n,t,r);for(var e=0;e<i.length;e+=1)i[e].m(t,null)},p:function(n,e){if(272&e){var o;for(r=n[4],o=0;o<r.length;o+=1){var u=Fm(n,r,o);i[o]?i[o].p(u,e):(i[o]=Ym(u),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d:function(n){n&&Zn(t),nt(i,n)}}}function Ym(n){var t,r,e,o,u,c,f,a,s,l,h,v,d,b,y,p=n[14].name+"";function m(){return n[11](n[14])}return{c:function(){t=tt("li"),r=tt("div"),e=tt("img"),u=et(),c=tt("div"),f=tt("div"),a=it(p),s=et(),l=tt("button"),h=tt("i"),v=et(),Rn(e.src,o=URL.createObjectURL(n[14]))||at(e,"src",o),at(e,"alt",""),at(e,"loading","lazy"),at(r,"class","chat-preview-list__img"),at(f,"class","chat-preview-list__name"),at(h,"class","icons-chat icons-chat_close-dark"),at(l,"class","chat-preview-list__button"),at(l,"title",i("delete")),at(c,"class","chat-preview-list__content"),at(t,"class","chat-preview-list__item chat-preview-list__item_image"),at(t,"title",d=n[14].name)},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(r,e),Yn(t,u),Yn(t,c),Yn(c,f),Yn(f,a),Yn(c,s),Yn(c,l),Yn(l,h),Yn(t,v),b||(y=ut(l,"click",ct(m)),b=!0)},p:function(r,i){n=r,16&i&&!Rn(e.src,o=URL.createObjectURL(n[14]))&&at(e,"src",o),16&i&&p!==(p=n[14].name+"")&&st(a,p),16&i&&d!==(d=n[14].name)&&at(t,"title",d)},d:function(n){n&&Zn(t),b=!1,y()}}}function Vm(n){for(var t,r=n[5],i=[],e=0;e<r.length;e+=1)i[e]=Xm(Wm(n,r,e));return{c:function(){t=tt("ul");for(var n=0;n<i.length;n+=1)i[n].c();at(t,"class","chat-preview-list__block")},m:function(n,r){Kn(n,t,r);for(var e=0;e<i.length;e+=1)i[e].m(t,null)},p:function(n,e){if(288&e){var o;for(r=n[5],o=0;o<r.length;o+=1){var u=Wm(n,r,o);i[o]?i[o].p(u,e):(i[o]=Xm(u),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d:function(n){n&&Zn(t),nt(i,n)}}}function Xm(n){var t,r,e,o,u,c,f,a,s,l,h,v,d,b,y=n[14].name+"";function p(){return n[12](n[14])}return{c:function(){t=tt("li"),r=tt("i"),o=et(),u=tt("div"),c=tt("div"),f=it(y),a=et(),s=tt("button"),l=tt("i"),h=et(),at(r,"class",e="chat-preview-list__icon icons-chat icons-chat_"+ap(Yy(n[14].name)||"")),at(c,"class","chat-preview-list__name"),at(l,"class","icons-chat icons-chat_close-dark"),at(s,"class","chat-preview-list__button"),at(s,"title",i("delete")),at(u,"class","chat-preview-list__content"),at(t,"class","chat-preview-list__item"),at(t,"title",v=n[14].name)},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(t,o),Yn(t,u),Yn(u,c),Yn(c,f),Yn(u,a),Yn(u,s),Yn(s,l),Yn(t,h),d||(b=ut(s,"click",ct(p)),d=!0)},p:function(i,o){n=i,32&o&&e!==(e="chat-preview-list__icon icons-chat icons-chat_"+ap(Yy(n[14].name)||""))&&at(r,"class",e),32&o&&y!==(y=n[14].name+"")&&st(f,y),32&o&&v!==(v=n[14].name)&&at(t,"title",v)},d:function(n){n&&Zn(t),d=!1,b()}}}function Qm(n){var t,r,i,e=n[7]&&Gm(n),o=n[6].length&&qm(n);return{c:function(){t=tt("div"),e&&e.c(),r=et(),o&&o.c(),at(t,"class","chat-preview-area")},m:function(u,c){Kn(u,t,c),e&&e.m(t,null),Yn(t,r),o&&o.m(t,null),n[13](t),i=!0},p:function(n,i){var u=this,c=$m(i,1)[0];n[7]?e?(e.p(n,c),128&c&&Xt(e,1)):((e=Gm(n)).c(),Xt(e,1),e.m(t,r)):e&&(Yt(),Qt(e,1,1,function(){Lm(this,u),e=null}.bind(this)),Vt()),n[6].length?o?o.p(n,c):((o=qm(n)).c(),o.m(t,null)):o&&(o.d(1),o=null)},i:function(n){i||(Xt(e),i=!0)},o:function(n){Qt(e),i=!1},d:function(r){r&&Zn(t),e&&e.d(),o&&o.d(),n[13](null)}}}var Jm=function(){Lm(this,Mm)}.bind(undefined),Km=function(){Lm(this,Mm)}.bind(undefined);function Zm(n,t,r){var i,e,o=this,u=_n,c=function(){var n=this;return Lm(this,o),u(),u=xn(l,function(t){return Lm(this,n),r(6,i=t)}.bind(this)),l}.bind(this),f=_n,a=function(){var n=this;return Lm(this,o),f(),f=xn(s,function(t){return Lm(this,n),r(7,e=t)}.bind(this)),s}.bind(this);n.$$.on_destroy.push(function(){return Lm(this,o),u()}.bind(this)),n.$$.on_destroy.push(function(){return Lm(this,o),f()}.bind(this));var s=t.replyMessage;a();var l=t.fileList;c();var h=t.element,v=t.chat,d=[],b=[];function y(n){var t=this;l.update(function(r){return Lm(this,t),r.splice(r.indexOf(n),1),r}.bind(this))}var p=function(){Lm(this,o),s.set(undefined)}.bind(this),m=function(){Lm(this,o),l.set([])}.bind(this),w=function(n){Lm(this,o),y(n)}.bind(this),g=function(n){Lm(this,o),y(n)}.bind(this);return n.$$set=function(n){Lm(this,o),"replyMessage"in n&&a(r(1,s=n.replyMessage)),"fileList"in n&&c(r(2,l=n.fileList)),"element"in n&&r(0,h=n.element),"chat"in n&&r(3,v=n.chat)}.bind(this),n.$$.update=function(){var t=this;Lm(this,o),112&n.$$.dirty&&(r(4,d=[]),r(5,b=[]),i.length&&i.forEach(function(n){Lm(this,t),n.type.match(/image.*/)?d.push(n):b.push(n)}.bind(this)))}.bind(this),[h,s,l,v,d,b,i,e,y,p,m,w,g,function(n){var t=this;Rt[n?"unshift":"push"](function(){Lm(this,t),r(0,h=n)}.bind(this))}]}var nw=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Um(n,t)}(o,n);var t,r,i,e=Nm(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Dm(t=e.call(this)),n,Zm,Qm,An,{replyMessage:1,fileList:2,element:0,chat:3}),t}return t=o,r&&Pm(t.prototype,r),i&&Pm(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),tw=nw;function rw(n){return rw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},rw(n)}function iw(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==rw(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==rw(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===rw(o)?o:String(o)),i)}var e,o}function ew(n,t){return ew=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},ew(n,t)}function ow(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=cw(n);if(t){var e=cw(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===rw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return uw(n)}(this,r)}}function uw(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function cw(n){return cw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cw(n)}function fw(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return aw(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aw(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aw(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function sw(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function lw(n){var t,r,i,e,o,u;return{c:function(){t=tt("div"),r=tt("div"),i=tt("div"),e=it(n[1]),at(i,"class","alert alert_danger"),at(r,"class","chat-editor__errors-wrapper"),at(t,"class","chat-editor__errors")},m:function(n,o){Kn(n,t,o),Yn(t,r),Yn(r,i),Yn(i,e),u=!0},p:function(n,t){(!u||2&t)&&st(e,n[1])},i:function(n){var t=this;u||(Nt(function(){sw(this,t),o||(o=Kt(i,Sa,{duration:200},!0)),o.run(1)}.bind(this)),u=!0)},o:function(n){o||(o=Kt(i,Sa,{duration:200},!1)),o.run(0),u=!1},d:function(n){n&&Zn(t),n&&o&&o.end()}}}function hw(n){var t,r,e,o,u,c,f,a,s,l,h,v,d,y,p,m,w,g,_,S,j,O=this,E=i("add")+"";function T(t){n[16](t)}var k={replyMessage:zy,fileList:Wy,chat:n[2]};return void 0!==n[4]&&(k.element=n[4]),u=new tw({props:k}),Rt.push(function(){return sw(this,O),tr(u,"element",T)}.bind(this)),{c:function(){t=tt("div"),r=tt("form"),e=tt("fieldset"),o=tt("div"),rr(u.$$.fragment),f=et(),a=tt("div"),s=tt("input"),(l=tt("span")).innerHTML='<i class="icons-chat icons-chat_attach"></i>',h=et(),v=tt("textarea"),d=et(),y=tt("div"),p=tt("button"),m=tt("i"),w=it(E),at(s,"title",i("attachFileTitle")+": "+b.join(", ")),ht(s,"file"),s.multiple=!0,at(s,"name","attachedFile"),at(s,"accept","."+b.join(",.")),at(l,"class","button"),at(a,"class","chat-attach-form box-file"),at(v,"class","chat-editor__textarea"),at(v,"rows","1"),at(v,"placeholder",i("message")),at(m,"class","icons-chat icons-chat_send"),at(p,"type","button"),at(p,"title",i("add")),at(p,"class","button button_green button_small"+(Dr?" button_widget":"")),at(y,"class","chat-editor__tools"),at(o,"class","chat-editor__fieldset-wrapper"),at(e,"class","chat-editor__fieldset"),e.disabled=n[6],at(r,"class","chat-editor__form"),at(r,"enctype","multipart/form-data"),at(t,"class",g="chat-editor ui"+(n[6]?" chat-editor_disabled":""))},m:function(i,c){Kn(i,t,c),Yn(t,r),Yn(r,e),Yn(e,o),ir(u,o,null),Yn(o,f),Yn(o,a),Yn(a,s),Yn(a,l),Yn(o,h),Yn(o,v),lt(v,n[7]),n[18](v),Yn(o,d),Yn(o,y),Yn(y,p),Yn(p,m),Yn(p,w),n[19](t),_=!0,S||(j=[ut(s,"change",n[11]),ut(v,"input",n[17]),ut(v,"keydown",n[9]),ut(v,"keyup",n[10]),ut(p,"click",n[8]),ut(r,"submit",n[8])],S=!0)},p:function(n,r){var i=this,o={};4&r&&(o.chat=n[2]),!c&&16&r&&(c=!0,o.element=n[4],Dt(function(){return sw(this,i),c=!1}.bind(this))),u.$set(o),128&r&&lt(v,n[7]),(!_||64&r)&&(e.disabled=n[6]),(!_||64&r&&g!==(g="chat-editor ui"+(n[6]?" chat-editor_disabled":"")))&&at(t,"class",g)},i:function(n){_||(Xt(u.$$.fragment,n),_=!0)},o:function(n){Qt(u.$$.fragment,n),_=!1},d:function(r){r&&Zn(t),er(u),n[18](null),n[19](null),S=!1,Tn(j)}}}function vw(n){var t,r,i,e=n[1]&&lw(n),o=n[5]&&hw(n);return{c:function(){e&&e.c(),t=et(),o&&o.c(),r=ot()},m:function(n,u){e&&e.m(n,u),Kn(n,t,u),o&&o.m(n,u),Kn(n,r,u),i=!0},p:function(n,i){var u=this,c=fw(i,1)[0];n[1]?e?(e.p(n,c),2&c&&Xt(e,1)):((e=lw(n)).c(),Xt(e,1),e.m(t.parentNode,t)):e&&(Yt(),Qt(e,1,1,function(){sw(this,u),e=null}.bind(this)),Vt()),n[5]?o?(o.p(n,c),32&c&&Xt(o,1)):((o=hw(n)).c(),Xt(o,1),o.m(r.parentNode,r)):o&&(Yt(),Qt(o,1,1,function(){sw(this,u),o=null}.bind(this)),Vt())},i:function(n){i||(Xt(e),Xt(o),i=!0)},o:function(n){Qt(e),Qt(o),i=!1},d:function(n){e&&e.d(n),n&&Zn(t),o&&o.d(n),n&&Zn(r)}}}function dw(n){var t=this;n.length&&Wy.update(function(r){sw(this,t);for(var i=0,e=n.length;i<e;i++)r.push(n[i]);return r}.bind(this))}function bw(n,r,e){var o,u,c,f,a=this;Mn(n,iu,function(n){return sw(this,a),e(2,o=n)}.bind(this)),Mn(n,Wy,function(n){return sw(this,a),e(20,u=n)}.bind(this)),Mn(n,zy,function(n){return sw(this,a),e(15,c=n)}.bind(this)),Mn(n,Fy,function(n){return sw(this,a),e(7,f=n)}.bind(this));var s,l,v,d,y=r.resizeList,p=!1,m="",w=!1,g="";function A(){window.fz&&(o.type===O.nt?window.fz("track","MQL5+Chat+Message+Sent"):o.type===O.rt?window.fz("track","MQL5+Chat+Channel+Message+Sent"):o.type===O.tt&&window.fz("track","MQL5+Chat+Group+Message+Sent"))}function R(){var n=this;zy.set(undefined),Fy.set(""),Wy.set([]),Ut().then(function(){sw(this,n),x(),y(),l&&l.focus()}.bind(this))}function x(){if(window.getComputedStyle){e(3,s.style.height="".concat(Yr,"px"),s),e(3,s.style.flexBasis="".concat(Yr,"px"),s);var n=Math.max(Yr,Math.min(4+l.scrollHeight,200));e(4,v.style.bottom="".concat(n+1,"px"),v),e(3,s.style.height="".concat(n,"px"),s),e(3,s.style.flexBasis="".concat(n,"px"),s)}}function I(n,r,o){var u=this;(function(n,t,r){var i=this;return new Promise(function(e,o){var u=this;if(Yi(this,i),0!==parseInt(n,16))if(n){var c=J(n),f=[];if(r&&r.length){var a=[];r.forEach(function(n){var t=this;if(Yi(this,u),n.tagType===T.bt&&"citedId"in n){var r=[{Uint8:n.tagType},{Uint16:0},{Uint16:0}],i=[J(n.citedId),{Uint8:n.citedType},J(n.citedUser),{String16:n.citedAuthor},{String16:n.citedText}],e=[].concat(r,[{Uint16:Hi(i)}],i);a.push(e)}else if(n.tagType===T.ot&&"linkedIds"in n){var o=[{Uint8:n.tagType},{Uint16:0},{Uint16:0}],c=[];n.linkedIds.forEach(function(n){Yi(this,t),c.push(J(n))}.bind(this));var f=[{Uint8:n.type},{Uint8:n.linkedIds.length},c],s=[].concat(o,[{Uint16:Hi(f)}],f);a.push(s)}}.bind(this)),f=[c,{Uint8:E.et},{String32:t},{Uint32:Hi(a)},a]}else f=[c,{Uint8:E.et},{String32:t},{Uint32:0}];Wr.send(S.$,f).then(function(n){var t=n.reader,r=n.result;Yi(this,u);var i=Ei(t,r);e(i)}.bind(this))["catch"](function(n){Yi(this,u),o(n)}.bind(this))}else o(new Error("Chat id is empty"));else o(new Error("Chat id is zero"))}.bind(this))})(n,r,o).then(function(){sw(this,u),A(),e(6,w=!1),R()}.bind(this))["catch"](function(n){sw(this,u);var r=n;parseInt(r.name,10)===j.Yn?e(1,m=i("errorUserNonChatablePrivacyFriends")):e(1,m=r.message),e(6,w=!1),h.error(t.T,r,"Add message")}.bind(this))}function M(){var n=this;if(!w){var r=In(Fy).trim();if(!(r.length>4e3))return c||u.length?!c||r&&r.length?1!==u.length||r.length||c?r.length?void function(){var n=this;e(6,w=!0);var t=In(Fy).trim(),r=undefined;if(c){r=[];var f="";if(c.recType===E.et){var a=c.text.indexOf("\n");f=a>0?c.text.substring(0,Math.min(a,100)):c.text.substring(0,100)}r.push({tagType:T.bt,citedId:c.messageId,citedType:c.recType,citedUser:c.authorId,citedAuthor:c.authorName,citedText:f})}u&&u.length?fp(u,o.chatId,function(t){sw(this,n),Zu(t)}.bind(this)).then(function(i){sw(this,n),r||(r=[]),e(1,m=i.errors.join(". ")),r.push({tagType:T.ot,type:k,linkedIds:i.uploaded}),I(o.chatId,t,r)}.bind(this)):t?I(o.chatId,t,r):(e(6,w=!1),e(1,m=i("emptyMessageError")))}():void e(1,m=i("emptyMessageError")):(e(6,w=!0),void fp(u,o.chatId,undefined).then(function(t){sw(this,n),e(1,m=t.errors.join(". ")),t.uploaded.length&&A(),e(6,w=!1),R()}.bind(this))["catch"](function(r){sw(this,n),e(1,m=r.message),e(6,w=!1),h.error(t.T,m,"Add message files")}.bind(this))):void e(1,m=i("emptyMessageError")):void(r&&r.length?(e(6,w=!0),I(o.chatId,r,undefined)):e(1,m=i("emptyMessageError")));e(1,m=i("longMessageError",4e3))}}return iu.subscribe(function(n){sw(this,a),n.chatId!==g&&e(14,g=n.chatId)}.bind(this)),Et(function(){sw(this,a),Hy(),l&&(l.focus(),s&&(ep(s,dw,(function(n){e(1,m=n)}),b),Jy(l,dw,(function(n){e(1,m=n)}),b)))}.bind(this)),n.$$set=function(n){sw(this,a),"resizeList"in n&&e(12,y=n.resizeList)}.bind(this),n.$$.update=function(){var t=this;if(sw(this,a),4&n.$$.dirty){var r=o.authorId===_;e(5,p=!(r||o.isClosed||!(o.perms&C.Pt)||Nr))}8194&n.$$.dirty&&m&&(clearTimeout(d),e(13,d=setTimeout(function(){sw(this,t),e(1,m="")}.bind(this),5e3))),32769&n.$$.dirty&&c&&l&&l.focus(),16384&n.$$.dirty&&g&&Hy()}.bind(this),[l,m,o,s,v,p,w,f,M,function(n){return"Enter"!==n.key||!n.ctrlKey||(M(),!1)},function(){x(),y()},function(n){var t=this,r=n.target;if(r&&r.files){var o=r.files;Wy.update(function(n){sw(this,t);for(var r=0,u=o.length;r<u;r++)n.push(o[r]);return n.length>8&&(n.splice(8),e(1,m=i("maxNumberFiles",8))),n}.bind(this)),r.value="",r.type="",r.type="file"}},y,d,g,c,function(n){e(4,v=n)},function(){f=this.value,Fy.set(f)},function(n){var t=this;Rt[n?"unshift":"push"](function(){sw(this,t),e(0,l=n)}.bind(this))},function(n){var t=this;Rt[n?"unshift":"push"](function(){sw(this,t),e(3,s=n)}.bind(this))}]}var yw=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&ew(n,t)}(o,n);var t,r,i,e=ow(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(uw(t=e.call(this)),n,bw,vw,An,{resizeList:12}),t}return t=o,r&&iw(t.prototype,r),i&&iw(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),pw=yw;function mw(n){return mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},mw(n)}function ww(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==mw(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==mw(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===mw(o)?o:String(o)),i)}var e,o}function gw(n,t){return gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},gw(n,t)}function _w(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=jw(n);if(t){var e=jw(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===mw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Sw(n)}(this,r)}}function Sw(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function jw(n){return jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jw(n)}function Ow(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Ew(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ew(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ew(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Tw(n){var t,r,i,e,o,u,c,f,a=si({dateTime:n[0].date,type:"time"})+"";return{c:function(){t=tt("div"),r=tt("div"),i=it(a),o=et(),u=tt("div"),c=tt("div"),f=it(n[1]),at(r,"class","chat-message__date"),at(r,"title",e=n[0].dateText),at(c,"class","chat-message__buble"),at(u,"class","chat-message__box"),at(t,"class","chat-message chat-message_system")},m:function(n,e){Kn(n,t,e),Yn(t,r),Yn(r,i),Yn(t,o),Yn(t,u),Yn(u,c),Yn(c,f)},p:function(n,t){var o=Ow(t,1)[0];1&o&&a!==(a=si({dateTime:n[0].date,type:"time"})+"")&&st(i,a),1&o&&e!==(e=n[0].dateText)&&at(r,"title",e),2&o&&st(f,n[1])},i:_n,o:_n,d:function(n){n&&Zn(t)}}}function kw(n,t,r){var e=this,o=t.message,u=t.chat,c="",f=u.type===O.rt;switch(o.type){case A.yt:c=o.userId===co?i("systemYouInvited",u.name):i("systemUserInvited",o.authorName,o.userName||"");break;case A.wt:c=o.authorId===o.userId?i("systemChatUserLeft",o.userName||""):i(f?"systemChannelUserRemoved":"systemChatUserRemoved",o.authorName,o.userName||"");break;case A.gt:c=f?o.changeValue?i("systemChannelPublic",o.authorName||""):i("systemChannelPrivate",o.authorName)||"":o.changeValue?i("systemChatPublic",o.authorName||""):i("systemChatPrivate",o.authorName||"");break;case A._t:c=o.changeValue?i("systemChatLimited",o.authorName||""):i("systemChatUnlimited",o.authorName||"");break;case A.St:c=f?o.changeValue?i("systemChannelClosed"):i("systemChannelReopened"):o.changeValue?i("systemChatClosed",o.authorName):i("systemChatReopened",o.authorName);break;case A.jt:c=f?i("systemChannelRename",'"'.concat(o.name||"",'"')):i("systemChatRename",o.authorName,'"'.concat(o.name||"",'"'));break;case A.Ot:c=f?i("systemChannelCreate",'"'.concat(o.name||"",'"')):i("systemChatCreate",o.authorName,'"'.concat(o.name||"",'"'));break;default:c=""}return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,e),"message"in n&&r(0,o=n.message),"chat"in n&&r(2,u=n.chat)}.bind(this),[o,c,u]}var Aw=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&gw(n,t)}(o,n);var t,r,i,e=_w(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Sw(t=e.call(this)),n,kw,Tw,An,{message:0,chat:2}),t}return t=o,r&&ww(t.prototype,r),i&&ww(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Rw=Aw;function Cw(n){return Cw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Cw(n)}function xw(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Cw(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Cw(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Cw(o)?o:String(o)),i)}var e,o}function Iw(n,t){return Iw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Iw(n,t)}function Mw(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Uw(n);if(t){var e=Uw(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===Cw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pw(n)}(this,r)}}function Pw(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Uw(n){return Uw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uw(n)}function Nw(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Dw(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Bw(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bw(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bw(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Lw(n,t,r){var i=n.slice();return i[21]=t[r],i}function $w(n){var t,r;return(t=new Os({props:{$$slots:{buttons:[qw],content:[Gw],title:[Ww]},$$scope:{ctx:n}}})).$on("close",n[18]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};16777247&r&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function zw(n){var t,r;return(t=new Os({props:{withButtons:!1,$$slots:{content:[Yw],title:[Hw]},$$scope:{ctx:n}}})).$on("close",n[14]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};16777312&r&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function Ww(n){var t;return{c:function(){(t=tt("span")).textContent="".concat(i("complaintTitle")),at(t,"slot","title")},m:function(n,r){Kn(n,t,r)},p:_n,d:function(n){n&&Zn(t)}}}function Fw(n){var t,r,e,o,u,c,f=i(n[21].name)+"";return{c:function(){t=tt("input"),r=et(),e=tt("label"),o=it(f),at(t,"name","complaintType"),t.__value=n[21].num,t.value=t.__value,at(t,"class","radio"),ht(t,"radio"),at(t,"id","complaintType"+n[21].num),n[16][0].push(t),at(e,"for","complaintType"+n[21].num)},m:function(i,f){Kn(i,t,f),t.checked=t.__value===n[2],Kn(i,r,f),Kn(i,e,f),Yn(e,o),u||(c=ut(t,"change",n[15]),u=!0)},p:function(n,r){4&r&&(t.checked=t.__value===n[2])},d:function(i){i&&Zn(t),n[16][0].splice(n[16][0].indexOf(t),1),i&&Zn(r),i&&Zn(e),u=!1,c()}}}function Gw(n){for(var t,r,e,o,u,c,f,a,s,l,h,v,d,b,y,p,m,w,g,_,S,j,E,T,k,A,R=(n[1].type===O.rt?n[1].name:n[0].authorName)+"",C=i("comment")+"",x=n[4].length+"",I=Qw,M=[],P=0;P<I.length;P+=1)M[P]=Fw(Lw(n,I,P));return{c:function(){t=tt("div"),r=tt("form"),e=tt("div"),o=tt("i"),u=et(),c=tt("b"),f=it(R),a=it(":"),s=et(),l=it(n[3]),h=et(),v=tt("div");for(var i=0;i<M.length;i+=1)M[i].c();d=et(),b=tt("div"),y=tt("div"),p=it(C),m=et(),w=tt("div"),g=it(x),_=it("/"),S=it(Xw),j=et(),E=tt("div"),T=tt("textarea"),at(o,"class","icons-ux icons-ux_reply"),at(e,"class","chat-complaint__message"),at(v,"class","chat-complaint__type-list"),at(w,"class","chat-complaint__count"),at(w,"id","complaint_char_counter"),at(y,"class","chat-complaint__title"),at(T,"class","textarea"),at(T,"name","complaint_text"),at(T,"rows","3"),at(E,"class","complaint-window__editor"),at(b,"class","chat-complaint__item"),at(r,"class","chat-complaint"),at(t,"slot","content")},m:function(i,O){Kn(i,t,O),Yn(t,r),Yn(r,e),Yn(e,o),Yn(e,u),Yn(e,c),Yn(c,f),Yn(c,a),Yn(e,s),Yn(e,l),Yn(r,h),Yn(r,v);for(var R=0;R<M.length;R+=1)M[R].m(v,null);Yn(r,d),Yn(r,b),Yn(b,y),Yn(y,p),Yn(y,m),Yn(y,w),Yn(w,g),Yn(w,_),Yn(w,S),Yn(b,j),Yn(b,E),Yn(E,T),lt(T,n[4]),k||(A=[ut(T,"input",n[17]),ut(T,"input",n[9])],k=!0)},p:function(n,t){if(3&t&&R!==(R=(n[1].type===O.rt?n[1].name:n[0].authorName)+"")&&st(f,R),8&t&&st(l,n[3]),4&t){var r;for(I=Qw,r=0;r<I.length;r+=1){var i=Lw(n,I,r);M[r]?M[r].p(i,t):(M[r]=Fw(i),M[r].c(),M[r].m(v,null))}for(;r<M.length;r+=1)M[r].d(1);M.length=I.length}16&t&&x!==(x=n[4].length+"")&&st(g,x),16&t&&lt(T,n[4])},d:function(n){n&&Zn(t),nt(M,n),k=!1,Tn(A)}}}function qw(n){var t,r,e,o;return{c:function(){t=tt("span"),(r=tt("button")).textContent="".concat(i("add")),at(r,"class","button button_green qa-dialog-ok"),at(t,"slot","buttons")},m:function(i,u){Kn(i,t,u),Yn(t,r),e||(o=ut(r,"click",n[10]),e=!0)},p:_n,d:function(n){n&&Zn(t),e=!1,o()}}}function Hw(n){var t,r;return{c:function(){t=tt("span"),r=it(n[5]),at(t,"slot","title")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,t){32&t&&st(r,n[5])},d:function(n){n&&Zn(t)}}}function Yw(n){var t,r,i;return{c:function(){t=tt("div"),r=tt("div"),i=it(n[6]),at(r,"class","chat-alert-text"),at(t,"slot","content")},m:function(n,e){Kn(n,t,e),Yn(t,r),Yn(r,i)},p:function(n,t){64&t&&st(i,n[6])},d:function(n){n&&Zn(t)}}}function Vw(n){var t,r,i,e,o=[zw,$w],u=[];function c(n,t){return n[5]?0:1}return t=c(n),r=u[t]=o[t](n),{c:function(){r.c(),i=ot()},m:function(n,r){u[t].m(n,r),Kn(n,i,r),e=!0},p:function(n,e){var f=this,a=Dw(e,1)[0],s=t;(t=c(n))===s?u[t].p(n,a):(Yt(),Qt(u[s],1,1,function(){Nw(this,f),u[s]=null}.bind(this)),Vt(),(r=u[t])?r.p(n,a):(r=u[t]=o[t](n)).c(),Xt(r,1),r.m(i.parentNode,i))},i:function(n){e||(Xt(r),e=!0)},o:function(n){Qt(r),e=!1},d:function(n){u[t].d(n),n&&Zn(i)}}}var Xw=150,Qw=[{name:"spam",num:0},{name:"abuse",num:1},{name:"advert",num:2},{name:"complaintOther",num:500}];function Jw(n,t,r){var e,o,u=this,c=t.message,f=t.chat,a=0,s="",l="",h="",v="",d="",b="",y="",p=Fs(f.authorId);Mn(n,p,function(n){return Nw(this,u),r(13,o=n)}.bind(this));var m=Fs(c.authorId);Mn(n,m,function(n){return Nw(this,u),r(12,e=n)}.bind(this));return n.$$set=function(n){Nw(this,u),"message"in n&&r(0,c=n.message),"chat"in n&&r(1,f=n.chat)}.bind(this),n.$$.update=function(){if(Nw(this,u),1&n.$$.dirty)switch(c.recType){case E.et:r(3,s=c.text);break;case E.ot:r(3,s=c.fileName)}2&n.$$.dirty&&(f.type===O.rt?y=f.inviteLink?"channels/".concat(f.inviteLink):"channels/".concat(f.chatId):f.type===O.tt&&(y="messages/".concat(f.chatId))),8192&n.$$.dirty&&o.userLogin&&(b=o.userLogin),6146&n.$$.dirty&&e.userLogin&&(r(11,d=e.userLogin),f.type===O.nt&&(y="users/".concat(d,"/messages")))}.bind(this),[c,f,a,s,l,h,v,p,m,function(n){l.length>Xw&&(n.preventDefault(),r(4,l=l.slice(0,Xw)))},function(){var n={complaintType:a,complaintText:l,chatId:f.chatId,chatLink:y,chatAuthorLogin:b,chatAuthorName:f.authorName,chatMessage:s,chatMessageAuthorLogin:d,chatMessageAuthorName:c.authorName,chatUsersCount:f.countMembers,chatType:f.type,__signature:Ir};window.Ajax.post("/complaint/new/chat",n,!1,{onready:function(){r(5,h=i("complaintTitle")),r(6,v=i("complaintSuccess"))},onerror:function(){r(5,h=i("complaintTitle")),r(6,v=i("complaintError"))}},undefined,!0)},d,e,o,function(t){kt.call(this,n,t)},function(){a=this.__value,r(2,a)},[[]],function(){l=this.value,r(4,l)},function(t){kt.call(this,n,t)}]}var Kw=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Iw(n,t)}(o,n);var t,r,i,e=Mw(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Pw(t=e.call(this)),n,Jw,Vw,An,{message:0,chat:1}),t}return t=o,r&&xw(t.prototype,r),i&&xw(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Zw=Kw;function ng(n){return ng="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ng(n)}function tg(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==ng(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==ng(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===ng(o)?o:String(o)),i)}var e,o}function rg(n,t){return rg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},rg(n,t)}function ig(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=og(n);if(t){var e=og(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===ng(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return eg(n)}(this,r)}}function eg(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function og(n){return og=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},og(n)}function ug(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function cg(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return fg(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fg(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fg(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function ag(n){var t,r,e,o=n[7]&&function(n){var t,r,e,o,u,c,f=i("replyMessage")+"";return{c:function(){t=tt("div"),r=tt("a"),e=tt("i"),o=it(f),at(e,"class","icons-chat icons-chat_reply"),at(r,"href","#"),at(t,"class","chat-window-menu__item chat-window-menu__item_cap")},m:function(i,f){Kn(i,t,f),Yn(t,r),Yn(r,e),Yn(r,o),u||(c=ut(r,"click",ct(n[11])),u=!0)},p:_n,d:function(n){n&&Zn(t),u=!1,c()}}}(n),u=n[5]&&function(n){var t,r,e,o,u,c,f=i("delete")+"";return{c:function(){t=tt("div"),r=tt("a"),e=tt("i"),o=it(f),at(e,"class","icons-chat icons-chat_delete"),at(r,"href","#"),at(t,"class","chat-window-menu__item chat-window-menu__item_cap chat-window-menu__item_red")},m:function(i,f){Kn(i,t,f),Yn(t,r),Yn(r,e),Yn(r,o),u||(c=ut(r,"click",ct(n[12])),u=!0)},p:_n,d:function(n){n&&Zn(t),u=!1,c()}}}(n),c=n[6]&&function(n){var t,r,e,o,u,c,f=i("complaint")+"";return{c:function(){t=tt("div"),r=tt("a"),e=tt("i"),o=it(f),at(e,"class","icons-chat icons-chat_attention"),at(r,"href","#"),at(t,"class","chat-window-menu__item chat-window-menu__item_cap")},m:function(i,f){Kn(i,t,f),Yn(t,r),Yn(r,e),Yn(r,o),u||(c=ut(r,"click",ct(n[13])),u=!0)},p:_n,d:function(n){n&&Zn(t),u=!1,c()}}}(n);return{c:function(){o&&o.c(),t=et(),u&&u.c(),r=et(),c&&c.c(),e=ot()},m:function(n,i){o&&o.m(n,i),Kn(n,t,i),u&&u.m(n,i),Kn(n,r,i),c&&c.m(n,i),Kn(n,e,i)},p:function(n,t){n[7]&&o.p(n,t),n[5]&&u.p(n,t),n[6]&&c.p(n,t)},d:function(n){o&&o.d(n),n&&Zn(t),u&&u.d(n),n&&Zn(r),c&&c.d(n),n&&Zn(e)}}}function sg(n){var t,r;return(t=new Zw({props:{message:n[1],chat:n[2]}})).$on("close",n[14]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};2&r&&(i.message=n[1]),4&r&&(i.chat=n[2]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function lg(n){var t,r,i,e=n[8]&&ag(n),o=n[4]&&sg(n);return{c:function(){e&&e.c(),t=et(),o&&o.c(),r=ot()},m:function(n,u){e&&e.m(n,u),Kn(n,t,u),o&&o.m(n,u),Kn(n,r,u),i=!0},p:function(n,t){var i=this,u=cg(t,1)[0];n[8]&&e.p(n,u),n[4]?o?(o.p(n,u),16&u&&Xt(o,1)):((o=sg(n)).c(),Xt(o,1),o.m(r.parentNode,r)):o&&(Yt(),Qt(o,1,1,function(){ug(this,i),o=null}.bind(this)),Vt())},i:function(n){i||(Xt(o),i=!0)},o:function(n){Qt(o),i=!1},d:function(n){e&&e.d(n),n&&Zn(t),o&&o.d(n),n&&Zn(r)}}}function hg(n,r,i){var e,o,u=this,c=r.showedMenu,f=r.message,a=r.chat,s=f.authorId===_,l=a.type===O.nt,v=f.authorId===Mr,d=!1,b=!1,y=!!(a.perms&C.Ut)||v&&!!(l||a.perms&C.Pt),p=!s&&!v,m=!s&&a.type!==O.rt&&(l||!!(a.perms&C.Pt)),w=y||p||m,g=function(){ug(this,u),function(n){zy.set(n)}(f),i(0,c=!1)}.bind(this),T=function(){ug(this,u),i(3,d=!0),i(0,c=!1)}.bind(this),k=function(){ug(this,u),i(4,b=!0)}.bind(this),A=function(){ug(this,u),i(4,b=!1),i(0,c=!1)}.bind(this);return n.$$set=function(n){ug(this,u),"showedMenu"in n&&i(0,c=n.showedMenu),"message"in n&&i(1,f=n.message),"chat"in n&&i(2,a=n.chat)}.bind(this),n.$$.update=function(){var r=this;if(ug(this,u),1550&n.$$.dirty&&d){i(3,d=!1);var c=[];f.recType===E.et&&(null===i(10,o=null===i(9,e=f.tags)||void 0===e?void 0:e.files)||void 0===o?void 0:o.linkedIds)&&f.tags.files.linkedIds.forEach(function(n){ug(this,r),c.push(n)}.bind(this)),f.linkId&&0!==parseInt(f.linkId,16)&&c.push(f.linkId),c.push(f.messageId),c.forEach(function(n){var i=this;ug(this,r),function(n,t){var r=this;return new Promise(function(i,e){var o=this;if(qi(this,r),0!==parseInt(n,16))if(0!==parseInt(t,16))if(t)if(n){var u=J(n),c=J(t);Wr.send(S.$,[u,{Uint8:E.ut},c]).then(function(n){var t=n.reader,r=n.result;qi(this,o);var e=Ei(t,r);i(e)}.bind(this))["catch"](function(n){qi(this,o),e(n)}.bind(this))}else e(new Error("Chat id is empty"));else e(new Error("Message id is empty"));else e(new Error("Message id is zero"));else e(new Error("Chat id is zero"))}.bind(this))}(a.chatId,n).then(function(t){ug(this,i),t.result===j.Xn&&nc(n)}.bind(this))["catch"](function(n){ug(this,i),ga.set(n.message),h.error(t.T,n)}.bind(this))}.bind(this))}}.bind(this),[c,f,a,d,b,y,p,m,w,e,o,g,T,k,A]}var vg=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&rg(n,t)}(o,n);var t,r,i,e=ig(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(eg(t=e.call(this)),n,hg,lg,An,{showedMenu:0,message:1,chat:2}),t}return t=o,r&&tg(t.prototype,r),i&&tg(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),dg=vg;function bg(n){return bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bg(n)}var yg=undefined;function pg(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==bg(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==bg(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===bg(o)?o:String(o)),i)}var e,o}function mg(n,t){return mg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},mg(n,t)}function wg(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=_g(n);if(t){var e=_g(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===bg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gg(n)}(this,r)}}function gg(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _g(n){return _g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_g(n)}function Sg(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return jg(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jg(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jg(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Og(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Eg(n){var t,r,i,e,o=this;function u(t){n[7](t)}var c={message:n[0],chat:n[1]};return void 0!==n[3]&&(c.showedMenu=n[3]),r=new dg({props:c}),Rt.push(function(){return Og(this,o),tr(r,"showedMenu",u)}.bind(this)),{c:function(){t=tt("div"),rr(r.$$.fragment),at(t,"class","chat-dropdown-menu__list")},m:function(n,i){Kn(n,t,i),ir(r,t,null),e=!0},p:function(n,t){var e=this,o={};1&t&&(o.message=n[0]),2&t&&(o.chat=n[1]),!i&&8&t&&(i=!0,o.showedMenu=n[3],Dt(function(){return Og(this,e),i=!1}.bind(this))),r.$set(o)},i:function(n){e||(Xt(r.$$.fragment,n),e=!0)},o:function(n){Qt(r.$$.fragment,n),e=!1},d:function(n){n&&Zn(t),er(r)}}}function Tg(n){var t,r,i=n[5]&&function(n){var t,r,i,e,o,u,c,f=n[3]&&Eg(n);return{c:function(){t=tt("div"),(r=tt("div")).innerHTML="<i></i><i></i><i></i>",i=et(),f&&f.c(),at(r,"class","chat-dropdown-menu__btn"),at(t,"class",e="chat-dropdown-menu"+(n[3]?" chat-dropdown-menu_show":"")+(n[4]?" chat-dropdown-menu_bottom":""))},m:function(e,a){Kn(e,t,a),Yn(t,r),Yn(t,i),f&&f.m(t,null),n[8](t),o=!0,u||(c=[ut(r,"keyup",kg),ut(r,"click",n[6])],u=!0)},p:function(n,r){var i=this;n[3]?f?(f.p(n,r),8&r&&Xt(f,1)):((f=Eg(n)).c(),Xt(f,1),f.m(t,null)):f&&(Yt(),Qt(f,1,1,function(){Og(this,i),f=null}.bind(this)),Vt()),(!o||24&r&&e!==(e="chat-dropdown-menu"+(n[3]?" chat-dropdown-menu_show":"")+(n[4]?" chat-dropdown-menu_bottom":"")))&&at(t,"class",e)},i:function(n){o||(Xt(f),o=!0)},o:function(n){Qt(f),o=!1},d:function(r){r&&Zn(t),f&&f.d(),n[8](null),u=!1,Tn(c)}}}(n);return{c:function(){i&&i.c(),t=ot()},m:function(n,e){i&&i.m(n,e),Kn(n,t,e),r=!0},p:function(n,t){var r=Sg(t,1)[0];n[5]&&i.p(n,r)},i:function(n){r||(Xt(i),r=!0)},o:function(n){Qt(i),r=!1},d:function(n){i&&i.d(n),n&&Zn(t)}}}var kg=function(){Og(this,yg)}.bind(undefined);function Ag(n,t,r){var i,e=this,o=t.message,u=t.chat,c=!1,f=o.authorId===_,a=u.type===O.nt,s=o.authorId===co,l=!1,h=!!(u.perms&C.Ut)||s&&!!(a||u.perms&C.Pt),v=!f&&!s,d=!f&&u.type!==O.rt&&(a||!!(u.perms&C.Pt)),b=h||v||d;function y(n){if(i){var t=n.target;t&&!i.contains(t)&&r(3,c=!1)}}Et(function(){var n=this;return Og(this,e),document.addEventListener("click",y),function(){Og(this,n),document.removeEventListener("click",y)}.bind(this)}.bind(this));var p=function(){Og(this,e),r(3,c=!c)}.bind(this);return n.$$set=function(n){Og(this,e),"message"in n&&r(0,o=n.message),"chat"in n&&r(1,u=n.chat)}.bind(this),n.$$.update=function(){if(Og(this,e),12&n.$$.dirty&&i&&c){var t=i.parentNode;if(t){var o=t.parentNode;if(o){var u=o.getBoundingClientRect(),f=t.getBoundingClientRect();r(4,l=u.bottom-f.top<150)}}}}.bind(this),[o,u,i,c,l,b,p,function(n){r(3,c=n)},function(n){var t=this;Rt[n?"unshift":"push"](function(){Og(this,t),r(2,i=n)}.bind(this))}]}var Rg=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&mg(n,t)}(o,n);var t,r,i,e=wg(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(gg(t=e.call(this)),n,Ag,Tg,An,{message:0,chat:1}),t}return t=o,r&&pg(t.prototype,r),i&&pg(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Cg=Rg;function xg(n){return xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xg(n)}function Ig(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==xg(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==xg(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===xg(o)?o:String(o)),i)}var e,o}function Mg(n,t){return Mg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Mg(n,t)}function Pg(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Ng(n);if(t){var e=Ng(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===xg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ug(n)}(this,r)}}function Ug(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ng(n){return Ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ng(n)}function Dg(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Bg(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Lg(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lg(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lg(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function $g(n){var t,r;return t=new _p({props:{data:n[0]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function zg(n){var t,r;return t=new sm({props:{data:n[0]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function Wg(n){var t,r,i,e,o=[zg,$g],u=[];function c(n,t){return(n[2]&&n[1]<G||n[3])&&n[0].preview?0:1}return t=c(n),r=u[t]=o[t](n),{c:function(){r.c(),i=ot()},m:function(n,r){u[t].m(n,r),Kn(n,i,r),e=!0},p:function(n,e){var f=this,a=Bg(e,1)[0],s=t;(t=c(n))===s?u[t].p(n,a):(Yt(),Qt(u[s],1,1,function(){Dg(this,f),u[s]=null}.bind(this)),Vt(),(r=u[t])?r.p(n,a):(r=u[t]=o[t](n)).c(),Xt(r,1),r.m(i.parentNode,i))},i:function(n){e||(Xt(r),e=!0)},o:function(n){Qt(r),e=!1},d:function(n){u[t].d(n),n&&Zn(i)}}}function Fg(n,t,r){var i=this,e=t.message,o=e.fileSize,u=0===e.mime.toLowerCase().indexOf("image"),c=0===e.mime.toLowerCase().indexOf("video");return n.$$set=function(n){Dg(this,i),"message"in n&&r(0,e=n.message)}.bind(this),[e,o,u,c]}var Gg=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Mg(n,t)}(o,n);var t,r,i,e=Pg(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Ug(t=e.call(this)),n,Fg,Wg,An,{message:0}),t}return t=o,r&&Ig(t.prototype,r),i&&Ig(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),qg=Gg;function Hg(n){return Hg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Hg(n)}function Yg(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Hg(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Hg(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Hg(o)?o:String(o)),i)}var e,o}function Vg(n,t){return Vg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Vg(n,t)}function Xg(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Jg(n);if(t){var e=Jg(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===Hg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qg(n)}(this,r)}}function Qg(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Jg(n){return Jg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jg(n)}function Kg(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Zg(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return n_(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n_(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n_(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function t_(n){Vn(n,"c-18ka4f6",".chat-image-block.c-18ka4f6.c-18ka4f6{position:absolute;margin:0;overflow:hidden;padding:4px;box-sizing:border-box}.chat-image-link.c-18ka4f6.c-18ka4f6{width:100%;height:100%;display:block;background-size:cover;background-position:center}.chat-image-link.c-18ka4f6 img.c-18ka4f6{width:100%;height:100%;object-fit:cover;object-position:top}")}function r_(n){var t,r,i,e,o,u,c,f;return{c:function(){var c;t=tt("figure"),r=tt("a"),at(i=tt("img"),"alt",""),at(i,"title",e=n[0].fileName),Rn(i.src,o=n[0].url)||at(i,"src",o),at(i,"loading","lazy"),at(i,"class","c-18ka4f6"),at(r,"class","chat-image-link c-18ka4f6"),at(r,"href",u=n[0].url),vt(r,"background-image","url("+(null===(c=n[0].preview)||void 0===c?void 0:c.src)+")"),at(t,"class","chat-image-block c-18ka4f6"),vt(t,"width",n[0].width),vt(t,"height",n[0].height),vt(t,"top",n[0].top),vt(t,"left",n[0].left)},m:function(e,o){Kn(e,t,o),Yn(t,r),Yn(r,i),n[3](t),c||(f=ut(r,"click",ct(n[2])),c=!0)},p:function(n,c){var f,a=Zg(c,1)[0];(1&a&&e!==(e=n[0].fileName)&&at(i,"title",e),1&a&&!Rn(i.src,o=n[0].url)&&at(i,"src",o),1&a&&u!==(u=n[0].url)&&at(r,"href",u),1&a)&&vt(r,"background-image","url("+(null===(f=n[0].preview)||void 0===f?void 0:f.src)+")");1&a&&vt(t,"width",n[0].width),1&a&&vt(t,"height",n[0].height),1&a&&vt(t,"top",n[0].top),1&a&&vt(t,"left",n[0].left)},i:_n,o:_n,d:function(r){r&&Zn(t),n[3](null),c=!1,f()}}}function i_(n,t,r){var i,e=this,o=t.data;return n.$$set=function(n){Kg(this,e),"data"in n&&r(0,o=n.data)}.bind(this),[o,i,function(){for(var n=this,t=i.parentNode,r=[];t&&t.parentNode&&!t.classList.contains("chat-media-list");)t=t.parentNode;t&&t.classList.contains("chat-media-list")&&t.querySelectorAll("img").forEach(function(t){Kg(this,n);var i=t.getAttribute("src");i&&r.push(i)}.bind(this)),gf(o.url,r)},function(n){var t=this;Rt[n?"unshift":"push"](function(){Kg(this,t),r(1,i=n)}.bind(this))}]}var e_=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Vg(n,t)}(o,n);var t,r,i,e=Xg(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Qg(t=e.call(this)),n,i_,r_,An,{data:0},t_),t}return t=o,r&&Yg(t.prototype,r),i&&Yg(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),o_=e_,u_=540,c_=Math.min(800,document.body.clientWidth-80);function f_(n){return f_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},f_(n)}function a_(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==f_(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==f_(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===f_(o)?o:String(o)),i)}var e,o}function s_(n,t){return s_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},s_(n,t)}function l_(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=v_(n);if(t){var e=v_(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===f_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h_(n)}(this,r)}}function h_(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function v_(n){return v_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},v_(n)}function d_(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return b_(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b_(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b_(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function y_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function p_(n){Vn(n,"c-1idxkcg",".chat-gallery.c-1idxkcg{overflow:hidden;max-width:100%}.chat-gallery__row.c-1idxkcg{position:relative}")}function m_(n,t,r){var i=n.slice();return i[3]=t[r],i}function w_(n,t,r){var i=n.slice();return i[6]=t[r],i}function g_(n){var t,r,i,e,o=[S_,__],u=[];function c(n,t){return n[0].length>1?0:1}return t=c(n),r=u[t]=o[t](n),{c:function(){r.c(),i=ot()},m:function(n,r){u[t].m(n,r),Kn(n,i,r),e=!0},p:function(n,e){var f=this,a=t;(t=c(n))===a?u[t].p(n,e):(Yt(),Qt(u[a],1,1,function(){y_(this,f),u[a]=null}.bind(this)),Vt(),(r=u[t])?r.p(n,e):(r=u[t]=o[t](n)).c(),Xt(r,1),r.m(i.parentNode,i))},i:function(n){e||(Xt(r),e=!0)},o:function(n){Qt(r),e=!1},d:function(n){u[t].d(n),n&&Zn(i)}}}function __(n){var t,r;return t=new sm({props:{data:n[0][0]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0][0]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function S_(n){for(var t,r,i=this,e=n[1],o=[],u=0;u<e.length;u+=1)o[u]=O_(m_(n,e,u));var c=function(n){var t=this;return y_(this,i),Qt(o[n],1,1,function(){y_(this,t),o[n]=null}.bind(this))}.bind(this);return{c:function(){t=tt("div");for(var r=0;r<o.length;r+=1)o[r].c();at(t,"class","chat-gallery c-1idxkcg"),vt(t,"width",c_+"px"),vt(t,"height",n[2]+"px")},m:function(n,i){Kn(n,t,i);for(var e=0;e<o.length;e+=1)o[e].m(t,null);r=!0},p:function(n,i){if(2&i){var u;for(e=n[1],u=0;u<e.length;u+=1){var f=m_(n,e,u);o[u]?(o[u].p(f,i),Xt(o[u],1)):(o[u]=O_(f),o[u].c(),Xt(o[u],1),o[u].m(t,null))}for(Yt(),u=e.length;u<o.length;u+=1)c(u);Vt()}(!r||4&i)&&vt(t,"height",n[2]+"px")},i:function(n){if(!r){for(var t=0;t<e.length;t+=1)Xt(o[t]);r=!0}},o:function(n){o=o.filter(Boolean);for(var t=0;t<o.length;t+=1)Qt(o[t]);r=!1},d:function(n){n&&Zn(t),nt(o,n)}}}function j_(n){var t,r;return t=new o_({props:{data:n[6]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};2&r&&(i.data=n[6]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function O_(n){for(var t,r,i,e=this,o=n[3].items,u=[],c=0;c<o.length;c+=1)u[c]=j_(w_(n,o,c));var f=function(n){var t=this;return y_(this,e),Qt(u[n],1,1,function(){y_(this,t),u[n]=null}.bind(this))}.bind(this);return{c:function(){t=tt("div");for(var i=0;i<u.length;i+=1)u[i].c();r=et(),at(t,"class","chat-gallery__row c-1idxkcg"),vt(t,"height",n[3].height+"px")},m:function(n,e){Kn(n,t,e);for(var o=0;o<u.length;o+=1)u[o].m(t,null);Yn(t,r),i=!0},p:function(n,e){if(2&e){var c;for(o=n[3].items,c=0;c<o.length;c+=1){var a=w_(n,o,c);u[c]?(u[c].p(a,e),Xt(u[c],1)):(u[c]=j_(a),u[c].c(),Xt(u[c],1),u[c].m(t,r))}for(Yt(),c=o.length;c<u.length;c+=1)f(c);Vt()}(!i||2&e)&&vt(t,"height",n[3].height+"px")},i:function(n){if(!i){for(var t=0;t<o.length;t+=1)Xt(u[t]);i=!0}},o:function(n){u=u.filter(Boolean);for(var t=0;t<u.length;t+=1)Qt(u[t]);i=!1},d:function(n){n&&Zn(t),nt(u,n)}}}function E_(n){var t,r,i=n[0].length&&g_(n);return{c:function(){i&&i.c(),t=ot()},m:function(n,e){i&&i.m(n,e),Kn(n,t,e),r=!0},p:function(n,r){var e=this,o=d_(r,1)[0];n[0].length?i?(i.p(n,o),1&o&&Xt(i,1)):((i=g_(n)).c(),Xt(i,1),i.m(t.parentNode,t)):i&&(Yt(),Qt(i,1,1,function(){y_(this,e),i=null}.bind(this)),Vt())},i:function(n){r||(Xt(i),r=!0)},o:function(n){Qt(i),r=!1},d:function(n){i&&i.d(n),n&&Zn(t)}}}function T_(n,t,r){var i=this,e=t.data,o=[],u=0;return n.$$set=function(n){y_(this,i),"data"in n&&r(0,e=n.data)}.bind(this),n.$$.update=function(){if(y_(this,i),1&n.$$.dirty&&e.length>1){var t=function(n){for(var t=[],r=n.length%2,i=0,e=0,o=0,u=0,c=0,f=0,a=0,s=n.length,l=0;l<s;l++){var h=n[l];if(h.recType===E.ot&&h.preview){var v=h.preview.width/h.preview.height,d=0,b=0,y=0,p=0,m=0;t[u]||(t[u]={height:u_,items:[]}),!l&&s>2?v<.7?((d=100*v)<40&&(d=40),b=100,y=c_*(d/100)/v,f=0,e=d):r?(d=100,b=100,e=100,y=c_/v,f=1):(d=50,b=100,e=50,y=c_/v/2,f=1):0===a?(d=50,b=100,e=50,y=c_/v/2,f=1):(p=e,m=o,f?(b=100,e+=d=100-e,y=c_*(d/100)/v):(d=100-e,b=50,o+=50,y=Infinity)),c=Math.min(y,t[u].height),t[u].height=c,t[u].items.push(Object.assign(Object.assign({},h),{ratio:v,width:"".concat(d,"%"),height:"".concat(b,"%"),left:"".concat(p,"%"),top:"".concat(m,"%")})),a++,o>=100&&!f||e>=100&&f?(i+=Math.min(t[u].height,u_),u++,a=0,e=0,o=0):l===s-1&&(i+=Math.min(t[u].height,u_))}}return{list:t,contentHeight:i}}(e);r(1,o=t.list),r(2,u=t.contentHeight)}}.bind(this),[e,o,u]}var k_=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&s_(n,t)}(o,n);var t,r,i,e=l_(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(h_(t=e.call(this)),n,T_,E_,An,{data:0},p_),t}return t=o,r&&a_(t.prototype,r),i&&a_(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),A_=k_;function R_(n){return R_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},R_(n)}function C_(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==R_(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==R_(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===R_(o)?o:String(o)),i)}var e,o}function x_(n,t){return x_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},x_(n,t)}function I_(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=P_(n);if(t){var e=P_(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===R_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return M_(n)}(this,r)}}function M_(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function P_(n){return P_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},P_(n)}function U_(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return N_(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N_(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N_(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function D_(n){var t;function r(n,t){return n[0].url?L_:B_}var i=r(n),e=i(n);return{c:function(){e.c(),t=ot()},m:function(n,r){e.m(n,r),Kn(n,t,r)},p:function(n,o){i===(i=r(n))&&e?e.p(n,o):(e.d(1),(e=i(n))&&(e.c(),e.m(t.parentNode,t)))},d:function(n){e.d(n),n&&Zn(t)}}}function B_(n){var t,r,i,e;return{c:function(){Rn((t=tt("img")).src,r=n[0].preview.src)||at(t,"src",r),at(t,"class","enrich-block__img"),at(t,"loading","lazy"),at(t,"width",i=n[0].preview.width),at(t,"height",e=n[0].preview.height),at(t,"alt","")},m:function(n,r){Kn(n,t,r)},p:function(n,o){1&o&&!Rn(t.src,r=n[0].preview.src)&&at(t,"src",r),1&o&&i!==(i=n[0].preview.width)&&at(t,"width",i),1&o&&e!==(e=n[0].preview.height)&&at(t,"height",e)},d:function(n){n&&Zn(t)}}}function L_(n){var t,r,i,e,o,u;return{c:function(){t=tt("a"),Rn((r=tt("img")).src,i=n[0].preview.src)||at(r,"src",i),at(r,"class","enrich-block__img"),at(r,"loading","lazy"),at(r,"width",e=n[0].preview.width),at(r,"height",o=n[0].preview.height),at(r,"alt",""),at(t,"href",u=n[0].url),at(t,"rel","noreferrer"),at(t,"target","_blank")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,c){1&c&&!Rn(r.src,i=n[0].preview.src)&&at(r,"src",i),1&c&&e!==(e=n[0].preview.width)&&at(r,"width",e),1&c&&o!==(o=n[0].preview.height)&&at(r,"height",o),1&c&&u!==(u=n[0].url)&&at(t,"href",u)},d:function(n){n&&Zn(t)}}}function $_(n){var t,r,i,e,o=n[0].siteName+"";return{c:function(){t=tt("div"),r=tt("a"),i=it(o),at(r,"href",e=n[0].url),at(r,"rel","noreferrer"),at(r,"target","_blank"),at(t,"class","enrich-block__site")},m:function(n,e){Kn(n,t,e),Yn(t,r),Yn(r,i)},p:function(n,t){1&t&&o!==(o=n[0].siteName+"")&&st(i,o),1&t&&e!==(e=n[0].url)&&at(r,"href",e)},d:function(n){n&&Zn(t)}}}function z_(n){var t;function r(n,t){return n[0].url?F_:W_}var i=r(n),e=i(n);return{c:function(){t=tt("div"),e.c(),at(t,"class","enrich-block__title")},m:function(n,r){Kn(n,t,r),e.m(t,null)},p:function(n,o){i===(i=r(n))&&e?e.p(n,o):(e.d(1),(e=i(n))&&(e.c(),e.m(t,null)))},d:function(n){n&&Zn(t),e.d()}}}function W_(n){var t,r=n[0].title+"";return{c:function(){t=it(r)},m:function(n,r){Kn(n,t,r)},p:function(n,i){1&i&&r!==(r=n[0].title+"")&&st(t,r)},d:function(n){n&&Zn(t)}}}function F_(n){var t,r,i,e=n[0].title+"";return{c:function(){t=tt("a"),r=it(e),at(t,"href",i=n[0].url),at(t,"rel","noreferrer"),at(t,"target","_blank")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,o){1&o&&e!==(e=n[0].title+"")&&st(r,e),1&o&&i!==(i=n[0].url)&&at(t,"href",i)},d:function(n){n&&Zn(t)}}}function G_(n){var t,r,i=n[0].description+"";return{c:function(){t=tt("div"),r=it(i),at(t,"class","enrich-block__desc")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,t){1&t&&i!==(i=n[0].description+"")&&st(r,i)},d:function(n){n&&Zn(t)}}}function q_(n){var t,r,i,e,o=n[0].preview&&n[0].preview.src&&D_(n),u=n[0].siteName&&n[0].url&&$_(n),c=n[0].title&&z_(n),f=n[0].description&&G_(n);return{c:function(){t=tt("div"),o&&o.c(),r=et(),u&&u.c(),i=et(),c&&c.c(),e=et(),f&&f.c(),at(t,"class","enrich-block")},m:function(n,a){Kn(n,t,a),o&&o.m(t,null),Yn(t,r),u&&u.m(t,null),Yn(t,i),c&&c.m(t,null),Yn(t,e),f&&f.m(t,null)},p:function(n,a){var s=U_(a,1)[0];n[0].preview&&n[0].preview.src?o?o.p(n,s):((o=D_(n)).c(),o.m(t,r)):o&&(o.d(1),o=null),n[0].siteName&&n[0].url?u?u.p(n,s):((u=$_(n)).c(),u.m(t,i)):u&&(u.d(1),u=null),n[0].title?c?c.p(n,s):((c=z_(n)).c(),c.m(t,e)):c&&(c.d(1),c=null),n[0].description?f?f.p(n,s):((f=G_(n)).c(),f.m(t,null)):f&&(f.d(1),f=null)},i:_n,o:_n,d:function(n){n&&Zn(t),o&&o.d(),u&&u.d(),c&&c.d(),f&&f.d()}}}function H_(n,t,r){var i=this,e=t.data;return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,i),"data"in n&&r(0,e=n.data)}.bind(this),[e]}var Y_=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&x_(n,t)}(o,n);var t,r,i,e=I_(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(M_(t=e.call(this)),n,H_,q_,An,{data:0}),t}return t=o,r&&C_(t.prototype,r),i&&C_(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),V_=Y_;function X_(n){return X_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},X_(n)}function Q_(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==X_(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==X_(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===X_(o)?o:String(o)),i)}var e,o}function J_(n,t){return J_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},J_(n,t)}function K_(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=nS(n);if(t){var e=nS(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===X_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Z_(n)}(this,r)}}function Z_(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function nS(n){return nS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nS(n)}function tS(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return rS(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rS(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rS(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function iS(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function eS(n,t,r){var i=n.slice();return i[3]=t[r],i}function oS(n,t,r){var i=n.slice();return i[6]=t[r],i}function uS(n){var t,r;return t=new xm({props:{message:n[0].parsedTags.quote,chat:n[1]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.message=n[0].parsedTags.quote),2&r&&(i.chat=n[1]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function cS(n){var t,r,i,e,o=[aS,fS],u=[];return r=xr===P.hr?0:1,i=u[r]=o[r](n),{c:function(){t=tt("div"),i.c(),at(t,"class","chat-media-list")},m:function(n,i){Kn(n,t,i),u[r].m(t,null),e=!0},p:function(n,t){i.p(n,t)},i:function(n){e||(Xt(i),e=!0)},o:function(n){Qt(i),e=!1},d:function(n){n&&Zn(t),u[r].d()}}}function fS(n){for(var t,r,i=this,e=[],o=new Map,u=n[0].parsedTags.media,c=function(n){return iS(this,i),n[6].messageId}.bind(this),f=0;f<u.length;f+=1){var a=oS(n,u,f),s=c(a);o.set(s,e[f]=sS(s,a))}return{c:function(){for(var n=0;n<e.length;n+=1)e[n].c();t=ot()},m:function(n,i){for(var o=0;o<e.length;o+=1)e[o].m(n,i);Kn(n,t,i),r=!0},p:function(n,r){1&r&&(u=n[0].parsedTags.media,Yt(),e=nr(e,r,c,1,n,u,o,t.parentNode,Zt,sS,t,oS),Vt())},i:function(n){if(!r){for(var t=0;t<u.length;t+=1)Xt(e[t]);r=!0}},o:function(n){for(var t=0;t<e.length;t+=1)Qt(e[t]);r=!1},d:function(n){for(var r=0;r<e.length;r+=1)e[r].d(n);n&&Zn(t)}}}function aS(n){var t,r;return t=new A_({props:{data:n[0].parsedTags.media}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0].parsedTags.media),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function sS(n,t){var r,i,e;return i=new sm({props:{data:t[6]}}),{key:n,first:null,c:function(){r=ot(),rr(i.$$.fragment),this.first=r},m:function(n,t){Kn(n,r,t),ir(i,n,t),e=!0},p:function(n,r){t=n;var e={};1&r&&(e.data=t[6]),i.$set(e)},i:function(n){e||(Xt(i.$$.fragment,n),e=!0)},o:function(n){Qt(i.$$.fragment,n),e=!1},d:function(n){n&&Zn(r),er(i,n)}}}function lS(n){for(var t,r,i=this,e=[],o=new Map,u=n[0].parsedTags.files,c=function(n){return iS(this,i),n[3].messageId}.bind(this),f=0;f<u.length;f+=1){var a=eS(n,u,f),s=c(a);o.set(s,e[f]=hS(s,a))}return{c:function(){t=tt("div");for(var n=0;n<e.length;n+=1)e[n].c();at(t,"class","chat-file-list")},m:function(n,i){Kn(n,t,i);for(var o=0;o<e.length;o+=1)e[o].m(t,null);r=!0},p:function(n,r){1&r&&(u=n[0].parsedTags.files,Yt(),e=nr(e,r,c,1,n,u,o,t,Zt,hS,null,eS),Vt())},i:function(n){if(!r){for(var t=0;t<u.length;t+=1)Xt(e[t]);r=!0}},o:function(n){for(var t=0;t<e.length;t+=1)Qt(e[t]);r=!1},d:function(n){n&&Zn(t);for(var r=0;r<e.length;r+=1)e[r].d()}}}function hS(n,t){var r,i,e;return i=new _p({props:{data:t[3]}}),{key:n,first:null,c:function(){r=ot(),rr(i.$$.fragment),this.first=r},m:function(n,t){Kn(n,r,t),ir(i,n,t),e=!0},p:function(n,r){t=n;var e={};1&r&&(e.data=t[3]),i.$set(e)},i:function(n){e||(Xt(i.$$.fragment,n),e=!0)},o:function(n){Qt(i.$$.fragment,n),e=!1},d:function(n){n&&Zn(r),er(i,n)}}}function vS(n){var t,r;return t=new V_({props:{data:n[0].tags.enrich}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0].tags.enrich),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function dS(n){var t,r,i,e,o,u,c,f,a,s,l,h,v=(null===(t=n[0])||void 0===t||null===(r=t.parsedTags)||void 0===r?void 0:r.quote)&&uS(n),d=(null===(i=n[0])||void 0===i||null===(e=i.parsedTags)||void 0===e?void 0:e.media)&&cS(n),b=n[2]&&function(n){var t;return{c:function(){at(t=tt("div"),"class","chat-message__text")},m:function(r,i){Kn(r,t,i),t.innerHTML=n[2]},p:_n,d:function(n){n&&Zn(t)}}}(n),y=(null===(o=n[0])||void 0===o||null===(u=o.parsedTags)||void 0===u?void 0:u.files)&&lS(n),p=n[0].tags&&n[0].tags.enrich&&vS(n);return{c:function(){v&&v.c(),c=et(),d&&d.c(),f=et(),b&&b.c(),a=et(),y&&y.c(),s=et(),p&&p.c(),l=ot()},m:function(n,t){v&&v.m(n,t),Kn(n,c,t),d&&d.m(n,t),Kn(n,f,t),b&&b.m(n,t),Kn(n,a,t),y&&y.m(n,t),Kn(n,s,t),p&&p.m(n,t),Kn(n,l,t),h=!0},p:function(n,t){var r,i,e,o,u,a,h=this,m=tS(t,1)[0];null!==(r=n[0])&&void 0!==r&&null!==(i=r.parsedTags)&&void 0!==i&&i.quote?v?(v.p(n,m),1&m&&Xt(v,1)):((v=uS(n)).c(),Xt(v,1),v.m(c.parentNode,c)):v&&(Yt(),Qt(v,1,1,function(){iS(this,h),v=null}.bind(this)),Vt()),null!==(e=n[0])&&void 0!==e&&null!==(o=e.parsedTags)&&void 0!==o&&o.media?d?(d.p(n,m),1&m&&Xt(d,1)):((d=cS(n)).c(),Xt(d,1),d.m(f.parentNode,f)):d&&(Yt(),Qt(d,1,1,function(){iS(this,h),d=null}.bind(this)),Vt()),n[2]&&b.p(n,m),null!==(u=n[0])&&void 0!==u&&null!==(a=u.parsedTags)&&void 0!==a&&a.files?y?(y.p(n,m),1&m&&Xt(y,1)):((y=lS(n)).c(),Xt(y,1),y.m(s.parentNode,s)):y&&(Yt(),Qt(y,1,1,function(){iS(this,h),y=null}.bind(this)),Vt()),n[0].tags&&n[0].tags.enrich?p?(p.p(n,m),1&m&&Xt(p,1)):((p=vS(n)).c(),Xt(p,1),p.m(l.parentNode,l)):p&&(Yt(),Qt(p,1,1,function(){iS(this,h),p=null}.bind(this)),Vt())},i:function(n){h||(Xt(v),Xt(d),Xt(y),Xt(p),h=!0)},o:function(n){Qt(v),Qt(d),Qt(y),Qt(p),h=!1},d:function(n){v&&v.d(n),n&&Zn(c),d&&d.d(n),n&&Zn(f),b&&b.d(n),n&&Zn(a),y&&y.d(n),n&&Zn(s),p&&p.d(n),n&&Zn(l)}}}function bS(n,t,r){var i=this,e=t.message,o=t.chat,u=e.text?function(n,t){return n&&n.replace&&0!==n.length?n.replace(/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[-A-Z0-9+\u0026\u2019@#/%?=()~_|!:,.;]*[-A-Z0-9+\u0026@#/%=~()_|])/gi,(function(n,r,i){if(t&&t.length)for(var e=function(n){return(n.indexOf("://")>-1?n.split("/")[2]:n.split("/")[0]).split(":")[0].split("?")[0]}(i),o=0;o<t.length;o++){var u=e.indexOf(t[o]);if(u>=0&&u===e.length-t[o].length)return[r,'<a href="',i,'" target="_blank" title="',i,'">',i,"</a>"].join("")}return[r,'<a href="https://www.mql5.com/go?link=',encodeURIComponent(i),'" target="_blank" title="',i,'">',i,"</a>"].join("")})):n}(e.text,Ur).replace(/\n/g,"<br>"):"";return n.$$set=function(n){iS(this,i),"message"in n&&r(0,e=n.message),"chat"in n&&r(1,o=n.chat)}.bind(this),[e,o,u]}var yS=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&J_(n,t)}(o,n);var t,r,i,e=K_(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Z_(t=e.call(this)),n,bS,dS,An,{message:0,chat:1}),t}return t=o,r&&Q_(t.prototype,r),i&&Q_(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),pS=yS;function mS(n){return mS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},mS(n)}function wS(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==mS(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==mS(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===mS(o)?o:String(o)),i)}var e,o}function gS(n,t){return gS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},gS(n,t)}function _S(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=jS(n);if(t){var e=jS(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===mS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return SS(n)}(this,r)}}function SS(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function jS(n){return jS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jS(n)}function OS(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ES(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return TS(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TS(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TS(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function kS(n){var t,r;return{c:function(){t=tt("span"),r=it(n[1]),vt(t,"color",n[2])},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,i){2&i&&st(r,n[1]),4&i&&vt(t,"color",n[2])},d:function(n){n&&Zn(t)}}}function AS(n){var t,r;return{c:function(){t=tt("a"),r=it(n[1]),at(t,"href",n[3]),at(t,"target","_blank"),vt(t,"color",n[2])},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,i){2&i&&st(r,n[1]),8&i&&at(t,"href",n[3]),4&i&&vt(t,"color",n[2])},d:function(n){n&&Zn(t)}}}function RS(n){var t;function r(n,t){return n[3]?AS:kS}var i=r(n),e=i(n);return{c:function(){t=tt("div"),e.c(),at(t,"class","chat-message__name")},m:function(n,r){Kn(n,t,r),e.m(t,null)},p:function(n,o){var u=ES(o,1)[0];i===(i=r(n))&&e?e.p(n,u):(e.d(1),(e=i(n))&&(e.c(),e.m(t,null)))},i:_n,o:_n,d:function(n){n&&Zn(t),e.d()}}}function CS(n,t,r){var e,o=this,u=_n,c=function(){var n=this;return OS(this,o),u(),u=xn(f,function(t){return OS(this,n),r(7,e=t)}.bind(this)),f}.bind(this);n.$$.on_destroy.push(function(){return OS(this,o),u()}.bind(this));var f=t.data;c();var a=t.chat,s="",l="#4a76b8",h=!1,v=!1,d="";return n.$$set=function(n){OS(this,o),"data"in n&&c(r(0,f=n.data)),"chat"in n&&r(4,a=n.chat)}.bind(this),n.$$.update=function(){OS(this,o),240&n.$$.dirty&&(r(5,h=e.userId===_),e.userLogin&&!h?r(3,d="/".concat(Gr,"/users/").concat(e.userLogin.toLowerCase())):r(3,d=""),r(1,s=e.userName||""),e.isDeleted&&r(1,s=i("deletedAccount")),r(6,v=e.userId===co),h?r(2,l="#4A76B8"):a.type===O.nt?r(2,l=v?"#007700":"#d38900"):r(2,l=nh(Z(e.userId),95,20)))}.bind(this),[f,s,l,d,a,h,v,e]}var xS=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&gS(n,t)}(o,n);var t,r,i,e=_S(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(SS(t=e.call(this)),n,CS,RS,An,{data:0,chat:4}),t}return t=o,r&&wS(t.prototype,r),i&&wS(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),IS=xS;function MS(n){return MS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},MS(n)}function PS(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==MS(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==MS(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===MS(o)?o:String(o)),i)}var e,o}function US(n,t){return US=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},US(n,t)}function NS(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=BS(n);if(t){var e=BS(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===MS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return DS(n)}(this,r)}}function DS(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function BS(n){return BS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},BS(n)}function LS(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function $S(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return zS(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zS(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zS(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function WS(n){var t,r,i=n[2][0]+"";return{c:function(){t=tt("span"),r=it(i),at(t,"class","chat-avatar__text")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,t){4&t&&i!==(i=n[2][0]+"")&&st(r,i)},d:function(n){n&&Zn(t)}}}function FS(n){var t,r;return{c:function(){Rn((t=tt("img")).src,r=n[1])||at(t,"src",r),at(t,"alt",""),at(t,"title",n[2]),at(t,"width",n[0]),at(t,"height",n[0]),at(t,"loading","lazy")},m:function(n,r){Kn(n,t,r)},p:function(n,i){2&i&&!Rn(t.src,r=n[1])&&at(t,"src",r),4&i&&at(t,"title",n[2]),1&i&&at(t,"width",n[0]),1&i&&at(t,"height",n[0])},d:function(n){n&&Zn(t)}}}function GS(n){var t;function r(n,t){return n[1]?FS:WS}var i=r(n),e=i(n);return{c:function(){t=tt("span"),e.c(),at(t,"class","chat-avatar"),vt(t,"background",n[3])},m:function(n,r){Kn(n,t,r),e.m(t,null)},p:function(n,o){var u=$S(o,1)[0];i===(i=r(n))&&e?e.p(n,u):(e.d(1),(e=i(n))&&(e.c(),e.m(t,null))),8&u&&vt(t,"background",n[3])},i:_n,o:_n,d:function(n){n&&Zn(t),e.d()}}}function qS(n,t,r){var i,e=this,o=_n,u=function(){var n=this;return LS(this,e),o(),o=xn(c,function(t){return LS(this,n),r(6,i=t)}.bind(this)),c}.bind(this);n.$$.on_destroy.push(function(){return LS(this,e),o()}.bind(this));var c,f=t.data,a=t.size,s=void 0===a?40:a,l="",h="#4a76b8",v=f.avatar;return f.type===O.nt&&u(c=Fs(f.authorId===co?f.extraId:f.authorId)),n.$$set=function(n){LS(this,e),"data"in n&&r(5,f=n.data),"size"in n&&r(0,s=n.size)}.bind(this),n.$$.update=function(){LS(this,e),32&n.$$.dirty&&f.type!==O.nt&&r(1,v=f.avatar),66&n.$$.dirty&&i&&(r(1,v=i.userAvatar),r(3,h=v?"#fff":nh(Z(i.userId),undefined,undefined)),r(2,l=i.userName||"x")),98&n.$$.dirty&&(i?(r(3,h=v?"#fff":nh(Z(i.userId),undefined,undefined)),r(2,l=i.userName||"x")):(r(3,h=v?"#fff":nh(Z(f.chatId),undefined,undefined)),r(2,l=f.name||"x")))}.bind(this),[s,v,l,h,c,f,i]}var HS=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&US(n,t)}(o,n);var t,r,i,e=NS(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(DS(t=e.call(this)),n,qS,GS,An,{data:5,size:0}),t}return t=o,r&&PS(t.prototype,r),i&&PS(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),YS=HS;function VS(n){return VS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},VS(n)}function XS(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==VS(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==VS(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===VS(o)?o:String(o)),i)}var e,o}function QS(n,t){return QS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},QS(n,t)}function JS(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=ZS(n);if(t){var e=ZS(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===VS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return KS(n)}(this,r)}}function KS(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ZS(n){return ZS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ZS(n)}function nj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function tj(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return rj(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rj(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rj(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function ij(n){var t,r;return t=new bh({props:{data:n[2],size:n[3]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};4&r&&(i.data=n[2]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function ej(n){var t,r;return t=new YS({props:{data:n[1],size:n[3]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};2&r&&(i.data=n[1]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function oj(n){var t,r,i,e,o=[ej,ij],u=[];function c(n,t){return n[1].type===O.rt?0:1}return r=c(n),i=u[r]=o[r](n),{c:function(){t=tt("div"),i.c(),at(t,"class","chat-message__avatar")},m:function(n,i){Kn(n,t,i),u[r].m(t,null),e=!0},p:function(n,e){var f=this,a=tj(e,1)[0],s=r;(r=c(n))===s?u[r].p(n,a):(Yt(),Qt(u[s],1,1,function(){nj(this,f),u[s]=null}.bind(this)),Vt(),(i=u[r])?i.p(n,a):(i=u[r]=o[r](n)).c(),Xt(i,1),i.m(t,null))},i:function(n){e||(Xt(i),e=!0)},o:function(n){Qt(i),e=!1},d:function(n){n&&Zn(t),u[r].d()}}}function uj(n,t,r){var i,e=this,o=_n,u=function(){var n=this;return nj(this,e),o(),o=xn(c,function(t){return nj(this,n),r(2,i=t)}.bind(this)),c}.bind(this);n.$$.on_destroy.push(function(){return nj(this,e),o()}.bind(this));var c=t.data;u();var f=t.chat,a=Dr?20:40;return n.$$set=function(n){nj(this,e),"data"in n&&u(r(0,c=n.data)),"chat"in n&&r(1,f=n.chat)}.bind(this),[c,f,i,a]}var cj=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&QS(n,t)}(o,n);var t,r,i,e=JS(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(KS(t=e.call(this)),n,uj,oj,An,{data:0,chat:1}),t}return t=o,r&&XS(t.prototype,r),i&&XS(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),fj=cj;function aj(n){return aj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},aj(n)}function sj(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==aj(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==aj(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===aj(o)?o:String(o)),i)}var e,o}function lj(n,t){return lj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},lj(n,t)}function hj(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=dj(n);if(t){var e=dj(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===aj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vj(n)}(this,r)}}function vj(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function dj(n){return dj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dj(n)}function bj(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return yj(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yj(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yj(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function pj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function mj(n){var t,r,i,e,o=this;function u(t){n[10](t)}var c={message:n[0],chat:n[1]};return void 0!==n[4]&&(c.showedMenu=n[4]),r=new dg({props:c}),Rt.push(function(){return pj(this,o),tr(r,"showedMenu",u)}.bind(this)),{c:function(){t=tt("div"),rr(r.$$.fragment),at(t,"class","chat-float-menu"),vt(t,"top",n[6]+"px"),vt(t,"left",n[7]+"px")},m:function(i,o){Kn(i,t,o),ir(r,t,null),n[11](t),e=!0},p:function(n,o){var u=this,c={};1&o&&(c.message=n[0]),2&o&&(c.chat=n[1]),!i&&16&o&&(i=!0,c.showedMenu=n[4],Dt(function(){return pj(this,u),i=!1}.bind(this))),r.$set(c),(!e||64&o)&&vt(t,"top",n[6]+"px"),(!e||128&o)&&vt(t,"left",n[7]+"px")},i:function(n){e||(Xt(r.$$.fragment,n),e=!0)},o:function(n){Qt(r.$$.fragment,n),e=!1},d:function(i){i&&Zn(t),er(r),n[11](null)}}}function wj(n){var t,r;return t=new fj({props:{chat:n[1],data:n[8]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};2&r&&(i.chat=n[1]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function gj(n){var t;return{c:function(){at(t=tt("div"),"class","chat-message__avatar")},m:function(n,r){Kn(n,t,r)},p:_n,i:_n,o:_n,d:function(n){n&&Zn(t)}}}function _j(n){var t,r,i,e,o=[jj,Sj],u=[];function c(n,t){return n[1].type!==O.rt?0:1}return t=c(n),r=u[t]=o[t](n),{c:function(){r.c(),i=ot()},m:function(n,r){u[t].m(n,r),Kn(n,i,r),e=!0},p:function(n,e){var f=this,a=t;(t=c(n))===a?u[t].p(n,e):(Yt(),Qt(u[a],1,1,function(){pj(this,f),u[a]=null}.bind(this)),Vt(),(r=u[t])?r.p(n,e):(r=u[t]=o[t](n)).c(),Xt(r,1),r.m(i.parentNode,i))},i:function(n){e||(Xt(r),e=!0)},o:function(n){Qt(r),e=!1},d:function(n){u[t].d(n),n&&Zn(i)}}}function Sj(n){var t,r,i,e=n[1].name+"";return{c:function(){t=tt("div"),r=it(e),at(t,"class","chat-message__name"),at(t,"title",i=ao?n[0].authorName:"")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,o){2&o&&e!==(e=n[1].name+"")&&st(r,e),1&o&&i!==(i=ao?n[0].authorName:"")&&at(t,"title",i)},i:_n,o:_n,d:function(n){n&&Zn(t)}}}function jj(n){var t,r;return t=new IS({props:{chat:n[1],data:n[8]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};2&r&&(i.chat=n[1]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function Oj(n){var t,r;return t=new qg({props:{message:n[0]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.message=n[0]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function Ej(n){var t,r;return t=new pS({props:{message:n[0],chat:n[1]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.message=n[0]),2&r&&(i.chat=n[1]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function Tj(n){var t,r,i,e,o,u,c,f,a,s,l,h,v,d,b,y,p,m,w,g,_=si({dateTime:n[0].date,type:"time"})+"",S=n[4]&&mj(n);c=new Cg({props:{message:n[0],chat:n[1]}});var j=[gj,wj],O=[];function T(n,t){return n[2]?0:1}s=T(n),l=O[s]=j[s](n);var k=!n[2]&&_j(n),A=[Ej,Oj],R=[];function C(n,t){return n[0].recType===E.et?0:n[0].recType===E.ot?1:-1}return~(b=C(n))&&(y=R[b]=A[b](n)),{c:function(){S&&S.c(),t=et(),r=tt("div"),i=tt("div"),e=it(_),u=et(),rr(c.$$.fragment),f=et(),a=tt("div"),l.c(),h=et(),v=tt("div"),k&&k.c(),d=et(),y&&y.c(),at(i,"class","chat-message__date"),at(i,"title",o=n[0].dateText),at(v,"class","chat-message__content"),at(a,"class","chat-message__box"),at(r,"class",p="chat-message"+(Dr?" chat-message_widget":"")+(n[4]?" chat-message_selected":"")+(n[2]?" chat-message_own":""))},m:function(o,l){S&&S.m(o,l),Kn(o,t,l),Kn(o,r,l),Yn(r,i),Yn(i,e),Yn(r,u),ir(c,r,null),Yn(r,f),Yn(r,a),O[s].m(a,null),Yn(a,h),Yn(a,v),k&&k.m(v,null),Yn(v,d),~b&&R[b].m(v,null),n[12](r),m=!0,w||(g=ut(r,"contextmenu",n[9]),w=!0)},p:function(n,u){var f=this,w=bj(u,1)[0];n[4]?S?(S.p(n,w),16&w&&Xt(S,1)):((S=mj(n)).c(),Xt(S,1),S.m(t.parentNode,t)):S&&(Yt(),Qt(S,1,1,function(){pj(this,f),S=null}.bind(this)),Vt()),(!m||1&w)&&_!==(_=si({dateTime:n[0].date,type:"time"})+"")&&st(e,_),(!m||1&w&&o!==(o=n[0].dateText))&&at(i,"title",o);var g={};1&w&&(g.message=n[0]),2&w&&(g.chat=n[1]),c.$set(g);var E=s;(s=T(n))===E?O[s].p(n,w):(Yt(),Qt(O[E],1,1,function(){pj(this,f),O[E]=null}.bind(this)),Vt(),(l=O[s])?l.p(n,w):(l=O[s]=j[s](n)).c(),Xt(l,1),l.m(a,h)),n[2]?k&&(Yt(),Qt(k,1,1,function(){pj(this,f),k=null}.bind(this)),Vt()):k?(k.p(n,w),4&w&&Xt(k,1)):((k=_j(n)).c(),Xt(k,1),k.m(v,d));var x=b;(b=C(n))===x?~b&&R[b].p(n,w):(y&&(Yt(),Qt(R[x],1,1,function(){pj(this,f),R[x]=null}.bind(this)),Vt()),~b?((y=R[b])?y.p(n,w):(y=R[b]=A[b](n)).c(),Xt(y,1),y.m(v,null)):y=null),(!m||20&w&&p!==(p="chat-message"+(Dr?" chat-message_widget":"")+(n[4]?" chat-message_selected":"")+(n[2]?" chat-message_own":"")))&&at(r,"class",p)},i:function(n){m||(Xt(S),Xt(c.$$.fragment,n),Xt(l),Xt(k),Xt(y),m=!0)},o:function(n){Qt(S),Qt(c.$$.fragment,n),Qt(l),Qt(k),Qt(y),m=!1},d:function(i){S&&S.d(i),i&&Zn(t),i&&Zn(r),er(c),O[s].d(),k&&k.d(),~b&&R[b].d(),n[12](null),w=!1,g()}}}function kj(n,t,r){var i,e,o=this,u=t.message,c=t.chat,f=t.prevOwn,a=void 0!==f&&f,s=Fs(c.type!==O.rt?u.authorId:""),l=!1,h=0,v=0;function d(n){if(i){var t=n.target;t&&!i.contains(t)&&r(4,l=!1)}}function b(n){if(e&&!n.ctrlKey&&2!=n.button){var t=n.target;t&&!e.contains(t)&&r(4,l=!1)}}return Et(function(){var n=this;return pj(this,o),document.addEventListener("click",b),document.addEventListener("contextmenu",d),function(){pj(this,n),document.removeEventListener("click",b),document.removeEventListener("contextmenu",d)}.bind(this)}.bind(this)),n.$$set=function(n){pj(this,o),"message"in n&&r(0,u=n.message),"chat"in n&&r(1,c=n.chat),"prevOwn"in n&&r(2,a=n.prevOwn)}.bind(this),[u,c,a,i,l,e,h,v,s,function(n){var t;if(!(null===(t=window.getSelection())||void 0===t?void 0:t.toString())){var i=n.target;"IMG"!==i.tagName&&"A"!==i.tagName&&(n.preventDefault(),r(6,h=n.pageY),r(7,v=n.pageX),r(4,l=!0))}},function(n){r(4,l=n)},function(n){var t=this;Rt[n?"unshift":"push"](function(){pj(this,t),r(5,e=n)}.bind(this))},function(n){var t=this;Rt[n?"unshift":"push"](function(){pj(this,t),r(3,i=n)}.bind(this))}]}var Aj=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&lj(n,t)}(o,n);var t,r,i,e=hj(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(vj(t=e.call(this)),n,kj,Tj,An,{message:0,chat:1,prevOwn:2}),t}return t=o,r&&sj(t.prototype,r),i&&sj(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Rj=Aj;function Cj(n){return Cj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Cj(n)}function xj(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Cj(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Cj(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Cj(o)?o:String(o)),i)}var e,o}function Ij(n,t){return Ij=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Ij(n,t)}function Mj(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Uj(n);if(t){var e=Uj(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===Cj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pj(n)}(this,r)}}function Pj(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Uj(n){return Uj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uj(n)}function Nj(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Dj(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dj(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dj(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Bj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Lj(n,t,r){var i=n.slice();return i[19]=t[r],i[21]=r,i}function $j(n){var t;return{c:function(){at(t=tt("div"),"class","chat-loader-bar")},m:function(n,r){Kn(n,t,r)},d:function(n){n&&Zn(t)}}}function zj(n){var t,r,e,o;return{c:function(){t=tt("div"),r=tt("i"),e=et(),(o=tt("div")).textContent="".concat(i("noMessagesYet")),at(r,"class","icons-chat icons-chat_add-message-big"),at(t,"class","chat-comments-list__empty")},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(t,e),Yn(t,o)},p:_n,d:function(n){n&&Zn(t)}}}function Wj(n){var t,r;return t=new Rj({props:{chat:n[2],message:n[19],prevOwn:n[7](n[21],n[19])}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};4&r&&(i.chat=n[2]),2&r&&(i.message=n[19]),2&r&&(i.prevOwn=n[7](n[21],n[19])),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function Fj(n){var t,r;return t=new Rw({props:{chat:n[2],message:n[19]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};4&r&&(i.chat=n[2]),2&r&&(i.message=n[19]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function Gj(n){var t,r,i,e,o=Vj(n[19].dateBar)+"";return{c:function(){t=tt("div"),r=tt("div"),i=it(o),e=et(),at(r,"class","chat-date-bar__title"),at(t,"class","chat-date-bar")},m:function(n,o){Kn(n,t,o),Yn(t,r),Yn(r,i),Yn(t,e)},p:function(n,t){2&t&&o!==(o=Vj(n[19].dateBar)+"")&&st(i,o)},i:_n,o:_n,d:function(n){n&&Zn(t)}}}function qj(n){var t,r,e;return{c:function(){t=tt("div"),(r=tt("div")).textContent="".concat(i("unreadMessages")),e=et(),at(r,"class","chat-unread-indicator__content"),at(t,"class","chat-unread-indicator")},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(t,e)},p:_n,i:_n,o:_n,d:function(n){n&&Zn(t)}}}function Hj(n,t){var r,i,e,o,u,c=[qj,Gj,Fj,Wj],f=[];function a(n,t){return"unread"in n[19]?0:"dateBar"in n[19]?1:n[19].recType===E.ct?2:3}return i=a(t),e=f[i]=c[i](t),{key:n,first:null,c:function(){r=ot(),e.c(),o=ot(),this.first=r},m:function(n,t){Kn(n,r,t),f[i].m(n,t),Kn(n,o,t),u=!0},p:function(n,r){var u=this,s=i;(i=a(t=n))===s?f[i].p(t,r):(Yt(),Qt(f[s],1,1,function(){Bj(this,u),f[s]=null}.bind(this)),Vt(),(e=f[i])?e.p(t,r):(e=f[i]=c[i](t)).c(),Xt(e,1),e.m(o.parentNode,o))},i:function(n){u||(Xt(e),u=!0)},o:function(n){Qt(e),u=!1},d:function(n){n&&Zn(r),f[i].d(n),n&&Zn(o)}}}function Yj(n){for(var t,r,i,e,o,u,c,f=this,a=[],s=new Map,l=n[5]&&$j(),h=!n[1].length&&n[4]&&zj(),v=n[1],d=function(n){return Bj(this,f),n[19].messageId}.bind(this),b=0;b<v.length;b+=1){var y=Lj(n,v,b),p=d(y);s.set(p,a[b]=Hj(p,y))}return{c:function(){t=tt("div"),l&&l.c(),r=et(),h&&h.c(),i=et();for(var o=0;o<a.length;o+=1)a[o].c();at(t,"class",e="chat-comments-list"+(n[1].length||n[4]?"":" chat-comments-list_loading"))},m:function(e,f){Kn(e,t,f),l&&l.m(t,null),Yn(t,r),h&&h.m(t,null),Yn(t,i);for(var s=0;s<a.length;s+=1)a[s].m(t,null);var v;n[15](t),o=!0,u||(c=ut(t,"scroll",(v=Pf(n[6],100),function(n){n.isTrusted&&v.call(this,n)})),u=!0)},p:function(n,u){var c=Nj(u,1)[0];n[5]?l||((l=$j()).c(),l.m(t,r)):l&&(l.d(1),l=null),!n[1].length&&n[4]?h?h.p(n,c):((h=zj()).c(),h.m(t,i)):h&&(h.d(1),h=null),134&c&&(v=n[1],Yt(),a=nr(a,c,d,1,n,v,s,t,Zt,Hj,null,Lj),Vt()),(!o||18&c&&e!==(e="chat-comments-list"+(n[1].length||n[4]?"":" chat-comments-list_loading")))&&at(t,"class",e)},i:function(n){if(!o){for(var t=0;t<v.length;t+=1)Xt(a[t]);o=!0}},o:function(n){for(var t=0;t<a.length;t+=1)Qt(a[t]);o=!1},d:function(r){r&&Zn(t),l&&l.d(),h&&h.d();for(var i=0;i<a.length;i+=1)a[i].d();n[15](null),u=!1,c()}}}function Vj(n){return li({dateTime:n,type:"date"})}function Xj(n,t,r){var i,e,o,u,c,f,a=this,s=_n,l=function(){var n=this;return Bj(this,a),s(),s=xn(h,function(t){return Bj(this,n),r(14,o=t)}.bind(this)),h}.bind(this);Mn(n,iu,function(n){return Bj(this,a),r(2,i=n)}.bind(this)),Mn(n,Ku,function(n){return Bj(this,a),r(13,e=n)}.bind(this)),Mn(n,fc,function(n){return Bj(this,a),r(4,u=n)}.bind(this)),Mn(n,ac,function(n){return Bj(this,a),r(5,c=n)}.bind(this)),n.$$.on_destroy.push(function(){return Bj(this,a),s()}.bind(this));var h=t.list;l();var v,d=t.loadMore,b="",y=!1,p=0,m=0,w=o;function g(){var n=this;v&&Ut().then(function(){if(Bj(this,n),v&&i&&i.chatId){var t=v.scrollHeight;p=Math.max(p,0)+(t-m),r(3,v.scrollTop=p,v),(m=t)-50<=v.clientHeight&&d()}}.bind(this))}function S(){m=v.scrollHeight-40,vc(),r(11,b=i.chatId),r(12,y=!0)}return h.subscribe(function(){Bj(this,a),g()}.bind(this)),Et(function(){Bj(this,a),S()}.bind(this)),n.$$set=function(n){Bj(this,a),"list"in n&&l(r(0,h=n.list)),"loadMore"in n&&r(8,d=n.loadMore)}.bind(this),n.$$.update=function(){if(Bj(this,a),6148&n.$$.dirty&&y&&b!==i.chatId&&S(),25606&n.$$.dirty){var t;r(1,w=[]);var u=-1,c=0;if(o.length){for(var s=[],l=0,h=o.length;l<h;l++){var v=o[l],d=new Date(null===r(10,f=v.date)||void 0===f?void 0:f.getTime());d.setHours(0,0,0,0);var p=d.getTime();~s.indexOf(p)||(c++,w.push({dateBar:d,messageId:p}),s.push(p)),i.isSubscribed&&(v.authorId!==co&&rn(v.messageId,e)>0&&(t?rn(v.messageId,t.messageId)<0&&(t=v,u=l+c):(t=v,u=l+c)),l+1===h&&v.authorId===co&&(u=-1)),w.push(v)}~u&&w.splice(u,0,{unread:!0,messageId:-1})}}}.bind(this),[h,w,i,v,u,c,function(){var n=this;v&&i&&i.chatId&&(p=v.scrollTop,Ut().then(function(){Bj(this,n),v&&p<50&&d()}.bind(this)))},function(n,t){if(!n)return!1;if(i.type===O.rt||i.authorId===_||i.extraId===_)return!1;var r=w[n-1];return"authorId"in r&&((r.recType===E.et||r.recType===E.ot)&&r.authorId===t.authorId)},d,g,f,b,y,e,o,function(n){var t=this;Rt[n?"unshift":"push"](function(){Bj(this,t),r(3,v=n)}.bind(this))}]}var Qj=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Ij(n,t)}(o,n);var t,r,i,e=Mj(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(Pj(t=e.call(this)),n,Xj,Yj,An,{list:0,loadMore:8,handleChange:9}),t}return t=o,(r=[{key:"handleChange",get:function(){return this.$$.ctx[9]}}])&&xj(t.prototype,r),i&&xj(t,i),Object.defineProperty(t,"prototype",{writable:!1}),o}(ur),Jj=Qj;function Kj(n){return Kj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Kj(n)}var Zj=undefined;function nO(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Kj(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Kj(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Kj(o)?o:String(o)),i)}var e,o}function tO(n,t){return tO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},tO(n,t)}function rO(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=eO(n);if(t){var e=eO(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===Kj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return iO(n)}(this,r)}}function iO(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function eO(n){return eO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},eO(n)}function oO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function uO(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return cO(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cO(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cO(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function fO(n){var t,r,e,o,u,c,f=i(n[2].isMuted?"unmute":"mute")+"";return{c:function(){t=tt("div"),r=tt("div"),e=tt("a"),o=it(f),at(e,"href","#"),at(r,"class","chat-window-menu__item"),at(t,"class","chat-dropdown-menu__list chat-dropdown-menu__list_showed")},m:function(i,f){Kn(i,t,f),Yn(t,r),Yn(r,e),Yn(e,o),u||(c=ut(e,"click",ct(n[3])),u=!0)},p:function(n,t){4&t&&f!==(f=i(n[2].isMuted?"unmute":"mute")+"")&&st(o,f)},d:function(n){n&&Zn(t),u=!1,c()}}}function aO(n){var t,r,i,e,o,u=n[0]&&fO(n);return{c:function(){t=tt("span"),(r=tt("span")).innerHTML="<i></i><i></i><i></i>",i=et(),u&&u.c(),at(r,"class","chat-window-header__commands-btn"),at(t,"class","chat-window-header__commands")},m:function(c,f){Kn(c,t,f),Yn(t,r),Yn(t,i),u&&u.m(t,null),n[5](t),e||(o=[ut(r,"keyup",sO),ut(r,"click",n[4])],e=!0)},p:function(n,r){var i=uO(r,1)[0];n[0]?u?u.p(n,i):((u=fO(n)).c(),u.m(t,null)):u&&(u.d(1),u=null)},i:_n,o:_n,d:function(r){r&&Zn(t),u&&u.d(),n[5](null),e=!1,Tn(o)}}}var sO=function(){oO(this,Zj)}.bind(undefined);function lO(n,t,r){var i,e=this;Mn(n,iu,function(n){return oO(this,e),r(2,i=n)}.bind(this));var o,u=!1;function c(n){if(o){var t=n.target;t&&!o.contains(t)&&r(0,u=!1)}}Et(function(){var n=this;return oO(this,e),document.addEventListener("click",c),function(){oO(this,n),document.removeEventListener("click",c)}.bind(this)}.bind(this));var f=function(){oO(this,e),r(0,u=!u)}.bind(this);return[u,o,i,function(n){var t=this;if(n&&n.target){var e=i.isMuted?0:1;Ke(i.chatId,e).then(function(n){oO(this,t),n===j.Xn&&(Ln(iu,i.isMuted=e,i),nu(i,e),r(0,u=!1))}.bind(this))}},f,function(n){var t=this;Rt[n?"unshift":"push"](function(){oO(this,t),r(1,o=n)}.bind(this))}]}var hO=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&tO(n,t)}(o,n);var t,r,i,e=rO(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(iO(t=e.call(this)),n,lO,aO,An,{}),t}return t=o,r&&nO(t.prototype,r),i&&nO(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),vO=hO;function dO(n){return dO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},dO(n)}var bO=undefined;function yO(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==dO(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==dO(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===dO(o)?o:String(o)),i)}var e,o}function pO(n,t){return pO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},pO(n,t)}function mO(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=gO(n);if(t){var e=gO(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===dO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wO(n)}(this,r)}}function wO(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function gO(n){return gO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gO(n)}function _O(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function SO(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return jO(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jO(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jO(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function OO(n){var t,r;return{c:function(){t=tt("span"),r=it(n[5]),at(t,"class","chat-window-header__name")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,t){32&t&&st(r,n[5])},d:function(n){n&&Zn(t)}}}function EO(n){var t,r;return{c:function(){t=tt("a"),r=it(n[5]),at(t,"class","chat-window-header__name"),at(t,"target","_blank"),at(t,"href",n[6])},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,i){32&i&&st(r,n[5]),64&i&&at(t,"href",n[6])},d:function(n){n&&Zn(t)}}}function TO(n){var t;return{c:function(){(t=tt("span")).innerHTML='<i class="icons-chat icons-chat_muted"></i>',at(t,"class","chat-window-header__muted")},m:function(n,r){Kn(n,t,r)},d:function(n){n&&Zn(t)}}}function kO(n){var t,r;return{c:function(){t=tt("span"),r=it(n[7]),at(t,"class","chat-window-header__additional"),at(t,"title",n[8])},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,i){128&i&&st(r,n[7]),256&i&&at(t,"title",n[8])},d:function(n){n&&Zn(t)}}}function AO(n){var t;function r(n,t){return(n[14]||n[4].perms&C.Nt)&&!n[1]?CO:RO}var i=r(n),e=i(n);return{c:function(){t=tt("div"),e.c(),at(t,"class","chat-window-header__buttons")},m:function(n,r){Kn(n,t,r),e.m(t,null)},p:function(n,o){i===(i=r(n))&&e?e.p(n,o):(e.d(1),(e=i(n))&&(e.c(),e.m(t,null)))},d:function(n){n&&Zn(t),e.d()}}}function RO(n){var t,r,e,o;return{c:function(){t=tt("button"),at(r=tt("i"),"class","icons-chat icons-chat_info"),at(t,"class","button chat-window-header__button-icon"),at(t,"title",i("info"))},m:function(i,u){Kn(i,t,u),Yn(t,r),e||(o=ut(t,"click",ct(n[17])),e=!0)},p:_n,d:function(n){n&&Zn(t),e=!1,o()}}}function CO(n){var t,r,e,o;return{c:function(){t=tt("button"),at(r=tt("i"),"class","icons-chat icons-chat_edit-big"),at(t,"class","button chat-window-header__button-icon"),at(t,"title",i("edit"))},m:function(i,u){Kn(i,t,u),Yn(t,r),e||(o=ut(t,"click",ct(n[16])),e=!0)},p:_n,d:function(n){n&&Zn(t),e=!1,o()}}}function xO(n){var t,r,e;return{c:function(){(t=tt("button")).textContent="".concat(i("delete")),at(t,"class","button button_tiny chat-window-header__button chat-window-header__button_capitalize button_red")},m:function(i,o){Kn(i,t,o),r||(e=ut(t,"click",ct(n[18])),r=!0)},p:_n,d:function(n){n&&Zn(t),r=!1,e()}}}function IO(n){var t;function r(n,t){return n[4].isSubscribed?PO:MO}var i=r(n),e=i(n);return{c:function(){e.c(),t=ot()},m:function(n,r){e.m(n,r),Kn(n,t,r)},p:function(n,o){i===(i=r(n))&&e?e.p(n,o):(e.d(1),(e=i(n))&&(e.c(),e.m(t.parentNode,t)))},d:function(n){e.d(n),n&&Zn(t)}}}function MO(n){var t,r,e,o,u=i(n[10]?"join":"subscribe")+"";return{c:function(){t=tt("button"),r=it(u),at(t,"class","button button_tiny chat-window-header__button button_green")},m:function(i,u){Kn(i,t,u),Yn(t,r),e||(o=ut(t,"click",ct(n[20])),e=!0)},p:function(n,t){1024&t&&u!==(u=i(n[10]?"join":"subscribe")+"")&&st(r,u)},d:function(n){n&&Zn(t),e=!1,o()}}}function PO(n){var t,r,e,o,u=i(n[10]?"leaveGroup":"unsubscribe")+"";return{c:function(){t=tt("button"),r=it(u),at(t,"class","button button_tiny chat-window-header__button button_white")},m:function(i,u){Kn(i,t,u),Yn(t,r),e||(o=ut(t,"click",ct(n[19])),e=!0)},p:function(n,t){1024&t&&u!==(u=i(n[10]?"leaveGroup":"unsubscribe")+"")&&st(r,u)},d:function(n){n&&Zn(t),e=!1,o()}}}function UO(n){var t,r;return t=new vO({}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function NO(n){var t,r;return(t=new Ud({})).$on("close",n[21]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:_n,i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function DO(n){var t,r,e,o,u,c,f,a,s,l,h,v,d,b,y;function p(n,t){return n[6]?EO:OO}var m=p(n),w=m(n),g=n[4].isMuted&&TO(),_=!Dr&&function(n){var t,r=n[7]&&kO(n);return{c:function(){r&&r.c(),t=ot()},m:function(n,i){r&&r.m(n,i),Kn(n,t,i)},p:function(n,i){n[7]?r?r.p(n,i):((r=kO(n)).c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d:function(n){r&&r.d(n),n&&Zn(t)}}}(n),S=!n[1]&&AO(n),j=n[1]&&!n[0]&&xO(n),O=(n[2]||n[10])&&(!n[9]||n[9]&&!n[4].isSubscribed)&&IO(n),E=n[4].isSubscribed&&UO(),T=!Dr&&function(n){var t,r,e,o;return{c:function(){t=tt("span"),at(r=tt("i"),"class","icons-chat icons-chat_close-gray"),at(t,"class","chat-window-header__close"),at(t,"title",i("back"))},m:function(n,i){Kn(n,t,i),Yn(t,r),e||(o=[ut(t,"keyup",LO),ut(t,"click",BO)],e=!0)},p:_n,d:function(n){n&&Zn(t),e=!1,Tn(o)}}}(),k=Dr&&function(n){var t,r,e,o;return{c:function(){t=tt("span"),at(r=tt("i"),"class","icons-chat icons-chat_back"),at(t,"class","chat-window-header__close chat-window-header__close_widget"),at(t,"title",i("back"))},m:function(n,i){Kn(n,t,i),Yn(t,r),e||(o=[ut(t,"keyup",$O),ut(t,"click",BO)],e=!0)},p:_n,d:function(n){n&&Zn(t),e=!1,Tn(o)}}}(),A=n[11]&&NO(n);return{c:function(){t=tt("div"),r=tt("div"),e=tt("div"),w.c(),o=et(),g&&g.c(),u=et(),_&&_.c(),c=et(),S&&S.c(),f=et(),a=tt("div"),j&&j.c(),s=et(),O&&O.c(),l=et(),E&&E.c(),h=et(),T&&T.c(),v=et(),k&&k.c(),d=et(),A&&A.c(),b=ot(),at(e,"class","chat-window-header__title"),at(r,"class","chat-window-header__content"+(Dr?" chat-window-header__content_widget":"")),at(a,"class","chat-window-header__tools"+(Dr?" chat-window-header__tools_widget":"")),at(t,"class","chat-window-header ui")},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(r,e),w.m(e,null),Yn(e,o),g&&g.m(e,null),Yn(e,u),_&&_.m(e,null),Yn(r,c),S&&S.m(r,null),Yn(t,f),Yn(t,a),j&&j.m(a,null),Yn(a,s),O&&O.m(a,null),Yn(a,l),E&&E.m(a,null),Yn(a,h),T&&T.m(a,null),Yn(t,v),k&&k.m(t,null),Kn(n,d,i),A&&A.m(n,i),Kn(n,b,i),y=!0},p:function(n,t){var i=this,c=SO(t,1)[0];m===(m=p(n))&&w?w.p(n,c):(w.d(1),(w=m(n))&&(w.c(),w.m(e,o))),n[4].isMuted?g||((g=TO()).c(),g.m(e,u)):g&&(g.d(1),g=null),Dr||_.p(n,c),n[1]?S&&(S.d(1),S=null):S?S.p(n,c):((S=AO(n)).c(),S.m(r,null)),n[1]&&!n[0]?j?j.p(n,c):((j=xO(n)).c(),j.m(a,s)):j&&(j.d(1),j=null),!n[2]&&!n[10]||n[9]&&(!n[9]||n[4].isSubscribed)?O&&(O.d(1),O=null):O?O.p(n,c):((O=IO(n)).c(),O.m(a,l)),n[4].isSubscribed?E?16&c&&Xt(E,1):((E=UO()).c(),Xt(E,1),E.m(a,h)):E&&(Yt(),Qt(E,1,1,function(){_O(this,i),E=null}.bind(this)),Vt()),Dr||T.p(n,c),Dr&&k.p(n,c),n[11]?A?(A.p(n,c),2048&c&&Xt(A,1)):((A=NO(n)).c(),Xt(A,1),A.m(b.parentNode,b)):A&&(Yt(),Qt(A,1,1,function(){_O(this,i),A=null}.bind(this)),Vt())},i:function(n){y||(Xt(E),Xt(A),y=!0)},o:function(n){Qt(E),Qt(A),y=!1},d:function(n){n&&Zn(t),w.d(),g&&g.d(),_&&_.d(),S&&S.d(),j&&j.d(),O&&O.d(),E&&E.d(),T&&T.d(),k&&k.d(),n&&Zn(d),A&&A.d(n),n&&Zn(b)}}}function BO(){Tu()}var LO=function(){_O(this,bO)}.bind(undefined),$O=function(){_O(this,bO)}.bind(undefined);function zO(n,r,e){var o,u,c,f=this,a=_n,s=function(){var n=this;return _O(this,f),a(),a=xn(l,function(t){return _O(this,n),e(15,u=t)}.bind(this)),l}.bind(this);Mn(n,iu,function(n){return _O(this,f),e(4,o=n)}.bind(this)),Mn(n,Ar,function(n){return _O(this,f),e(13,c=n)}.bind(this)),n.$$.on_destroy.push(function(){return _O(this,f),a()}.bind(this));var l,v="",d="",b="",y="",p=!1,m=!1,w=!1,g=!1,S=!1,j=ao,E=!1,T=!1;var k=function(){_O(this,f),Su(iu)}.bind(this),A=function(){_O(this,f),Ln(Ar,c.info=!0,c)}.bind(this),R=function(){_O(this,f),Ln(Ar,c["delete"]=!0,c)}.bind(this),x=function(){_O(this,f),e(11,T=!0)}.bind(this),I=function(){_O(this,f),e(3,E=!0)}.bind(this),M=function(){_O(this,f),e(11,T=!1)}.bind(this);return n.$$.update=function(){_O(this,f),8&n.$$.dirty&&E&&(!function(){var n=this,r=g?C.Mt:C.Pt;ge(o.chatId,co,r).then(function(t){_O(this,n),ns(t),o.type===O.rt?window.fz&&window.fz("track","MQL5+Chat+Channel+Join"):o.type===O.tt&&window.fz&&window.fz("track","MQL5+Chat+Group+Join"),Ln(iu,o.isSubscribed=N.Kt,o)}.bind(this))["catch"](function(r){_O(this,n),ga.set(r.message),h.error(t.T,r)}.bind(this))}(),e(3,E=!1)),32791&n.$$.dirty&&(e(0,p=o.authorId===_),e(9,m=o.authorId===co),e(1,w=o.type===O.nt),e(2,g=o.type===O.rt),e(10,S=o.type===O.tt),e(5,v=""),e(6,d=""),e(7,b=""),w?(s(e(12,l=Fs(o.authorId===co?o.extraId:o.authorId))),u.userLogin&&!p?e(6,d="/".concat(Gr,"/users/").concat(u.userLogin.toLowerCase())):e(6,d=""),e(5,v=u.userName||""),u.isDeleted&&e(5,v=i("deletedAccount"))):w||(e(5,v=o.name),!Dr&&o.countMembers&&(e(7,b=i("ofUsers",ul(o.countMembers))),g&&e(8,y="".concat(i("owner"),": ").concat(o.authorName)))))}.bind(this),[p,w,g,E,o,v,d,b,y,m,S,T,l,c,j,u,k,A,R,x,I,M]}var WO=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&pO(n,t)}(o,n);var t,r,i,e=mO(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(wO(t=e.call(this)),n,zO,DO,An,{}),t}return t=o,r&&yO(t.prototype,r),i&&yO(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),FO=WO;function GO(n){return GO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},GO(n)}function qO(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==GO(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==GO(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===GO(o)?o:String(o)),i)}var e,o}function HO(n,t){return HO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},HO(n,t)}function YO(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=XO(n);if(t){var e=XO(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===GO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return VO(n)}(this,r)}}function VO(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function XO(n){return XO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},XO(n)}function QO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function JO(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return KO(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KO(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KO(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function ZO(n){var t,r;return(t=new Il({})).$on("close",n[7]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:_n,i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function nE(n){var t,r;return t=new Dy({props:{chat:gu}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:_n,i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function tE(n){var t,r;return t=new zs({}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:_n,i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function rE(n){var t,r;return(t=new pd({})).$on("close",n[6]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:_n,i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function iE(n){var t,r;return(t=new vv({props:{chat:n[4]}})).$on("close",n[5]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};16&r&&(i.chat=n[4]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function eE(n){var t,r,i,e,o,u,c,f,a,s=[iE,rE,tE,nE,ZO],l=[];function h(n,t){return n[3].addMembers?0:n[3].listMembers?1:n[3]["delete"]?2:n[3].edit?3:n[3].info?4:-1}~(t=h(n))&&(r=l[t]=s[t](n)),o=new FO({});var v={list:Ju,loadMore:n[0]};c=new Jj({props:v}),n[8](c);var d=!Nr&&function(n){var t,r;return t=new pw({props:{resizeList:n[1]}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:_n,i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}(n);return{c:function(){r&&r.c(),i=et(),e=tt("div"),rr(o.$$.fragment),u=et(),rr(c.$$.fragment),f=et(),d&&d.c(),at(e,"class","chat-window"+(Dr?" chat-window_widget":""))},m:function(n,r){~t&&l[t].m(n,r),Kn(n,i,r),Kn(n,e,r),ir(o,e,null),Yn(e,u),ir(c,e,null),Yn(e,f),d&&d.m(e,null),a=!0},p:function(n,e){var o=this,u=JO(e,1)[0],f=t;(t=h(n))===f?~t&&l[t].p(n,u):(r&&(Yt(),Qt(l[f],1,1,function(){QO(this,o),l[f]=null}.bind(this)),Vt()),~t?((r=l[t])?r.p(n,u):(r=l[t]=s[t](n)).c(),Xt(r,1),r.m(i.parentNode,i)):r=null);var a={};1&u&&(a.loadMore=n[0]),c.$set(a),Nr||d.p(n,u)},i:function(n){a||(Xt(r),Xt(o.$$.fragment,n),Xt(c.$$.fragment,n),Xt(d),a=!0)},o:function(n){Qt(r),Qt(o.$$.fragment,n),Qt(c.$$.fragment,n),Qt(d),a=!1},d:function(r){~t&&l[t].d(r),r&&Zn(i),r&&Zn(e),er(o),n[8](null),er(c),d&&d.d()}}}function oE(n,t,r){var i,e,o=this;Mn(n,Ar,function(n){return QO(this,o),r(3,i=n)}.bind(this)),Mn(n,iu,function(n){return QO(this,o),r(4,e=n)}.bind(this));var u,c=t.loadMore;Et(function(){var n=this;return QO(this,o),function(){QO(this,n),Ln(Ar,i.addMembers=!1,i),Ln(Ar,i.listMembers=!1,i),Ln(Ar,i["delete"]=!1,i),Ln(Ar,i.edit=!1,i),Ln(Ar,i.info=!1,i)}.bind(this)}.bind(this));var f=function(){QO(this,o),Ln(Ar,i.addMembers=!1,i)}.bind(this),a=function(){QO(this,o),Ln(Ar,i.listMembers=!1,i)}.bind(this),s=function(){QO(this,o),Ln(Ar,i.info=!1,i)}.bind(this);return n.$$set=function(n){QO(this,o),"loadMore"in n&&r(0,c=n.loadMore)}.bind(this),[c,function(){u.handleChange()},u,i,e,f,a,s,function(n){var t=this;Rt[n?"unshift":"push"](function(){QO(this,t),r(2,u=n)}.bind(this))}]}var uE=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&HO(n,t)}(o,n);var t,r,i,e=YO(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(VO(t=e.call(this)),n,oE,eE,An,{loadMore:0,resizeList:1}),t}return t=o,(r=[{key:"resizeList",get:function(){return this.$$.ctx[1]}}])&&qO(t.prototype,r),i&&qO(t,i),Object.defineProperty(t,"prototype",{writable:!1}),o}(ur),cE=uE;function fE(n){return fE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fE(n)}function aE(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==fE(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==fE(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===fE(o)?o:String(o)),i)}var e,o}function sE(n,t){return sE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},sE(n,t)}function lE(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=vE(n);if(t){var e=vE(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===fE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hE(n)}(this,r)}}function hE(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function vE(n){return vE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vE(n)}function dE(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function bE(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return yE(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yE(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yE(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function pE(n){var t;return{c:function(){at(t=tt("span"),"class","chat-line__name")},m:function(n,r){Kn(n,t,r)},p:_n,d:function(n){n&&Zn(t)}}}function mE(n){var t,r,i,e,o,u=n[0].isMuted&&wE(n);return{c:function(){t=tt("span"),r=tt("span"),i=it(n[6]),e=et(),u&&u.c(),at(r,"class","chat-line__name-text"),at(t,"class",o="chat-line__name"+(n[0].isMuted?" chat-line__name_muted":""))},m:function(n,o){Kn(n,t,o),Yn(t,r),Yn(r,i),Yn(t,e),u&&u.m(t,null)},p:function(n,r){64&r&&st(i,n[6]),n[0].isMuted?u||((u=wE(n)).c(),u.m(t,null)):u&&(u.d(1),u=null),1&r&&o!==(o="chat-line__name"+(n[0].isMuted?" chat-line__name_muted":""))&&at(t,"class",o)},d:function(n){n&&Zn(t),u&&u.d()}}}function wE(n){var t;return{c:function(){at(t=tt("i"),"class","icons-chat icons-chat_muted")},m:function(n,r){Kn(n,t,r)},d:function(n){n&&Zn(t)}}}function gE(n){var t;return{c:function(){at(t=tt("span"),"class","chat-line__read-mark")},m:function(r,i){Kn(r,t,i),t.innerHTML=n[8]},p:function(n,r){256&r&&(t.innerHTML=n[8])},d:function(n){n&&Zn(t)}}}function _E(n){var t;return{c:function(){at(t=tt("span"),"class","chat-line__unread"),at(t,"title",i("unreadMessages"))},m:function(n,r){Kn(n,t,r)},p:_n,d:function(n){n&&Zn(t)}}}function SE(n){var t,r,i,e,o,u,c,f,a,s,l,h,v,d,b,y,p,m,w=li({dateTime:n[0].topMessage?n[0].topMessage.date:n[0].date,type:"smart"})+"";function g(n,t){return n[6]?mE:pE}i=new YS({props:{data:n[0],size:Hr}});var _=g(n),S=_(n);function j(n,t){return n[2]?_E:n[3]?gE:void 0}var O=j(n),E=O&&O(n);return{c:function(){t=tt("a"),r=tt("span"),rr(i.$$.fragment),e=et(),o=tt("span"),u=tt("span"),S.c(),c=et(),f=tt("span"),a=it(w),l=et(),h=tt("span"),v=et(),E&&E.c(),at(r,"class","chat-line__avatar"),at(f,"class","chat-line__date"),at(f,"title",s=n[0].topMessage?n[0].topMessage.dateText:n[0].dateText),at(u,"class","chat-line__header"),at(h,"class","chat-line__desc"),at(o,"class","chat-line__content"),at(t,"href",d=Jr(n[0])),at(t,"class",b="chat-line"+(n[4]?" chat-line_active":"")+(n[2]||n[3]?" chat-line_marked":"")+(Dr?" chat-line_min":""))},m:function(s,d){Kn(s,t,d),Yn(t,r),ir(i,r,null),Yn(t,e),Yn(t,o),Yn(o,u),S.m(u,null),Yn(u,c),Yn(u,f),Yn(f,a),Yn(o,l),Yn(o,h),h.innerHTML=n[7],Yn(t,v),E&&E.m(t,null),y=!0,p||(m=ut(t,"click",ct(n[12])),p=!0)},p:function(n,r){var e=bE(r,1)[0],o={};1&e&&(o.data=n[0]),i.$set(o),_===(_=g(n))&&S?S.p(n,e):(S.d(1),(S=_(n))&&(S.c(),S.m(u,c))),(!y||1&e)&&w!==(w=li({dateTime:n[0].topMessage?n[0].topMessage.date:n[0].date,type:"smart"})+"")&&st(a,w),(!y||1&e&&s!==(s=n[0].topMessage?n[0].topMessage.dateText:n[0].dateText))&&at(f,"title",s),(!y||128&e)&&(h.innerHTML=n[7]),O===(O=j(n))&&E?E.p(n,e):(E&&E.d(1),(E=O&&O(n))&&(E.c(),E.m(t,null))),(!y||1&e&&d!==(d=Jr(n[0])))&&at(t,"href",d),(!y||28&e&&b!==(b="chat-line"+(n[4]?" chat-line_active":"")+(n[2]||n[3]?" chat-line_marked":"")+(Dr?" chat-line_min":"")))&&at(t,"class",b)},i:function(n){y||(Xt(i.$$.fragment,n),y=!0)},o:function(n){Qt(i.$$.fragment,n),y=!1},d:function(n){n&&Zn(t),er(i),S.d(),E&&E.d(),p=!1,m()}}}function jE(n,t,r){var e,o,u,c=this,f=_n,a=function(){var n=this;return dE(this,c),f(),f=xn(s,function(t){return dE(this,n),r(9,e=t)}.bind(this)),s}.bind(this);Mn(n,Ar,function(n){return dE(this,c),r(10,o=n)}.bind(this)),Mn(n,iu,function(n){return dE(this,c),r(11,u=n)}.bind(this)),n.$$.on_destroy.push(function(){return dE(this,c),f()}.bind(this));var s,l=t.chat,h=t.clickHandle,v=l.type!==O.rt&&l.topMessage&&l.topMessage.authorId===co,d=!!l.isSubscribed&&go(l),b=u&&l.chatId===u.chatId,y=l.name,p=w(),m=g();function w(){var n="";return l.topMessage?(l.topMessage.recType===E.et?n=l.topMessage.text:l.topMessage.recType===E.ot&&(n=l.topMessage.fileName),l.type===O.tt&&(n=l.topMessage.authorId===co?"".concat(i("you"),": ").concat(n):"".concat(l.topMessage.authorName,": ").concat(n))):l.description&&(n=l.description),n}function g(){var n=rn(l.lastUpdate,l.lastSeen)>0?"sent":"delivered";return'<i class="icons-chat icons-chat_'.concat(n,'"></i>')}l.type===O.nt&&(y="",a(s=Fs(l.authorId===co?l.extraId:l.authorId)));var _=function(){dE(this,c),h(l.chatId)}.bind(this);return n.$$set=function(n){dE(this,c),"chat"in n&&r(0,l=n.chat),"clickHandle"in n&&r(1,h=n.clickHandle)}.bind(this),n.$$.update=function(){dE(this,c),3073&n.$$.dirty&&l&&(r(4,b=u&&l.chatId===u.chatId&&o.window),r(7,p=w()),r(8,m=g()),r(2,d=!!l.isSubscribed&&go(l)),r(3,v=l.type!==O.rt&&l.topMessage&&l.topMessage.authorId===co)),517&n.$$.dirty&&(e?e.isDeleted?(fo||ao||(Fo(l.changeId),d&&zi(l.chatId,l.lastUpdate)),r(6,y=i("deletedAccount"))):e.userName&&r(6,y=e.userName):r(6,y=l.name))}.bind(this),[l,h,d,v,b,s,y,p,m,e,o,u,_]}var OE=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&sE(n,t)}(o,n);var t,r,i,e=lE(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(hE(t=e.call(this)),n,jE,SE,An,{chat:0,clickHandle:1}),t}return t=o,r&&aE(t.prototype,r),i&&aE(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),EE=OE;function TE(n){return TE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},TE(n)}function kE(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==TE(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==TE(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===TE(o)?o:String(o)),i)}var e,o}function AE(n,t){return AE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},AE(n,t)}function RE(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=xE(n);if(t){var e=xE(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===TE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return CE(n)}(this,r)}}function CE(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function xE(n){return xE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xE(n)}function IE(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return ME(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ME(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ME(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function PE(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function UE(n,t,r){var i=n.slice();return i[14]=t[r],i}function NE(n){for(var t,r,i=this,e=[],o=new Map,u=n[2],c=function(n){return PE(this,i),n[14].chatId}.bind(this),f=0;f<u.length;f+=1){var a=UE(n,u,f),s=c(a);o.set(s,e[f]=BE(s,a))}return{c:function(){for(var n=0;n<e.length;n+=1)e[n].c();t=ot()},m:function(n,i){for(var o=0;o<e.length;o+=1)e[o].m(n,i);Kn(n,t,i),r=!0},p:function(n,r){6&r&&(u=n[2],Yt(),e=nr(e,r,c,1,n,u,o,t.parentNode,Zt,BE,t,UE),Vt())},i:function(n){if(!r){for(var t=0;t<u.length;t+=1)Xt(e[t]);r=!0}},o:function(n){for(var t=0;t<e.length;t+=1)Qt(e[t]);r=!1},d:function(n){for(var r=0;r<e.length;r+=1)e[r].d(n);n&&Zn(t)}}}function DE(n){var t,r,i;return{c:function(){t=tt("div"),r=tt("i"),i=new pt(!1),at(r,"class","icons-chat icons-chat_chat-big"),i.a=null,at(t,"class","empty-chats-list")},m:function(e,o){Kn(e,t,o),Yn(t,r),i.m(n[7],t)},p:function(n,t){128&t&&i.p(n[7])},i:_n,o:_n,d:function(n){n&&Zn(t)}}}function BE(n,t){var r,i,e;return i=new EE({props:{chat:t[14],clickHandle:t[1]}}),{key:n,first:null,c:function(){r=ot(),rr(i.$$.fragment),this.first=r},m:function(n,t){Kn(n,r,t),ir(i,n,t),e=!0},p:function(n,r){t=n;var e={};4&r&&(e.chat=t[14]),2&r&&(e.clickHandle=t[1]),i.$set(e)},i:function(n){e||(Xt(i.$$.fragment,n),e=!0)},o:function(n){Qt(i.$$.fragment,n),e=!1},d:function(n){n&&Zn(r),er(i,n)}}}function LE(n){var t,r,i,e,o,u,c,f,a,s,l=[DE,NE],h=[];function v(n,t){return n[2].length?1:0}return o=v(n),u=h[o]=l[o](n),{c:function(){t=tt("div"),r=tt("div"),i=et(),e=tt("div"),u.c(),at(r,"class","chat-panel__expand"),vt(r,"height",n[4]+"px"),at(e,"class","chat-panel__list"),vt(e,"transform","translate3d(0,"+n[6]+"px,0)"),at(t,"class",c="chat-panel"+(Dr?" chat-panel_widget":" chat-panel_standalone")+(n[8].length?" chat-panel_width-choice-type":"")+" "+n[0])},m:function(u,c){Kn(u,t,c),Yn(t,r),Yn(t,i),Yn(t,e),h[o].m(e,null),n[13](t),f=!0,a||(s=ut(t,"scroll",Pf(n[9],100)),a=!0)},p:function(n,i){var a=this,s=IE(i,1)[0];(!f||16&s)&&vt(r,"height",n[4]+"px");var d=o;(o=v(n))===d?h[o].p(n,s):(Yt(),Qt(h[d],1,1,function(){PE(this,a),h[d]=null}.bind(this)),Vt(),(u=h[o])?u.p(n,s):(u=h[o]=l[o](n)).c(),Xt(u,1),u.m(e,null)),(!f||64&s)&&vt(e,"transform","translate3d(0,"+n[6]+"px,0)"),(!f||257&s&&c!==(c="chat-panel"+(Dr?" chat-panel_widget":" chat-panel_standalone")+(n[8].length?" chat-panel_width-choice-type":"")+" "+n[0]))&&at(t,"class",c)},i:function(n){f||(Xt(u),f=!0)},o:function(n){Qt(u),f=!1},d:function(r){r&&Zn(t),h[o].d(),n[13](null),a=!1,s()}}}function $E(n,t,r){var e,o,u,c=this,f=_n,a=function(){var n=this;return PE(this,c),f(),f=xn(s,function(t){return PE(this,n),r(11,e=t)}.bind(this)),s}.bind(this);Mn(n,Do,function(n){return PE(this,c),r(12,o=n)}.bind(this)),Mn(n,No,function(n){return PE(this,c),r(8,u=n)}.bind(this)),n.$$.on_destroy.push(function(){return PE(this,c),f()}.bind(this));var s,l,h=t.additionalClass,v=void 0===h?"":h,d=t.clickHandle,b=t.loadMore,y=0,p=[],m=0,w="";function g(){if(l){var n=Dr?42:72,t=e.length;r(4,y=t*n);for(var i=l.scrollTop,u=l.offsetHeight,c=0,f=0,a=0,s=0;c<t;){if(f+n>i){s=Math.max(c-7,0),a=Math.max(f-7*n,0);break}f+=n,c++}for(;c<t&&(c++,!((f+=n)>i+u)););var h=Math.min(c+7,t);t&&t-h<7&&b(o),r(6,m=Math.ceil(a)),r(2,p=e.slice(s,h))}}return Et(function(){var n=this;return PE(this,c),window.addEventListener("resize",g),g(),function(){PE(this,n),window.removeEventListener("resize",g)}.bind(this)}.bind(this)),n.$$set=function(n){PE(this,c),"additionalClass"in n&&r(0,v=n.additionalClass),"clickHandle"in n&&r(1,d=n.clickHandle),"loadMore"in n&&r(10,b=n.loadMore)}.bind(this),n.$$.update=function(){if(PE(this,c),4104&n.$$.dirty&&o!==undefined&&l&&r(3,l.scrollTop=0,l),4096&n.$$.dirty)switch(o){case O.nt:a(r(5,s=ko));break;case O.tt:a(r(5,s=Ao));break;case O.rt:a(r(5,s=Ro));break;default:a(r(5,s=To))}2048&n.$$.dirty&&e&&g(),4&n.$$.dirty&&(p.length||r(7,w=Dr?i("emptyChatsList","/".concat(Gr,"/users/").concat(Pr,"/messages")):i("emptyChatsListShort")))}.bind(this),[v,d,p,l,y,s,m,w,u,g,b,e,o,function(n){var t=this;Rt[n?"unshift":"push"](function(){PE(this,t),r(3,l=n),r(12,o)}.bind(this))}]}var zE=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&AE(n,t)}(o,n);var t,r,i,e=RE(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(CE(t=e.call(this)),n,$E,LE,An,{additionalClass:0,clickHandle:1,loadMore:10}),t}return t=o,r&&kE(t.prototype,r),i&&kE(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),WE=zE;function FE(n){return FE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},FE(n)}function GE(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==FE(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==FE(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===FE(o)?o:String(o)),i)}var e,o}function qE(n,t){return qE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},qE(n,t)}function HE(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=VE(n);if(t){var e=VE(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===FE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return YE(n)}(this,r)}}function YE(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function VE(n){return VE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},VE(n)}function XE(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function QE(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return JE(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JE(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JE(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function KE(n,t,r){var i=n.slice();return i[7]=t[r],i}function ZE(n){for(var t,r=n[2],i=[],e=0;e<r.length;e+=1)i[e]=tT(KE(n,r,e));return{c:function(){t=tt("div");for(var n=0;n<i.length;n+=1)i[n].c();at(t,"class","chat-choice-type chat-choice-type_widget")},m:function(r,e){Kn(r,t,e);for(var o=0;o<i.length;o+=1)i[o].m(t,null);n[6](t)},p:function(n,e){if(30&e){var o;for(r=n[2],o=0;o<r.length;o+=1){var u=KE(n,r,o);i[o]?i[o].p(u,e):(i[o]=tT(u),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d:function(r){r&&Zn(t),nt(i,r),n[6](null)}}}function nT(n){var t,r=n[4][n[7]].text+"";return{c:function(){t=it(r)},m:function(n,r){Kn(n,t,r)},p:function(n,i){4&i&&r!==(r=n[4][n[7]].text+"")&&st(t,r)},d:function(n){n&&Zn(t)}}}function tT(n){var t,r,i,e,o,u,c,f,a,s=!n[1]&&nT(n);function l(){return n[5](n[7])}return{c:function(){t=tt("button"),r=tt("i"),e=et(),s&&s.c(),o=et(),at(r,"class",i="icons-chat icons-chat_"+(n[3]===n[7]?n[4][n[7]].iconWidgetActive:n[4][n[7]].iconWidget)),at(t,"class",u="chat-choice-type__item"+(n[3]===n[7]?" chat-choice-type__item_active":"")),at(t,"title",c=n[4][n[7]].title)},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(t,e),s&&s.m(t,null),Yn(t,o),f||(a=ut(t,"click",ct(l)),f=!0)},p:function(e,f){n=e,12&f&&i!==(i="icons-chat icons-chat_"+(n[3]===n[7]?n[4][n[7]].iconWidgetActive:n[4][n[7]].iconWidget))&&at(r,"class",i),n[1]?s&&(s.d(1),s=null):s?s.p(n,f):((s=nT(n)).c(),s.m(t,o)),12&f&&u!==(u="chat-choice-type__item"+(n[3]===n[7]?" chat-choice-type__item_active":""))&&at(t,"class",u),4&f&&c!==(c=n[4][n[7]].title)&&at(t,"title",c)},d:function(n){n&&Zn(t),s&&s.d(),f=!1,a()}}}function rT(n){var t,r=n[2].length&&ZE(n);return{c:function(){r&&r.c(),t=ot()},m:function(n,i){r&&r.m(n,i),Kn(n,t,i)},p:function(n,i){var e=QE(i,1)[0];n[2].length?r?r.p(n,e):((r=ZE(n)).c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:_n,o:_n,d:function(n){r&&r.d(n),n&&Zn(t)}}}function iT(n,t,r){var e,o,u,c=this;Mn(n,No,function(n){return XE(this,c),r(2,e=n)}.bind(this)),Mn(n,Do,function(n){return XE(this,c),r(3,o=n)}.bind(this));var f=[{icon:"flat-chats",iconWidget:"chats",iconWidgetActive:"chats-active",title:i("allChats"),text:i("allChatsShort")},{icon:"flat-personal-chats",iconWidget:"personal-chats",iconWidgetActive:"personal-chats-active",title:i("privateChats"),text:i("privateChatsShort")},{icon:"flat-group-chats",iconWidget:"group-chats",iconWidgetActive:"group-chats-active",title:i("groupChats"),text:i("groupChatsShort")},{icon:"flat-channels",iconWidget:"channels",iconWidgetActive:"channels-active",title:i("channels"),text:i("channels")}],a=!1;Et(function(){var n=this;XE(this,c),u&&window.ResizeObserver&&new ResizeObserver(function(){XE(this,n),r(1,a=u.offsetWidth<330)}.bind(this)).observe(u)}.bind(this));var s=function(n){XE(this,c),Ln(Do,o=n,o),Tu()}.bind(this);return[u,a,e,o,f,s,function(n){var t=this;Rt[n?"unshift":"push"](function(){XE(this,t),r(0,u=n)}.bind(this))}]}var eT=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&qE(n,t)}(o,n);var t,r,i,e=HE(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(YE(t=e.call(this)),n,iT,rT,An,{}),t}return t=o,r&&GE(t.prototype,r),i&&GE(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),oT=eT;function uT(){var n=this;return new Promise(function(t,r){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,n),window.Ajax.post("https://"+Lr+"/auth",{token:Br},!1,{onready:function(n){t(n)},onerror:function(n){r(new Error(n))}},undefined,!0)}.bind(this))}function cT(n){return cT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},cT(n)}function fT(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==cT(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==cT(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===cT(o)?o:String(o)),i)}var e,o}function aT(n,t){return aT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},aT(n,t)}function sT(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=hT(n);if(t){var e=hT(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===cT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lT(n)}(this,r)}}function lT(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function hT(n){return hT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hT(n)}function vT(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return dT(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dT(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dT(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function bT(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function yT(n){var t,r,i;return{c:function(){t=tt("div"),r=tt("div"),i=it(n[3]),at(r,"class","alert alert_danger"),at(t,"class","chat-errors-block")},m:function(n,e){Kn(n,t,e),Yn(t,r),Yn(r,i)},p:function(n,t){8&t&&st(i,n[3])},d:function(n){n&&Zn(t)}}}function pT(n){var t,r,i,e,o,u,c,f,a=n[8].error&&mT(n),s=[gT,wT],l=[];function h(n,t){return n[8].errorWindow?0:n[8].window?1:-1}return~(r=h(n))&&(i=l[r]=s[r](n)),o=new WE({props:{clickHandle:Yf,loadMore:Ho}}),c=new oT({}),{c:function(){a&&a.c(),t=et(),i&&i.c(),e=et(),rr(o.$$.fragment),u=et(),rr(c.$$.fragment)},m:function(n,i){a&&a.m(n,i),Kn(n,t,i),~r&&l[r].m(n,i),Kn(n,e,i),ir(o,n,i),Kn(n,u,i),ir(c,n,i),f=!0},p:function(n,o){var u=this;n[8].error?a?256&o&&Xt(a,1):((a=mT(n)).c(),Xt(a,1),a.m(t.parentNode,t)):a&&(Yt(),Qt(a,1,1,function(){bT(this,u),a=null}.bind(this)),Vt());var c=r;(r=h(n))===c?~r&&l[r].p(n,o):(i&&(Yt(),Qt(l[c],1,1,function(){bT(this,u),l[c]=null}.bind(this)),Vt()),~r?((i=l[r])?i.p(n,o):(i=l[r]=s[r](n)).c(),Xt(i,1),i.m(e.parentNode,e)):i=null)},i:function(n){f||(Xt(a),Xt(i),Xt(o.$$.fragment,n),Xt(c.$$.fragment,n),f=!0)},o:function(n){Qt(a),Qt(i),Qt(o.$$.fragment,n),Qt(c.$$.fragment,n),f=!1},d:function(n){a&&a.d(n),n&&Zn(t),~r&&l[r].d(n),n&&Zn(e),er(o,n),n&&Zn(u),er(c,n)}}}function mT(n){var t,r;return t=new Ua({}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function wT(n){var t,r;return t=new cE({props:{loadMore:hc}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:_n,i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function gT(n){var t,r;return(t=new Ka({props:{$$slots:{content:[_T]},$$scope:{ctx:n}}})).$on("close",n[12]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};131584&r&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function _T(n){var t;return{c:function(){at(t=tt("div"),"slot","content")},m:function(r,i){Kn(r,t,i),t.innerHTML=n[9]},p:function(n,r){512&r&&(t.innerHTML=n[9])},d:function(n){n&&Zn(t)}}}function ST(n){var t,r,e,o,u,c,f,a,s,l,h,v=n[3]&&yT(n),d=n[6]&&!n[3]&&pT(n);return{c:function(){t=tt("div"),v&&v.c(),r=et(),d&&d.c(),e=et(),o=tt("div"),u=tt("a"),c=tt("i"),f=et(),(a=tt("div")).innerHTML="<div></div> \n    <div></div> \n    <div></div> \n    <div></div> \n    <div></div> \n    <div></div>",at(c,"class","icons-chat icons-chat_expand"),at(u,"href","/"+Gr+"/users/"+Pr+"/messages"),at(u,"class","chat-widget__expand"),at(u,"target","_blank"),at(u,"title",i("expandWindow")),at(o,"class","chat-widget__footer"),at(a,"class","chat-widget__resize-grip"),at(t,"class","chat-widget"),at(t,"id","chatsWidget"),vt(t,"width",n[0]+"px"),vt(t,"height",n[1]+"px"),vt(t,"top",n[2]+"px"),vt(t,"display",n[7]?"block":"none")},m:function(i,b){Kn(i,t,b),v&&v.m(t,null),Yn(t,r),d&&d.m(t,null),Yn(t,e),Yn(t,o),Yn(o,u),Yn(u,c),Yn(t,f),Yn(t,a),n[13](t),s=!0,l||(h=ut(a,"mousedown",n[10]),l=!0)},p:function(n,i){var o=this,u=vT(i,1)[0];n[3]?v?v.p(n,u):((v=yT(n)).c(),v.m(t,r)):v&&(v.d(1),v=null),n[6]&&!n[3]?d?(d.p(n,u),72&u&&Xt(d,1)):((d=pT(n)).c(),Xt(d,1),d.m(t,e)):d&&(Yt(),Qt(d,1,1,function(){bT(this,o),d=null}.bind(this)),Vt()),(!s||1&u)&&vt(t,"width",n[0]+"px"),(!s||2&u)&&vt(t,"height",n[1]+"px"),(!s||4&u)&&vt(t,"top",n[2]+"px"),(!s||128&u)&&vt(t,"display",n[7]?"block":"none")},i:function(n){s||(Xt(d),s=!0)},o:function(n){Qt(d),s=!1},d:function(r){r&&Zn(t),v&&v.d(),d&&d.d(),n[13](null),l=!1,h()}}}function jT(n,r,i){var e,o,u,c=this,f=_n,a=function(){var n=this;return bT(this,c),f(),f=xn(y,function(t){return bT(this,n),i(7,e=t)}.bind(this)),y}.bind(this);Mn(n,Ar,function(n){return bT(this,c),i(8,o=n)}.bind(this)),Mn(n,Cr,function(n){return bT(this,c),i(9,u=n)}.bind(this)),n.$$.on_destroy.push(function(){return bT(this,c),f()}.bind(this));var s,l=r.width,v=r.height,d=r.top,b=r.errorText,y=r.showed;a();var p,m=!1;function w(n){n.preventDefault&&n.preventDefault(),n.clientX>0&&i(0,l=Math.max(320,s.offsetLeft+s.offsetWidth-n.clientX)),n.clientY-document.body.offsetTop<window.innerHeight&&i(1,v=Math.max(400,n.clientY-s.offsetTop))}function g(n){n.preventDefault&&n.preventDefault(),window.removeEventListener("mousemove",w,!1),window.removeEventListener("mouseup",g,!1),0!==l&&0!==v&&ma(l,v),p&&p.resizeList()}Et(function(){var n=this;bT(this,c),uT()["catch"](function(r){bT(this,n),h.error(t.j,r)}.bind(this))["finally"](function(){bT(this,n),i(6,m=!0)}.bind(this))}.bind(this));var _=function(){bT(this,c),Cr.set(undefined)}.bind(this);return n.$$set=function(n){bT(this,c),"width"in n&&i(0,l=n.width),"height"in n&&i(1,v=n.height),"top"in n&&i(2,d=n.top),"errorText"in n&&i(3,b=n.errorText),"showed"in n&&a(i(4,y=n.showed))}.bind(this),[l,v,d,b,y,s,m,e,o,u,function(n){n.preventDefault&&n.preventDefault(),window.addEventListener("mousemove",w,!1),window.addEventListener("mouseup",g,!1)},function(){var n=this;Ut().then(function(){bT(this,n),s.scrollIntoView(!1)}.bind(this))},_,function(n){var t=this;Rt[n?"unshift":"push"](function(){bT(this,t),i(5,s=n)}.bind(this))}]}var OT=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&aT(n,t)}(o,n);var t,r,i,e=sT(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(lT(t=e.call(this)),n,jT,ST,An,{width:0,height:1,top:2,errorText:3,showed:4,scrollIntoView:11}),t}return t=o,(r=[{key:"scrollIntoView",get:function(){return this.$$.ctx[11]}}])&&fT(t.prototype,r),i&&fT(t,i),Object.defineProperty(t,"prototype",{writable:!1}),o}(ur),ET=OT;function TT(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var kT,AT,RT,CT,xT,IT,MT=6e4,PT=44,UT=lr(!1),NT=lr(!1);function DT(){Df(),AT&&AT.classList.remove("link-notify_opened"),RT&&(RT.removeEventListener("click",LT),RT.classList.remove("link-notify_opened-mobile")),UT.set(!1)}function BT(){var n=this,r=arguments.length>0&&arguments[0]!==undefined&&arguments[0];return new Promise(function(i){var e=this;TT(this,n),function(){var n=this;if(IT!==undefined)return IT;return IT=new Promise(function(r){var i=this;TT(this,n),function(){var n=this;return new Promise(function(r){var i=this;da(this,n),eo("chat").then(function(n){da(this,i);try{var r=JSON.parse(n);return pa&&"object"===va(pa)?r:(oo("chat","{}"),undefined)}catch(e){h.error(t.O,e),oo("chat","{}")}return undefined}.bind(this)).then(function(n){if(da(this,i),pa.width=(null==n?void 0:n.width)||ba,null==n?void 0:n.height)pa.height=n.height||ya;else{var t=window.innerHeight;pa.height=Math.max(t/2-(t/2%54-30)|0,ya)}r(pa)}.bind(this))["catch"](function(n){da(this,i),h.error(t.O,n),oo("chat","{}"),r(pa)}.bind(this))}.bind(this))}().then(function(n){TT(this,i);var t=n.height||0,e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=PT,u=document.body.querySelector(".cover .head");u instanceof HTMLElement&&(e-=u.clientHeight,o+=window.scrollY+u.getBoundingClientRect().y),t>e&&(t=e),CT=new ET({target:document.body,props:{width:n.width,height:t,top:o,errorText:kT,showed:UT}}),r()}.bind(this))}.bind(this)),IT}().then(function(){TT(this,e),window.SearchBoxContainer&&window.SearchBoxContainer.Hide(undefined,!0),UT.set(!0),AT&&AT.classList.add("link-notify_opened"),RT&&(RT.addEventListener("click",LT),RT.classList.add("link-notify_opened-mobile")),r&&CT.scrollIntoView(),i()}.bind(this))}.bind(this))}function LT(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;n&&n.preventDefault&&n.preventDefault(),In(UT)?DT():BT()}function $T(){AT&&(AT.onclick=LT,AT.classList.remove("link-notify_loading")),wo(),Wf(),window.HotKeys.Add(27,(function(){_f()||Mf()||DT()})),window.HotKeys.Add(113,(function(){LT()}))}function zT(){var n=this;return new Promise(function(t,r){TT(this,n),function i(){var n=this;if("visible"!==document.visibilityState)return void(xT=setTimeout(i,MT));clearTimeout(xT),ha().then(function(){TT(this,n),$T(),t()}.bind(this))["catch"](function(t){TT(this,n),kT=t.message,r(t)}.bind(this))}()}.bind(this))}function WT(){var n=this,r=arguments.length>0&&arguments[0]!==undefined&&arguments[0];return new Promise(function(i,e){var o=this;TT(this,n),AT=document.getElementById("notifyMessages"),RT=document.getElementById("notifyMessagesMobile"),function(){var n=this;eo("mql5_chats_unread").then(function(t){bo(this,n);var r=parseInt(t,10)||0;yo.set(r)}.bind(this))["catch"](function(r){bo(this,n),h.error(t.O,r,"Unread")}.bind(this))}(),eo("mql5_chats_connect").then(function(n){var t=this;TT(this,o);var u=parseInt(n,10)||0,c=(new Date).getTime()-u;if(!u||c>MT||r||In(NT))zT().then(i)["catch"](e);else{xT=setTimeout(function(){TT(this,t),zT().then(i)["catch"](e)}.bind(this),MT-c);var f=NT.subscribe(function(n){TT(this,t),n&&(f(),zT().then(i)["catch"](e))}.bind(this));AT&&(AT.onclick=function(n){var t=this;n.preventDefault(),null==AT||AT.classList.add("link-notify_loading"),zT().then(function(){TT(this,t),i()}.bind(this))["catch"](function(n){TT(this,t),e(n)}.bind(this))["finally"](function(){TT(this,t),BT()}.bind(this))})}}.bind(this))["catch"](function(n){TT(this,o),h.error(t.O,n)}.bind(this))}.bind(this))}function FT(n,t){var r=this;if(qr&&Dr)window.doPost(null,"/".concat(Gr,"/users/").concat(Pr,"/messages"),null,{user:n});else if(Dr?BT(!0).then(function(){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,r),qf(t)}.bind(this)):qf(t),window.history){var i=window.location,e=i.origin+i.pathname;window.history.pushState({},document.title,e)}}function GT(n){return GT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},GT(n)}function qT(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==GT(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==GT(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===GT(o)?o:String(o)),i)}var e,o}function HT(n,t){return HT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},HT(n,t)}function YT(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=XT(n);if(t){var e=XT(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===GT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return VT(n)}(this,r)}}function VT(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function XT(n){return XT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},XT(n)}function QT(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function JT(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return KT(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KT(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KT(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function ZT(n){var t,r,i,e,o,u,c,f,a,s=n[0].name+"";return i=new YS({props:{data:n[0],size:nk}}),{c:function(){t=tt("a"),r=tt("span"),rr(i.$$.fragment),e=et(),o=tt("span"),u=it(s),at(r,"class","chat-search-result__avatar"),at(o,"class","chat-search-result__name"),at(t,"class","chat-search-result"),at(t,"href",n[1])},m:function(s,l){Kn(s,t,l),Yn(t,r),ir(i,r,null),Yn(t,e),Yn(t,o),Yn(o,u),c=!0,f||(a=[ut(t,"click",ct(n[2])),ut(t,"click",n[3])],f=!0)},p:function(n,r){var e=JT(r,1)[0],o={};1&e&&(o.data=n[0]),i.$set(o),(!c||1&e)&&s!==(s=n[0].name+"")&&st(u,s),(!c||2&e)&&at(t,"href",n[1])},i:function(n){c||(Xt(i.$$.fragment,n),c=!0)},o:function(n){Qt(i.$$.fragment,n),c=!1},d:function(n){n&&Zn(t),er(i),f=!1,Tn(a)}}}var nk=25;function tk(n,t,r){var i,e=this,o=t.chat;return n.$$set=function(n){QT(this,e),"chat"in n&&r(0,o=n.chat)}.bind(this),n.$$.update=function(){QT(this,e),1&n.$$.dirty&&r(1,i=Jr(o))}.bind(this),[o,i,function(){Yf(o.chatId)},function(t){kt.call(this,n,t)}]}var rk=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&HT(n,t)}(o,n);var t,r,i,e=YT(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(VT(t=e.call(this)),n,tk,ZT,An,{chat:0}),t}return t=o,r&&qT(t.prototype,r),i&&qT(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),ik=rk;function ek(n){return ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ek(n)}function ok(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==ek(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==ek(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===ek(o)?o:String(o)),i)}var e,o}function uk(n,t){return uk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},uk(n,t)}function ck(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=ak(n);if(t){var e=ak(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===ek(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fk(n)}(this,r)}}function fk(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ak(n){return ak=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ak(n)}function sk(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function lk(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return hk(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hk(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hk(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function vk(n){var t,r,i,e,o,u,c,f,a,s=n[0].userName+"";return i=new bh({props:{data:n[0],size:dk}}),{c:function(){t=tt("a"),r=tt("span"),rr(i.$$.fragment),e=et(),o=tt("span"),u=it(s),at(r,"class","chat-search-result__avatar"),at(o,"class","chat-search-result__name"),at(t,"class","chat-search-result"),at(t,"href",n[1])},m:function(s,l){Kn(s,t,l),Yn(t,r),ir(i,r,null),Yn(t,e),Yn(t,o),Yn(o,u),c=!0,f||(a=[ut(t,"click",ct(n[2])),ut(t,"click",n[3])],f=!0)},p:function(n,r){var e=lk(r,1)[0],o={};1&e&&(o.data=n[0]),i.$set(o),(!c||1&e)&&s!==(s=n[0].userName+"")&&st(u,s),(!c||2&e)&&at(t,"href",n[1])},i:function(n){c||(Xt(i.$$.fragment,n),c=!0)},o:function(n){Qt(i.$$.fragment,n),c=!1},d:function(n){n&&Zn(t),er(i),f=!1,Tn(a)}}}var dk=25;function bk(n,t,r){var i,e=this,o=t.user;return n.$$set=function(n){sk(this,e),"user"in n&&r(0,o=n.user)}.bind(this),n.$$.update=function(){sk(this,e),1&n.$$.dirty&&r(1,i="/".concat(Gr,"/users/").concat((o.userLogin||"").toLowerCase()))}.bind(this),[o,i,function(){o.userId&&qf(o.userId,undefined)},function(t){kt.call(this,n,t)}]}var yk=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&uk(n,t)}(o,n);var t,r,i,e=ck(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(fk(t=e.call(this)),n,bk,vk,An,{user:0}),t}return t=o,r&&ok(t.prototype,r),i&&ok(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),pk=yk;function mk(n){return mk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},mk(n)}var wk=undefined;function gk(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==mk(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==mk(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===mk(o)?o:String(o)),i)}var e,o}function _k(n,t){return _k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},_k(n,t)}function Sk(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Ok(n);if(t){var e=Ok(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===mk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jk(n)}(this,r)}}function jk(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ok(n){return Ok=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ok(n)}function Ek(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Tk(n,t,r){var i=n.slice();return i[30]=t[r],i}function kk(n,t,r){var i=n.slice();return i[30]=t[r],i}function Ak(n,t,r){var i=n.slice();return i[30]=t[r],i}function Rk(n,t,r){var i=n.slice();return i[25]=t[r],i}function Ck(n,t,r){var i=n.slice();return i[25]=t[r],i}function xk(n,t,r){var i=n.slice();return i[30]=t[r],i}function Ik(n){var t,r,i,e,o=[Pk,Mk],u=[];function c(n,t){return n[16]?0:1}return r=c(n),i=u[r]=o[r](n),{c:function(){t=tt("div"),i.c(),at(t,"class","chat-search-panel__result")},m:function(n,i){Kn(n,t,i),u[r].m(t,null),e=!0},p:function(n,e){var f=this,a=r;(r=c(n))===a?u[r].p(n,e):(Yt(),Qt(u[a],1,1,function(){Ek(this,f),u[a]=null}.bind(this)),Vt(),(i=u[r])?i.p(n,e):(i=u[r]=o[r](n)).c(),Xt(i,1),i.m(t,null))},i:function(n){e||(Xt(i),e=!0)},o:function(n){Qt(i),e=!1},d:function(n){n&&Zn(t),u[r].d()}}}function Mk(n){var t,r,i,e,o,u,c,f=(n[10]||n[11])&&Uk(n),a=n[15]&&Nk(n),s=[Bk,Dk],l=[];function h(n,t){return"users"===n[8]?0:1}return e=h(n),o=l[e]=s[e](n),{c:function(){t=tt("div"),f&&f.c(),r=et(),a&&a.c(),i=et(),o.c(),u=ot(),at(t,"class","chat-search-panel__tabs")},m:function(n,o){Kn(n,t,o),f&&f.m(t,null),Yn(t,r),a&&a.m(t,null),Kn(n,i,o),l[e].m(n,o),Kn(n,u,o),c=!0},p:function(n,i){var c=this;n[10]||n[11]?f?f.p(n,i):((f=Uk(n)).c(),f.m(t,r)):f&&(f.d(1),f=null),n[15]?a?a.p(n,i):((a=Nk(n)).c(),a.m(t,null)):a&&(a.d(1),a=null);var v=e;(e=h(n))===v?l[e].p(n,i):(Yt(),Qt(l[v],1,1,function(){Ek(this,c),l[v]=null}.bind(this)),Vt(),(o=l[e])?o.p(n,i):(o=l[e]=s[e](n)).c(),Xt(o,1),o.m(u.parentNode,u))},i:function(n){c||(Xt(o),c=!0)},o:function(n){Qt(o),c=!1},d:function(n){n&&Zn(t),f&&f.d(),a&&a.d(),n&&Zn(i),l[e].d(n),n&&Zn(u)}}}function Pk(n){var t,r;return{c:function(){t=tt("div"),(r=tt("div")).textContent="".concat(i("foundEmpty")),at(r,"class","chat-search-panel__empty-result"),at(t,"class","chat-search-panel__errors")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:_n,i:_n,o:_n,d:function(n){n&&Zn(t)}}}function Uk(n){var t,r,e,o,u,c=i("users")+"";return{c:function(){t=tt("div"),r=it(c),at(t,"class",e="chat-search-panel__tab"+("users"===n[8]?" chat-search-panel__tab_active":""))},m:function(i,e){Kn(i,t,e),Yn(t,r),o||(u=[ut(t,"keyup",Zk),ut(t,"click",n[22])],o=!0)},p:function(n,r){256&r[0]&&e!==(e="chat-search-panel__tab"+("users"===n[8]?" chat-search-panel__tab_active":""))&&at(t,"class",e)},d:function(n){n&&Zn(t),o=!1,Tn(u)}}}function Nk(n){var t,r,e,o,u,c=i("chats")+"";return{c:function(){t=tt("div"),r=it(c),at(t,"class",e="chat-search-panel__tab"+("chats"===n[8]?" chat-search-panel__tab_active":""))},m:function(i,e){Kn(i,t,e),Yn(t,r),o||(u=[ut(t,"keyup",nA),ut(t,"click",n[23])],o=!0)},p:function(n,r){256&r[0]&&e!==(e="chat-search-panel__tab"+("chats"===n[8]?" chat-search-panel__tab_active":""))&&at(t,"class",e)},d:function(n){n&&Zn(t),o=!1,Tn(u)}}}function Dk(n){var t,r,i,e,o=n[14]&&Lk(n),u=n[12]&&zk(n),c=n[13]&&Fk(n);return{c:function(){t=tt("div"),o&&o.c(),r=et(),u&&u.c(),i=et(),c&&c.c(),at(t,"class","chat-search-panel__tab-content")},m:function(n,f){Kn(n,t,f),o&&o.m(t,null),Yn(t,r),u&&u.m(t,null),Yn(t,i),c&&c.m(t,null),e=!0},p:function(n,e){var f=this;n[14]?o?(o.p(n,e),16384&e[0]&&Xt(o,1)):((o=Lk(n)).c(),Xt(o,1),o.m(t,r)):o&&(Yt(),Qt(o,1,1,function(){Ek(this,f),o=null}.bind(this)),Vt()),n[12]?u?(u.p(n,e),4096&e[0]&&Xt(u,1)):((u=zk(n)).c(),Xt(u,1),u.m(t,i)):u&&(Yt(),Qt(u,1,1,function(){Ek(this,f),u=null}.bind(this)),Vt()),n[13]?c?(c.p(n,e),8192&e[0]&&Xt(c,1)):((c=Fk(n)).c(),Xt(c,1),c.m(t,null)):c&&(Yt(),Qt(c,1,1,function(){Ek(this,f),c=null}.bind(this)),Vt())},i:function(n){e||(Xt(o),Xt(u),Xt(c),e=!0)},o:function(n){Qt(o),Qt(u),Qt(c),e=!1},d:function(n){n&&Zn(t),o&&o.d(),u&&u.d(),c&&c.d()}}}function Bk(n){var t,r,i,e,o=n[11]&&qk(n),u=n[9]&&Yk(n),c=n[10]&&Xk(n);return{c:function(){t=tt("div"),o&&o.c(),r=et(),u&&u.c(),i=et(),c&&c.c(),at(t,"class","chat-search-panel__tab-content")},m:function(n,f){Kn(n,t,f),o&&o.m(t,null),Yn(t,r),u&&u.m(t,null),Yn(t,i),c&&c.m(t,null),e=!0},p:function(n,e){var f=this;n[11]?o?(o.p(n,e),2048&e[0]&&Xt(o,1)):((o=qk(n)).c(),Xt(o,1),o.m(t,r)):o&&(Yt(),Qt(o,1,1,function(){Ek(this,f),o=null}.bind(this)),Vt()),n[9]?u?(u.p(n,e),512&e[0]&&Xt(u,1)):((u=Yk(n)).c(),Xt(u,1),u.m(t,i)):u&&(Yt(),Qt(u,1,1,function(){Ek(this,f),u=null}.bind(this)),Vt()),n[10]?c?(c.p(n,e),1024&e[0]&&Xt(c,1)):((c=Xk(n)).c(),Xt(c,1),c.m(t,null)):c&&(Yt(),Qt(c,1,1,function(){Ek(this,f),c=null}.bind(this)),Vt())},i:function(n){e||(Xt(o),Xt(u),Xt(c),e=!0)},o:function(n){Qt(o),Qt(u),Qt(c),e=!1},d:function(n){n&&Zn(t),o&&o.d(),u&&u.d(),c&&c.d()}}}function Lk(n){for(var t,r,e,o,u=this,c=[],f=new Map,a=n[7],s=function(n){return Ek(this,u),n[30].chatId}.bind(this),l=0;l<a.length;l+=1){var h=Ak(n,a,l),v=s(h);f.set(v,c[l]=$k(v,h))}return{c:function(){t=tt("div"),(r=tt("div")).textContent="".concat(i("subscribed"),":"),e=et();for(var n=0;n<c.length;n+=1)c[n].c();at(r,"class","chat-search-panel__title"),at(t,"class","chat-search-panel__subscribed")},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,r){131200&r[0]&&(a=n[7],Yt(),c=nr(c,r,s,1,n,a,f,t,Zt,$k,null,Ak),Vt())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)Xt(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Qt(c[t]);o=!1},d:function(n){n&&Zn(t);for(var r=0;r<c.length;r+=1)c[r].d()}}}function $k(n,t){var r,i,e;return(i=new ik({props:{chat:t[30]}})).$on("click",t[17]),{key:n,first:null,c:function(){r=ot(),rr(i.$$.fragment),this.first=r},m:function(n,t){Kn(n,r,t),ir(i,n,t),e=!0},p:function(n,r){t=n;var e={};128&r[0]&&(e.chat=t[30]),i.$set(e)},i:function(n){e||(Xt(i.$$.fragment,n),e=!0)},o:function(n){Qt(i.$$.fragment,n),e=!1},d:function(n){n&&Zn(r),er(i,n)}}}function zk(n){for(var t,r,e,o,u=this,c=[],f=new Map,a=n[4],s=function(n){return Ek(this,u),n[30].chatId}.bind(this),l=0;l<a.length;l+=1){var h=kk(n,a,l),v=s(h);f.set(v,c[l]=Wk(v,h))}return{c:function(){t=tt("div"),(r=tt("div")).textContent="".concat(i("channels"),":"),e=et();for(var n=0;n<c.length;n+=1)c[n].c();at(r,"class","chat-search-panel__title"),at(t,"class","chat-search-panel__channels")},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,r){131088&r[0]&&(a=n[4],Yt(),c=nr(c,r,s,1,n,a,f,t,Zt,Wk,null,kk),Vt())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)Xt(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Qt(c[t]);o=!1},d:function(n){n&&Zn(t);for(var r=0;r<c.length;r+=1)c[r].d()}}}function Wk(n,t){var r,i,e;return(i=new ik({props:{chat:t[30]}})).$on("click",t[17]),{key:n,first:null,c:function(){r=ot(),rr(i.$$.fragment),this.first=r},m:function(n,t){Kn(n,r,t),ir(i,n,t),e=!0},p:function(n,r){t=n;var e={};16&r[0]&&(e.chat=t[30]),i.$set(e)},i:function(n){e||(Xt(i.$$.fragment,n),e=!0)},o:function(n){Qt(i.$$.fragment,n),e=!1},d:function(n){n&&Zn(r),er(i,n)}}}function Fk(n){for(var t,r,e,o,u=this,c=[],f=new Map,a=n[5],s=function(n){return Ek(this,u),n[30].chatId}.bind(this),l=0;l<a.length;l+=1){var h=Tk(n,a,l),v=s(h);f.set(v,c[l]=Gk(v,h))}return{c:function(){t=tt("div"),(r=tt("div")).textContent="".concat(i("groupChats"),":"),e=et();for(var n=0;n<c.length;n+=1)c[n].c();at(r,"class","chat-search-panel__title"),at(t,"class","chat-search-panel__group")},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,r){131104&r[0]&&(a=n[5],Yt(),c=nr(c,r,s,1,n,a,f,t,Zt,Gk,null,Tk),Vt())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)Xt(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Qt(c[t]);o=!1},d:function(n){n&&Zn(t);for(var r=0;r<c.length;r+=1)c[r].d()}}}function Gk(n,t){var r,i,e;return(i=new ik({props:{chat:t[30]}})).$on("click",t[17]),{key:n,first:null,c:function(){r=ot(),rr(i.$$.fragment),this.first=r},m:function(n,t){Kn(n,r,t),ir(i,n,t),e=!0},p:function(n,r){t=n;var e={};32&r[0]&&(e.chat=t[30]),i.$set(e)},i:function(n){e||(Xt(i.$$.fragment,n),e=!0)},o:function(n){Qt(i.$$.fragment,n),e=!1},d:function(n){n&&Zn(r),er(i,n)}}}function qk(n){for(var t,r,e,o,u=this,c=[],f=new Map,a=n[6],s=function(n){return Ek(this,u),n[30].chatId}.bind(this),l=0;l<a.length;l+=1){var h=xk(n,a,l),v=s(h);f.set(v,c[l]=Hk(v,h))}return{c:function(){t=tt("div"),(r=tt("div")).textContent="".concat(i("privateChats"),":"),e=et();for(var n=0;n<c.length;n+=1)c[n].c();at(r,"class","chat-search-panel__title"),at(t,"class","chat-search-panel__private")},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,r){131136&r[0]&&(a=n[6],Yt(),c=nr(c,r,s,1,n,a,f,t,Zt,Hk,null,xk),Vt())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)Xt(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Qt(c[t]);o=!1},d:function(n){n&&Zn(t);for(var r=0;r<c.length;r+=1)c[r].d()}}}function Hk(n,t){var r,i,e;return(i=new ik({props:{chat:t[30]}})).$on("click",t[17]),{key:n,first:null,c:function(){r=ot(),rr(i.$$.fragment),this.first=r},m:function(n,t){Kn(n,r,t),ir(i,n,t),e=!0},p:function(n,r){t=n;var e={};64&r[0]&&(e.chat=t[30]),i.$set(e)},i:function(n){e||(Xt(i.$$.fragment,n),e=!0)},o:function(n){Qt(i.$$.fragment,n),e=!1},d:function(n){n&&Zn(r),er(i,n)}}}function Yk(n){for(var t,r,e,o,u=this,c=[],f=new Map,a=n[2],s=function(n){return Ek(this,u),n[25].userId}.bind(this),l=0;l<a.length;l+=1){var h=Ck(n,a,l),v=s(h);f.set(v,c[l]=Vk(v,h))}return{c:function(){t=tt("div"),(r=tt("div")).textContent="".concat(i("friends"),":"),e=et();for(var n=0;n<c.length;n+=1)c[n].c();at(r,"class","chat-search-panel__title"),at(t,"class","chat-search-panel__friends")},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,r){131076&r[0]&&(a=n[2],Yt(),c=nr(c,r,s,1,n,a,f,t,Zt,Vk,null,Ck),Vt())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)Xt(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Qt(c[t]);o=!1},d:function(n){n&&Zn(t);for(var r=0;r<c.length;r+=1)c[r].d()}}}function Vk(n,t){var r,i,e;return(i=new pk({props:{user:t[25]}})).$on("click",t[17]),{key:n,first:null,c:function(){r=ot(),rr(i.$$.fragment),this.first=r},m:function(n,t){Kn(n,r,t),ir(i,n,t),e=!0},p:function(n,r){t=n;var e={};4&r[0]&&(e.user=t[25]),i.$set(e)},i:function(n){e||(Xt(i.$$.fragment,n),e=!0)},o:function(n){Qt(i.$$.fragment,n),e=!1},d:function(n){n&&Zn(r),er(i,n)}}}function Xk(n){for(var t,r,e,o,u=this,c=[],f=new Map,a=n[3],s=function(n){return Ek(this,u),n[25].userId}.bind(this),l=0;l<a.length;l+=1){var h=Rk(n,a,l),v=s(h);f.set(v,c[l]=Qk(v,h))}return{c:function(){t=tt("div"),(r=tt("div")).textContent="".concat(i("mql5Members"),":"),e=et();for(var n=0;n<c.length;n+=1)c[n].c();at(r,"class","chat-search-panel__title"),at(t,"class","chat-search-panel__users")},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,r){131080&r[0]&&(a=n[3],Yt(),c=nr(c,r,s,1,n,a,f,t,Zt,Qk,null,Rk),Vt())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)Xt(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Qt(c[t]);o=!1},d:function(n){n&&Zn(t);for(var r=0;r<c.length;r+=1)c[r].d()}}}function Qk(n,t){var r,i,e;return(i=new pk({props:{user:t[25]}})).$on("click",t[17]),{key:n,first:null,c:function(){r=ot(),rr(i.$$.fragment),this.first=r},m:function(n,t){Kn(n,r,t),ir(i,n,t),e=!0},p:function(n,r){t=n;var e={};8&r[0]&&(e.user=t[25]),i.$set(e)},i:function(n){e||(Xt(i.$$.fragment,n),e=!0)},o:function(n){Qt(i.$$.fragment,n),e=!1},d:function(n){n&&Zn(r),er(i,n)}}}function Jk(n){var t,r,e,o,u,c,f,a,s,l,h,v,d=n[1]&&Ik(n);return{c:function(){t=tt("div"),r=tt("div"),e=tt("input"),o=tt("i"),u=et(),c=tt("div"),f=tt("i"),a=tt("i"),s=et(),d&&d.c(),at(e,"class","input"),ht(e,"text"),at(e,"placeholder",i("searchUserPlaceholder")),at(o,"class","icons-chat icons-chat_search"),at(f,"class","icons-chat icons-chat_close"),at(a,"class","icons-chat icons-chat_close-active"),at(c,"title",i("close")),at(c,"class","chat-search-panel__close"),at(r,"class","chat-search-panel ui"),at(t,"class","chat-search-panel__container")},m:function(i,b){Kn(i,t,b),Yn(t,r),Yn(r,e),n[19](e),lt(e,n[1]),Yn(r,o),Yn(r,u),Yn(r,c),Yn(c,f),Yn(c,a),Yn(t,s),d&&d.m(t,null),l=!0,h||(v=[ut(e,"input",n[20]),ut(e,"blur",n[21]),ut(c,"keyup",Kk),ut(c,"click",n[17])],h=!0)},p:function(n,r){var i=this;2&r[0]&&e.value!==n[1]&&lt(e,n[1]),n[1]?d?(d.p(n,r),2&r[0]&&Xt(d,1)):((d=Ik(n)).c(),Xt(d,1),d.m(t,null)):d&&(Yt(),Qt(d,1,1,function(){Ek(this,i),d=null}.bind(this)),Vt())},i:function(n){l||(Xt(d),l=!0)},o:function(n){Qt(d),l=!1},d:function(r){r&&Zn(t),n[19](null),d&&d.d(),h=!1,Tn(v)}}}var Kk=function(){Ek(this,wk)}.bind(undefined),Zk=function(){Ek(this,wk)}.bind(undefined),nA=function(){Ek(this,wk)}.bind(undefined);function tA(n,r,i){var e,o,u=this;Mn(n,Ar,function(n){return Ek(this,u),i(18,e=n)}.bind(this));var c="",f=[],a=[],s=[],l=[],v=[],d=[],b="users",y=!1,p=!1,m=!1,w=!1,g=!1,_=!1,S=!1,j=!1,O=ho(function(n){var r=this;Ek(this,u),Oe(n,20).then(function(n){Ek(this,r),i(3,a=n)}.bind(this))["catch"](function(n){Ek(this,r),i(3,a=[]),h.error(t.T,n)}.bind(this)),Li(n,20).then(function(n){Ek(this,r),i(4,s=n.chats?n.chats:[])}.bind(this))["catch"](function(n){Ek(this,r),i(4,s=[]),h.error(t.T,n)}.bind(this)),Li(n,20,N.Kt).then(function(n){Ek(this,r),i(5,l=n.chats?n.chats:[])}.bind(this))["catch"](function(n){Ek(this,r),i(5,l=[]),h.error(t.T,n)}.bind(this)),function(n,t){var r=this;return new Promise(function(i){var e=this;Ml(this,r),n=n.toLowerCase();var o,u=[],c=Bl(),f=In(c);if(f.length)u=Ll(n,t,f),i(u);else var a=c.subscribe(function(r){var c=this;Ml(this,e),clearTimeout(o),r.length>0?(u=Ll(n,t,r),i(u),a&&a()):o=setTimeout(function(){Ml(this,c),i(u),a&&a()}.bind(this),5e3)}.bind(this))}.bind(this))}(n,20).then(function(n){Ek(this,r),i(2,f=n)}.bind(this))}.bind(this),300);function E(){Ln(Ar,e.search=!1,e)}var T=function(){Ek(this,u),c||E()}.bind(this),k=function(){Ek(this,u),i(8,b="users")}.bind(this),A=function(){Ek(this,u),i(8,b="chats")}.bind(this);return n.$$.update=function(){Ek(this,u),2&n.$$.dirty[0]&&(c.length>2?O(c):(i(2,f=[]),i(3,a=[]),i(4,s=[]),i(5,l=[]),i(6,v=[]),i(7,d=[]))),65276&n.$$.dirty[0]&&(i(9,y=!!f.length),i(10,p=!!a.length),i(11,m=!!v.length),i(12,w=!!s.length),i(13,g=!!l.length),i(14,_=!!d.length),i(15,S=w||g||_),i(16,j=!(y||p||m||S))),36608&n.$$.dirty[0]&&(y||p||m||"users"!==b?S||"chats"!==b||i(8,b="users"):i(8,b="chats")),262145&n.$$.dirty[0]&&e.search&&o&&o.focus()}.bind(this),[o,c,f,a,s,l,v,d,b,y,p,m,w,g,_,S,j,E,e,function(n){var t=this;Rt[n?"unshift":"push"](function(){Ek(this,t),i(0,o=n)}.bind(this))},function(){c=this.value,i(1,c)},T,k,A]}var rA=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&_k(n,t)}(o,n);var t,r,i,e=Sk(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(jk(t=e.call(this)),n,tA,Jk,An,{},null,[-1,-1]),t}return t=o,r&&gk(t.prototype,r),i&&gk(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),iA=rA;function eA(n){return eA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},eA(n)}var oA=undefined;function uA(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==eA(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==eA(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===eA(o)?o:String(o)),i)}var e,o}function cA(n,t){return cA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},cA(n,t)}function fA(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=sA(n);if(t){var e=sA(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===eA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return aA(n)}(this,r)}}function aA(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function sA(n){return sA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sA(n)}function lA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function hA(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return vA(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vA(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vA(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function dA(n,t,r){var i=n.slice();return i[7]=t[r],i}function bA(n){var t,r,e,o,u,c,f,a,s=i(n[7].key)+"";function l(){return n[3](n[7])}return{c:function(){t=tt("div"),r=tt("i"),e=et(),o=it(s),u=et(),at(r,"class","icons-chat icons-chat_"+n[7].icon),at(t,"class",c="chat-tabs__item"+(n[0].type===n[7].type?" chat-tabs__item_active":""))},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(t,e),Yn(t,o),Yn(t,u),f||(a=[ut(t,"keyup",pA),ut(t,"click",l)],f=!0)},p:function(r,i){n=r,1&i&&c!==(c="chat-tabs__item"+(n[0].type===n[7].type?" chat-tabs__item_active":""))&&at(t,"class",c)},d:function(n){n&&Zn(t),f=!1,Tn(a)}}}function yA(n){for(var t,r,i,e,o,u,c=n[1],f=[],a=0;a<c.length;a+=1)f[a]=bA(dA(n,c,a));return(o=new by({props:{chat:n[0]}})).$on("close",n[4]),o.$on("submit",n[5]),{c:function(){t=tt("div"),r=tt("div");for(var n=0;n<f.length;n+=1)f[n].c();i=et(),e=tt("div"),rr(o.$$.fragment),at(r,"class","chat-tabs__list"),at(e,"class","chat-tabs__content"),at(t,"class","chat-tabs chat-tabs_create")},m:function(n,c){Kn(n,t,c),Yn(t,r);for(var a=0;a<f.length;a+=1)f[a].m(r,null);Yn(t,i),Yn(t,e),ir(o,e,null),u=!0},p:function(n,t){var i=hA(t,1)[0];if(7&i){var e;for(c=n[1],e=0;e<c.length;e+=1){var u=dA(n,c,e);f[e]?f[e].p(u,i):(f[e]=bA(u),f[e].c(),f[e].m(r,null))}for(;e<f.length;e+=1)f[e].d(1);f.length=c.length}var a={};1&i&&(a.chat=n[0]),o.$set(a)},i:function(n){u||(Xt(o.$$.fragment,n),u=!0)},o:function(n){Qt(o.$$.fragment,n),u=!1},d:function(n){n&&Zn(t),nt(f,n),er(o)}}}var pA=function(){lA(this,oA)}.bind(undefined);function mA(n,t,r){var i=this,e=t.chat,o=Object.assign({},e);o.type=e.type===O.tt?O.rt:O.tt;var u=[{type:O.tt,key:"createGroup",icon:"flat-group-chats"},{type:O.rt,key:"createChannel",icon:"flat-channels"}];function c(n){if(n!==e.type){var t=Object.assign({},e);for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&r(0,e[i]=o[i],e);o=t}}var f=function(n){lA(this,i),c(n.type)}.bind(this);return n.$$set=function(n){lA(this,i),"chat"in n&&r(0,e=n.chat)}.bind(this),[e,u,c,f,function(t){kt.call(this,n,t)},function(t){kt.call(this,n,t)}]}var wA=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&cA(n,t)}(o,n);var t,r,i,e=fA(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(aA(t=e.call(this)),n,mA,yA,An,{chat:0}),t}return t=o,r&&uA(t.prototype,r),i&&uA(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),gA=wA;function _A(n){return _A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_A(n)}function SA(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==_A(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==_A(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===_A(o)?o:String(o)),i)}var e,o}function jA(n,t){return jA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},jA(n,t)}function OA(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=TA(n);if(t){var e=TA(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===_A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return EA(n)}(this,r)}}function EA(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function TA(n){return TA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},TA(n)}function kA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function AA(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return RA(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RA(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RA(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function CA(n){var t,r,i;return(r=new gA({props:{chat:n[0]}})).$on("close",n[1]),r.$on("submit",n[2]),{c:function(){t=tt("div"),rr(r.$$.fragment),at(t,"slot","content")},m:function(n,e){Kn(n,t,e),ir(r,t,null),i=!0},p:function(n,t){var i={};1&t&&(i.chat=n[0]),r.$set(i)},i:function(n){i||(Xt(r.$$.fragment,n),i=!0)},o:function(n){Qt(r.$$.fragment,n),i=!1},d:function(n){n&&Zn(t),er(r)}}}function xA(n){var t,r;return(t=new Os({props:{withTitle:!1,withButtons:!1,$$slots:{content:[CA]},$$scope:{ctx:n}}})).$on("close",n[1]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i=AA(r,1)[0],e={};129&i&&(e.$$scope={dirty:i,ctx:n}),t.$set(e)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function IA(n,r,e){var o,u=this;Mn(n,Ar,function(n){return kA(this,u),e(4,o=n)}.bind(this));var c=Tt(),f=r.selectedType,a=r.chat,s=void 0===a?{type:f,isPublic:0,isLimited:!1,name:"",description:"",links:"",inviteLink:"",language:d[Gr]||d.en,avatar:"",avatarToUpload:undefined,avatarIsPresent:!1,errorInviteLink:undefined,errorName:!1,errorDescription:!1,errorCommon:"",avatarError:undefined}:a,l=function(){kA(this,u),c("close")}.bind(this);function v(n){var t=this;s.type===O.rt?window.fz&&window.fz("event",{name:"MQL5+Chat+Channel+New",unit:"Type",value:s.isPublic?"public":"private"}):s.type===O.tt&&window.fz&&window.fz("event",{name:"MQL5+Chat+Group+New",unit:"Type",value:s.isPublic?"public":"private"}),l(),Yf(n).then(function(){kA(this,t),Ln(Ar,o.addMembers=!0,o)}.bind(this))}return n.$$set=function(n){kA(this,u),"selectedType"in n&&e(3,f=n.selectedType),"chat"in n&&e(0,s=n.chat)}.bind(this),[s,l,function(){var n=this;e(0,s.errorCommon="",s),le(s).then(function(r){var i=this;kA(this,n),s.avatarIsPresent&&s.avatarToUpload?ve(s.avatarToUpload,r).then(function(){kA(this,i),v(r)}.bind(this))["catch"](function(n){kA(this,i),e(0,s.avatarError=n.message,s),h.error(t.T,n,"Upload avatar")}.bind(this)):v(r)}.bind(this))["catch"](function(r){kA(this,n),h.error(t.T,r,"Create chat");var o=r;parseInt(o.name,10)===j.qn?e(0,s.errorInviteLink=i("inviteLinkExists"),s):e(0,s.errorCommon=o.message,s)}.bind(this))},f]}var MA=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&jA(n,t)}(o,n);var t,r,i,e=OA(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(EA(t=e.call(this)),n,IA,xA,An,{selectedType:3,chat:0}),t}return t=o,r&&SA(t.prototype,r),i&&SA(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),PA=MA;function UA(n){return UA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},UA(n)}function NA(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==UA(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==UA(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===UA(o)?o:String(o)),i)}var e,o}function DA(n,t){return DA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},DA(n,t)}function BA(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=$A(n);if(t){var e=$A(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===UA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return LA(n)}(this,r)}}function LA(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function $A(n){return $A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$A(n)}function zA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function WA(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return FA(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FA(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FA(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function GA(n){var t,r;return(t=new PA({props:{selectedType:n[0]}})).$on("close",n[5]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.selectedType=n[0]),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function qA(n){var t,r,e,o,u,c,f,a,s,l,h,v,d,b,y=n[1].create&&GA(n);return{c:function(){t=tt("div"),r=tt("button"),e=tt("i"),o=et(),u=tt("button"),c=tt("i"),f=et(),a=tt("button"),s=tt("i"),l=et(),y&&y.c(),h=ot(),at(e,"class","icons-chat icons-chat_search"),at(r,"class","chat-tools-panel__button"),at(r,"title",i("search")),at(c,"class","icons-chat icons-chat_add-group-chat"),at(u,"class","chat-tools-panel__button"),at(u,"title",i("createGroup")),at(s,"class","icons-chat icons-chat_add-channel"),at(a,"class","chat-tools-panel__button"),at(a,"title",i("createChannel")),at(t,"class","chat-tools-panel")},m:function(i,p){Kn(i,t,p),Yn(t,r),Yn(r,e),Yn(t,o),Yn(t,u),Yn(u,c),Yn(t,f),Yn(t,a),Yn(a,s),Kn(i,l,p),y&&y.m(i,p),Kn(i,h,p),v=!0,d||(b=[ut(r,"click",ct(n[2])),ut(u,"click",ct(n[3])),ut(a,"click",ct(n[4]))],d=!0)},p:function(n,t){var r=this,i=WA(t,1)[0];n[1].create?y?(y.p(n,i),2&i&&Xt(y,1)):((y=GA(n)).c(),Xt(y,1),y.m(h.parentNode,h)):y&&(Yt(),Qt(y,1,1,function(){zA(this,r),y=null}.bind(this)),Vt())},i:function(n){v||(Xt(y),v=!0)},o:function(n){Qt(y),v=!1},d:function(n){n&&Zn(t),n&&Zn(l),y&&y.d(n),n&&Zn(h),d=!1,Tn(b)}}}function HA(n,t,r){var i,e=this;Mn(n,Ar,function(n){return zA(this,e),r(1,i=n)}.bind(this));var o=O.tt,u=function(){zA(this,e),Ln(Ar,i.search=!0,i)}.bind(this),c=function(){zA(this,e),r(0,o=O.tt),Ln(Ar,i.create=!0,i)}.bind(this),f=function(){zA(this,e),r(0,o=O.rt),Ln(Ar,i.create=!0,i)}.bind(this),a=function(){zA(this,e),Ln(Ar,i.create=!1,i)}.bind(this);return[o,i,u,c,f,a]}var YA=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&DA(n,t)}(o,n);var t,r,i,e=BA(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(LA(t=e.call(this)),n,HA,qA,An,{}),t}return t=o,r&&NA(t.prototype,r),i&&NA(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),VA=YA;function XA(n){return XA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},XA(n)}function QA(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==XA(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==XA(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===XA(o)?o:String(o)),i)}var e,o}function JA(n,t){return JA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},JA(n,t)}function KA(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=nR(n);if(t){var e=nR(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===XA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ZA(n)}(this,r)}}function ZA(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function nR(n){return nR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nR(n)}function tR(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function rR(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return iR(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iR(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iR(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function eR(n,t,r){var i=n.slice();return i[4]=t[r],i}function oR(n){for(var t,r=n[0],i=[],e=0;e<r.length;e+=1)i[e]=uR(eR(n,r,e));return{c:function(){t=tt("div");for(var n=0;n<i.length;n+=1)i[n].c();at(t,"class","chat-choice-type")},m:function(n,r){Kn(n,t,r);for(var e=0;e<i.length;e+=1)i[e].m(t,null)},p:function(n,e){if(7&e){var o;for(r=n[0],o=0;o<r.length;o+=1){var u=eR(n,r,o);i[o]?i[o].p(u,e):(i[o]=uR(u),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d:function(n){n&&Zn(t),nt(i,n)}}}function uR(n){var t,r,i,e,o,u,c;function f(){return n[3](n[4])}return{c:function(){t=tt("button"),at(r=tt("i"),"class",i="icons-chat icons-chat_"+n[2][n[4]].icon),at(t,"class",e="chat-choice-type__item"+(n[1]===n[4]?" chat-choice-type__item_active":"")),at(t,"title",o=n[2][n[4]].title)},m:function(n,i){Kn(n,t,i),Yn(t,r),u||(c=ut(t,"click",ct(f)),u=!0)},p:function(u,c){n=u,1&c&&i!==(i="icons-chat icons-chat_"+n[2][n[4]].icon)&&at(r,"class",i),3&c&&e!==(e="chat-choice-type__item"+(n[1]===n[4]?" chat-choice-type__item_active":""))&&at(t,"class",e),1&c&&o!==(o=n[2][n[4]].title)&&at(t,"title",o)},d:function(n){n&&Zn(t),u=!1,c()}}}function cR(n){var t,r=n[0].length&&oR(n);return{c:function(){r&&r.c(),t=ot()},m:function(n,i){r&&r.m(n,i),Kn(n,t,i)},p:function(n,i){var e=rR(i,1)[0];n[0].length?r?r.p(n,e):((r=oR(n)).c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:_n,o:_n,d:function(n){r&&r.d(n),n&&Zn(t)}}}function fR(n,t,r){var e,o,u=this;Mn(n,No,function(n){return tR(this,u),r(0,e=n)}.bind(this)),Mn(n,Do,function(n){return tR(this,u),r(1,o=n)}.bind(this));var c=[{icon:"flat-chats",title:i("allChats")},{icon:"flat-personal-chats",title:i("privateChats")},{icon:"flat-group-chats",title:i("groupChats")},{icon:"flat-channels",title:i("channels")}],f=function(n){tR(this,u),Ln(Do,o=n,o)}.bind(this);return[e,o,c,f]}var aR=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&JA(n,t)}(o,n);var t,r,i,e=KA(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(ZA(t=e.call(this)),n,fR,cR,An,{}),t}return t=o,r&&QA(t.prototype,r),i&&QA(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),sR=aR,lR=lr("new");function hR(n){return hR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hR(n)}function vR(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function dR(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==hR(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==hR(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===hR(o)?o:String(o)),i)}var e,o}var bR,yR,pR=undefined&&undefined.__classPrivateFieldGet||function(n,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(n):i?i.value:t.get(n)},mR=function(){function n(t,r,i){var e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,o=arguments.length>4&&arguments[4]!==undefined&&arguments[4];!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),bR.add(this),this.debug=!1,this.name=t,this.stores=r,this.logger=i,this.version=e,this.debug=o}var r,i,e;return r=n,i=[{key:"outputDebug",value:function(n,r){this.debug&&this.logger.debug(t.I,"".concat(r,": ").concat(n))}},{key:"addStore",value:function(n){this.stores.push(n)}},{key:"createStore",value:function(n,t){var r=this;if(!t.objectStoreNames.contains(n.name)){var i=t.createObjectStore(n.name,{keyPath:n.keys[0].keyPath,autoIncrement:n.keys[0].autoIncrement});n.keys.forEach(function(n){vR(this,r),i.createIndex(n.keyPath,[n.keyPath],{unique:!1})}.bind(this))}}},{key:"deleteDatabase",value:function(){var n=this;return new Promise(function(r,i){var e=this;vR(this,n);var o=indexedDB.deleteDatabase(this.name);o.onerror=function(n){vR(this,e),this.logger.error(t.I,n),i(n)}.bind(this),o.onsuccess=function(){vR(this,e),r()}.bind(this),o.onblocked=function(){i(new Error("Couldn't delete database due to the operation being blocked"))}}.bind(this))}},{key:"connect",value:function(){var n=this;return new Promise(function(r,i){var e=this;vR(this,n);var u=indexedDB.open(this.name,this.version);u.onerror=function(n){vR(this,e);var r=o(n);this.logger.error(t.I,r),i(n)}.bind(this),u.onsuccess=function(){var n=this;vR(this,e);var t=u.result,o=!0;if(this.stores.forEach(function(r){vR(this,n),t.objectStoreNames.contains(r.name)||(o=!1)}.bind(this)),!o)return t.close(),void this.deleteDatabase().then(function(){vR(this,n),this.connect().then(r)["catch"](i)}.bind(this));r(t)}.bind(this),u.onupgradeneeded=function(){var n=this;vR(this,e);var r=u.result;this.stores.forEach(function(i){vR(this,n);try{r.objectStoreNames.contains(i.name)&&r.deleteObjectStore(i.name)}catch(e){this.logger.error(t.I,e)}this.createStore(i,r)}.bind(this))}.bind(this)}.bind(this))}},{key:"add",value:function(n,t){var r=this;return this.outputDebug("add",n),new Promise(function(i,e){var o=this;if(vR(this,r),Array.isArray(t)){var u=0,c=function(){var r=this;vR(this,o),pR(this,bR,"m",yR).call(this,n,t.slice(u,u+100)).then(function(){vR(this,r),u+=100,t.length>u?c():i()}.bind(this))["catch"](e)}.bind(this);c()}else pR(this,bR,"m",yR).call(this,n,t).then(i)["catch"](e)}.bind(this))}},{key:"getAll",value:function(n,t){var r=this;return this.outputDebug("getAll",n),new Promise(function(i,e){var o=this;vR(this,r),this.connect().then(function(r){var e=this;vR(this,o);var u=r.transaction(n,"readonly").objectStore(n);if(t&&u.indexNames.contains(t)&&(u=u.index(t)),"undefined"!=typeof IDBObjectStore.prototype.getAll){var c=u.getAll();c.onsuccess=function(){vR(this,e),r.close(),i(c.result)}.bind(this)}else{var f=[],a=u.openCursor();a.onsuccess=function(){vR(this,e);var n=a.result;n?(f.push(n.value),n["continue"]()):i(f)}.bind(this)}}.bind(this))["catch"](e)}.bind(this))}},{key:"clear",value:function(n){var r=this;return this.outputDebug("clear",n),new Promise(function(i,e){var o=this;vR(this,r),this.connect().then(function(r){var u=this;vR(this,o);var c=r.transaction(n,"readwrite").objectStore(n).clear();c.onsuccess=function(){vR(this,u),r.close(),i()}.bind(this),c.onerror=function(n){vR(this,u),r.close(),this.logger.error(t.I,n),e(n)}.bind(this)}.bind(this))["catch"](e)}.bind(this))}}],i&&dR(r.prototype,i),e&&dR(r,e),Object.defineProperty(r,"prototype",{writable:!1}),n}();bR=new WeakSet,yR=function(n,r){var i=this;return this.outputDebug("put",n),new Promise(function(e,o){var u=this;vR(this,i),this.connect().then(function(i){var c=this;vR(this,u);var f,a=i.transaction(n,"readwrite").objectStore(n);if(Array.isArray(r)?r.forEach(function(n){vR(this,c),f=a.put(n)}.bind(this)):f=a.put(r),!f)return i.close(),void e();f.onsuccess=function(){vR(this,c),i.close(),e()}.bind(this),f.onerror=function(n){vR(this,c),i.close(),this.logger.error(t.I,n),o(n)}.bind(this)}.bind(this))["catch"](o)}.bind(this))};var wR,gR=4,_R=[];function SR(){var n=this;return new Promise(function(t){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,n),wR=new mR("chats",_R,h,gR,Xr),t()}.bind(this))}function jR(n){_R.push(n)}function OR(){return wR}function ER(n){var t=this;return n.forEach(function(n){var r;!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,t);var i=n.topMessage;i&&i.recType===E.ot&&i.recType===E.ot&&(null===(r=null==i?void 0:i.preview)||void 0===r?void 0:r.blob)&&(i.preview.src=URL.createObjectURL(i.preview.blob))}.bind(this)),n}function TR(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var kR=6e4;function AR(n,r){var i=this;return new Promise(function(e){var o=this;TR(this,i),n.getAll(r).then(function(n){if(TR(this,o),n&&n.length){var t=Ff();(new Date).getTime()-n[0].timestamp>kR||n[0].language!==t?e([]):e(ER(n))}else e([])}.bind(this))["catch"](function(n){TR(this,o),h.error(t.O,n,"Get all"),e([])}.bind(this))}.bind(this))}var RR=undefined;function CR(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var xR=200,IR=32,MR={name:"chats_new",keys:[{keyPath:"id",autoIncrement:!0}]};jR(MR);var PR=lr([]),UR=lr([]),NR=!1,DR=!1;function BR(n,t){for(var r=undefined,i=0,e=t.length;i<e;i++){var o=t[i];if(o.topMessage&&o.topMessage.messageId===n){r=o;break}}return r}function LR(){var n=this,r=OR();r!==undefined&&AR(r,MR.name).then(function(i){var e=this;CR(this,n),DR=!0,i&&i.length?PR.set(i):(UR.subscribe(ho(function(n){var i=this;CR(this,e),n.length||lR.set("popular"),null==r||r.clear(MR.name).then(function(){CR(this,i),null==r||r.add(MR.name,n)}.bind(this))["catch"](function(n){CR(this,i),h.error(t.O,n,"Clear")}.bind(this))}.bind(this),1e3)),function(){var n=this,r=Ff()||v.Dt;Te(U.Jt,r,N.Kt,xR).then(function(i){var e=this;CR(this,n),xr!==P.hr?i.length||r===v.Dt?PR.set(i):Te(U.Jt,v.Dt,N.Kt,xR).then(function(n){CR(this,e),PR.set(n)}.bind(this))["catch"](function(n){CR(this,e),h.error(t.O,n,"New list")}.bind(this)):PR.set(i)}.bind(this))["catch"](function(r){CR(this,n),h.error(t.O,r,"New list")}.bind(this))}())}.bind(this))}function $R(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}PR.subscribe(function(n){var r,i,e,o,u,c,f=this;if(CR(this,RR),DR){var a=Ff()||v.Dt,s=[],l=0,d=[];if(xr!==P.hr){for(var b=function(){var t=this,r=n[y];if(!r.topMessage)return"continue";if(~d.indexOf(r.topMessage.messageId))return"continue";if(r.topMessage.recType===E.ot){if(r.topMessage.preview&&r.topMessage.preview.type!==D.nr||!r.topMessage.preview)return d.push(r.topMessage.messageId),"continue"}else if(r.topMessage.recType===E.et){var i=100;switch(r.language){case v.$t:case v.Wt:case v.Yt:i=30}if(r.topMessage.text&&r.topMessage.text.length<i&&!(null===(o=null===(e=r.topMessage.tags)||void 0===e?void 0:e.files)||void 0===o?void 0:o.linkedIds))return d.push(r.topMessage.messageId),"continue";r.topMessage.recType===E.et&&(null===(c=null===(u=r.topMessage.tags)||void 0===u?void 0:u.files)||void 0===c?void 0:c.linkedIds)&&r.topMessage.tags.files.linkedIds.forEach(function(i){CR(this,t);var e=BR(i,n);if(e&&e.topMessage&&r.topMessage){d.push(e.topMessage.messageId);var o=e.topMessage;if(o.recType===E.ot){var u=o;if(u)0===u.mime.toLowerCase().indexOf("image")&&r.topMessage.recType===E.et&&(r.topMessage.parsedTags||(r.topMessage.parsedTags={}),r.topMessage.parsedTags.media||(r.topMessage.parsedTags.media=[]),r.topMessage.parsedTags.media.push(u))}}}.bind(this))}return s.push(r),l++,d.push(r.topMessage.messageId),l>=IR?"break":void 0},y=0,p=n.length;y<p;y++){var m=b();if("continue"!==m&&"break"===m)break}s.length<IR&&!NR&&a!==v.Dt&&(NR=!0,Te(U.Jt,v.Dt,N.Kt,xR).then(function(n){var t=this;CR(this,f),PR.update(function(r){return CR(this,t),r.concat(n)}.bind(this))}.bind(this))["catch"](function(n){CR(this,f),h.error(t.O,n,"New list")}.bind(this))),UR.set(s)}else{for(var w=function(){var t=this,e=n[g];return e.topMessage?~d.indexOf(e.topMessage.messageId)?"continue":(e.topMessage.recType===E.et&&(null===(i=null===(r=e.topMessage.tags)||void 0===r?void 0:r.files)||void 0===i?void 0:i.linkedIds)&&e.topMessage.tags.files.linkedIds.forEach(function(r){CR(this,t);var i=BR(r,n);if(i&&i.topMessage&&e.topMessage){d.push(i.topMessage.messageId);var o=i.topMessage;if(o.recType===E.ot){var u=o;if(u)0===u.mime.toLowerCase().indexOf("image")&&e.topMessage.recType===E.et&&(e.topMessage.parsedTags||(e.topMessage.parsedTags={}),e.topMessage.parsedTags.media||(e.topMessage.parsedTags.media=[]),e.topMessage.parsedTags.media.push(u))}}}.bind(this)),s.push(e),l++,d.push(e.topMessage.messageId),l>=IR?"break":void 0):"continue"},g=0,_=n.length;g<_;g++){var S=w();if("continue"!==S&&"break"===S)break}UR.set(s)}}}.bind(undefined));var zR=32,WR=lr([]),FR={name:"chats_popular",keys:[{keyPath:"id",autoIncrement:!0}]};function GR(){var n=this,r=OR();r!==undefined&&AR(r,FR.name).then(function(i){var e=this;$R(this,n),i&&i.length?WR.set(i):(WR.subscribe(ho(function(n){var i=this;$R(this,e),null==r||r.clear(FR.name).then(function(){$R(this,i),null==r||r.add(FR.name,n)}.bind(this))["catch"](function(n){$R(this,i),h.error(t.O,n,"Clear")}.bind(this))}.bind(this),1e3)),function(){var n=this,r=Ff()||v.Dt;Te(U.Qt,r,N.Zt,zR).then(function(i){var e=this;$R(this,n),xr!==P.hr?i.length||r===v.Dt?(i.length<zR&&r!==v.Dt&&Te(U.Qt,v.Dt,N.Zt,zR).then(function(n){var t=this;$R(this,e),WR.update(function(r){return $R(this,t),r.concat(n)}.bind(this))}.bind(this))["catch"](function(n){$R(this,e),h.error(t.O,n,"Popular list")}.bind(this)),WR.set(i)):Te(U.Qt,v.Dt,N.Zt,zR).then(function(n){$R(this,e),WR.set(n)}.bind(this))["catch"](function(n){$R(this,e),h.error(t.O,n,"Popular list")}.bind(this)):WR.set(i)}.bind(this))["catch"](function(r){$R(this,n),h.error(t.O,r,"Popular list")}.bind(this))}())}.bind(this))}function qR(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}jR(FR);var HR=32,YR={name:"chats_test",keys:[{keyPath:"id",autoIncrement:!0}]};jR(YR);var VR=lr([]);function XR(){var n=this,r=OR();r!==undefined&&AR(r,YR.name).then(function(i){var e=this;qR(this,n),i&&i.length?VR.set(i):(VR.subscribe(ho(function(n){var i=this;qR(this,e),null==r||r.clear(YR.name).then(function(){qR(this,i),null==r||r.add(YR.name,n)}.bind(this))["catch"](function(n){qR(this,i),h.error(t.O,n,"Clear")}.bind(this))}.bind(this),1e3)),function(){var n=this,r=Ff()||v.Dt;Te(U.Xt,r,N.Zt,HR).then(function(i){var e=this;qR(this,n),xr!==P.hr?i.length||r===v.Dt?(i.length<HR&&r!==v.Dt&&Te(U.Xt,v.Dt,N.Zt,HR).then(function(n){var t=this;qR(this,e),VR.update(function(r){return qR(this,t),r.concat(n)}.bind(this))}.bind(this))["catch"](function(n){qR(this,e),h.error(t.O,n,"Test list")}.bind(this)),VR.set(i)):Te(U.Xt,v.Dt,N.Zt,HR).then(function(n){qR(this,e),VR.set(n)}.bind(this))["catch"](function(n){qR(this,e),h.error(t.O,n,"Test list")}.bind(this)):VR.set(i)}.bind(this))["catch"](function(r){qR(this,n),h.error(t.O,r,"Test list")}.bind(this))}())}.bind(this))}function QR(n){return QR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},QR(n)}function JR(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==QR(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==QR(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===QR(o)?o:String(o)),i)}var e,o}function KR(n,t){return KR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},KR(n,t)}function ZR(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=tC(n);if(t){var e=tC(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===QR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nC(n)}(this,r)}}function nC(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function tC(n){return tC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tC(n)}function rC(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function iC(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return eC(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eC(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eC(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function oC(n){var t,r,e,o=ul(n[0].countMembers)+"";return{c:function(){t=tt("div"),r=tt("i"),e=it(o),at(r,"class","icons-chat icons-chat_members"),at(t,"class","chat-block__members"),at(t,"title",i("members"))},m:function(n,i){Kn(n,t,i),Yn(t,r),Yn(t,e)},p:function(n,t){1&t&&o!==(o=ul(n[0].countMembers)+"")&&st(e,o)},d:function(n){n&&Zn(t)}}}function uC(n){var t,r,i=n[0].description+"";return{c:function(){t=tt("div"),r=it(i),at(t,"class","chat-block__desc")},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,t){1&t&&i!==(i=n[0].description+"")&&st(r,i)},d:function(n){n&&Zn(t)}}}function cC(n){var t,r,i,e,o,u,c,f,a,s,l,h,v,d=n[0].name+"";i=new YS({props:{data:n[0],size:fC}});var b=n[1]&&oC(n),y=n[0].description&&uC(n);return{c:function(){t=tt("div"),r=tt("a"),rr(i.$$.fragment),e=et(),o=tt("div"),u=tt("div"),c=tt("a"),f=it(d),a=et(),b&&b.c(),s=et(),y&&y.c(),at(r,"href",n[2]),at(r,"class","chat-block__avatar"),at(c,"href",n[2]),at(u,"class","chat-block__name"),at(o,"class","chat-block__content"),at(t,"class","chat-block")},m:function(d,p){Kn(d,t,p),Yn(t,r),ir(i,r,null),Yn(t,e),Yn(t,o),Yn(o,u),Yn(u,c),Yn(c,f),Yn(o,a),b&&b.m(o,null),Yn(o,s),y&&y.m(o,null),l=!0,h||(v=[ut(r,"click",ct(n[3])),ut(c,"click",ct(n[3]))],h=!0)},p:function(n,t){var e=iC(t,1)[0],u={};1&e&&(u.data=n[0]),i.$set(u),(!l||4&e)&&at(r,"href",n[2]),(!l||1&e)&&d!==(d=n[0].name+"")&&st(f,d),(!l||4&e)&&at(c,"href",n[2]),n[1]?b?b.p(n,e):((b=oC(n)).c(),b.m(o,s)):b&&(b.d(1),b=null),n[0].description?y?y.p(n,e):((y=uC(n)).c(),y.m(o,null)):y&&(y.d(1),y=null)},i:function(n){l||(Xt(i.$$.fragment,n),l=!0)},o:function(n){Qt(i.$$.fragment,n),l=!1},d:function(n){n&&Zn(t),er(i),b&&b.d(),y&&y.d(),h=!1,Tn(v)}}}var fC=80;function aC(n,t,r){var i,e=this,o=t.chat,u=t.showCountMembers,c=void 0!==u&&u;return n.$$set=function(n){rC(this,e),"chat"in n&&r(0,o=n.chat),"showCountMembers"in n&&r(1,c=n.showCountMembers)}.bind(this),n.$$.update=function(){rC(this,e),1&n.$$.dirty&&r(2,i=Jr(o))}.bind(this),[o,c,i,function(){Yf(o.chatId)}]}var sC=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&KR(n,t)}(o,n);var t,r,i,e=ZR(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(nC(t=e.call(this)),n,aC,cC,An,{chat:0,showCountMembers:1}),t}return t=o,r&&JR(t.prototype,r),i&&JR(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),lC=sC;function hC(n){return hC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hC(n)}var vC=undefined;function dC(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==hC(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==hC(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===hC(o)?o:String(o)),i)}var e,o}function bC(n,t){return bC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},bC(n,t)}function yC(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=mC(n);if(t){var e=mC(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===hC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pC(n)}(this,r)}}function pC(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function mC(n){return mC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mC(n)}function wC(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return gC(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gC(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gC(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function _C(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function SC(n,t,r){var i=n.slice();return i[4]=t[r],i}var jC=function(n){return _C(this,vC),{}}.bind(undefined),OC=function(n){return _C(this,vC),{}}.bind(undefined);function EC(n,t){var r,i,e;return i=new lC({props:{chat:t[4],showCountMembers:t[1]}}),{key:n,first:null,c:function(){r=ot(),rr(i.$$.fragment),this.first=r},m:function(n,t){Kn(n,r,t),ir(i,n,t),e=!0},p:function(n,r){t=n;var e={};1&r&&(e.chat=t[4]),2&r&&(e.showCountMembers=t[1]),i.$set(e)},i:function(n){e||(Xt(i.$$.fragment,n),e=!0)},o:function(n){Qt(i.$$.fragment,n),e=!1},d:function(n){n&&Zn(r),er(i,n)}}}function TC(n){for(var t,r,i,e=this,o=[],u=new Map,c=n[3].title,f=Pn(c,n,n[2],OC),a=n[0],s=function(n){return _C(this,e),n[4].chatId}.bind(this),l=0;l<a.length;l+=1){var h=SC(n,a,l),v=s(h);u.set(v,o[l]=EC(v,h))}return{c:function(){t=tt("div"),f&&f.c(),r=et();for(var n=0;n<o.length;n+=1)o[n].c();at(t,"class","chat-intro__list-box")},m:function(n,e){Kn(n,t,e),f&&f.m(t,null),Yn(t,r);for(var u=0;u<o.length;u+=1)o[u].m(t,null);i=!0},p:function(n,r){var e=wC(r,1)[0];f&&f.p&&(!i||4&e)&&Dn(f,c,n,n[2],i?Nn(c,n[2],e,jC):Bn(n[2]),OC),3&e&&(a=n[0],Yt(),o=nr(o,e,s,1,n,a,u,t,Zt,EC,null,SC),Vt())},i:function(n){if(!i){Xt(f,n);for(var t=0;t<a.length;t+=1)Xt(o[t]);i=!0}},o:function(n){Qt(f,n);for(var t=0;t<o.length;t+=1)Qt(o[t]);i=!1},d:function(n){n&&Zn(t),f&&f.d(n);for(var r=0;r<o.length;r+=1)o[r].d()}}}function kC(n,t,r){var i=this,e=t.$$slots,o=void 0===e?{}:e,u=t.$$scope,c=t.chatList,f=void 0===c?[]:c,a=t.showCountMembers,s=void 0!==a&&a;return n.$$set=function(n){_C(this,i),"chatList"in n&&r(0,f=n.chatList),"showCountMembers"in n&&r(1,s=n.showCountMembers),"$$scope"in n&&r(2,u=n.$$scope)}.bind(this),[f,s,u,o]}var AC=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&bC(n,t)}(o,n);var t,r,i,e=yC(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(pC(t=e.call(this)),n,kC,TC,An,{chatList:0,showCountMembers:1}),t}return t=o,r&&dC(t.prototype,r),i&&dC(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),RC=AC;function CC(n){return CC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},CC(n)}function xC(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==CC(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==CC(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===CC(o)?o:String(o)),i)}var e,o}function IC(n,t){return IC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},IC(n,t)}function MC(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=UC(n);if(t){var e=UC(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===CC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return PC(n)}(this,r)}}function PC(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function UC(n){return UC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},UC(n)}function NC(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function DC(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return BC(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BC(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BC(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function LC(n){var t,r,i,e=li({dateTime:n[0].date,type:"smart"})+"";return{c:function(){t=tt("span"),r=it(e),at(t,"title",i=n[0].dateText)},m:function(n,i){Kn(n,t,i),Yn(t,r)},p:function(n,o){1&o&&e!==(e=li({dateTime:n[0].date,type:"smart"})+"")&&st(r,e),1&o&&i!==(i=n[0].dateText)&&at(t,"title",i)},d:function(n){n&&Zn(t)}}}function $C(n){var t,r,i,e,o=li({dateTime:n[0].topMessage.date,type:"smart"})+"",u=n[0].type===O.tt&&zC(n);return{c:function(){u&&u.c(),t=et(),r=tt("span"),i=it(o),at(r,"title",e=n[0].topMessage.dateText)},m:function(n,e){u&&u.m(n,e),Kn(n,t,e),Kn(n,r,e),Yn(r,i)},p:function(n,c){n[0].type===O.tt?u?u.p(n,c):((u=zC(n)).c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),1&c&&o!==(o=li({dateTime:n[0].topMessage.date,type:"smart"})+"")&&st(i,o),1&c&&e!==(e=n[0].topMessage.dateText)&&at(r,"title",e)},d:function(n){u&&u.d(n),n&&Zn(t),n&&Zn(r)}}}function zC(n){var t,r,i=n[0].topMessage.authorName+"";return{c:function(){t=it(i),r=it(",")},m:function(n,i){Kn(n,t,i),Kn(n,r,i)},p:function(n,r){1&r&&i!==(i=n[0].topMessage.authorName+"")&&st(t,i)},d:function(n){n&&Zn(t),n&&Zn(r)}}}function WC(n){var t,r=n[0].description+"";return{c:function(){t=it(r)},m:function(n,r){Kn(n,t,r)},p:function(n,i){1&i&&r!==(r=n[0].description+"")&&st(t,r)},d:function(n){n&&Zn(t)}}}function FC(n){var t,r;function i(n,r){return 1&r&&(t=null),n[0].topMessage.recType===E.et?qC:(null==t&&(i=n[0].topMessage,t=!(i.recType!==E.ot||!i.preview||i.preview.type!==D.nr)),t?GC:void 0);var i}var e=i(n,-1),o=e&&e(n);return{c:function(){o&&o.c(),r=ot()},m:function(n,t){o&&o.m(n,t),Kn(n,r,t)},p:function(n,t){e===(e=i(n,t))&&o?o.p(n,t):(o&&o.d(1),(o=e&&e(n))&&(o.c(),o.m(r.parentNode,r)))},d:function(n){o&&o.d(n),n&&Zn(r)}}}function GC(n){var t,r,i,e,o;return{c:function(){t=tt("a"),Rn((r=tt("img")).src,i=JC(n[0].topMessage))||at(r,"src",i),at(r,"loading","lazy"),at(r,"alt",""),at(t,"class","chat-top-message__image"),at(t,"href",n[4]),vt(t,"background-image","url('"+QC(n[0].topMessage)+"')")},m:function(i,u){Kn(i,t,u),Yn(t,r),e||(o=ut(t,"click",ct(n[5])),e=!0)},p:function(n,e){1&e&&!Rn(r.src,i=JC(n[0].topMessage))&&at(r,"src",i),16&e&&at(t,"href",n[4]),1&e&&vt(t,"background-image","url('"+QC(n[0].topMessage)+"')")},d:function(n){n&&Zn(t),e=!1,o()}}}function qC(n){var t,r,i=n[3]&&HC(n),e=n[2]&&YC(n);return{c:function(){i&&i.c(),t=et(),e&&e.c(),r=ot()},m:function(n,o){i&&i.m(n,o),Kn(n,t,o),e&&e.m(n,o),Kn(n,r,o)},p:function(n,o){n[3]?i?i.p(n,o):((i=HC(n)).c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),n[2]?e?e.p(n,o):((e=YC(n)).c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},d:function(n){i&&i.d(n),n&&Zn(t),e&&e.d(n),n&&Zn(r)}}}function HC(n){var t,r,i,e,o;return{c:function(){var e;t=tt("a"),Rn((r=tt("img")).src,i=n[3].url)||at(r,"src",i),at(r,"loading","lazy"),at(r,"alt",""),at(t,"class","chat-top-message__image"),at(t,"href",n[4]),vt(t,"background-image","url('"+((null===(e=n[3].preview)||void 0===e?void 0:e.src)||"")+"')")},m:function(i,u){Kn(i,t,u),Yn(t,r),e||(o=ut(t,"click",ct(n[5])),e=!0)},p:function(n,e){var o;(8&e&&!Rn(r.src,i=n[3].url)&&at(r,"src",i),16&e&&at(t,"href",n[4]),8&e)&&vt(t,"background-image","url('"+((null===(o=n[3].preview)||void 0===o?void 0:o.src)||"")+"')")},d:function(n){n&&Zn(t),e=!1,o()}}}function YC(n){var t;return{c:function(){at(t=tt("div"),"class","chat-top-message__text")},m:function(r,i){Kn(r,t,i),t.innerHTML=n[2]},p:function(n,r){4&r&&(t.innerHTML=n[2])},d:function(n){n&&Zn(t)}}}function VC(n){var t,r,i,e,o,u,c,f,a,s,l,h,v,d,b,y,p,m=n[0].name+"";function w(n,t){return n[0].topMessage?$C:LC}o=new YS({props:{data:n[0],size:XC}});var g=w(n),_=g(n);function S(n,t){return n[0].topMessage?FC:WC}var j=S(n),O=j(n);return{c:function(){t=tt("div"),r=tt("div"),i=tt("div"),e=tt("a"),rr(o.$$.fragment),u=et(),c=tt("div"),f=tt("div"),a=tt("a"),s=it(m),l=et(),h=tt("div"),_.c(),v=et(),d=tt("div"),O.c(),at(e,"href",n[4]),at(e,"class","chat-top-message__avatar"),at(a,"href",n[4]),at(f,"class","chat-top-message__name"),at(h,"class","chat-top-message__date"),at(c,"class","chat-top-message__info"),at(i,"class","chat-top-message__header"),at(d,"class","chat-top-message__desc"),at(r,"class","chat-top-message__box"),at(t,"class","chat-top-message"),at(t,"data-colimn",n[1])},m:function(m,w){Kn(m,t,w),Yn(t,r),Yn(r,i),Yn(i,e),ir(o,e,null),Yn(i,u),Yn(i,c),Yn(c,f),Yn(f,a),Yn(a,s),Yn(c,l),Yn(c,h),_.m(h,null),Yn(r,v),Yn(r,d),O.m(d,null),b=!0,y||(p=[ut(e,"click",ct(n[5])),ut(a,"click",ct(n[5]))],y=!0)},p:function(n,r){var i=DC(r,1)[0],u={};1&i&&(u.data=n[0]),o.$set(u),(!b||16&i)&&at(e,"href",n[4]),(!b||1&i)&&m!==(m=n[0].name+"")&&st(s,m),(!b||16&i)&&at(a,"href",n[4]),g===(g=w(n))&&_?_.p(n,i):(_.d(1),(_=g(n))&&(_.c(),_.m(h,null))),j===(j=S(n))&&O?O.p(n,i):(O.d(1),(O=j(n))&&(O.c(),O.m(d,null))),(!b||2&i)&&at(t,"data-colimn",n[1])},i:function(n){b||(Xt(o.$$.fragment,n),b=!0)},o:function(n){Qt(o.$$.fragment,n),b=!1},d:function(n){n&&Zn(t),er(o),_.d(),O.d(),y=!1,Tn(p)}}}var XC=48;function QC(n){return n.recType===E.ot&&n.preview?n.preview.src:""}function JC(n){return n.recType===E.ot?n.url:""}function KC(n,t,r){var i,e,o,u,c,f=this,a=t.chat,s=t.column;return n.$$set=function(n){NC(this,f),"chat"in n&&r(0,a=n.chat),"column"in n&&r(1,s=n.column)}.bind(this),n.$$.update=function(){if(NC(this,f),1&n.$$.dirty&&r(4,c=Jr(a)),193&n.$$.dirty&&a.topMessage&&a.topMessage.recType===E.et){if(null===r(7,e=null===r(6,i=null==a?void 0:a.topMessage)||void 0===i?void 0:i.parsedTags)||void 0===e?void 0:e.media)for(var t=0,s=a.topMessage.parsedTags.media.length;t<s;t++){var l=a.topMessage.parsedTags.media[t];if(l.preview&&l.preview.type===D.nr){r(3,u=l);break}}a.topMessage.text&&r(2,o=a.topMessage.text)}}.bind(this),[a,s,o,u,c,function(){Yf(a.chatId)},i,e]}var ZC=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&IC(n,t)}(o,n);var t,r,i,e=MC(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(PC(t=e.call(this)),n,KC,VC,An,{chat:0,column:1}),t}return t=o,r&&xC(t.prototype,r),i&&xC(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),nx=ZC;function tx(n){return tx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},tx(n)}function rx(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==tx(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==tx(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===tx(o)?o:String(o)),i)}var e,o}function ix(n,t){return ix=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},ix(n,t)}function ex(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=ux(n);if(t){var e=ux(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===tx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ox(n)}(this,r)}}function ox(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ux(n){return ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ux(n)}function cx(n){return function(n){if(Array.isArray(n))return sx(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||ax(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fx(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||ax(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ax(n,t){if(n){if("string"==typeof n)return sx(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sx(n,t):void 0}}function sx(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function lx(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function hx(n,t,r){var i=n.slice();return i[8]=t[r],i[10]=r,i}function vx(n,t,r){var i=n.slice();return i[11]=t[r],i[12]=t,i[13]=r,i}function dx(n){for(var t,r,i=this,e=n[1],o=[],u=0;u<e.length;u+=1)o[u]=yx(hx(n,e,u));var c=function(n){var t=this;return lx(this,i),Qt(o[n],1,1,function(){lx(this,t),o[n]=null}.bind(this))}.bind(this);return{c:function(){for(var n=0;n<o.length;n+=1)o[n].c();t=ot()},m:function(n,i){for(var e=0;e<o.length;e+=1)o[e].m(n,i);Kn(n,t,i),r=!0},p:function(n,r){if(2&r){var i;for(e=n[1],i=0;i<e.length;i+=1){var u=hx(n,e,i);o[i]?(o[i].p(u,r),Xt(o[i],1)):(o[i]=yx(u),o[i].c(),Xt(o[i],1),o[i].m(t.parentNode,t))}for(Yt(),i=e.length;i<o.length;i+=1)c(i);Vt()}},i:function(n){if(!r){for(var t=0;t<e.length;t+=1)Xt(o[t]);r=!0}},o:function(n){o=o.filter(Boolean);for(var t=0;t<o.length;t+=1)Qt(o[t]);r=!1},d:function(n){nt(o,n),n&&Zn(t)}}}function bx(n,t){var r,i,e,o,u=this;function c(n){t[6](n,t[11],t[12],t[13])}var f={column:t[10]};return void 0!==t[11]&&(f.chat=t[11]),i=new nx({props:f}),Rt.push(function(){return lx(this,u),tr(i,"chat",c)}.bind(this)),{key:n,first:null,c:function(){r=ot(),rr(i.$$.fragment),this.first=r},m:function(n,t){Kn(n,r,t),ir(i,n,t),o=!0},p:function(n,r){var o=this;t=n;var u={};!e&&2&r&&(e=!0,u.chat=t[11],Dt(function(){return lx(this,o),e=!1}.bind(this))),i.$set(u)},i:function(n){o||(Xt(i.$$.fragment,n),o=!0)},o:function(n){Qt(i.$$.fragment,n),o=!1},d:function(n){n&&Zn(r),er(i,n)}}}function yx(n){for(var t,r,i,e=this,o=[],u=new Map,c=n[8],f=function(n){return lx(this,e),n[11].chatId+(n[11].topMessage?n[11].topMessage.messageId:"")}.bind(this),a=0;a<c.length;a+=1){var s=vx(n,c,a),l=f(s);u.set(l,o[a]=bx(l,s))}return{c:function(){t=tt("div");for(var n=0;n<o.length;n+=1)o[n].c();r=et(),at(t,"class","chat-list-columns__column")},m:function(n,e){Kn(n,t,e);for(var u=0;u<o.length;u+=1)o[u].m(t,null);Yn(t,r),i=!0},p:function(n,i){2&i&&(c=n[8],Yt(),o=nr(o,i,f,1,n,c,u,t,Zt,bx,r,vx),Vt())},i:function(n){if(!i){for(var t=0;t<c.length;t+=1)Xt(o[t]);i=!0}},o:function(n){for(var t=0;t<o.length;t+=1)Qt(o[t]);i=!1},d:function(n){n&&Zn(t);for(var r=0;r<o.length;r+=1)o[r].d()}}}function px(n){var t,r,i,e=n[1].length&&dx(n);return{c:function(){t=tt("div"),e&&e.c(),at(t,"class",r="chat-list-columns"+(n[1].length?"":" chat-list-columns_loading"))},m:function(n,r){Kn(n,t,r),e&&e.m(t,null),i=!0},p:function(n,o){var u=this,c=fx(o,1)[0];n[1].length?e?(e.p(n,c),2&c&&Xt(e,1)):((e=dx(n)).c(),Xt(e,1),e.m(t,null)):e&&(Yt(),Qt(e,1,1,function(){lx(this,u),e=null}.bind(this)),Vt()),(!i||2&c&&r!==(r="chat-list-columns"+(n[1].length?"":" chat-list-columns_loading")))&&at(t,"class",r)},i:function(n){i||(Xt(e),i=!0)},o:function(n){Qt(e),i=!1},d:function(n){n&&Zn(t),e&&e.d()}}}var mx=200,wx=43,gx=22,_x=12;function Sx(n){var t;if(!n.topMessage)return 0;var r=0,i=n.topMessage;if(i.recType===E.et){if(r+=Math.min(Math.ceil(i.text.length/wx),5)*gx,null===(t=null==i?void 0:i.parsedTags)||void 0===t?void 0:t.media)for(var e=0,o=i.parsedTags.media.length;e<o;e++){var u=i.parsedTags.media[e];if(u.preview&&u.preview.type===D.nr){r+=mx+_x;break}}return r}return i.recType===E.ot&&i.preview&&i.preview.type===D.nr&&(r+=mx),r}function jx(n,t,r){var i,e=this,o=_n,u=function(){var n=this;return lx(this,e),o(),o=xn(c,function(t){return lx(this,n),r(5,i=t)}.bind(this)),c}.bind(this);n.$$.on_destroy.push(function(){return lx(this,e),o()}.bind(this));var c=t.list;u();var f=t.maxCountToShow,a=[],s=6,l=[];function h(){var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;r(3,s=4),n>=2400?r(3,s=6):n<=1366?r(3,s=2):n<=1600&&r(3,s=3)}return Et(function(){var n=this;lx(this,e);var t=Pf(h,100);return window.addEventListener("resize",t),t(),function(){lx(this,n),window.removeEventListener("resize",t)}.bind(this)}.bind(this)),n.$$set=function(n){lx(this,e),"list"in n&&u(r(0,c=n.list)),"maxCountToShow"in n&&r(2,f=n.maxCountToShow)}.bind(this),n.$$.update=function(){if(lx(this,e),62&n.$$.dirty){r(1,a=[]),r(4,l=[]);for(var t=0;t<s;t++)a.push([]),r(4,l[t]=0,l);for(var o=0,u=i.length;o<u&&!(o>=f);o++){var c=i[o],h=l.indexOf(Math.min.apply(Math,cx(l)));a[h].push(c),r(4,l[h]+=Sx(c)+60,l)}}}.bind(this),[c,a,f,s,l,i,function(n,t,e,o){e[o]=n,r(1,a),r(3,s),r(5,i),r(2,f),r(4,l)}]}var Ox=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&ix(n,t)}(o,n);var t,r,i,e=ex(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(ox(t=e.call(this)),n,jx,px,An,{list:0,maxCountToShow:2}),t}return t=o,r&&rx(t.prototype,r),i&&rx(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),Ex=Ox;function Tx(n){return Tx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Tx(n)}var kx=undefined;function Ax(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==Tx(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==Tx(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===Tx(o)?o:String(o)),i)}var e,o}function Rx(n,t){return Rx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Rx(n,t)}function Cx(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=Ix(n);if(t){var e=Ix(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===Tx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xx(n)}(this,r)}}function xx(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ix(n){return Ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ix(n)}function Mx(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Px(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Px(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Px(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function Ux(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Nx(n){var t,r,e,o,u,c=i("new")+"";return{c:function(){t=tt("div"),r=it(c),at(t,"class",e="chat-tabs__item"+("new"===n[1]?" chat-tabs__item_active":""))},m:function(i,e){Kn(i,t,e),Yn(t,r),o||(u=[ut(t,"keyup",Xx),ut(t,"click",n[6])],o=!0)},p:function(n,r){2&r&&e!==(e="chat-tabs__item"+("new"===n[1]?" chat-tabs__item_active":""))&&at(t,"class",e)},d:function(n){n&&Zn(t),o=!1,Tn(u)}}}function Dx(n){var t,r,e,o,u,c=i("popular")+"";return{c:function(){t=tt("div"),r=it(c),at(t,"class",e="chat-tabs__item"+("popular"===n[1]?" chat-tabs__item_active":""))},m:function(i,e){Kn(i,t,e),Yn(t,r),o||(u=[ut(t,"keyup",Qx),ut(t,"click",n[7])],o=!0)},p:function(n,r){2&r&&e!==(e="chat-tabs__item"+("popular"===n[1]?" chat-tabs__item_active":""))&&at(t,"class",e)},d:function(n){n&&Zn(t),o=!1,Tn(u)}}}function Bx(n){var t,r,e,o,u,c=i("my")+"";return{c:function(){t=tt("div"),r=it(c),at(t,"class",e="chat-tabs__item"+("my"===n[1]?" chat-tabs__item_active":""))},m:function(i,e){Kn(i,t,e),Yn(t,r),o||(u=[ut(t,"keyup",Jx),ut(t,"click",n[8])],o=!0)},p:function(n,r){2&r&&e!==(e="chat-tabs__item"+("my"===n[1]?" chat-tabs__item_active":""))&&at(t,"class",e)},d:function(n){n&&Zn(t),o=!1,Tn(u)}}}function Lx(n){var t,r,i,e,o;return{c:function(){t=tt("div"),r=it("Тест"),at(t,"title","Тип выборки по количеству читателей"),at(t,"class",i="chat-tabs__item"+("test"===n[1]?" chat-tabs__item_active":""))},m:function(i,u){Kn(i,t,u),Yn(t,r),e||(o=[ut(t,"keyup",Kx),ut(t,"click",n[9])],e=!0)},p:function(n,r){2&r&&i!==(i="chat-tabs__item"+("test"===n[1]?" chat-tabs__item_active":""))&&at(t,"class",i)},d:function(n){n&&Zn(t),e=!1,Tn(o)}}}function $x(n){var t,r,i,e;return r=new Ex({props:{list:UR,maxCountToShow:IR}}),{c:function(){t=tt("div"),rr(r.$$.fragment),at(t,"class",i="chat-tabs__content"+("new"===n[1]?"":" hidden"))},m:function(n,i){Kn(n,t,i),ir(r,t,null),e=!0},p:function(n,r){(!e||2&r&&i!==(i="chat-tabs__content"+("new"===n[1]?"":" hidden")))&&at(t,"class",i)},i:function(n){e||(Xt(r.$$.fragment,n),e=!0)},o:function(n){Qt(r.$$.fragment,n),e=!1},d:function(n){n&&Zn(t),er(r)}}}function zx(n){var t,r,i,e;return r=new RC({props:{chatList:n[2]}}),{c:function(){t=tt("div"),rr(r.$$.fragment),at(t,"class",i="chat-tabs__content"+("popular"===n[1]?"":" hidden"))},m:function(n,i){Kn(n,t,i),ir(r,t,null),e=!0},p:function(n,o){var u={};4&o&&(u.chatList=n[2]),r.$set(u),(!e||2&o&&i!==(i="chat-tabs__content"+("popular"===n[1]?"":" hidden")))&&at(t,"class",i)},i:function(n){e||(Xt(r.$$.fragment,n),e=!0)},o:function(n){Qt(r.$$.fragment,n),e=!1},d:function(n){n&&Zn(t),er(r)}}}function Wx(n){var t,r,i,e,o=n[3].length&&Fx(n),u=n[4].length&&qx(n);return{c:function(){t=tt("div"),o&&o.c(),r=et(),u&&u.c(),at(t,"class",i="chat-tabs__content"+("my"===n[1]?"":" hidden"))},m:function(n,i){Kn(n,t,i),o&&o.m(t,null),Yn(t,r),u&&u.m(t,null),e=!0},p:function(n,c){var f=this;n[3].length?o?(o.p(n,c),8&c&&Xt(o,1)):((o=Fx(n)).c(),Xt(o,1),o.m(t,r)):o&&(Yt(),Qt(o,1,1,function(){Ux(this,f),o=null}.bind(this)),Vt()),n[4].length?u?(u.p(n,c),16&c&&Xt(u,1)):((u=qx(n)).c(),Xt(u,1),u.m(t,null)):u&&(Yt(),Qt(u,1,1,function(){Ux(this,f),u=null}.bind(this)),Vt()),(!e||2&c&&i!==(i="chat-tabs__content"+("my"===n[1]?"":" hidden")))&&at(t,"class",i)},i:function(n){e||(Xt(o),Xt(u),e=!0)},o:function(n){Qt(o),Qt(u),e=!1},d:function(n){n&&Zn(t),o&&o.d(),u&&u.d()}}}function Fx(n){var t,r;return t=new RC({props:{chatList:n[3],showCountMembers:!0,$$slots:{title:[Gx]},$$scope:{ctx:n}}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};8&r&&(i.chatList=n[3]),1024&r&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function Gx(n){var t;return{c:function(){(t=tt("div")).textContent="".concat(i("groupChatsShort")),at(t,"class","chat-intro__title-list"),at(t,"slot","title")},m:function(n,r){Kn(n,t,r)},p:_n,d:function(n){n&&Zn(t)}}}function qx(n){var t,r;return t=new RC({props:{chatList:n[4],showCountMembers:!0,$$slots:{title:[Hx]},$$scope:{ctx:n}}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};16&r&&(i.chatList=n[4]),1024&r&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function Hx(n){var t;return{c:function(){(t=tt("div")).textContent="".concat(i("channels")),at(t,"class","chat-intro__title-list"),at(t,"slot","title")},m:function(n,r){Kn(n,t,r)},p:_n,d:function(n){n&&Zn(t)}}}function Yx(n){var t,r,i,e;return r=new RC({props:{chatList:n[5]}}),{c:function(){t=tt("div"),rr(r.$$.fragment),at(t,"class",i="chat-tabs__content"+("test"===n[1]?"":" hidden"))},m:function(n,i){Kn(n,t,i),ir(r,t,null),e=!0},p:function(n,o){var u={};32&o&&(u.chatList=n[5]),r.$set(u),(!e||2&o&&i!==(i="chat-tabs__content"+("test"===n[1]?"":" hidden")))&&at(t,"class",i)},i:function(n){e||(Xt(r.$$.fragment,n),e=!0)},o:function(n){Qt(r.$$.fragment,n),e=!1},d:function(n){n&&Zn(t),er(r)}}}function Vx(n){var t,r,i,e,o,u,c,f,a,s,l=n[0].length&&Nx(n),h=n[2].length&&Dx(n),v=(n[3].length||n[4].length)&&Bx(n),d=ao&&n[5].length&&Lx(n),b=n[0].length&&$x(n),y=n[2].length&&zx(n),p=(n[3].length||n[4].length)&&Wx(n),m=ao&&n[5].length&&Yx(n);return{c:function(){t=tt("div"),l&&l.c(),r=et(),h&&h.c(),i=et(),v&&v.c(),e=et(),d&&d.c(),o=et(),b&&b.c(),u=et(),y&&y.c(),c=et(),p&&p.c(),f=et(),m&&m.c(),a=ot(),at(t,"class","chat-tabs__list")},m:function(n,w){Kn(n,t,w),l&&l.m(t,null),Yn(t,r),h&&h.m(t,null),Yn(t,i),v&&v.m(t,null),Yn(t,e),d&&d.m(t,null),Kn(n,o,w),b&&b.m(n,w),Kn(n,u,w),y&&y.m(n,w),Kn(n,c,w),p&&p.m(n,w),Kn(n,f,w),m&&m.m(n,w),Kn(n,a,w),s=!0},p:function(n,o){var s=this,w=Mx(o,1)[0];n[0].length?l?l.p(n,w):((l=Nx(n)).c(),l.m(t,r)):l&&(l.d(1),l=null),n[2].length?h?h.p(n,w):((h=Dx(n)).c(),h.m(t,i)):h&&(h.d(1),h=null),n[3].length||n[4].length?v?v.p(n,w):((v=Bx(n)).c(),v.m(t,e)):v&&(v.d(1),v=null),ao&&n[5].length?d?d.p(n,w):((d=Lx(n)).c(),d.m(t,null)):d&&(d.d(1),d=null),n[0].length?b?(b.p(n,w),1&w&&Xt(b,1)):((b=$x(n)).c(),Xt(b,1),b.m(u.parentNode,u)):b&&(Yt(),Qt(b,1,1,function(){Ux(this,s),b=null}.bind(this)),Vt()),n[2].length?y?(y.p(n,w),4&w&&Xt(y,1)):((y=zx(n)).c(),Xt(y,1),y.m(c.parentNode,c)):y&&(Yt(),Qt(y,1,1,function(){Ux(this,s),y=null}.bind(this)),Vt()),n[3].length||n[4].length?p?(p.p(n,w),24&w&&Xt(p,1)):((p=Wx(n)).c(),Xt(p,1),p.m(f.parentNode,f)):p&&(Yt(),Qt(p,1,1,function(){Ux(this,s),p=null}.bind(this)),Vt()),ao&&n[5].length?m?(m.p(n,w),32&w&&Xt(m,1)):((m=Yx(n)).c(),Xt(m,1),m.m(a.parentNode,a)):m&&(Yt(),Qt(m,1,1,function(){Ux(this,s),m=null}.bind(this)),Vt())},i:function(n){s||(Xt(b),Xt(y),Xt(p),Xt(m),s=!0)},o:function(n){Qt(b),Qt(y),Qt(p),Qt(m),s=!1},d:function(n){n&&Zn(t),l&&l.d(),h&&h.d(),v&&v.d(),d&&d.d(),n&&Zn(o),b&&b.d(n),n&&Zn(u),y&&y.d(n),n&&Zn(c),p&&p.d(n),n&&Zn(f),m&&m.d(n),n&&Zn(a)}}}var Xx=function(){Ux(this,kx)}.bind(undefined),Qx=function(){Ux(this,kx)}.bind(undefined),Jx=function(){Ux(this,kx)}.bind(undefined),Kx=function(){Ux(this,kx)}.bind(undefined);function Zx(n,t,r){var i,e,o,u,c,f,a=this;Mn(n,UR,function(n){return Ux(this,a),r(0,i=n)}.bind(this)),Mn(n,lR,function(n){return Ux(this,a),r(1,e=n)}.bind(this)),Mn(n,WR,function(n){return Ux(this,a),r(2,o=n)}.bind(this)),Mn(n,so,function(n){return Ux(this,a),r(3,u=n)}.bind(this)),Mn(n,lo,function(n){return Ux(this,a),r(4,c=n)}.bind(this)),Mn(n,VR,function(n){return Ux(this,a),r(5,f=n)}.bind(this)),Et(function(){Ux(this,a),LR(),GR(),ao&&XR()}.bind(this));var s=function(){Ux(this,a),Ln(lR,e="new",e)}.bind(this),l=function(){Ux(this,a),Ln(lR,e="popular",e)}.bind(this),h=function(){Ux(this,a),Ln(lR,e="my",e)}.bind(this),v=function(){Ux(this,a),Ln(lR,e="test",e)}.bind(this);return[i,e,o,u,c,f,s,l,h,v]}var nI=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Rx(n,t)}(o,n);var t,r,i,e=Cx(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(xx(t=e.call(this)),n,Zx,Vx,An,{}),t}return t=o,r&&Ax(t.prototype,r),i&&Ax(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),tI=nI;function rI(n){return rI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},rI(n)}function iI(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==rI(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==rI(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===rI(o)?o:String(o)),i)}var e,o}function eI(n,t){return eI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},eI(n,t)}function oI(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=cI(n);if(t){var e=cI(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===rI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return uI(n)}(this,r)}}function uI(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function cI(n){return cI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cI(n)}function fI(n){var t,r,i=!qr&&function(n){var t,r;return t=new tI({}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}();return{c:function(){t=tt("div"),i&&i.c(),at(t,"class","chat-intro")},m:function(n,e){Kn(n,t,e),i&&i.m(t,null),r=!0},p:_n,i:function(n){r||(Xt(i),r=!0)},o:function(n){Qt(i),r=!1},d:function(n){n&&Zn(t),i&&i.d()}}}function aI(n){return[]}var sI=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&eI(n,t)}(o,n);var t,r,i,e=oI(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(uI(t=e.call(this)),n,aI,fI,An,{}),t}return t=o,r&&iI(t.prototype,r),i&&iI(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),lI=sI;function hI(n){return hI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hI(n)}function vI(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(e=i.key,o=void 0,o=function(n,t){if("object"!==hI(n)||null===n)return n;var r=n[Symbol.toPrimitive];if(r!==undefined){var i=r.call(n,t||"default");if("object"!==hI(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(e,"string"),"symbol"===hI(o)?o:String(o)),i)}var e,o}function dI(n,t){return dI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},dI(n,t)}function bI(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,i=pI(n);if(t){var e=pI(this).constructor;r=Reflect.construct(i,arguments,e)}else r=i.apply(this,arguments);return function(n,t){if(t&&("object"===hI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yI(n)}(this,r)}}function yI(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function pI(n){return pI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pI(n)}function mI(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],f=!0,a=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;f=!1}else for(;!(f=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);f=!0);}catch(s){a=!0,e=s}finally{try{if(!f&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(a)throw e}}return c}}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return wI(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wI(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wI(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=n[r];return i}function gI(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function _I(n){var t,r,i,e,o,u,c,f,a,s,l,h,v,d=n[1].error&&SI(n);r=new VA({});var b=n[1].search&&jI(n);o=new lI({});var y=[EI,OI],p=[];function m(n,t){return n[1].errorWindow?0:n[1].window?1:-1}return~(c=m(n))&&(f=p[c]=y[c](n)),s=new WE({props:{clickHandle:Yf,loadMore:Ho}}),h=new sR({}),{c:function(){d&&d.c(),t=et(),rr(r.$$.fragment),i=et(),b&&b.c(),e=et(),rr(o.$$.fragment),u=et(),f&&f.c(),a=et(),rr(s.$$.fragment),l=et(),rr(h.$$.fragment)},m:function(n,f){d&&d.m(n,f),Kn(n,t,f),ir(r,n,f),Kn(n,i,f),b&&b.m(n,f),Kn(n,e,f),ir(o,n,f),Kn(n,u,f),~c&&p[c].m(n,f),Kn(n,a,f),ir(s,n,f),Kn(n,l,f),ir(h,n,f),v=!0},p:function(n,r){var i=this;n[1].error?d?2&r&&Xt(d,1):((d=SI(n)).c(),Xt(d,1),d.m(t.parentNode,t)):d&&(Yt(),Qt(d,1,1,function(){gI(this,i),d=null}.bind(this)),Vt()),n[1].search?b?2&r&&Xt(b,1):((b=jI(n)).c(),Xt(b,1),b.m(e.parentNode,e)):b&&(Yt(),Qt(b,1,1,function(){gI(this,i),b=null}.bind(this)),Vt());var o=c;(c=m(n))===o?~c&&p[c].p(n,r):(f&&(Yt(),Qt(p[o],1,1,function(){gI(this,i),p[o]=null}.bind(this)),Vt()),~c?((f=p[c])?f.p(n,r):(f=p[c]=y[c](n)).c(),Xt(f,1),f.m(a.parentNode,a)):f=null)},i:function(n){v||(Xt(d),Xt(r.$$.fragment,n),Xt(b),Xt(o.$$.fragment,n),Xt(f),Xt(s.$$.fragment,n),Xt(h.$$.fragment,n),v=!0)},o:function(n){Qt(d),Qt(r.$$.fragment,n),Qt(b),Qt(o.$$.fragment,n),Qt(f),Qt(s.$$.fragment,n),Qt(h.$$.fragment,n),v=!1},d:function(n){d&&d.d(n),n&&Zn(t),er(r,n),n&&Zn(i),b&&b.d(n),n&&Zn(e),er(o,n),n&&Zn(u),~c&&p[c].d(n),n&&Zn(a),er(s,n),n&&Zn(l),er(h,n)}}}function SI(n){var t,r;return t=new Ua({}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function jI(n){var t,r;return t=new iA({}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function OI(n){var t,r;return t=new cE({props:{loadMore:hc}}),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:_n,i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function EI(n){var t,r;return(t=new Ka({props:{$$slots:{content:[TI]},$$scope:{ctx:n}}})).$on("close",n[3]),{c:function(){rr(t.$$.fragment)},m:function(n,i){ir(t,n,i),r=!0},p:function(n,r){var i={};20&r&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||(Xt(t.$$.fragment,n),r=!0)},o:function(n){Qt(t.$$.fragment,n),r=!1},d:function(n){er(t,n)}}}function TI(n){var t;return{c:function(){at(t=tt("div"),"slot","content")},m:function(r,i){Kn(r,t,i),t.innerHTML=n[2]},p:function(n,r){4&r&&(t.innerHTML=n[2])},d:function(n){n&&Zn(t)}}}function kI(n){var t,r,i=n[0]&&_I(n);return{c:function(){i&&i.c(),t=ot()},m:function(n,e){i&&i.m(n,e),Kn(n,t,e),r=!0},p:function(n,r){var e=this,o=mI(r,1)[0];n[0]?i?(i.p(n,o),1&o&&Xt(i,1)):((i=_I(n)).c(),Xt(i,1),i.m(t.parentNode,t)):i&&(Yt(),Qt(i,1,1,function(){gI(this,e),i=null}.bind(this)),Vt())},i:function(n){r||(Xt(i),r=!0)},o:function(n){Qt(i),r=!1},d:function(n){i&&i.d(n),n&&Zn(t)}}}function AI(){var n=document.getElementById("left-panel"),t=document.getElementById("footer");if(n&&t){var r=n.getBoundingClientRect(),i=t.getBoundingClientRect();n.style.minHeight="".concat(r.height+(window.innerHeight-i.bottom),"px")}}function RI(n,r,i){var e,o,u=this;Mn(n,Ar,function(n){return gI(this,u),i(1,e=n)}.bind(this)),Mn(n,Cr,function(n){return gI(this,u),i(2,o=n)}.bind(this));var c=!1;window.addEventListener("resize",Pf(AI,100)),Et(function(){var n=this;gI(this,u),AI(),uT()["catch"](function(r){gI(this,n),h.error(t.j,r)}.bind(this))["finally"](function(){var r,e=this;gI(this,n),r="/".concat(Gr,"/users/").concat(Pr.toLowerCase(),"/messages"),window.history&&(vu=!0,hu=r,window.addEventListener("popstate",yu)),mu({path:"/{language}/users/{login}/messages",callback:function(){gI(this,e),Tu(),Df()}.bind(this)}),mu({path:"/{language}/messages/{id}",callback:function(n){var r=this;gI(this,e),n&&n.id&&(Df(),Hf(n.id,!0)["catch"](function(n){gI(this,r),h.error(t.T,n)}.bind(this)))}.bind(this)}),mu({path:"/{language}/channels/{id}",callback:function(n){var r=this;gI(this,e),n&&n.id&&(Df(),Hf(n.id,!0)["catch"](function(n){gI(this,r),h.error(t.T,n)}.bind(this)))}.bind(this)}),mu({path:"/{language}/channels/{id}/edit",callback:function(n){var r=this;gI(this,e),n&&n.id&&Hf(n.id,!0).then(function(){gI(this,r),_u(n.id)}.bind(this))["catch"](function(n){gI(this,r),h.error(t.T,n)}.bind(this))}.bind(this)}),mu({path:"/{language}/messages/{id}/edit",callback:function(n){var r=this;gI(this,e),n&&n.id&&Hf(n.id,!0).then(function(){gI(this,r),_u(n.id)}.bind(this))["catch"](function(n){gI(this,r),h.error(t.T,n)}.bind(this))}.bind(this)}),i(0,c=!0),yu()}.bind(this))}.bind(this));var f=function(){gI(this,u),Cr.set(undefined)}.bind(this);return[c,e,o,f]}var CI=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&dI(n,t)}(o,n);var t,r,i,e=bI(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),or(yI(t=e.call(this)),n,RI,kI,An,{}),t}return t=o,r&&vI(t.prototype,r),i&&vI(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ur),xI=CI;function II(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function MI(){var n=this;return new Promise(function(t,r){var i=this;II(this,n);var e=document.getElementById("chatContainer");e?ha().then(function(){var n=this;II(this,i),Wf(),SR().then(function(){II(this,n),new xI({target:e}),t()}.bind(this))}.bind(this))["catch"](function(n){II(this,i),e.innerHTML='<div class="chat-errors-block">\n      <div class="alert alert_danger">'.concat(n.message,"</div>\n      </div>"),r(n)}.bind(this)):r(new Error("There is no container here"))}.bind(this))}var PI=undefined;function UI(n){return UI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},UI(n)}function NI(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var DI,BI=!1;function LI(n){var e=this;return new Promise(function(o,u){var c=this;NI(this,e),n&&"object"===UI(n)?(!function(){var n=document.getElementById("chatTranslates");if(n){var t=n.innerHTML;if(t)try{r=JSON.parse(t)}catch(i){r={},console.warn(i)}}}(),window.WebSocket&&window.indexedDB&&"Set"===(new Set).constructor.name?(h.enable(),eo("chat_extended_logs").then(function(t){NI(this,c),Qr(n,1===parseInt(t,10)),o()}.bind(this))["catch"](function(r){NI(this,c),h.error(t.O,r),Qr(n),o()}.bind(this))):u(new Error(i("notSupportedWebsoket")))):u(new Error("Settings in empty"))}.bind(this))}function $I(n,t){var r=this;LI(n).then(function(){return NI(this,r),t()}.bind(this)).then(function(){NI(this,r),BI=!0,DI&&(DI(),DI=undefined)}.bind(this))["catch"](function(n){var t,i;NI(this,r),t=n.message,(i=document.getElementById("chatContainer")||document.getElementById("chatsWidget"))&&(i.innerHTML='<div class="chat-errors-block">\n  <div class="alert alert_danger">'.concat(t,"</div>\n  </div>"))}.bind(this))}function zI(n){return function(){for(var t=this,r=arguments.length,i=new Array(r),e=0;e<r;e++)i[e]=arguments[e];NT.set(!0),BI?n.apply(void 0,i):DI=function(){NI(this,t),n.apply(void 0,i)}.bind(this)}}window.initChat=function(n){$I(n,MI)},window.initChatWidget=function(n){$I(n,WT)},window.closeAllPopupsChat=zI(Df),window.openChatWith=function(n,t){NI(this,PI),qr&&Dr?window.doPost(null,"/".concat(Gr,"/users/").concat(Pr,"/messages"),null,{user:n}):zI(FT)(n,t)}.bind(undefined),window.openChatByName=zI(Hf)}();