(function(){function _(e){return document.getElementById(e)}function C(e){return document.createElement(e)}function AddCategoryInput(e,t,n,o,i,l){var a,d=_("edit_category");e.firstElementChild.style.display="none",e.insertBefore(d,e.firstElementChild.nextElementSibling),d.style.display="",(a=d.firstElementChild).value=t,(a=a.nextElementSibling).value=n,(a=a.nextElementSibling).value=o||0,(a=a.nextElementSibling).value=l,a.nextElementSibling.value=i||0,setTimeout((function(){d.firstElementChild.select()}),0)}var HideInput=window.HideArticleCategoryInputs=function(){var e,t=_("edit_category"),n=t.previousElementSibling;(e=_("article-groups")).parentNode.insertBefore(t,e.nextElementSibling),t.style.display="none","SPAN"==n.nodeName&&n.style.display&&(n.firstElementChild.id?n.style.display="":(n=n.parentNode).parentNode.removeChild(n))},editorHeight;function HideControls(e,t){for(var n=e.nextElementSibling;n;)"A"==n.nodeName?n.style.display=t?"none":"":"IMG"==n.nodeName&&(n.style.display=t?"":"none"),n=n.nextElementSibling}function GroupDeleted(){var e=_(["category",this.id].join("_")).parentNode.parentNode;e.parentNode.removeChild(e)}function DisableInputs(e,t){for(var n=e.firstElementChild;n;)"INPUT"==n.nodeName?n.disabled=t:"IMG"==n.nodeName&&(n.style.display=t?"":"none"),n=n.nextElementSibling}function CheckboxClicked(){var e=this;setTimeout((function(){var t,n,o,i,l=window.clickedItems;if(e.checked)if(l.length<4)l.push(e.value);else for(i=l.shift(),l.push(e.value),t=0,n=(o=document.getElementById("articles-categories-edit").getElementsByTagName("input")).length;t<n;++t)o[t].value==i&&(o[t].checked=!1);else for(t=0,n=l.length;t<n;++t)if(l[t]==e.value){l.splice(t,1);break}}),0)}window.AddArticleCategory=function(e,t,n,o){HideInput();var i,l,a,d=C("li"),r=0;t?r=t.parentNode.firstElementChild.id.substr(9):(t=_("category_mt"+e),r=-1),t.nodeName||(t=this),(i=t.parentNode.parentNode.getElementsByTagName("ul")[0])||(i=C("ul"),t.parentNode.parentNode.appendChild(i)),i.appendChild(d),d.appendChild(l=C("span")),(a=C("strong")).appendChild(document.createTextNode("")),l.appendChild(a),l.appendChild(document.createTextNode("")),r||((a=C("a")).href="javascript:void(0)",a.innerHTML='<img src="https://c.mql5.com/i/0.gif" loading="lazy" width="1" height="1" class="add">',a.onclick=function(){window.AddArticleCategory(e,null,n,o)},l.appendChild(a)),(a=C("a")).href="javascript:void(0)",a.innerHTML='<img src="https://c.mql5.com/i/0.gif" loading="lazy" width="1" height="1" class="edit">',a.onclick=function(){window.EditArticleCategory(e,this)},l.appendChild(a),(a=C("a")).href="javascript:void(0)",a.innerHTML='<img src="https://c.mql5.com/i/0.gif" loading="lazy" width="1" height="1" class="delete">',a.onclick=function(){window.DeleteArticleCategory(e,this,n,o)},l.appendChild(a),AddCategoryInput(d,"","",0,r,e)},window.EditArticleCategory=function(e,t){t&&t.nodeName||(t=this),HideInput();var n,o,i,l=t.parentNode.firstElementChild;return!!l&&(n=l.id.substr(9),o=l.firstChild.nodeValue,(i=l.nextSibling.nodeValue)&&(i=i.substr(2,i.length-3)),AddCategoryInput(l.parentNode.parentNode,o,i,n,null,e),!1)},window.DeleteArticleCategory=function(e,t,n,o){t&&t.nodeName||(t=this),HideInput();var i=t.parentNode.firstElementChild;if(!i)return!1;if(!i.id)return(i=i.parentNode.parentNode).parentNode.removeChild(i),!1;var l=i.id.substr(9);return confirm([window.deleteConfirm," '",i.firstElementChild?i.firstElementChild.nodeValue:"","'?"].join(""))&&(HideControls(i,!0),Ajax.post(n,{id:l,__signature:o},!1,{id:l,onready:GroupDeleted,onerror:function(e,t){HideControls(i,!1),alert(t)}})),!1},window.UpdateArticleCategory=function(){var e=_("edit_category");DisableInputs(e,!0),Ajax.form(e,{onready:function(t){DisableInputs(e,!1);var n=parseInt(t);(t=n)&&(e.parentNode.firstElementChild.firstElementChild.id=["category",n].join("_"),e.parentNode.firstElementChild.firstElementChild.nextElementSibling.nodeValue=[" (",e.firstElementChild.nextElementSibling.value,")"].join(""),HideInput())},onerror:function(t,n){DisableInputs(e,!1),alert(n),e.firstElementChild.focus()}})},window.ArtFileSelected=function(){var e=document.getElementById("image-upload-form"),t=document.getElementById("loading");if(e){var n=$("image-upload-form-error");n&&n.parentNode&&n.parentNode.removeChild(n),t.style.display="block",Ajax.form(e,{onready:function(t){if(t){var n=document.createElement("DIV");n.innerHTML=t,t=n.innerText,e.reset();var o=null;try{o=JSON.parse(t)}catch(s){console.warn(s)}if(o)switch(o.status){case"OK":var i,l,a,d=30,r=30;(i=document.getElementById("article-icon")).src=o.url,i.realWidth=o.width,i.realHeight=o.height,o.width<o.height?(l=180,a=Math.round(o.height/o.width*180),d=30-Math.round((a-180)/2)):(a=180,l=Math.round(o.width/o.height*180),r=30-Math.round((l-180)/2)),i.width=l,i.height=a,i.style.left=[r,"px"].join(""),i.style.top=[d,"px"].join(""),(i=document.getElementById("icon-save-button")).disabled=!1,document.getElementById("loading").style.display="";break;case"FAIL":$("image-upload-form-error")||createElement($("image-upload-form"),"span",{className:"field-validation-error",id:"image-upload-form-error",innerText:o.message})}}}})}},window.StartImageDrag=function(e){e||(e=window.event);var t=document.getElementById("article-icon"),n=parseInt(t.style.top),o=parseInt(t.style.left);isNaN(n)&&(n=0),isNaN(o)&&(o=0),t.mouseLeftOffset=e.clientX-o,t.mouseTopOffset=e.clientY-n,document.documentElement.onmousemove=MouseMove,document.documentElement.onmouseup=MouseUp},window.MouseMove=function(e){e||(e=window.event);var t=document.getElementById("article-icon");t.style.top=[e.clientY-t.mouseTopOffset,"px"].join(""),t.style.left=[e.clientX-t.mouseLeftOffset,"px"].join("")},window.MouseUp=function(e){document.documentElement.onmousemove=null,document.documentElement.onmouseup=null},window.ArticlesZoomIn=function(){var e=document.getElementById("article-icon"),t=e.clientWidth,n=e.clientHeight,o=t/n;t+=60,n=Math.round(t/o),e.width=t,e.height=n,e.style.left=parseInt(e.style.left)-30+"px",e.style.top=parseInt(e.style.top)-30+"px"},window.ArticlesZoomOut=function(){var e=document.getElementById("article-icon"),t=e.clientWidth,n=t,o=e.clientHeight,i=t/o;(t-=60)<180&&(t=180),(o=Math.round(t/i))<180&&(o=180,t=Math.round(o*i)),n!=t&&(e.width=t,e.height=o,e.style.left=parseInt(e.style.left)+30+"px",e.style.top=parseInt(e.style.top)+30+"px")},window.CloseDialog=function(){document.getElementById("article-icon").src="https://c.mql5.com/i/0.gif",Dialog.hide()},window.SetIcon=function(e,t){var n=document.getElementById("article-icon"),o=parseInt(n.style.left)-30,i=parseInt(n.style.top)-30;Ajax.post(e,{img:n.src,left:o=Math.ceil(-o*n.realWidth/n.clientWidth),top:i=Math.ceil(-i*n.realHeight/n.clientHeight),right:o+Math.ceil(180*n.realWidth/n.clientWidth),bottom:i+Math.ceil(180*n.realHeight/n.clientHeight),__signature:t},!1,{onready:function(e){var t=document.getElementById("current-icon");t.src=e,(t=document.getElementById("icon")).value=e,Dialog.hide()}})},window.AddTranslation=function(e,t,n,o,i,l,a,d){Ajax.post(["/en",e,"translation",n,o,t].join("/"),{__signature:d},!1,{onready:function(e){"ERROR"!=e?parseInt(e)&&i&&l&&a?window.location.href=l+e:alert("Server error: "+e):alert("Server error")}})},window.StarsUnderTap=function(t){var n=t.targetTouches[0],o=n.target;"selectedStars"===o.id&&(o=o.parentElement);var i=o.getBoundingClientRect(),l=Math.floor((n.clientX-i.left)/16)+1;return o.firstElementChild.className=["v",l,"0"].join(""),o.parentElement.querySelector("#Rating").value=l,e.preventDefault(),e.stopPropagation(),!1},window.TrackRatingOut=function(e,t){t||(t=window.event),(t.target||t.srcElement)==e.firstElementChild&&(e.firstElementChild.className="")},window.Vote=function(item,url,tooFrequentMessage,token){if(item&&item.children&&item.children.length){var s=item.children[0].className,n;s&&(n=s.charAt(1),Ajax.post(url,{rating:n,__signature:token},!1,{onready:function(text){if("ERROR"==text);else if("NOVOTE"==text);else if("NOMARK"==text);else if("LIMIT"==text)tooFrequentMessage?alert(tooFrequentMessage):alert("Votes limit reached");else try{var e=eval("("+text+")");item.onmousemove=null,item.onmouseout=null,item.onclick=null,item.firstElementChild.className=s,document.getElementById("current_rating").className=e.rating,document.getElementById("current_votes").innerHTML=e.votes}catch(e){alert(e.message)}},onerror:function(e,t){}}))}},window.Code=function(e){var t=window.screen.availWidth-100,n=window.screen.availHeight-140;window.open(e,"view_code_"+Math.round(1e6*Math.random()),["left=50,top=70,width=",t,",height=",n,",menubar=0,toolbar=0,location=0,directories=0,personalbar=0,status=0,resizable=1,scrollbars=0"].join(""))},window.ArticlesShowCategoriesList=function(){var e,t,n,o,i=document.getElementById("articles-categories-edit"),l=document.getElementById("categories"),a=i.getElementsByTagName("input"),d={};if(i.style.display)i.style.display="";else{if(window.clickedItems||(o=window.clickedItems=[]),l.value)for(t=0,n=(e=l.value.split(",")).length;t<n;++t)d[e[t]]=!0;for(t=0,n=a.length;t<n;++t)d[a[t].value]?(a[t].checked=!0,o&&o.push(a[t].value)):a[t].checked=!1,o&&(a[t].onclick=CheckboxClicked);i.style.display="block";var r=document.getElementById("articles-categories-add");r&&r.offsetLeft&&(i.style.marginLeft=r.offsetLeft-4+"px",i.style.marginTop="18px")}},window.ArticlesApplyCategories=function(){var e,t,n=document.getElementById("articles-categories-edit"),o=document.getElementById("categories"),i=n.getElementsByTagName("input"),l=[],a=[];for(e=0,t=i.length;e<t;++e)i[e].checked&&(a.push(i[e].parentNode.getElementsByTagName("span")[0].firstElementChild.nodeValue),l.push(i[e].value));l.length&&(o.value=l.join(","),(e=o.previousElementSibling).innerHTML="",e.appendChild(document.createTextNode(a.join(", "))),n.style.display="")},window.PubNewPlanDelete=function(e){var t=e.parentNode.parentNode.parentNode;t.parentNode.removeChild(t)},window.PubNewPlanMoveUp=function(e){var t=e.parentNode.parentNode.parentNode;if(t.previousElementSibling&&"stub"!=t.previousElementSibling.className)return t.parentNode.insertBefore(t,t.previousElementSibling),t.className="show",void setTimeout((function(){t.className=""}),500);t.className="show",setTimeout((function(){t.className="",setTimeout((function(){t.className="show",setTimeout((function(){t.className=""}),200)}),200)}),200)},window.PubNewPlanMoveDown=function(e){var t=e.parentNode.parentNode.parentNode;if(t.nextElementSibling&&"stub"!=t.nextElementSibling.className&&"add"!=t.nextElementSibling.className)return t.parentNode.insertBefore(t,t.nextElementSibling.nextElementSibling),t.className="show",void setTimeout((function(){t.className=""}),500);t.className="show",setTimeout((function(){t.className="",setTimeout((function(){t.className="show",setTimeout((function(){t.className=""}),200)}),200)}),200)},window.PubNewPlanAdd=function(e){var t=e.parentNode.parentNode;if(e.value.length>0){var n=t.parentNode,o=document.createElement("li");return o.innerHTML=planItemTemplate,o.childNodes[0].childNodes[0].value=e.value,e.value="",n.insertBefore(o,t),setTimeout((function(){e.focus()}),0),t.className="add show",void setTimeout((function(){t.className="add"}),500)}t.className="add show",setTimeout((function(){t.className="add",setTimeout((function(){t.className="add show",setTimeout((function(){t.className="add"}),200)}),200)}),200)},window.PubNewPlanHandle=function(e,t){return 13==t.keyCode?!!t.ctrlKey||(PubNewPlanAdd(e),!1):9!=t.keyCode||(0==e.value.length||(PubNewPlanAdd(e),!1))},window.PubNewCatCheck=function(e,t){setTimeout((function(){if(1!=t){if(!window.clickedItems){window.clickedItems=[];var n=document.getElementById("categories");if(n.value&&n.value.length){var o=n.value.split(",");for(i=0,l=o.length;i<l;++i)window.clickedItems.push(o[i])}}var i,l,a,d,r=window.clickedItems;if(e.checked)if(r.length<t)r.push(e.value);else for(d=r.shift(),r.push(e.value),i=0,l=(a=document.getElementById("pub-new-cats").getElementsByTagName("input")).length;i<l;++i)a[i].value==d&&(a[i].checked=!1);else for(i=0,l=r.length;i<l;++i)if(r[i]==e.value){r.splice(i,1);break}document.getElementById("categories").value=r.join(",")}else{for(document.getElementById("categories").value=e.value,i=0,l=(a=document.getElementById("pub-new-cats").getElementsByTagName("input")).length;i<l;++i)a[i].checked=!1;e.checked=!0}}),0)};var footerElement=null;window.GetFooterElement=function(){return footerElement||(footerElement=_("footer"))},window.PubEditEditorToggle=function(e,t){var n=document.getElementById("expander"),o=document.getElementById("collapsable-top"),i=document.getElementById("collapsable-bottom"),l=n.getElementsByTagName("a")[0];n&&o&&i&&("pub-edit-expander on"==n.className?(l.title=e,n.className="pub-edit-expander",o.style.height="auto",i.style.height="auto",GetFooterElement().style.display="block",window.hashParams.Remove("mode")):(l.title=t,n.className="pub-edit-expander on",o.style.height="0",i.style.height="0",GetFooterElement().style.display="none",window.hashParams.Set("mode","expanded")),PubEditEditorFit())},window.PubEditEditorToggleTo=function(e){var t=document.getElementById("expander"),n=document.getElementById("collapsable-top"),o=document.getElementById("collapsable-bottom");t&&n&&o&&(e?(t.className="pub-edit-expander on",n.style.height="0",o.style.height="0",GetFooterElement().style.display="none",window.hashParams.Set("mode","expanded")):(t.className="pub-edit-expander",n.style.height="auto",o.style.height="auto",GetFooterElement().style.display="block",window.hashParams.Remove("mode")),PubEditEditorFit())},window.PubEditEditorFit=function(){if(_("pub-editor")){var e=GetFooterElement().offsetHeight,t=document.getElementById("collapsable-top"),n=document.getElementById("collapsable-bottom"),o=t.offsetTop,i=t.offsetHeight+n.offsetHeight;i>0&&(i+=2),(editorHeight=window.innerHeight||document.documentElement.clientHeight)&&(editorHeight-=e+52+o+i+2),_("pub-editor").style.height=[Math.max(editorHeight,340),"px"].join("")}},window.PubEditRevisionsToggle=function(e){var t=document.getElementById("pub-edit-list-revisions-over10");t&&("on"==e.className?(e.className="",t.style.display="none"):(e.className="on",t.style.display="block"))},window.PubEditLoadStats=function(e,t,n,o){window.pubEditStatsDone||Ajax.get("/"+[e,t,n,o,"stats"].join("/"),null,{onready:function(e){var t=document.getElementById("content_stats");t&&(t.innerHTML=e,window.pubEditStatsDone=!0)}})},window.showLoginRegisterPopupAtEnd=function(){var e=window.Mql5Cookie.localStorage("popup_articles");if(e&&1==parseInt(e))return!1;var t=document.getElementById("footer"),n=getDocumentBodySize().height,o=document.getElementById("articleAdditional"),i=t?t.offsetHeight:n;o&&(i+=o.offsetHeight);var l=n-i,a=getWindowSize().height,d=getWindowScroll().top+a,r=!1;function s(){d=getWindowScroll().top+a,r?(Core.RemoveHandler(window,"scroll",s),Core.RemoveHandler(window,"resize",c)):!r&&d>=l&&(r=!0,window.registerLoginPopup.show(),window.Mql5Cookie.localStorage("popup_articles",1))}function c(){n=getDocumentBodySize().height,i=t?t.offsetHeight:n,o&&(i+=o.offsetHeight),l=n-i,a=getWindowSize().height,s()}Core.AddHandler(window,"scroll",s,{passive:!0}),Core.AddHandler(window,"resize",c,{passive:!0}),s()},window.showLoginRegisterPopupAtDownload=function(e){var t=(e=e||window.event).target||e.srcElement;if(t){for(;t&&t.parentNode&&"A"!==t.tagName;)t=t.parentNode;if("A"===t.tagName){e.preventDefault();var n=t.getAttribute("href");n&&window.Mql5Cookie.localStorage("code_download_href",n),window.registerLoginPopup.show()}}},window.downloadCodeByStorage=function(){var e=window.Mql5Cookie.localStorage("code_download_href");e&&(window.Mql5Cookie.localStorage("code_download_href",""),window.open(e,"_blank").focus(),e=undefined,window.fpush("MQL5+Code+Download+Success"))}})();var ArticlePayForDisplay=function(e,t){return Dialog.show(t,$(e),400,137),!1},CArticles=function(){this.CheckOnScrollDown=function(){var e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,t=document.body.offsetHeight-e,n=t/2,o=null,i=!1,l=!1;t<100?(window.fz("track","MQL5+Article+Half"),window.fz("track","MQL5+Article+End")):addEventCustom(window,"scroll",(function(){l&&i||(null!==o&&window.clearTimeout(o),o=window.setTimeout((function(){!i&&window.scrollY>n&&(i=!0,window.fz("track","MQL5+Article+Half")),!l&&window.scrollY+200>t&&(l=!0,window.fz("track","MQL5+Article+End"))}),1e3))}))}},Articles=new CArticles;