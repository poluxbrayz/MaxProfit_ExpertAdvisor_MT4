!function(){"use strict";var n,t,i={};function r(n){if(n in i){for(var t=i[n],r=0,e=arguments.length<=1?0:arguments.length-1;r<e;r++)t=t.replace("{"+r+"}",r+1<1||arguments.length<=r+1?undefined:arguments[r+1]);return t}return"["+n+"]"}function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e(n)}function o(n){var t="";return n===undefined?t="undefined error":"object"===e(n)?"stack"in n&&n.stack?("message"in n&&n.message&&(t+=n.message+"\r\n"),t+=n.stack):"message"in n&&n.message&&(t=n.message):t=n,t}function u(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}!function(n){n[n.Info=0]="Info",n[n.Warning=1]="Warning",n[n.Error=2]="Error",n[n.Attention=3]="Attention",n[n.Debug=4]="Debug",n[n.Splitter=5]="Splitter"}(n||(n={})),function(n){n[n.WebSocket=0]="WebSocket",n[n.System=1]="System",n[n.User=2]="User",n[n.Store=3]="Store",n[n.Parse=4]="Parse",n[n.Debug=5]="Debug",n[n.Send=6]="Send",n[n.Received=7]="Received"}(t||(t={}));var c="color: inherit;",f="#3878a8",a={0:"#4aa838",1:"#d19520",2:"#a83838",3:"#a89238",4:"#474d95",5:"#797979"},s={0:"#4aa838",1:"#4aa838",2:"#4aa838",3:"#4aa838",4:"#4aa838",5:"#4aa838",6:"#284071",7:"#71284a"},l={0:"WebSocket",1:"System",2:"User",3:"Store",4:"Parse",5:"Debug",6:"◀ Out",7:"▶ In "},h=function(){function t(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.enabled=!1}var i,r,e;return i=t,r=[{key:"color",value:function(n){return"".concat("color:#fff;padding:2px 4px;margin-right:8px;border-radius:2px;","background:").concat(n,";")}},{key:"enable",value:function(){this.enabled=!0}},{key:"message",value:function(t,i,r){var e,u=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;if(this.enabled&&window.console&&window.console.log)if(r instanceof Error&&(r=o(r)),window.document.documentMode)console.log("Messages: ".concat(l[i],": ").concat(r));else{var h=[this.color(f)],d="%cMessages",v=l[i],y=this.color(t===n.Info?s[i]:a[t]);v&&(h.push(y),d+="%c".concat(v)),u&&(h.push(y),d+="%c".concat(u)),d+="%c".concat(r),h.push(c),(e=window.console).log.apply(e,[d].concat(h))}}},{key:"info",value:function(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(n.Info,t,i,r)}},{key:"warning",value:function(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(n.Warning,t,i,r)}},{key:"error",value:function(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(n.Error,t,i,r)}},{key:"attention",value:function(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(n.Attention,t,i,r)}},{key:"debug",value:function(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(n.Debug,t,i,r)}}],r&&u(i.prototype,r),e&&u(i,e),t}(),d=new h;function v(n){for(var t=[],i=0,r=0;i<n.length;){var e=n.charCodeAt(i++);if(e<128)t[r++]=String.fromCharCode(e);else if(e>191&&e<224){var o=n.charCodeAt(i++);t[r++]=String.fromCharCode((31&e)<<6|63&o)}else if(e>239&&e<365){var u=((7&e)<<18|(63&n.charCodeAt(i++))<<12|(63&n.charCodeAt(i++))<<6|63&n.charCodeAt(i++))-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(1023&u))}else{var c=n.charCodeAt(i++),f=n.charCodeAt(i++);t[r++]=String.fromCharCode((15&e)<<12|(63&c)<<6|63&f)}}return t.join("")}function y(n){for(var t=BigInt(0),i=n.length;i>0;i--)t=t*BigInt(256)+BigInt(n.charCodeAt(i-1));return t}function p(n){for(var t=n,i="",r=0;r<8;r++)i+=String.fromCharCode(t%256),t=t/256|0;return i}function m(n){for(var t="",i=0;i<n.length;i++){var r=15&n.charCodeAt(i),e=n.charCodeAt(i)>>4&15;t+=e<10?String.fromCharCode(e+48):String.fromCharCode(e+55),t+=r<10?String.fromCharCode(r+48):String.fromCharCode(r+55)}return t}function b(n){if(n.length%2)return"";for(var t="",i=0;i+1<n.length;i+=2){var r=S(n.charCodeAt(i+0)),e=S(n.charCodeAt(i+1));t+=String.fromCharCode(16*r+e)}return t}function w(n){for(var t="",i=n.length-1;i>=0;i--){var r=15&n.charCodeAt(i),e=n.charCodeAt(i)>>4&15;t+=e<10?String.fromCharCode(e+48):String.fromCharCode(e+55),t+=r<10?String.fromCharCode(r+48):String.fromCharCode(r+55)}return t}function _(n,t){return function(n,t){for(var i=Math.min(n.length,t.length);i>0;i--){if(n.charCodeAt(i-1)<t.charCodeAt(i-1))return-1;if(n.charCodeAt(i-1)>t.charCodeAt(i-1))return 1}return n.length<t.length?-1:n.length>t.length?1:0}(b(n),b(t))}function g(n){for(var t=0,i=0;i<n.length;i++)t=256*t+n.charCodeAt(n.length-i-1);return new Date(t/1e4-116444736e5)}function S(n){return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n>=48&&n<=57?n-48:0}function T(n){for(var t=[],i=0,r=0;r<n.length;r++){var e=n.charCodeAt(r);e<128?t[i++]=String.fromCharCode(e):e<2048?(t[i++]=String.fromCharCode(e>>6|192),t[i++]=String.fromCharCode(63&e|128)):55296==(64512&e)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(e=65536+((1023&e)<<10)+(1023&n.charCodeAt(++r)),t[i++]=String.fromCharCode(e>>18|240),t[i++]=String.fromCharCode(e>>12&63|128),t[i++]=String.fromCharCode(e>>6&63|128),t[i++]=String.fromCharCode(63&e|128)):(t[i++]=String.fromCharCode(e>>12|224),t[i++]=String.fromCharCode(e>>6&63|128),t[i++]=String.fromCharCode(63&e|128))}return t.join("")}function j(n){return function(n){for(var t=0,i=n.length-1;i>=0;i--)t=256*t+n.charCodeAt(i);return t}(b(n))}function k(n){for(var t="0000000000000000"+n.toString(16).toUpperCase(),i="",r=(t=t.substring(t.length-16)).length;r>0;r-=2)i+=t.substring(r-2,r);return i}function E(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var A={},O=0;function x(n){var t=this,i=n.commandType,r=n.isDefault,e=void 0!==r&&r,o=n.callback,u=n.id;return i in A||(A[i]={}),e?(A[i].defaultCallback={run:o,"delete":function(){E(this,t),delete A[i].defaultCallback}.bind(this)},null):(O++,u=u||p(O),A[i][u]={run:o,"delete":function(){E(this,t),delete A[i][u]}.bind(this)},u)}function C(n){var t=this,i=n.commandType,r=n.id;return new Promise(function(n,e){if(E(this,t),i in A){var o=A[i];return r&&r in o?void n(o[r]):!r&&"defaultCallback"in o?void n(o.defaultCallback):void e()}e()}.bind(this))}function I(n){var t=n.parentNode,i=n.text,r=n.type,e=n.timeout,o=n.permanent,u=void 0!==o&&o;if(t){e=e||5e3;var c=document.createElement("div"),f="alert";switch(r){case"info":default:f+=" alert_info";break;case"secondary":f+=" alert_secondary";break;case"success":f+=" alert_success";break;case"warning":f+=" alert_warning";break;case"danger":f+=" alert_danger"}c.className=f,c.innerHTML=i,u||setTimeout((function(){c&&c.parentNode&&c.parentNode.removeChild(c)}),e),t.firstElementChild?t.insertBefore(c,t.firstElementChild):t.appendChild(c)}}var R=["zip","txt","log","mqh","ex5","mq5","mq4","ex4","mt5","set","tpl","cl","py","sqlite","csv","ipynb","gif","png","jpg","jpeg"],M="\0\0\0\0\0\0\0\0",U="0000000000000000",B="6F49000000000000",D={u:6,v:41,_:51,g:52,S:53,T:54,j:55,k:56,A:57,O:58,C:59,I:62,R:63,M:64,U:44,B:68,D:67,N:73,P:75,L:76,q:77,$:78,W:81,F:82,G:83,H:84,V:85,Y:86,J:87,K:88,X:89,Z:90,nn:91,tn:92,rn:93,on:94,un:95,cn:97,fn:98,an:99,sn:109,ln:110,hn:111,dn:112,vn:113,yn:125,pn:127,mn:128},N={bn:-1,wn:-2,_n:-3,gn:-4,Sn:-5,Tn:-6,jn:-7,kn:-8,En:-9,An:-10,On:-11,xn:-12,Cn:-13,In:-14,Rn:-15,Mn:-16,Un:1,Bn:2,Dn:3,Nn:4},P=0,L=1,q=2,$=3,z=1,W=2,F=3,G=4,H=5,Q=6,V=6,Y=7,J=8,K=0,X=1,Z=2,nn=3,tn=4,rn=5,en=6,on=7,un=8,cn=128,fn={Pn:0,Ln:1,qn:2,$n:4},an=1,sn=3,ln=7,hn=28261,dn=24938,vn=26746,yn=28523,pn={en:28261,ru:30066,de:25956,ja:24938,ar:29281,zh:26746,tr:29300,pt:29808,es:29541,it:29801,ko:28523,fr:29286,none:0},mn=0,bn=1,wn=2,_n=1,gn=0,Sn=1,Tn=2,jn=3,kn=20,En=0,An=25,On=48,xn=40,Cn=40,In=295,Rn=512,Mn=undefined;function Un(n){var t="function"==typeof Map?new Map:undefined;return Un=function(n){if(null===n||(i=n,-1===Function.toString.call(i).indexOf("[native code]")))return n;var i;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(n))return t.get(n);t.set(n,r)}function r(){return Bn(n,arguments,zn(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Pn(r,n)},Un(n)}function Bn(n,t,i){return Bn=$n()?Reflect.construct:function(n,t,i){var r=[null];r.push.apply(r,t);var e=new(Function.bind.apply(n,r));return i&&Pn(e,i.prototype),e},Bn.apply(null,arguments)}function Dn(n){return function(n){if(Array.isArray(n))return Qn(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||Hn(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Pn(n,t)}function Pn(n,t){return Pn=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Pn(n,t)}function Ln(n){var t=$n();return function(){var i,r=zn(n);if(t){var e=zn(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return qn(this,i)}}function qn(n,t){if(t&&("object"===Vn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function $n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}function zn(n){return zn=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},zn(n)}function Wn(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function Fn(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Gn(n,t,i){return t&&Fn(n.prototype,t),i&&Fn(n,i),n}function Hn(n,t){if(n){if("string"==typeof n)return Qn(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);return"Object"===i&&n.constructor&&(i=n.constructor.name),"Map"===i||"Set"===i?Array.from(n):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Qn(n,t):void 0}}function Qn(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Vn(n){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vn(n)}function Yn(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Jn(){}var Kn,Xn=function(n){return Yn(this,Mn),n}.bind(undefined);function Zn(n){return n()}function nt(){return Object.create(null)}function tt(n){n.forEach(Zn)}function it(n){return"function"==typeof n}function rt(n,t){return n!=n?t==t:n!==t||n&&"object"===Vn(n)||"function"==typeof n}function et(n,t){return Kn||(Kn=document.createElement("a")),Kn.href=t,n===Kn.href}function ot(n){return 0===Object.keys(n).length}function ut(n){var t=this;if(null==n)return Jn;for(var i=arguments.length,r=new Array(i>1?i-1:0),e=1;e<i;e++)r[e-1]=arguments[e];var o=n.subscribe.apply(n,r);return o.unsubscribe?function(){return Yn(this,t),o.unsubscribe()}.bind(this):o}function ct(n){var t,i=this;return ut(n,function(n){return Yn(this,i),t=n}.bind(this))(),t}function ft(n,t,i){n.$$.on_destroy.push(ut(t,i))}function at(n,t,i,r){if(n){var e=st(n,t,i,r);return n[0](e)}}function st(n,t,i,r){return n[1]&&r?function(n,t){for(var i in t)n[i]=t[i];return n}(i.ctx.slice(),n[1](r(t))):i.ctx}function lt(n,t,i,r){if(n[2]&&r){var e=n[2](r(i));if(t.dirty===undefined)return e;if("object"===Vn(e)){for(var o=[],u=Math.max(t.dirty.length,e.length),c=0;c<u;c+=1)o[c]=t.dirty[c]|e[c];return o}return t.dirty|e}return t.dirty}function ht(n,t,i,r,e,o){if(e){var u=st(t,i,r,o);n.p(u,e)}}function dt(n){if(n.ctx.length>32){for(var t=[],i=n.ctx.length/32,r=0;r<i;r++)t[r]=-1;return t}return-1}function vt(n,t,i){return n.set(i),t}(function(n,t){return Yn(this,Mn),Object.prototype.hasOwnProperty.call(n,t)}).bind(undefined);var yt="undefined"!=typeof window,pt=yt?function(){return Yn(this,Mn),window.performance.now()}.bind(undefined):function(){return Yn(this,Mn),Date.now()}.bind(undefined),mt=yt?function(n){return Yn(this,Mn),requestAnimationFrame(n)}.bind(undefined):Jn;var bt=new Set;function wt(n){var t=this;bt.forEach(function(i){Yn(this,t),i.c(n)||(bt["delete"](i),i.f())}.bind(this)),0!==bt.size&&mt(wt)}function _t(n){var t,i=this;return 0===bt.size&&mt(wt),{promise:new Promise(function(r){Yn(this,i),bt.add(t={c:n,f:r})}.bind(this)),abort:function(){bt["delete"](t)}}}var gt;function St(){!0}function Tt(){!1}function jt(n,t){n.appendChild(t)}function kt(n,t,i){var r=Et(n);if(!r.getElementById(t)){var e=Rt("style");e.id=t,e.textContent=i,Ot(r,e)}}function Et(n){if(!n)return document;var t=n.getRootNode?n.getRootNode():n.ownerDocument;return t&&t.host?t:n.ownerDocument}function At(n){var t=Rt("style");return Ot(Et(n),t),t.sheet}function Ot(n,t){jt(n.head||n,t)}function xt(n,t,i){n.insertBefore(t,i||null)}function Ct(n){n.parentNode.removeChild(n)}function It(n,t){for(var i=0;i<n.length;i+=1)n[i]&&n[i].d(t)}function Rt(n){return document.createElement(n)}function Mt(n){return document.createTextNode(n)}function Ut(){return Mt(" ")}function Bt(){return Mt("")}function Dt(n,t,i,r){var e=this;return n.addEventListener(t,i,r),function(){return Yn(this,e),n.removeEventListener(t,i,r)}.bind(this)}function Nt(n){return function(t){return t.preventDefault(),n.call(this,t)}}function Pt(n,t,i){null==i?n.removeAttribute(t):n.getAttribute(t)!==i&&n.setAttribute(t,i)}function Lt(n){return Array.from(n.childNodes)}function qt(n,t){t=""+t,n.wholeText!==t&&(n.data=t)}function $t(n,t){n.value=null==t?"":t}function zt(n,t,i,r){null===i?n.style.removeProperty(t):n.style.setProperty(t,i,r?"important":"")}function Wt(n,t){for(var i=0;i<n.options.length;i+=1){var r=n.options[i];if(r.__value===t)return void(r.selected=!0)}n.selectedIndex=-1}function Ft(){if(gt===undefined){gt=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(n){gt=!0}}return gt}function Gt(n,t){var i=arguments.length>2&&arguments[2]!==undefined&&arguments[2],r=document.createEvent("CustomEvent");return r.initCustomEvent(n,i,!1,t),r}var Ht=function(){function n(){Wn(this,n),this.e=this.n=null}return Gn(n,[{key:"c",value:function(n){this.h(n)}},{key:"m",value:function(n,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this.e||(this.e=Rt(t.nodeName),this.t=t,this.c(n)),this.i(i)}},{key:"h",value:function(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}},{key:"i",value:function(n){for(var t=0;t<this.n.length;t+=1)xt(this.t,this.n[t],n)}},{key:"p",value:function(n){this.d(),this.h(n),this.i(this.a)}},{key:"d",value:function(){this.n.forEach(Ct)}}]),n}();var Qt,Vt=new Map,Yt=0;function Jt(n){for(var t=5381,i=n.length;i--;)t=(t<<5)-t^n.charCodeAt(i);return t>>>0}function Kt(n,t){var i={stylesheet:At(t),rules:{}};return Vt.set(n,i),i}function Xt(n,t,i,r,e,o,u){for(var c=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0,f=16.666/r,a="{\n",s=0;s<=1;s+=f){var l=t+(i-t)*o(s);a+=100*s+"%{".concat(u(l,1-l),"}\n")}var h=a+"100% {".concat(u(i,1-i),"}\n}"),d="__svelte_".concat(Jt(h),"_").concat(c),v=Et(n),y=Vt.get(v)||Kt(v,n),p=y.stylesheet,m=y.rules;m[d]||(m[d]=!0,p.insertRule("@keyframes ".concat(d," ").concat(h),p.cssRules.length));var b=n.style.animation||"";return n.style.animation="".concat(b?"".concat(b,", "):"").concat(d," ").concat(r,"ms linear ").concat(e,"ms 1 both"),Yt+=1,d}function Zt(n,t){var i=this,r=(n.style.animation||"").split(", "),e=r.filter(t?function(n){return Yn(this,i),n.indexOf(t)<0}.bind(this):function(n){return Yn(this,i),-1===n.indexOf("__svelte")}.bind(this)),o=r.length-e.length;o&&(n.style.animation=e.join(", "),(Yt-=o)||function(){var n=this;mt(function(){var t=this;Yn(this,n),Yt||(Vt.forEach(function(n){Yn(this,t);for(var i=n.stylesheet,r=i.cssRules.length;r--;)i.deleteRule(r);n.rules={}}.bind(this)),Vt.clear())}.bind(this))}())}function ni(n){Qt=n}function ti(){if(!Qt)throw new Error("Function called outside component initialization");return Qt}function ii(n){ti().$$.on_mount.push(n)}function ri(){var n=this,t=ti();return function(i,r){var e=this;Yn(this,n);var o=t.$$.callbacks[i];if(o){var u=Gt(i,r);o.slice().forEach(function(n){Yn(this,e),n.call(t,u)}.bind(this))}}.bind(this)}function ei(n,t){var i=this,r=n.$$.callbacks[t.type];r&&r.slice().forEach(function(n){return Yn(this,i),n.call(this,t)}.bind(this))}var oi=[],ui=[],ci=[],fi=[],ai=Promise.resolve(),si=!1;function li(){si||(si=!0,ai.then(bi))}function hi(){return li(),ai}function di(n){ci.push(n)}function vi(n){fi.push(n)}var yi,pi=new Set,mi=0;function bi(){var n=Qt;do{for(;mi<oi.length;){var t=oi[mi];mi++,ni(t),wi(t.$$)}for(ni(null),oi.length=0,mi=0;ui.length;)ui.pop()();for(var i=0;i<ci.length;i+=1){var r=ci[i];pi.has(r)||(pi.add(r),r())}ci.length=0}while(oi.length);for(;fi.length;)fi.pop()();si=!1,pi.clear(),ni(n)}function wi(n){if(null!==n.fragment){n.update(),tt(n.before_update);var t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(di)}}function _i(){var n=this;return yi||(yi=Promise.resolve()).then(function(){Yn(this,n),yi=null}.bind(this)),yi}function gi(n,t,i){n.dispatchEvent(Gt("".concat(t?"intro":"outro").concat(i)))}var Si,Ti=new Set;function ji(){Si={r:0,c:[],p:Si}}function ki(){Si.r||tt(Si.c),Si=Si.p}function Ei(n,t){n&&n.i&&(Ti["delete"](n),n.i(t))}function Ai(n,t,i,r){var e=this;if(n&&n.o){if(Ti.has(n))return;Ti.add(n),Si.c.push(function(){Yn(this,e),Ti["delete"](n),r&&(i&&n.d(1),r())}.bind(this)),n.o(t)}}var Oi={duration:0};function xi(n,t,i,r){var e=t(n,i),o=r?0:1,u=null,c=null,f=null;function a(){f&&Zt(n,f)}function s(n,t){var i=n.b-o;return t*=Math.abs(i),{a:o,b:n.b,d:i,duration:t,start:n.start,end:n.start+t,group:n.group}}function l(t){var i=this,r=e||Oi,l=r.delay,h=void 0===l?0:l,d=r.duration,v=void 0===d?300:d,y=r.easing,p=void 0===y?Xn:y,m=r.tick,b=void 0===m?Jn:m,w=r.css,_={start:pt()+h,b:t};t||(_.group=Si,Si.r+=1),u||c?c=_:(w&&(a(),f=Xt(n,o,t,v,h,p,w)),t&&b(0,1),u=s(_,v),di(function(){return Yn(this,i),gi(n,t,"start")}.bind(this)),_t(function(t){if(Yn(this,i),c&&t>c.start&&(u=s(c,v),c=null,gi(n,u.b,"start"),w&&(a(),f=Xt(n,o,u.b,u.duration,0,p,e.css))),u)if(t>=u.end)b(o=u.b,1-o),gi(n,u.b,"end"),c||(u.b?a():--u.group.r||tt(u.group.c)),u=null;else if(t>=u.start){var r=t-u.start;o=u.a+u.d*p(r/u.duration),b(o,1-o)}return!(!u&&!c)}.bind(this)))}return{run:function(n){var t=this;it(e)?_i().then(function(){Yn(this,t),e=e(),l(n)}.bind(this)):l(n)},end:function(){a(),u=c=null}}}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Ci(n,t){var i=this;Ai(n,1,1,function(){Yn(this,i),t["delete"](n.key)}.bind(this))}function Ii(n,t,i,r,e,o,u,c,f,a,s,l){for(var h=n.length,d=o.length,v=h,y={};v--;)y[n[v].key]=v;var p=[],m=new Map,b=new Map;for(v=d;v--;){var w=l(e,o,v),_=i(w),g=u.get(_);g?r&&g.p(w,t):(g=a(_,w)).c(),m.set(_,p[v]=g),_ in y&&b.set(_,Math.abs(v-y[_]))}var S=new Set,T=new Set;function j(n){Ei(n,1),n.m(c,s),u.set(n.key,n),s=n.first,d--}for(;h&&d;){var k=p[d-1],E=n[h-1],A=k.key,O=E.key;k===E?(s=k.first,h--,d--):m.has(O)?!u.has(A)||S.has(A)?j(k):T.has(O)?h--:b.get(A)>b.get(O)?(T.add(A),j(k)):(S.add(O),h--):(f(E,u),h--)}for(;h--;){var x=n[h];m.has(x.key)||f(x,u)}for(;d;)j(p[d-1]);return p}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);(function(){return Yn(this,Mn),""}).bind(undefined);function Ri(n,t,i){var r=n.$$.props[t];r!==undefined&&(n.$$.bound[r]=i,i(n.$$.ctx[r]))}function Mi(n){n&&n.c()}function Ui(n,t,i,r){var e=this,o=n.$$,u=o.fragment,c=o.on_mount,f=o.on_destroy,a=o.after_update;u&&u.m(t,i),r||di(function(){Yn(this,e);var t=c.map(Zn).filter(it);f?f.push.apply(f,Dn(t)):tt(t),n.$$.on_mount=[]}.bind(this)),a.forEach(di)}function Bi(n,t){var i=n.$$;null!==i.fragment&&(tt(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function Di(n,t){-1===n.$$.dirty[0]&&(oi.push(n),li(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function Ni(n,t,i,r,e,o,u){var c=this,f=arguments.length>7&&arguments[7]!==undefined?arguments[7]:[-1],a=Qt;ni(n);var s=n.$$={fragment:null,ctx:null,props:o,update:Jn,not_equal:e,bound:nt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:nt(),dirty:f,skip_bound:!1,root:t.target||a.$$.root};u&&u(s.root);var l=!1;if(s.ctx=i?i(n,t.props||{},function(t,i){Yn(this,c);var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?undefined:arguments[2]:i;return s.ctx&&e(s.ctx[t],s.ctx[t]=r)&&(!s.skip_bound&&s.bound[t]&&s.bound[t](r),l&&Di(n,t)),i}.bind(this)):[],s.update(),l=!0,tt(s.before_update),s.fragment=!!r&&r(s.ctx),t.target){if(t.hydrate){St();var h=Lt(t.target);s.fragment&&s.fragment.l(h),h.forEach(Ct)}else s.fragment&&s.fragment.c();t.intro&&Ei(n.$$.fragment),Ui(n,t.target,t.anchor,t.customElement),Tt(),bi()}ni(a)}"function"==typeof HTMLElement&&HTMLElement;var Pi=function(){function n(){Wn(this,n)}return Gn(n,[{key:"$destroy",value:function(){Bi(this,1),this.$destroy=Jn}},{key:"$on",value:function(n,t){var i=this,r=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return r.push(t),function(){Yn(this,i);var n=r.indexOf(t);-1!==n&&r.splice(n,1)}.bind(this)}},{key:"$set",value:function(n){this.$$set&&!ot(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}]),n}();function Li(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function qi(n,t){var i="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!i){if(Array.isArray(n)||(i=function(n,t){if(!n)return;if("string"==typeof n)return $i(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $i(n,t)}(n))||t&&n&&"number"==typeof n.length){i&&(n=i);var r=0,e=function(){};return{s:e,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){i=i.call(n)},n:function(){var n=i.next();return u=n.done,n},e:function(n){c=!0,o=n},f:function(){try{u||null==i["return"]||i["return"]()}finally{if(c)throw o}}}}function $i(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}var zi=[];function Wi(n){var t,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Jn,r=new Set;function e(i){if(rt(n,i)&&(n=i,t)){var e,o=!zi.length,u=qi(r);try{for(u.s();!(e=u.n()).done;){var c=e.value;c[1](),zi.push(c,n)}}catch(a){u.e(a)}finally{u.f()}if(o){for(var f=0;f<zi.length;f+=2)zi[f][0](zi[f+1]);zi.length=0}}}function o(t){e(t(n))}function u(o){var u=this,c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Jn,f=[o,c];return r.add(f),1===r.size&&(t=i(e)||Jn),o(n),function(){Li(this,u),r["delete"](f),0===r.size&&(t(),t=null)}.bind(this)}return{set:e,update:o,subscribe:u}}function Fi(n,t,i){var r,e,o=this,u=!Array.isArray(n),c=u?[n]:n,f=t.length<2;return r=i,e=function(n){var i=this;Li(this,o);var r=!1,e=[],a=0,s=Jn,l=function(){if(Li(this,i),!a){s();var r=t(u?e[0]:e,n);f?n(r):s=it(r)?r:Jn}}.bind(this),h=c.map(function(n,t){var o=this;return Li(this,i),ut(n,function(n){Li(this,o),e[t]=n,a&=~(1<<t),r&&l()}.bind(this),function(){Li(this,o),a|=1<<t}.bind(this))}.bind(this));return r=!0,l(),function(){tt(h),s()}}.bind(this),{subscribe:Wi(r,e).subscribe}}var Gi=undefined;function Hi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Qi=Wi(undefined),Vi=Wi([]),Yi=Wi(""),Ji={};function Ki(n){Ji[n]||(Ji[n]={text:"",files:[],reply:undefined})}function Xi(n){return Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Xi(n)}Qi.subscribe(function(n){Hi(this,Gi);var t=ct(yb);t&&(Ki(t.chatId),Ji[t.chatId].reply=n)}.bind(undefined)),Vi.subscribe(function(n){Hi(this,Gi);var t=ct(yb);t&&(Ki(t.chatId),Ji[t.chatId].files=n)}.bind(undefined)),Yi.subscribe(function(n){Hi(this,Gi);var t=ct(yb);t&&(Ki(t.chatId),Ji[t.chatId].text=n)}.bind(undefined)),window.localizationList=window.localizationList||{},window.localizationInited=!1;window.mqGlobal?window.mqGlobal.Language:window.currentLanguage;var Zi={};function nr(n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(window.localizationList[t]=n[t])}function tr(n){if(window.localizationInited||ir(),!n)return window.localizationList;var t,i=window.localizationList;if(n in Zi)t=Zi[n];else{for(var r=n.split("."),e=0,o=r.length;e<o&&r[e]in i;e++)i=i[r[e]];if("string"==typeof i&&(t=i),!t)return"["+n+"]";Zi[n]=t}for(var u=0,c=arguments.length<=1?0:arguments.length-1;u<c;u++)t=t.replace("{"+u+"}",u+1<1||arguments.length<=u+1?undefined:arguments[u+1]);return t}function ir(){var n=document.body.querySelectorAll('script[type="application/json"]');window.localizationInited=!0;for(var t=0,i=n.length;t<i;t++){var r=n[t];if("translate"===r.getAttribute("data-type")){var e=r.innerHTML;if(e){try{e=JSON.parse(e)}catch(o){e=null,console.warn(o)}e&&"object"===Xi(e)&&nr(e)}}}}function rr(n){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];if(!n)return null;var i=n.split(".").pop().toLowerCase();return t?i.toLowerCase():i}function er(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function or(n){return function(n){if(Array.isArray(n))return ur(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"==typeof n)return ur(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ur(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ur(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function cr(n){return cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},cr(n)}function fr(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ar(n){var t=this,i=n.tag,r=void 0===i?"div":i,e=n.attributes,o=void 0===e?{}:e,u=n.classList,c=void 0===u?[]:u,f=n.listeners,a=void 0===f?{}:f,s=n.properties,l=void 0===s?{}:s,h=n.children,d=void 0===h?null:h,v=n.fzEvent,y=void 0===v?null:v,p=n.fzEventAction,m=void 0===p?"click":p,b=r instanceof Node?r:document.createElement(r);if(c&&c.forEach(function(n){fr(this,t),n&&b.classList.add(n)}.bind(this)),Object.keys(o).forEach(function(n){fr(this,t),b.setAttribute(n,o[n])}.bind(this)),Object.keys(l).forEach(function(n){fr(this,t),b[n]=l[n]}.bind(this)),Object.keys(a).forEach(function(n){fr(this,t),b.addEventListener(n,a[n])}.bind(this)),y&&b.addEventListener(m,function(){fr(this,t),"object"===cr(y)?window.fz("event",y):window.fz("track",y)}.bind(this)),!d)return b;if("string"==typeof d)b.innerHTML=d;else if(d instanceof Node)b.appendChild(d);else for(var w=0,_=d.length;w<_;w++){var g=d[w];g&&(g instanceof Node||(g=ar(g)),b.appendChild(g))}return b}function sr(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function lr(n){return function(n){if(Array.isArray(n))return hr(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"==typeof n)return hr(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return hr(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function dr(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function vr(n,t,i){var e=this;return new Promise(function(o,u){if(dr(this,e),n&&n.length){var c=[],f=[];!function e(){var u=this;if(n&&n.length&&t){Array.isArray(n)||(n=Array.prototype.slice.call(n));var a=n[0];if(a){n.shift();var s=rr(a.name);s&&~R.indexOf(s)?function(n,t){var i=this;return new Promise(function(r,e){var o=this;if(l_(this,i),0!==parseInt(n,16))if(n)if(t){var u=b(n),c=x({commandType:D.j,callback:function(n,t){l_(this,o),n?e(n):r(t)}.bind(this)});s_(t).then(function(n){l_(this,o);var t=n.cipherKey,i=n.hash,r=n.fileSize,e=n.mime,f=n.fileName;!function(n){gw=n}(n.file),Ow(D.j,[u,{Uint8:W},t,i,{Uint32:r},{String16:e},{String16:f}],null,c)}.bind(this))["catch"](function(n){l_(this,o),e(n)}.bind(this))}else e("File is empty");else e("Chat id is empty");else e("Chat id is zero")}.bind(this))}(t,a).then(function(n){dr(this,u),i&&i(n.messageId),c.push(n.messageId),e()}.bind(this))["catch"](function(n){dr(this,u),f.push(n),e()}.bind(this)):(f.push("".concat(r("invalidType"),": ").concat(a.name)),e())}else o({uploaded:c,errors:f})}else o({uploaded:c,errors:f})}()}else u("File list is empty")}.bind(this))}function yr(n){var t="other";switch(n){case"txt":case"log":t="txt";break;case"mq4":case"mq5":case"set":case"tpl":case"mqh":case"ex4":case"ex5":t="mql";break;case"gif":case"jpg":case"png":case"jpeg":case"webp":t="media";break;case"zip":case"7z":case"rar":t="archive";break;default:t="other"}return t}function pr(n){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},pr(n)}function mr(n,t){return mr=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},mr(n,t)}function br(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=gr(n);if(t){var e=gr(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return wr(this,i)}}function wr(n,t){if(t&&("object"===pr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _r(n)}function _r(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function gr(n){return gr=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},gr(n)}function Sr(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Tr(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Tr(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tr(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function jr(n){var t,i,r,e,o,u,c,f,a=n[0].fileName+"";return{c:function(){t=Rt("div"),i=Rt("a"),r=Rt("i"),e=Ut(),o=Rt("span"),u=Mt(a),Pt(r,"class","icons-chat icons-chat_"+n[1]),Pt(o,"class","chat-attach__name"),Pt(i,"href",c=n[0].url),Pt(i,"target","_blank"),Pt(i,"title",f=n[0].fileName+" ("+n[0].fileSize+")"),Pt(t,"class","chat-attach")},m:function(n,c){xt(n,t,c),jt(t,i),jt(i,r),jt(i,e),jt(i,o),jt(o,u)},p:function(n,t){var r=Sr(t,1)[0];1&r&&a!==(a=n[0].fileName+"")&&qt(u,a),1&r&&c!==(c=n[0].url)&&Pt(i,"href",c),1&r&&f!==(f=n[0].fileName+" ("+n[0].fileSize+")")&&Pt(i,"title",f)},i:Jn,o:Jn,d:function(n){n&&Ct(t)}}}function kr(n,t,i){var r=this,e=t.data,o=yr(rr(e.fileName,!0)||"");return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,r),"data"in n&&i(0,e=n.data)}.bind(this),[e,o]}var Er=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&mr(n,t)}(i,n);var t=br(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(_r(r=t.call(this)),n,kr,jr,rt,{data:0}),r}return i}(Pi),Ar=null,Or=document.createElement("span"),xr={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var Cr in xr)Object.prototype.hasOwnProperty.call(xr,Cr)&&Or.style[Cr]!==undefined&&(Ar=xr[Cr]);for(var Ir=navigator.userAgent,Rr=navigator.appVersion,Mr=Ir.match(/Android/i),Ur=Ir.match(/BlackBerry/i),Br=Ir.match(/iPhone|iPad|iPod/i),Dr=Ir.match(/Opera Mini/i),Nr=Ir.match(/IEMobile/i),Pr=(Ir.indexOf("MSIE"),Ir.indexOf("Gecko/"),!!document.documentMode),Lr=Mr||Ur||Br||Dr||Nr,qr="",$r=[{name:"Windows 10",regex:/(Windows 10.0|Windows NT 10.0)/},{name:"Windows 8.1",regex:/(Windows 8.1|Windows NT 6.3)/},{name:"Windows 8",regex:/(Windows 8|Windows NT 6.2)/},{name:"Windows 7",regex:/(Windows 7|Windows NT 6.1)/},{name:"Windows Vista",regex:/Windows NT 6.0/},{name:"Windows Server 2003",regex:/Windows NT 5.2/},{name:"Windows XP",regex:/(Windows NT 5.1|Windows XP)/},{name:"Windows 2000",regex:/(Windows NT 5.0|Windows 2000)/},{name:"Windows ME",regex:/(Win 9x 4.90|Windows ME)/},{name:"Windows 98",regex:/(Windows 98|Win98)/},{name:"Windows 95",regex:/(Windows 95|Win95|Windows_95)/},{name:"Windows NT 4.0",regex:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{name:"Windows CE",regex:/Windows CE/},{name:"Windows 3.11",regex:/Win16/},{name:"Android",regex:/Android/},{name:"Open BSD",regex:/OpenBSD/},{name:"Sun OS",regex:/SunOS/},{name:"Chrome OS",regex:/CrOS/},{name:"Linux",regex:/(Linux|X11(?!.*CrOS))/},{name:"iOS",regex:/(iPhone|iPad|iPod)/},{name:"Mac OS X",regex:/Mac OS X/},{name:"Mac OS",regex:/(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{name:"QNX",regex:/QNX/},{name:"UNIX",regex:/UNIX/},{name:"BeOS",regex:/BeOS/},{name:"OS/2",regex:/OS\/2/},{name:"Search Bot",regex:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],zr=0,Wr=$r.length;zr<Wr;zr++){var Fr=$r[zr];if(Fr.regex.test(Ir)){qr=Fr.name;break}}var Gr,Hr,Qr,Vr="",Yr=[];switch(/Windows/.test(qr)&&((Yr=/Windows (.*)/.exec(qr))&&Yr.length&&Yr.length>1&&(Vr=Yr[1]),qr="Windows"),qr){case"Mac OS":case"Mac OS X":case"Android":(Yr=/(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([._\d]+)/.exec(Ir))&&Yr.length&&Yr.length>1&&(Vr=Yr[1].replace(/_/g,"."));break;case"iOS":(Yr=/OS (\d+)_(\d+)_?(\d+)?/.exec(Rr))&&Yr.length&&Yr.length>2&&(Vr=Yr[1]+"."+Yr[2]+"."+(Yr.length>3?Yr[3]:0))}var Jr,Kr,Xr,Zr,ne,te,ie,re,ee,oe,ue,ce,fe,ae,se,le,he,de,ve,ye,pe=!1,me={},be=null,we={},_e=0,ge=null,Se=null,Te=null,je=null,ke=null,Ee=null,Ae=null,Oe=null,xe=!1,Ce=Ar;function Ie(){me.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,me.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function Re(){Ie(),Gr=document.createElement("div"),document.body.appendChild(Gr),Gr.className="light-box",Lr&&Gr.classList.add("light-box_mobile");var n=document.createElement("div");n.className="light-box__shadow",Gr.appendChild(n),n.addEventListener("click",ze),n.addEventListener("touchstart",ze),(Hr=document.createElement("div")).className="light-box__content",Gr.appendChild(Hr),(Ae=document.createElement("div")).className="light-box__attachment-area",Hr.appendChild(Ae),(Qr=document.createElement("div")).className="light-box__footer",Hr.appendChild(Qr);var t=document.createElement("div");t.className="light-box__close",t.addEventListener("click",ze),t.addEventListener("touchstart",ze),t.innerHTML='<i class="icons-lightbox icons-lightbox_close"></i>',t.setAttribute("title",tr("lightBox.close")),Qr.appendChild(t),(Oe=document.createElement("div")).className="light-box__show-full",Qr.appendChild(Oe),Oe.addEventListener("click",Me),Oe.addEventListener("touchstart",Me),Oe.innerHTML='<i class="icons-lightbox icons-lightbox_uncollapse"></i>',Oe.setAttribute("title",tr("lightBox.showOriginal")),(Se=document.createElement("a")).className="light-box__save",Se.setAttribute("target","_blank"),Se.innerHTML='<i class="icons-lightbox icons-lightbox_save"></i>',Se.setAttribute("title",tr("lightBox.save")),Qr.appendChild(Se),Ee&&((Kr=document.createElement("div")).className="light-box__prev",Kr.innerHTML='<i class="icons-lightbox icons-lightbox_prev"></i>',Kr.addEventListener("click",$e),Kr.addEventListener("touchstart",$e),Kr.setAttribute("title",tr("lightBox.previous")),Hr.appendChild(Kr),(Jr=document.createElement("div")).className="light-box__next",Jr.innerHTML='<i class="icons-lightbox icons-lightbox_next"></i>',Jr.addEventListener("click",qe),Jr.addEventListener("touchstart",qe),Jr.setAttribute("title",tr("lightBox.next")),Hr.appendChild(Jr)),Xr=window.pageYOffset||document.documentElement.scrollTop,document.body.classList.add("light-box-showed"),document.body.style.top="-"+Xr+"px",Hr.style.transition="none",Hr.style.width="300px",Hr.style.height="300px",Hr.style.marginTop="-150px",Hr.style.marginLeft="-150px",Hr.style.transition="all 0.3s ease-out",window.addEventListener("resize",Le),document.addEventListener("keydown",We)}function Me(n){function t(){Ee&&(Ue(Kr,0===je),Ue(Jr,je===_e-1)),Oe.setAttribute("title",tr("lightBox.showOriginal")),Gr.classList.remove("light-box_full-size"),Oe.firstChild.className="icons-lightbox icons-lightbox_uncollapse",document.addEventListener&&document.removeEventListener(Ce,t)}var i,r;((n=n||window.event)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),pe)?(Le(),document.addEventListener?document.addEventListener(Ce,t):t()):(Gr.classList.add("light-box_full-size"),Oe.firstChild.className="icons-lightbox icons-lightbox_collapse",Oe.setAttribute("title",tr("lightBox.collapse")),Ee&&(Ue(Kr,!0),Ue(Jr,!0)),i=me.width<=we.width+40?me.width-40:we.width+20,r=me.height<=we.height+80?me.height-80:we.height,Hr.style.width=i+"px",Hr.style.marginLeft="-"+i/2+"px",Hr.style.height=r+"px",Hr.style.marginTop="-"+(r/2+20)+"px");pe=!pe}function Ue(n,t){n&&(t?n.classList.add("light-box__disabled"):n.classList.remove("light-box__disabled"))}function Be(){Te.addEventListener("error",Be),Ae.classList.add("light-box__on-error"),Ae.innerHTML="",(ge=document.createElement("div")).className="light-box__error-message",ge.innerHTML=tr("lightBox.errorLoading")+"<br>",Ae.appendChild(ge);var n=tr("lightBox.linkToImg"),t=document.createElement("a");t.setAttribute("href",be),t.setAttribute("title",n),t.setAttribute("target","_blank"),t.innerText=n,ge.appendChild(t)}function De(){if(Te){document.addEventListener&&Hr.removeEventListener(Ce,Pe),ge&&(ge.parentNode&&ge.parentNode.removeChild(ge),ge=null,Ae.classList.remove("light-box__on-error"));var n=we.width,t=we.height;we.width=Te.offsetWidth,we.height=Te.offsetHeight,Ue(Oe,!(we.width>me.width||we.height>me.height)),ke&&(ke.removeEventListener("load",De),ke.removeEventListener("error",Be),ke.parentNode&&ke.parentNode.removeChild(ke),ke=null),document.addEventListener?(n!==we.width&&t!==we.height?Hr.addEventListener(Ce,Pe):Pe(),Le()):(Le(),Pe())}}function Ne(n,t){be=n,ke=Te,Ue(Oe,!0),ke&&(ke.removeEventListener("load",De),ke.removeEventListener("error",Be),ke.parentNode===document.body&&(ke.parentNode.removeChild(ke),ke=null),Te=null),(Te=new Image).addEventListener("load",De),Te.addEventListener("error",Be),t&&Te.setAttribute("srcset",t),Te.setAttribute("src",n+(Pr?"?"+Math.random():"")),Te.classList.add("light-box__attachment-loading"),document.body.appendChild(Te),Ee&&(Ue(Kr,0===je),Ue(Jr,je===_e-1)),Se.setAttribute("href",n)}function Pe(){Ae.innerHTML="",Te.classList.remove("light-box__attachment-loading"),Ae.appendChild(Te),document.addEventListener&&Hr.removeEventListener(Ce,Pe)}function Le(){Ie();var n,t=we.width,i=we.height,r=t>i;if(!t||!i)return!1;r?(n=t/i,t>me.width-40&&(i=(t=me.width-40)/n),i>me.height-80&&(n=i/t,t=(i=me.height-80)/n)):(n=i/t,i>me.height-80&&(t=(i=me.height-80)/n),t>me.width-40&&(n=t/i,i=(t=me.width-40)/n)),t<200&&(t=200,i=r?t/n:t*n),Hr.style.width=t+"px",Hr.style.marginLeft="-"+t/2+"px",Hr.style.height=i+"px",Hr.style.marginTop="-"+(i/2+20)+"px"}function qe(n){Ee&&((n=n||window.event)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),je++,Ne(Ee[je]))}function $e(n){Ee&&((n=n||window.event)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),je--,Ne(Ee[je]))}function ze(n){xe=!1,(n=n||window.event)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),document.body.removeChild(Gr),Te&&(Te.parentNode.removeChild(Te),Te.removeEventListener("load",De)),document.body.classList.remove("light-box-showed"),window.scrollTo(0,Xr),window.removeEventListener("resize",Le),document.removeEventListener("keydown",We),Te=null,document.body.style.top=""}function We(n){var t=(n=n||window.event).keyCode||n.which;27===t&&ze(n),39===t&&je!==_e-1&&qe(n),37===t&&0!==je&&$e(n)}function Fe(n){we=n}function Ge(n){return new Promise((function(t,i){Le(),n.classList.remove("light-box__attachment-loading"),Ae.appendChild(n),document.addEventListener&&Hr.removeEventListener(Ce,Pe),t()}))}function He(){Ue(Oe,!0),Ue(Se,!0)}function Qe(){return xe}function Ve(n){var t=(n=Math.floor(n))%60;return parseInt(n/60,10)+":"+(n<10?"0"+t:t)}function Ye(){var n=ne.currentTime/ne.duration*100;de.value=n,ve.style.width=n+"%"}function Je(){var n=100*ne.volume;le.value=n,he.style.width=n+"%",0!==parseInt(n)?ee.innerHTML='<i class="icons-player icons-player_sound"></i>':ee.innerHTML='<i class="icons-player icons-player_mute"></i>'}function Ke(){var n=document.createElement("div");n.className="light-box__time-line",n.innerHTML='<div class="light-box__time-line__bg"></div>',(ye=document.createElement("div")).className="light-box__time-line__buffered",n.appendChild(ye),(ve=document.createElement("div")).className="light-box__time-line__value",n.appendChild(ve),(de=document.createElement("input")).className="light-box__time-line__range",de.setAttribute("type","range"),de.setAttribute("min",0),de.setAttribute("max",100),de.setAttribute("value",0);var t=!1;return de.addEventListener("mousemove",(function(n){n.stopPropagation(),t&&(ne.currentTime=ne.duration*(de.value/100))})),de.addEventListener("mousedown",(function(n){n.stopPropagation(),t=!0})),de.addEventListener("mouseup",(function(n){n.stopPropagation(),t=!1})),de.addEventListener("change",(function(){ne.currentTime=ne.duration*(de.value/100)})),n.appendChild(de),function(){var n=ne.duration;if(n>0)for(var t=0;t<ne.buffered.length;t++)if(ne.buffered.start(ne.buffered.length-1-t)<=ne.currentTime){ye.style.width=ne.buffered.end(ne.buffered.length-1-t)/n*100+"%";break}}(),n}function Xe(){document.fullscreenElement||(se=!0,Ze())}function Ze(n){n&&n.stopPropagation(),se?(ae.innerHTML='<i class="icons-player icons-player_expand"></i>',ie.removeEventListener(ce[3],Xe),document[ce[1]]()):(ie[ce[0]](),ae.innerHTML='<i class="icons-player icons-player_collapsed"></i>',ie.addEventListener(ce[3],Xe)),se=!se}function no(n){n&&n.stopPropagation(),ne.paused||ne.ended?ne.play():ne.pause()}function to(){var n;(te=document.createElement("div")).className="light-box__controls light-box__controls_active",(re=document.createElement("div")).className="light-box__play",re.innerHTML='<i class="icons-player icons-player_play"></i>',re.addEventListener("click",no),te.appendChild(re),(ee=document.createElement("div")).className="light-box__sound",ee.innerHTML='<i class="icons-player icons-player_sound"></i>',ee.addEventListener("click",(function(n){n.stopPropagation(),ne.muted?(ne.muted=!1,ne.volume=1):(ne.muted=!0,ne.volume=0)})),te.appendChild(ee),te.appendChild(((n=document.createElement("div")).className="light-box__sound-line",n.innerHTML='<div class="light-box__sound-line__bg"></div>',(he=document.createElement("div")).className="light-box__sound-line__value",n.appendChild(he),(le=document.createElement("input")).className="light-box__time-line__range",le.setAttribute("type","range"),le.setAttribute("min",0),le.setAttribute("max",100),le.setAttribute("value",0),le.addEventListener("mousemove",(function(n){n.stopPropagation(),ne.volume=le.value/100})),le.addEventListener("change",(function(){ne.volume=le.value/100})),Je(),n.appendChild(le),n));var t=document.createElement("a");t.className="light-box__download",t.innerHTML='<i class="icons-player icons-player_download"></i>',t.setAttribute("href",ne.currentSrc),t.setAttribute("target","_blank"),te.appendChild(t),ce?((ae=document.createElement("div")).className="light-box__full-screen",ae.innerHTML='<i class="icons-player icons-player_expand"></i>',ae.addEventListener("click",Ze),te.appendChild(ae)):te.classList.add("light-box__controls_no-full-screen");var i=document.createElement("div");return i.className="light-box__time",(oe=document.createElement("span")).className="light-box__time__current",oe.innerText="0:00",i.appendChild(oe),i.insertAdjacentHTML("beforeend",' / <span class="light-box__time__full">'.concat(Ve(ne.duration),"</span>")),te.appendChild(i),te.appendChild(Ke()),te}function io(){fe.innerHTML='<i class="icons-player icons-player_stop-big"></i>',fe.classList.remove("light-box__disabled")}function ro(){var n=this;ne.removeEventListener("canplay",ro);var t=ne.videoWidth;t<330&&(t=330),Fe({width:t,height:ne.videoHeight}),Zr&&Zr.parentNode&&Zr.parentNode.removeChild(Zr),(ie=document.createElement("div")).className="light-box__attachment-area",ie.appendChild(to()),ie.appendChild(ne),ie.appendChild(((fe=document.createElement("div")).className="light-box__status light-box__status_animated light-box__disabled",fe.innerHTML='<i class="icons-player icons-player_play-big"></i>',fe.addEventListener("animationend",(function(){fe.classList.add("light-box__disabled")})),fe)),ne.addEventListener("play",(function(){fe.innerHTML='<i class="icons-player icons-player_play-big"></i>',fe.classList.remove("light-box__disabled"),re.innerHTML='<i class="icons-player icons-player_stop"></i>',te.classList.remove("light-box__controls_active"),ie.classList.add("light-box__hide-cursor")})),ne.addEventListener("pause",(function(){io(),re.innerHTML='<i class="icons-player icons-player_play"></i>',te.classList.add("light-box__controls_active"),ie.classList.remove("light-box__hide-cursor"),Ye()})),ne.addEventListener("ended",(function(){io(),re.innerHTML='<i class="icons-player icons-player_play"></i>',te.classList.add("light-box__controls_active"),ie.classList.remove("light-box__hide-cursor"),Ye()})),ne.addEventListener("progress",(function(){Ye()})),ne.addEventListener("timeupdate",(function(){oe.innerText=Ve(ne.currentTime),Ye()})),ne.addEventListener("click",no),ne.addEventListener("mousemove",(function(){te.classList.add("light-box__controls_active"),ie.classList.remove("light-box__hide-cursor"),clearTimeout(ue),ue=setTimeout((function(){ne.paused||ne.ended||(te.classList.remove("light-box__controls_active"),ie.classList.add("light-box__hide-cursor"))}),1e3)})),ne.addEventListener("volumechange",Je),Ge(ie).then(function(){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,n),ne.classList.remove("light-box__attachment-loading")}.bind(this))}function eo(n){var t=n.src,i=n.type,r=n.preview;ce=function(){for(var n=document.createElement("span"),t=[["requestFullScreen","cancelFullScreen","fullScreen","fullscreenchange"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitIsFullScreen","webkitfullscreenchange"],["mozRequestFullScreen","mozCancelFullScreen","mozfullScreen","mozfullscreenchange"]],i=0,r=t.length;i<r;i++)if(n[t[i][0]])return t[i]}(),Re(),function(n){var t=n.src,i=void 0===t?null:t;i&&((Zr=document.createElement("img")).className="light-box__attachment-loading",document.body.appendChild(Zr),Zr.addEventListener("load",(function(){Fe({width:Zr.offsetWidth,height:Zr.offsetHeight}),Ge(Zr)})),Zr.setAttribute("src",i))}({src:r}),function(n){var t=n.src,i=void 0===t?null:t,r=n.preview,e=void 0===r?null:r,o=n.type;if(i){(ne=document.createElement("video")).className="light-box__attachment-loading",e&&ne.setAttribute("poster",e),document.body.appendChild(ne);var u=document.createElement("source");u.setAttribute("type",o+';codecs="avc1.42E01E, mp4a.40.2"'),u.setAttribute("src",i),ne.appendChild(u);var c=document.createElement("div");c.className="light-box__error-message",c.innerHTML=tr("lightBox.notSupport")+'<a href="'.concat(i,'" target="_blank">').concat(tr("lightBox.linkToVideo"),"</a>"),ne.appendChild(c),ne.addEventListener("canplay",ro),u.addEventListener("error",(function(){Fe({width:300,height:300}),c.innerHTML=tr("lightBox.errorLoading")+'<br><a href="'.concat(i,'" target="_blank">').concat(tr("lightBox.linkToVideo"),"</a>"),Ge(c)}))}}({src:t,preview:r,type:i}),He()}function oo(n){return oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},oo(n)}function uo(n,t){return uo=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},uo(n,t)}function co(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=so(n);if(t){var e=so(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return fo(this,i)}}function fo(n,t){if(t&&("object"===oo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ao(n)}function ao(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function so(n){return so=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},so(n)}function lo(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return ho(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ho(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ho(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function vo(n){var t,i,r,e,o=n[0].fileSize+"";return{c:function(){(t=Rt("span")).innerHTML='<i class="icons-chat icons-chat_play"></i>',i=Ut(),r=Rt("span"),e=Mt(o),Pt(t,"class","chat-media__play"),Pt(r,"class","chat-media__size")},m:function(n,o){xt(n,t,o),xt(n,i,o),xt(n,r,o),jt(r,e)},p:function(n,t){1&lo(t,1)[0]&&o!==(o=n[0].fileSize+"")&&qt(e,o)},i:Jn,o:Jn,d:function(n){n&&Ct(t),n&&Ct(i),n&&Ct(r)}}}function yo(n,t,i){var r=this,e=t.data;return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,r),"data"in n&&i(0,e=n.data)}.bind(this),[e]}var po=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&uo(n,t)}(i,n);var t=co(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(ao(r=t.call(this)),n,yo,vo,rt,{data:0}),r}return i}(Pi),mo=po;function bo(n){return bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bo(n)}function wo(n,t){return wo=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},wo(n,t)}function _o(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=To(n);if(t){var e=To(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return go(this,i)}}function go(n,t){if(t&&("object"===bo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return So(n)}function So(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function To(n){return To=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},To(n)}function jo(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return ko(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ko(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ko(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Eo(n){var t,i,r,e,o;return{c:function(){et((t=Rt("img")).src,i=n[0].url)||Pt(t,"src",i),Pt(t,"width",n[1]),Pt(t,"height",n[2]),Pt(t,"loading","lazy"),Pt(t,"alt",r=n[0].fileName)},m:function(n,i){xt(n,t,i),e||(o=[Dt(t,"load",Ao),Dt(t,"error",Oo)],e=!0)},p:function(n,e){var o=jo(e,1)[0];1&o&&!et(t.src,i=n[0].url)&&Pt(t,"src",i),2&o&&Pt(t,"width",n[1]),4&o&&Pt(t,"height",n[2]),1&o&&r!==(r=n[0].fileName)&&Pt(t,"alt",r)},i:Jn,o:Jn,d:function(n){n&&Ct(t),e=!1,tt(o)}}}function Ao(n){var t=n.target;t.parentNode&&(t.parentNode.style.backgroundImage="none")}function Oo(n){var t=n.target;t.parentNode&&t.parentNode.removeChild(t)}function xo(n,t,i){var r=this,e=t.data,o=t.width,u=void 0===o?0:o,c=t.height,f=void 0===c?0:c;return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,r),"data"in n&&i(0,e=n.data),"width"in n&&i(1,u=n.width),"height"in n&&i(2,f=n.height)}.bind(this),[e,u,f]}var Co=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&wo(n,t)}(i,n);var t=_o(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(So(r=t.call(this)),n,xo,Eo,rt,{data:0,width:1,height:2}),r}return i}(Pi),Io=Co;function Ro(n){return Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ro(n)}function Mo(n,t){return Mo=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Mo(n,t)}function Uo(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=No(n);if(t){var e=No(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Bo(this,i)}}function Bo(n,t){if(t&&("object"===Ro(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Do(n)}function Do(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function No(n){return No=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},No(n)}function Po(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Lo(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return qo(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return qo(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qo(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function $o(n){var t,i;return t=new Er({props:{data:n[0]}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function zo(n){var t,i,r,e,o,u,c,f,a=[Fo,Wo],s=[];return r=function(n,t){return n[3]?0:1}(n),e=s[r]=a[r](n),{c:function(){t=Rt("figure"),i=Rt("a"),e.c(),Pt(i,"href",o=n[0].url),Pt(i,"title",n[2]),Pt(i,"target","_blank"),Pt(i,"class","chat-media__preview"),zt(i,"width",n[1].width?n[1].width+"px":"auto"),zt(i,"height",n[1].height?n[1].height+"px":"auto"),zt(i,"background-image","url("+n[0].preview.src+")"),zt(i,"background-size",(n[1].width?n[1].width+"px":"auto")+" auto"),Pt(t,"class","chat-media")},m:function(e,o){xt(e,t,o),jt(t,i),s[r].m(i,null),u=!0,c||(f=Dt(i,"click",Nt(n[4])),c=!0)},p:function(n,t){e.p(n,t),(!u||1&t&&o!==(o=n[0].url))&&Pt(i,"href",o),(!u||1&t)&&zt(i,"background-image","url("+n[0].preview.src+")")},i:function(n){u||(Ei(e),u=!0)},o:function(n){Ai(e),u=!1},d:function(n){n&&Ct(t),s[r].d(),c=!1,f()}}}function Wo(n){var t,i;return t=new mo({props:{data:n[0]}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Fo(n){var t,i;return t=new Io({props:{data:n[0],width:n[1].width,height:n[1].height}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Go(n){var t,i,r,e,o=[zo,$o],u=[];function c(n,t){return n[0].preview?0:1}return t=c(n),i=u[t]=o[t](n),{c:function(){i.c(),r=Bt()},m:function(n,i){u[t].m(n,i),xt(n,r,i),e=!0},p:function(n,e){var f=this,a=Lo(e,1)[0],s=t;(t=c(n))===s?u[t].p(n,a):(ji(),Ai(u[s],1,1,function(){Po(this,f),u[s]=null}.bind(this)),ki(),(i=u[t])?i.p(n,a):(i=u[t]=o[t](n)).c(),Ei(i,1),i.m(r.parentNode,r))},i:function(n){e||(Ei(i),e=!0)},o:function(n){Ai(i),e=!1},d:function(n){u[t].d(n),n&&Ct(r)}}}function Ho(n,t,i){var r=this,e=t.data,o=function(n){if(!n.preview)return{width:0,height:0};var t=window.innerWidth,i=sS,r=t-32-fS-8,e=n.preview.width,o=n.preview.height;return r<i&&(i=r),e>i?o>n.preview.width?(o=i,e/=n.preview.height/i):(e=i,o/=n.preview.width/i):o>i&&(o=i,e/=n.preview.height/i),{width:e,height:o}}(e),u=e.fileName+" ("+e.fileSize+")",c=0===e.mime.toLowerCase().indexOf("image");return n.$$set=function(n){Po(this,r),"data"in n&&i(0,e=n.data)}.bind(this),[e,o,u,c,function(){var n,t,i,r,o;c?(t=e.url,xe=!0,(_e=(Ee=i)&&Ee.length||1)<=1?Ee=null:je=Ee.indexOf(t),Re(),Ne(t,r),o?He():(Ue(Oe,!1),Ue(Se,!1))):eo({src:e.url,type:e.mime,preview:null===(n=e.preview)||void 0===n?void 0:n.src})}]}var Qo=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Mo(n,t)}(i,n);var t=Uo(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Do(r=t.call(this)),n,Ho,Go,rt,{data:0}),r}return i}(Pi),Vo=Qo;function Yo(n){return Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Yo(n)}function Jo(n,t){return Jo=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Jo(n,t)}function Ko(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=nu(n);if(t){var e=nu(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Xo(this,i)}}function Xo(n,t){if(t&&("object"===Yo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Zo(n)}function Zo(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function nu(n){return nu=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},nu(n)}function tu(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return iu(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return iu(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iu(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function ru(n){var t;function i(n,t){return n[0].url?ou:eu}var r=i(n),e=r(n);return{c:function(){e.c(),t=Bt()},m:function(n,i){e.m(n,i),xt(n,t,i)},p:function(n,o){r===(r=i(n))&&e?e.p(n,o):(e.d(1),(e=r(n))&&(e.c(),e.m(t.parentNode,t)))},d:function(n){e.d(n),n&&Ct(t)}}}function eu(n){var t,i,r,e;return{c:function(){et((t=Rt("img")).src,i=n[0].preview.src)||Pt(t,"src",i),Pt(t,"class","enrich-block__img"),Pt(t,"loading","lazy"),Pt(t,"width",r=n[0].preview.width),Pt(t,"height",e=n[0].preview.height),Pt(t,"alt","")},m:function(n,i){xt(n,t,i)},p:function(n,o){1&o&&!et(t.src,i=n[0].preview.src)&&Pt(t,"src",i),1&o&&r!==(r=n[0].preview.width)&&Pt(t,"width",r),1&o&&e!==(e=n[0].preview.height)&&Pt(t,"height",e)},d:function(n){n&&Ct(t)}}}function ou(n){var t,i,r,e,o,u;return{c:function(){t=Rt("a"),et((i=Rt("img")).src,r=n[0].preview.src)||Pt(i,"src",r),Pt(i,"class","enrich-block__img"),Pt(i,"loading","lazy"),Pt(i,"width",e=n[0].preview.width),Pt(i,"height",o=n[0].preview.height),Pt(i,"alt",""),Pt(t,"href",u=n[0].url),Pt(t,"target","_blank")},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,c){1&c&&!et(i.src,r=n[0].preview.src)&&Pt(i,"src",r),1&c&&e!==(e=n[0].preview.width)&&Pt(i,"width",e),1&c&&o!==(o=n[0].preview.height)&&Pt(i,"height",o),1&c&&u!==(u=n[0].url)&&Pt(t,"href",u)},d:function(n){n&&Ct(t)}}}function uu(n){var t,i,r,e,o=n[0].siteName+"";return{c:function(){t=Rt("div"),i=Rt("a"),r=Mt(o),Pt(i,"href",e=n[0].url),Pt(i,"target","_blank"),Pt(t,"class","enrich-block__site")},m:function(n,e){xt(n,t,e),jt(t,i),jt(i,r)},p:function(n,t){1&t&&o!==(o=n[0].siteName+"")&&qt(r,o),1&t&&e!==(e=n[0].url)&&Pt(i,"href",e)},d:function(n){n&&Ct(t)}}}function cu(n){var t;function i(n,t){return n[0].url?au:fu}var r=i(n),e=r(n);return{c:function(){t=Rt("div"),e.c(),Pt(t,"class","enrich-block__title")},m:function(n,i){xt(n,t,i),e.m(t,null)},p:function(n,o){r===(r=i(n))&&e?e.p(n,o):(e.d(1),(e=r(n))&&(e.c(),e.m(t,null)))},d:function(n){n&&Ct(t),e.d()}}}function fu(n){var t,i=n[0].title+"";return{c:function(){t=Mt(i)},m:function(n,i){xt(n,t,i)},p:function(n,r){1&r&&i!==(i=n[0].title+"")&&qt(t,i)},d:function(n){n&&Ct(t)}}}function au(n){var t,i,r,e=n[0].title+"";return{c:function(){t=Rt("a"),i=Mt(e),Pt(t,"href",r=n[0].url),Pt(t,"target","_blank")},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,o){1&o&&e!==(e=n[0].title+"")&&qt(i,e),1&o&&r!==(r=n[0].url)&&Pt(t,"href",r)},d:function(n){n&&Ct(t)}}}function su(n){var t,i,r=n[0].description+"";return{c:function(){t=Rt("div"),i=Mt(r),Pt(t,"class","enrich-block__desc")},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,t){1&t&&r!==(r=n[0].description+"")&&qt(i,r)},d:function(n){n&&Ct(t)}}}function lu(n){var t,i,r,e,o=n[0].preview&&n[0].preview.src&&ru(n),u=n[0].siteName&&n[0].url&&uu(n),c=n[0].title&&cu(n),f=n[0].description&&su(n);return{c:function(){t=Rt("div"),o&&o.c(),i=Ut(),u&&u.c(),r=Ut(),c&&c.c(),e=Ut(),f&&f.c(),Pt(t,"class","enrich-block")},m:function(n,a){xt(n,t,a),o&&o.m(t,null),jt(t,i),u&&u.m(t,null),jt(t,r),c&&c.m(t,null),jt(t,e),f&&f.m(t,null)},p:function(n,a){var s=tu(a,1)[0];n[0].preview&&n[0].preview.src?o?o.p(n,s):((o=ru(n)).c(),o.m(t,i)):o&&(o.d(1),o=null),n[0].siteName&&n[0].url?u?u.p(n,s):((u=uu(n)).c(),u.m(t,r)):u&&(u.d(1),u=null),n[0].title?c?c.p(n,s):((c=cu(n)).c(),c.m(t,e)):c&&(c.d(1),c=null),n[0].description?f?f.p(n,s):((f=su(n)).c(),f.m(t,null)):f&&(f.d(1),f=null)},i:Jn,o:Jn,d:function(n){n&&Ct(t),o&&o.d(),u&&u.d(),c&&c.d(),f&&f.d()}}}function hu(n,t,i){var r=this,e=t.data;return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,r),"data"in n&&i(0,e=n.data)}.bind(this),[e]}var du=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Jo(n,t)}(i,n);var t=Ko(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Zo(r=t.call(this)),n,hu,lu,rt,{data:0}),r}return i}(Pi),vu=du;function yu(n){return yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},yu(n)}function pu(n,t){return pu=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},pu(n,t)}function mu(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=_u(n);if(t){var e=_u(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return bu(this,i)}}function bu(n,t){if(t&&("object"===yu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wu(n)}function wu(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _u(n){return _u=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_u(n)}function gu(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Su(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Su(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Su(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Tu(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ju(n,t,i){var r=n.slice();return r[2]=t[i],r}function ku(n,t,i){var r=n.slice();return r[5]=t[i],r}function Eu(n){var t,i;return t=new ec({props:{message:n[0].data.quote}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.message=n[0].data.quote),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Au(n){for(var t,i,r=this,e=[],o=new Map,u=n[0].data.media,c=function(n){return Tu(this,r),n[5].messageId}.bind(this),f=0;f<u.length;f+=1){var a=ku(n,u,f),s=c(a);o.set(s,e[f]=Ou(s,a))}return{c:function(){t=Rt("div");for(var n=0;n<e.length;n+=1)e[n].c();Pt(t,"class","chat-media-list")},m:function(n,r){xt(n,t,r);for(var o=0;o<e.length;o+=1)e[o].m(t,null);i=!0},p:function(n,i){1&i&&(u=n[0].data.media,ji(),e=Ii(e,i,c,1,n,u,o,t,Ci,Ou,null,ku),ki())},i:function(n){if(!i){for(var t=0;t<u.length;t+=1)Ei(e[t]);i=!0}},o:function(n){for(var t=0;t<e.length;t+=1)Ai(e[t]);i=!1},d:function(n){n&&Ct(t);for(var i=0;i<e.length;i+=1)e[i].d()}}}function Ou(n,t){var i,r,e;return r=new Vo({props:{data:t[5].data}}),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),e=!0},p:function(n,i){t=n;var e={};1&i&&(e.data=t[5].data),r.$set(e)},i:function(n){e||(Ei(r.$$.fragment,n),e=!0)},o:function(n){Ai(r.$$.fragment,n),e=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function xu(n){for(var t,i,r=this,e=[],o=new Map,u=n[0].data.files,c=function(n){return Tu(this,r),n[2].messageId}.bind(this),f=0;f<u.length;f+=1){var a=ju(n,u,f),s=c(a);o.set(s,e[f]=Cu(s,a))}return{c:function(){t=Rt("div");for(var n=0;n<e.length;n+=1)e[n].c();Pt(t,"class","chat-file-list")},m:function(n,r){xt(n,t,r);for(var o=0;o<e.length;o+=1)e[o].m(t,null);i=!0},p:function(n,i){1&i&&(u=n[0].data.files,ji(),e=Ii(e,i,c,1,n,u,o,t,Ci,Cu,null,ju),ki())},i:function(n){if(!i){for(var t=0;t<u.length;t+=1)Ei(e[t]);i=!0}},o:function(n){for(var t=0;t<e.length;t+=1)Ai(e[t]);i=!1},d:function(n){n&&Ct(t);for(var i=0;i<e.length;i+=1)e[i].d()}}}function Cu(n,t){var i,r,e;return r=new Er({props:{data:t[2].data}}),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),e=!0},p:function(n,i){t=n;var e={};1&i&&(e.data=t[2].data),r.$set(e)},i:function(n){e||(Ei(r.$$.fragment,n),e=!0)},o:function(n){Ai(r.$$.fragment,n),e=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function Iu(n){var t,i;return t=new vu({props:{data:n[0].tags.enrich}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0].tags.enrich),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Ru(n){var t,i,r,e,o,u,c=n[0].data.quote&&Eu(n),f=n[0].data.media&&Au(n),a=n[1]&&function(n){var t;return{c:function(){Pt(t=Rt("div"),"class","chat-message__text")},m:function(i,r){xt(i,t,r),t.innerHTML=n[1]},p:Jn,d:function(n){n&&Ct(t)}}}(n),s=n[0].data.files&&xu(n),l=n[0].tags&&n[0].tags.enrich&&Iu(n);return{c:function(){c&&c.c(),t=Ut(),f&&f.c(),i=Ut(),a&&a.c(),r=Ut(),s&&s.c(),e=Ut(),l&&l.c(),o=Bt()},m:function(n,h){c&&c.m(n,h),xt(n,t,h),f&&f.m(n,h),xt(n,i,h),a&&a.m(n,h),xt(n,r,h),s&&s.m(n,h),xt(n,e,h),l&&l.m(n,h),xt(n,o,h),u=!0},p:function(n,r){var u=this,h=gu(r,1)[0];n[0].data.quote?c?(c.p(n,h),1&h&&Ei(c,1)):((c=Eu(n)).c(),Ei(c,1),c.m(t.parentNode,t)):c&&(ji(),Ai(c,1,1,function(){Tu(this,u),c=null}.bind(this)),ki()),n[0].data.media?f?(f.p(n,h),1&h&&Ei(f,1)):((f=Au(n)).c(),Ei(f,1),f.m(i.parentNode,i)):f&&(ji(),Ai(f,1,1,function(){Tu(this,u),f=null}.bind(this)),ki()),n[1]&&a.p(n,h),n[0].data.files?s?(s.p(n,h),1&h&&Ei(s,1)):((s=xu(n)).c(),Ei(s,1),s.m(e.parentNode,e)):s&&(ji(),Ai(s,1,1,function(){Tu(this,u),s=null}.bind(this)),ki()),n[0].tags&&n[0].tags.enrich?l?(l.p(n,h),1&h&&Ei(l,1)):((l=Iu(n)).c(),Ei(l,1),l.m(o.parentNode,o)):l&&(ji(),Ai(l,1,1,function(){Tu(this,u),l=null}.bind(this)),ki())},i:function(n){u||(Ei(c),Ei(f),Ei(s),Ei(l),u=!0)},o:function(n){Ai(c),Ai(f),Ai(s),Ai(l),u=!1},d:function(n){c&&c.d(n),n&&Ct(t),f&&f.d(n),n&&Ct(i),a&&a.d(n),n&&Ct(r),s&&s.d(n),n&&Ct(e),l&&l.d(n),n&&Ct(o)}}}function Mu(n,t,i){var r=this,e=t.message,o=e.data.text?function(n,t){return n&&n.replace&&0!==n.length?n.replace(/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[-A-Z0-9+\u0026\u2019@#/%?=()~_|!:,.;]*[-A-Z0-9+\u0026@#/%=~()_|])/gi,(function(n,i,r){if(t&&t.length)for(var e=function(n){return(n.indexOf("://")>-1?n.split("/")[2]:n.split("/")[0]).split(":")[0].split("?")[0]}(r),o=0;o<t.length;o++){var u=e.indexOf(t[o]);if(u>=0&&u===e.length-t[o].length)return[i,'<a href="',r,'" target="_blank" title="',r,'">',r,"</a>"].join("")}return[i,'<a href="https://www.mql5.com/go?link=',encodeURIComponent(r),'" target="_blank" title="',r,'">',r,"</a>"].join("")})):n}(e.data.text,Pg).replace(/\n/g,"<br>"):"";return n.$$set=function(n){Tu(this,r),"message"in n&&i(0,e=n.message)}.bind(this),[e,o]}var Uu=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&pu(n,t)}(i,n);var t=mu(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(wu(r=t.call(this)),n,Mu,Ru,rt,{message:0}),r}return i}(Pi),Bu=Uu;function Du(n){return Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Du(n)}function Nu(n,t){return Nu=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Nu(n,t)}function Pu(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=$u(n);if(t){var e=$u(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Lu(this,i)}}function Lu(n,t){if(t&&("object"===Du(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qu(n)}function qu(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function $u(n){return $u=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},$u(n)}function zu(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Wu(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Wu(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wu(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Fu(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Gu(n,t,i){var r=n.slice();return r[1]=t[i],r}function Hu(n){var t,i,r,e,o,u,c,f,a=n[0].authorName+"",s=[Yu,Vu,Qu],l=[];function h(n,t){return n[0].recType===Q?0:n[0].recType===z?1:n[0].recType===W?2:-1}return~(u=h(n))&&(c=l[u]=s[u](n)),{c:function(){t=Rt("div"),i=Rt("div"),r=Mt(a),e=Ut(),o=Rt("div"),c&&c.c(),Pt(i,"class","chat-quote__author"),Pt(o,"class","chat-quote__content"),Pt(t,"class","chat-quote")},m:function(n,c){xt(n,t,c),jt(t,i),jt(i,r),jt(t,e),jt(t,o),~u&&l[u].m(o,null),f=!0},p:function(n,t){var i=this;(!f||1&t)&&a!==(a=n[0].authorName+"")&&qt(r,a);var e=u;(u=h(n))===e?~u&&l[u].p(n,t):(c&&(ji(),Ai(l[e],1,1,function(){Fu(this,i),l[e]=null}.bind(this)),ki()),~u?((c=l[u])?c.p(n,t):(c=l[u]=s[u](n)).c(),Ei(c,1),c.m(o,null)):c=null)},i:function(n){f||(Ei(c),f=!0)},o:function(n){Ai(c),f=!1},d:function(n){n&&Ct(t),~u&&l[u].d()}}}function Qu(n){var t,i,r,e,o=[Ku,Ju],u=[];function c(n,t){return n[0].data.preview?0:1}return t=c(n),i=u[t]=o[t](n),{c:function(){i.c(),r=Bt()},m:function(n,i){u[t].m(n,i),xt(n,r,i),e=!0},p:function(n,e){var f=this,a=t;(t=c(n))===a?u[t].p(n,e):(ji(),Ai(u[a],1,1,function(){Fu(this,f),u[a]=null}.bind(this)),ki(),(i=u[t])?i.p(n,e):(i=u[t]=o[t](n)).c(),Ei(i,1),i.m(r.parentNode,r))},i:function(n){e||(Ei(i),e=!0)},o:function(n){Ai(i),e=!1},d:function(n){u[t].d(n),n&&Ct(r)}}}function Vu(n){var t,i,r=n[0].data.text+"";return{c:function(){t=new Ht,i=Bt(),t.a=i},m:function(n,e){t.m(r,n,e),xt(n,i,e)},p:function(n,i){1&i&&r!==(r=n[0].data.text+"")&&t.p(r)},i:Jn,o:Jn,d:function(n){n&&Ct(i),n&&t.d()}}}function Yu(n){var t,i,r,e,o=[Zu,Xu],u=[];function c(n,t){return n[0].data.text?0:n[0].data.media?1:-1}return~(t=c(n))&&(i=u[t]=o[t](n)),{c:function(){i&&i.c(),r=Bt()},m:function(n,i){~t&&u[t].m(n,i),xt(n,r,i),e=!0},p:function(n,e){var f=this,a=t;(t=c(n))===a?~t&&u[t].p(n,e):(i&&(ji(),Ai(u[a],1,1,function(){Fu(this,f),u[a]=null}.bind(this)),ki()),~t?((i=u[t])?i.p(n,e):(i=u[t]=o[t](n)).c(),Ei(i,1),i.m(r.parentNode,r)):i=null)},i:function(n){e||(Ei(i),e=!0)},o:function(n){Ai(i),e=!1},d:function(n){~t&&u[t].d(n),n&&Ct(r)}}}function Ju(n){var t,i;return t=new Er({props:{data:n[0].data}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0].data),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Ku(n){var t,i;return t=new Vo({props:{data:n[0].data}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0].data),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Xu(n){for(var t,i,r=this,e=[],o=new Map,u=n[0].data.media,c=function(n){return Fu(this,r),n[1].messageId}.bind(this),f=0;f<u.length;f+=1){var a=Gu(n,u,f),s=c(a);o.set(s,e[f]=nc(s,a))}return{c:function(){t=Rt("div");for(var n=0;n<e.length;n+=1)e[n].c();Pt(t,"class","chat-media-list")},m:function(n,r){xt(n,t,r);for(var o=0;o<e.length;o+=1)e[o].m(t,null);i=!0},p:function(n,i){1&i&&(u=n[0].data.media,ji(),e=Ii(e,i,c,1,n,u,o,t,Ci,nc,null,Gu),ki())},i:function(n){if(!i){for(var t=0;t<u.length;t+=1)Ei(e[t]);i=!0}},o:function(n){for(var t=0;t<e.length;t+=1)Ai(e[t]);i=!1},d:function(n){n&&Ct(t);for(var i=0;i<e.length;i+=1)e[i].d()}}}function Zu(n){var t,i;return t=new Bu({props:{message:n[0].data.text}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.message=n[0].data.text),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function nc(n,t){var i,r,e;return r=new Vo({props:{data:t[1].data}}),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),e=!0},p:function(n,i){t=n;var e={};1&i&&(e.data=t[1].data),r.$set(e)},i:function(n){e||(Ei(r.$$.fragment,n),e=!0)},o:function(n){Ai(r.$$.fragment,n),e=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function tc(n){var t,i,r=n[0].data&&Hu(n);return{c:function(){r&&r.c(),t=Bt()},m:function(n,e){r&&r.m(n,e),xt(n,t,e),i=!0},p:function(n,i){var e=this,o=zu(i,1)[0];n[0].data?r?(r.p(n,o),1&o&&Ei(r,1)):((r=Hu(n)).c(),Ei(r,1),r.m(t.parentNode,t)):r&&(ji(),Ai(r,1,1,function(){Fu(this,e),r=null}.bind(this)),ki())},i:function(n){i||(Ei(r),i=!0)},o:function(n){Ai(r),i=!1},d:function(n){r&&r.d(n),n&&Ct(t)}}}function ic(n,t,i){var r=this,e=t.message;return n.$$set=function(n){Fu(this,r),"message"in n&&i(0,e=n.message)}.bind(this),[e]}var rc=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Nu(n,t)}(i,n);var t=Pu(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(qu(r=t.call(this)),n,ic,tc,rt,{message:0}),r}return i}(Pi),ec=rc;function oc(n){return oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},oc(n)}function uc(n,t){return uc=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},uc(n,t)}function cc(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=sc(n);if(t){var e=sc(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return fc(this,i)}}function fc(n,t){if(t&&("object"===oc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ac(n)}function ac(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function sc(n){return sc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},sc(n)}function lc(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function hc(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return dc(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return dc(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dc(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function vc(n,t,i){var r=n.slice();return r[13]=t[i],r}function yc(n,t,i){var r=n.slice();return r[13]=t[i],r}function pc(n){var t,i,e,o,u,c,f;return o=new ec({props:{message:n[6]}}),{c:function(){t=Rt("div"),i=Rt("i"),e=Ut(),Mi(o.$$.fragment),Pt(i,"class","chat-attach-container__close icons-chat icons-chat_close-dark"),Pt(i,"title",r("delete")),Pt(t,"class","chat-quote-preview")},m:function(r,a){xt(r,t,a),jt(t,i),jt(t,e),Ui(o,t,null),u=!0,c||(f=Dt(i,"click",n[8]),c=!0)},p:function(n,t){var i={};64&t&&(i.message=n[6]),o.$set(i)},i:function(n){u||(Ei(o.$$.fragment,n),u=!0)},o:function(n){Ai(o.$$.fragment,n),u=!1},d:function(n){n&&Ct(t),Bi(o),c=!1,f()}}}function mc(n){var t,i,e,o,u,c,f,a=n[3].length&&bc(n),s=n[4].length&&_c(n);return{c:function(){t=Rt("div"),i=Rt("i"),e=Ut(),o=Rt("div"),a&&a.c(),u=Ut(),s&&s.c(),Pt(i,"class","chat-attach-container__close icons-chat icons-chat_close-dark"),Pt(i,"title",r("delete")),Pt(o,"class","chat-preview-list"),Pt(t,"class","chat-attach-container")},m:function(r,l){xt(r,t,l),jt(t,i),jt(t,e),jt(t,o),a&&a.m(o,null),jt(o,u),s&&s.m(o,null),c||(f=Dt(i,"click",n[9]),c=!0)},p:function(n,t){n[3].length?a?a.p(n,t):((a=bc(n)).c(),a.m(o,u)):a&&(a.d(1),a=null),n[4].length?s?s.p(n,t):((s=_c(n)).c(),s.m(o,null)):s&&(s.d(1),s=null)},d:function(n){n&&Ct(t),a&&a.d(),s&&s.d(),c=!1,f()}}}function bc(n){for(var t,i=n[3],r=[],e=0;e<i.length;e+=1)r[e]=wc(yc(n,i,e));return{c:function(){t=Rt("ul");for(var n=0;n<r.length;n+=1)r[n].c();Pt(t,"class","chat-preview-list__block")},m:function(n,i){xt(n,t,i);for(var e=0;e<r.length;e+=1)r[e].m(t,null)},p:function(n,e){if(136&e){var o;for(i=n[3],o=0;o<i.length;o+=1){var u=yc(n,i,o);r[o]?r[o].p(u,e):(r[o]=wc(u),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},d:function(n){n&&Ct(t),It(r,n)}}}function wc(n){var t,i,e,o,u,c,f,a,s,l,h,d,v,y,p,m=n[13].name+"";function b(){return n[10](n[13])}return{c:function(){t=Rt("li"),i=Rt("div"),e=Rt("img"),u=Ut(),c=Rt("div"),f=Rt("div"),a=Mt(m),s=Ut(),l=Rt("button"),h=Rt("i"),d=Ut(),et(e.src,o=URL.createObjectURL(n[13]))||Pt(e,"src",o),Pt(e,"alt",""),Pt(i,"class","chat-preview-list__img"),Pt(f,"class","chat-preview-list__name"),Pt(h,"class","icons-chat icons-chat_close-dark"),Pt(l,"class","chat-preview-list__button"),Pt(l,"title",r("delete")),Pt(c,"class","chat-preview-list__content"),Pt(t,"class","chat-preview-list__item chat-preview-list__item_image"),Pt(t,"title",v=n[13].name)},m:function(n,r){xt(n,t,r),jt(t,i),jt(i,e),jt(t,u),jt(t,c),jt(c,f),jt(f,a),jt(c,s),jt(c,l),jt(l,h),jt(t,d),y||(p=Dt(l,"click",Nt(b)),y=!0)},p:function(i,r){n=i,8&r&&!et(e.src,o=URL.createObjectURL(n[13]))&&Pt(e,"src",o),8&r&&m!==(m=n[13].name+"")&&qt(a,m),8&r&&v!==(v=n[13].name)&&Pt(t,"title",v)},d:function(n){n&&Ct(t),y=!1,p()}}}function _c(n){for(var t,i=n[4],r=[],e=0;e<i.length;e+=1)r[e]=gc(vc(n,i,e));return{c:function(){t=Rt("ul");for(var n=0;n<r.length;n+=1)r[n].c();Pt(t,"class","chat-preview-list__block")},m:function(n,i){xt(n,t,i);for(var e=0;e<r.length;e+=1)r[e].m(t,null)},p:function(n,e){if(144&e){var o;for(i=n[4],o=0;o<i.length;o+=1){var u=vc(n,i,o);r[o]?r[o].p(u,e):(r[o]=gc(u),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},d:function(n){n&&Ct(t),It(r,n)}}}function gc(n){var t,i,e,o,u,c,f,a,s,l,h,d,v,y,p=n[13].name+"";function m(){return n[11](n[13])}return{c:function(){t=Rt("li"),i=Rt("i"),o=Ut(),u=Rt("div"),c=Rt("div"),f=Mt(p),a=Ut(),s=Rt("button"),l=Rt("i"),h=Ut(),Pt(i,"class",e="chat-preview-list__icon icons-chat icons-chat_"+yr(rr(n[13].name,!0)||"")),Pt(c,"class","chat-preview-list__name"),Pt(l,"class","icons-chat icons-chat_close-dark"),Pt(s,"class","chat-preview-list__button"),Pt(s,"title",r("delete")),Pt(u,"class","chat-preview-list__content"),Pt(t,"class","chat-preview-list__item"),Pt(t,"title",d=n[13].name)},m:function(n,r){xt(n,t,r),jt(t,i),jt(t,o),jt(t,u),jt(u,c),jt(c,f),jt(u,a),jt(u,s),jt(s,l),jt(t,h),v||(y=Dt(s,"click",Nt(m)),v=!0)},p:function(r,o){n=r,16&o&&e!==(e="chat-preview-list__icon icons-chat icons-chat_"+yr(rr(n[13].name,!0)||""))&&Pt(i,"class",e),16&o&&p!==(p=n[13].name+"")&&qt(f,p),16&o&&d!==(d=n[13].name)&&Pt(t,"title",d)},d:function(n){n&&Ct(t),v=!1,y()}}}function Sc(n){var t,i,r,e=n[6]&&pc(n),o=n[5].length&&mc(n);return{c:function(){t=Rt("div"),e&&e.c(),i=Ut(),o&&o.c(),Pt(t,"class","chat-preview-area")},m:function(u,c){xt(u,t,c),e&&e.m(t,null),jt(t,i),o&&o.m(t,null),n[12](t),r=!0},p:function(n,r){var u=this,c=hc(r,1)[0];n[6]?e?(e.p(n,c),64&c&&Ei(e,1)):((e=pc(n)).c(),Ei(e,1),e.m(t,i)):e&&(ji(),Ai(e,1,1,function(){lc(this,u),e=null}.bind(this)),ki()),n[5].length?o?o.p(n,c):((o=mc(n)).c(),o.m(t,null)):o&&(o.d(1),o=null)},i:function(n){r||(Ei(e),r=!0)},o:function(n){Ai(e),r=!1},d:function(i){i&&Ct(t),e&&e.d(),o&&o.d(),n[12](null)}}}function Tc(n,t,i){var r,e,o=this,u=Jn,c=function(){var n=this;return lc(this,o),u(),u=ut(l,function(t){return lc(this,n),i(5,r=t)}.bind(this)),l}.bind(this),f=Jn,a=function(){var n=this;return lc(this,o),f(),f=ut(s,function(t){return lc(this,n),i(6,e=t)}.bind(this)),s}.bind(this);n.$$.on_destroy.push(function(){return lc(this,o),u()}.bind(this)),n.$$.on_destroy.push(function(){return lc(this,o),f()}.bind(this));var s=t.replyMessage;a();var l=t.fileList;c();var h=t.element,d=[],v=[];function y(n){var t=this;l.update(function(i){return lc(this,t),i.splice(i.indexOf(n),1),i}.bind(this))}var p=function(){lc(this,o),s.set(undefined)}.bind(this),m=function(){lc(this,o),l.set([])}.bind(this),b=function(n){lc(this,o),y(n)}.bind(this),w=function(n){lc(this,o),y(n)}.bind(this);return n.$$set=function(n){lc(this,o),"replyMessage"in n&&a(i(1,s=n.replyMessage)),"fileList"in n&&c(i(2,l=n.fileList)),"element"in n&&i(0,h=n.element)}.bind(this),n.$$.update=function(){var t=this;lc(this,o),56&n.$$.dirty&&(i(3,d=[]),i(4,v=[]),r.length&&r.forEach(function(n){lc(this,t),n.type.match(/image.*/)?d.push(n):v.push(n)}.bind(this)))}.bind(this),[h,s,l,d,v,r,e,y,p,m,b,w,function(n){var t=this;ui[n?"unshift":"push"](function(){lc(this,t),i(0,h=n)}.bind(this))}]}var jc=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&uc(n,t)}(i,n);var t=cc(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(ac(r=t.call(this)),n,Tc,Sc,rt,{replyMessage:1,fileList:2,element:0}),r}return i}(Pi),kc=jc;function Ec(n){return Ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ec(n)}function Ac(n,t){return Ac=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Ac(n,t)}function Oc(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Ic(n);if(t){var e=Ic(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return xc(this,i)}}function xc(n,t){if(t&&("object"===Ec(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cc(n)}function Cc(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ic(n){return Ic=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ic(n)}function Rc(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Mc(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Mc(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mc(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Uc(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Bc(n){var t,i,r,e;return{c:function(){t=Rt("div"),i=Rt("div"),r=Rt("div"),e=Mt(n[2]),Pt(r,"class","alert alert_danger"),Pt(i,"class","chat-editor__errors-wrapper"),Pt(t,"class","chat-editor__errors")},m:function(n,o){xt(n,t,o),jt(t,i),jt(i,r),jt(r,e)},p:function(n,t){4&t&&qt(e,n[2])},d:function(n){n&&Ct(t)}}}function Dc(n){var t,i,e,o,u,c,f,a,s,l,h,d,v,y,p,m,b,w,_,g,S,T=this,j=r("add")+"";function k(t){n[16](t)}var E={replyMessage:Qi,fileList:Vi};return void 0!==n[4]&&(E.element=n[4]),u=new kc({props:E}),ui.push(function(){return Uc(this,T),Ri(u,"element",k)}.bind(this)),{c:function(){t=Rt("div"),i=Rt("form"),e=Rt("fieldset"),o=Rt("div"),Mi(u.$$.fragment),f=Ut(),a=Rt("div"),s=Rt("input"),(l=Rt("span")).innerHTML='<i class="icons-chat icons-chat_attach"></i>',h=Ut(),d=Rt("textarea"),v=Ut(),y=Rt("div"),p=Rt("button"),m=Rt("i"),b=Mt(j),Pt(s,"title",r("attachFileTitle")+": "+R.join(", ")),Pt(s,"type","file"),s.multiple=!0,Pt(s,"name","attachedFile"),Pt(s,"accept","."+R.join(",.")),Pt(l,"class","button"),Pt(a,"class","chat-attach-form box-file"),Pt(d,"class","chat-editor__textarea"),Pt(d,"rows","1"),Pt(d,"placeholder",r("message")),Pt(m,"class","icons-chat icons-chat_send"),Pt(p,"type","button"),Pt(p,"title",r("add")),Pt(p,"class","button button_green button_small"+($g?" button_widget":"")),Pt(y,"class","chat-editor__tools"),Pt(o,"class","chat-editor__fieldset-wrapper"),Pt(e,"class","chat-editor__fieldset"),e.disabled=n[6],Pt(i,"class","chat-editor__form"),Pt(i,"enctype","multipart/form-data"),Pt(t,"class",w="chat-editor ui"+(n[6]?" chat-editor_disabled":""))},m:function(r,c){xt(r,t,c),jt(t,i),jt(i,e),jt(e,o),Ui(u,o,null),jt(o,f),jt(o,a),jt(a,s),jt(a,l),jt(o,h),jt(o,d),$t(d,n[7]),n[18](d),jt(o,v),jt(o,y),jt(y,p),jt(p,m),jt(p,b),n[19](t),_=!0,g||(S=[Dt(s,"change",n[11]),Dt(d,"input",n[17]),Dt(d,"keydown",n[9]),Dt(d,"keyup",n[10]),Dt(p,"click",n[8]),Dt(i,"submit",n[8])],g=!0)},p:function(n,i){var r=this,o={};!c&&16&i&&(c=!0,o.element=n[4],vi(function(){return Uc(this,r),c=!1}.bind(this))),u.$set(o),128&i&&$t(d,n[7]),(!_||64&i)&&(e.disabled=n[6]),(!_||64&i&&w!==(w="chat-editor ui"+(n[6]?" chat-editor_disabled":"")))&&Pt(t,"class",w)},i:function(n){_||(Ei(u.$$.fragment,n),_=!0)},o:function(n){Ai(u.$$.fragment,n),_=!1},d:function(i){i&&Ct(t),Bi(u),n[18](null),n[19](null),g=!1,tt(S)}}}function Nc(n){var t,i,r,e=n[2]&&Bc(n),o=n[5]&&Dc(n);return{c:function(){e&&e.c(),t=Ut(),o&&o.c(),i=Bt()},m:function(n,u){e&&e.m(n,u),xt(n,t,u),o&&o.m(n,u),xt(n,i,u),r=!0},p:function(n,r){var u=this,c=Rc(r,1)[0];n[2]?e?e.p(n,c):((e=Bc(n)).c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null),n[5]?o?(o.p(n,c),32&c&&Ei(o,1)):((o=Dc(n)).c(),Ei(o,1),o.m(i.parentNode,i)):o&&(ji(),Ai(o,1,1,function(){Uc(this,u),o=null}.bind(this)),ki())},i:function(n){r||(Ei(o),r=!0)},o:function(n){Ai(o),r=!1},d:function(n){e&&e.d(n),n&&Ct(t),o&&o.d(n),n&&Ct(i)}}}function Pc(n){var t=this;n.length&&Vi.update(function(i){Uc(this,t);for(var r=0,e=n.length;r<e;r++)i.push(n[r]);return i}.bind(this))}function Lc(n,i,e){var o,u,c,f,a=this,s=Jn,l=function(){var n=this;return Uc(this,a),s(),s=ut(h,function(t){return Uc(this,n),e(14,o=t)}.bind(this)),h}.bind(this);ft(n,Vi,function(n){return Uc(this,a),e(20,u=n)}.bind(this)),ft(n,Qi,function(n){return Uc(this,a),e(15,c=n)}.bind(this)),ft(n,Yi,function(n){return Uc(this,a),e(7,f=n)}.bind(this)),n.$$.on_destroy.push(function(){return Uc(this,a),s()}.bind(this));var h=i.chat;l();var v,y,p,m,b=i.resizeList,w=!1,_="",g=!1;function S(){window.fz&&(o.type===L?window.fz("track","MQL5+Chat+Message+Sent"):o.type===$?window.fz("track","MQL5+Chat+Channel+Message+Sent"):o.type===q&&window.fz("track","MQL5+Chat+Group+Message+Sent"))}function T(){var n=this;Qi.set(undefined),Yi.set(""),Vi.set([]),hi().then(function(){Uc(this,n),j(),b()}.bind(this))}function j(){if(window.getComputedStyle){e(3,v.style.height=aS+"px",v),e(3,v.style.flexBasis=aS+"px",v);var n=Math.max(aS,Math.min(4+y.scrollHeight,200));e(4,p.style.bottom="".concat(n+1,"px"),p),e(3,v.style.height=n+"px",v),e(3,v.style.flexBasis=n+"px",v)}}function k(){var n=this;if(!g){var i=ct(Yi).trim();if(!(i.length>4e3))return c||u.length?!c||i&&i.length?1!==u.length||i.length||c?i.length?void function(){var n=this;e(6,g=!0);var i=ct(Yi).trim(),f=undefined;if(c){f=[];var a="";if(c.recType===z){var s=c.data.text.indexOf("\n");a=s>0?c.data.text.substring(0,Math.min(s,100)):c.data.text.substring(0,100)}f.push({tagType:Y,citedId:c.messageId,citedType:c.recType,citedUser:c.authorId,citedAuthor:c.authorName,citedText:a})}u&&u.length?vr(u,o.chatId,function(t){Uc(this,n),Rb(t)}.bind(this)).then(function(r){var u=this;Uc(this,n),f||(f=[]),e(2,_=r.errors.join(". ")),f.push({tagType:J,type:K,linedIds:r.uploaded}),o_(o.chatId,i,f).then(function(){Uc(this,u),S(),e(6,g=!1),T()}.bind(this))["catch"](function(n){Uc(this,u),e(2,_=n),e(6,g=!1),d.error(t.User,n,"Add message")}.bind(this))}.bind(this)):i?o_(o.chatId,i,f).then(function(){Uc(this,n),S(),e(6,g=!1),T()}.bind(this))["catch"](function(i){Uc(this,n),e(2,_=i),e(6,g=!1),d.error(t.User,i,"Add message")}.bind(this)):(e(6,g=!1),e(2,_=r("emptyMessageError")))}():void e(2,_=r("emptyMessageError")):(e(6,g=!0),void vr(u,o.chatId,undefined).then(function(t){Uc(this,n),e(2,_=t.errors.join(". ")),t.uploaded.length&&S(),e(6,g=!1),T()}.bind(this))["catch"](function(i){Uc(this,n),e(2,_=i),e(6,g=!1),d.error(t.User,i,"Add message files")}.bind(this))):void e(2,_=r("emptyMessageError")):void(i&&i.length?(e(6,g=!0),o_(o.chatId,i,undefined).then(function(){Uc(this,n),S(),e(6,g=!1),T()}.bind(this))["catch"](function(i){Uc(this,n),e(2,_=i),e(6,g=!1),d.error(t.User,i,"Add message")}.bind(this))):e(2,_=r("emptyMessageError")));e(2,_=r("longMessageError",4e3))}}return ii(function(){Uc(this,a),function(){var n=ct(yb);n&&Ji[n.chatId]?(Qi.set(Ji[n.chatId].reply),Vi.set(Ji[n.chatId].files),Yi.set(Ji[n.chatId].text)):(Qi.set(undefined),Vi.set([]),Yi.set(""))}(),y&&(y.focus(),v&&(function(n,t,i){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:R;if(n){var e,o=ar({classList:["drag-and-drop","hidden"],listeners:{dragover:f,dragenter:f,dragleave:a,drop:s},children:[ar({classList:["drag-and-drop__title"],children:tr("dragAndDrop")})]}),u=ar({classList:["drag-and-drop__errors"]});n.appendChild(o),n.appendChild(u),n.addEventListener("dragover",f),n.addEventListener("dragenter",f)}function c(n){var t=this,e=[];return(n=lr(n))&&n.length?(n.forEach(function(n){sr(this,t);var o=rr(n.name);~r.indexOf(o)?e.push(n):i&&i("".concat(tr("errorInvalidExtension"),": ").concat(n.name))}.bind(this)),e):e}function f(n){n&&(n.stopPropagation(),n.preventDefault(),n.dataTransfer&&n.dataTransfer.items&&n.dataTransfer.items.length?(clearTimeout(e),n.dataTransfer.dropEffect="copy",o.classList.remove("hidden")):a())}function a(){var n=this;clearTimeout(e),e=setTimeout(function(){sr(this,n),o.classList.add("hidden")}.bind(this),100)}function s(n){if(n){n.stopPropagation(),n.preventDefault();var i=n.dataTransfer;if(i&&i.files&&i.files.length){var r=i.files;t&&t(c(r)),a()}else a()}}}(v,Pc,(function(n){e(2,_=n)}),R),function(n,t,i){var r=this,e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:R;function o(n){var t=this,r=[];return(n=or(n))&&n.length?(n.forEach(function(n){er(this,t);var o=rr(n.name);~e.indexOf(o)?r.push(n):i&&i("".concat(tr("errorInvalidExtension"),": ").concat(n.name))}.bind(this)),r):r}n&&n.addEventListener("paste",function(n){if(er(this,r),n){var i=n.clipboardData;if(i&&i.files&&i.files.length){var e=i.files;t&&t(o(e))}}}.bind(this))}(y,Pc,(function(n){e(2,_=n)}),R)))}.bind(this)),n.$$set=function(n){Uc(this,a),"chat"in n&&l(e(0,h=n.chat)),"resizeList"in n&&e(12,b=n.resizeList)}.bind(this),n.$$.update=function(){var t=this;if(Uc(this,a),16384&n.$$.dirty){var i=o.authorId===B;e(5,w=!(i||o.isClosed||!(o.perms&fn.Ln)||Lg))}8196&n.$$.dirty&&_&&(clearTimeout(m),e(13,m=setTimeout(function(){Uc(this,t),e(2,_="")}.bind(this),5e3))),32770&n.$$.dirty&&c&&y&&y.focus()}.bind(this),[h,y,_,v,p,w,g,f,k,function(n){return"Enter"!==n.key||!n.ctrlKey||(k(),!1)},function(){j(),b()},function(n){var t=this,i=n.target;if(i&&i.files){var o=i.files;Vi.update(function(n){Uc(this,t);for(var i=0,u=o.length;i<u;i++)n.push(o[i]);return n.length>8&&(n.splice(8),e(2,_=r("maxNumberFiles",8))),n}.bind(this)),i.value="",i.type="",i.type="file"}},b,m,o,c,function(n){e(4,p=n)},function(){f=this.value,Yi.set(f)},function(n){var t=this;ui[n?"unshift":"push"](function(){Uc(this,t),e(1,y=n)}.bind(this))},function(n){var t=this;ui[n?"unshift":"push"](function(){Uc(this,t),e(3,v=n)}.bind(this))}]}var qc,$c=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Ac(n,t)}(i,n);var t=Oc(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Cc(r=t.call(this)),n,Lc,Nc,rt,{chat:0,resizeList:12}),r}return i}(Pi),zc=$c;var Wc={weekday:["Mo","Tu","We","Th","Fr","Sa","Su"],weekdayFull:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthFull:["January","February","March","April","May","June","July","August","September","October","November","December"]},Fc={date:undefined,dateTime:undefined};function Gc(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())}function Hc(n,t){return(Gc(n)-Gc(t))/864e5|0}function Qc(n){var t=n.dateTime;switch(n.type){case"datetime":case"datestandardtime":return Yc(t)+" "+Jc(t);case"date":case"datestandard":return Yc(t);case"shortDate":return Fc.shortDate.format(t);case"shortDateTime":return Fc.shortDate.format(t)+" "+Jc(t);case"time":return Jc(t);case"shortMonth":return Fc.shortMonth?Fc.shortMonth.format(t):Zc(t);case"longMonth":return Fc.shortMonth?Fc.longMonth.format(t):Zc(t);default:throw new Error("Datetime type '"+n.type+"' is not supported")}}function Vc(n){var t=n.dateTime;if(!qc)return n.type="datestandard",Qc(n);var i=new Date,r=Hc(t,i);switch(n.type){case"datetime":return 0===r?Fc.time.format(t):Fc.relative&&r>=-1?Fc.relative.format(r,"day")+", "+Fc.time.format(t):i.getFullYear()===t.getFullYear()?Fc.shortDate.format(t)+", "+Fc.time.format(t):Yc(t)+", "+Jc(t);case"date":return Fc.relative&&r>=-2&&r<=0?Fc.relative.format(r,"day"):i.getFullYear()===t.getFullYear()?Fc.longDate.format(t):Fc.datestandard.format(t).replace(/-/g,".");default:return 0===r?Fc.time.format(t):Fc.relative&&r>=-1?Fc.relative.format(r,"day"):i.getFullYear()===t.getFullYear()?Fc.shortDate.format(t):Fc.datestandard.format(t).replace(/-/g,".")}}function Yc(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:".";return n.getFullYear()+t+Kc(n.getMonth()+1)+t+Kc(n.getDate())}function Jc(n){return Kc(n.getHours())+":"+Kc(n.getMinutes())}function Kc(n){return("0"+n).slice(-2)}function Xc(n){var t=n.date,i=n.dateLocal,r=void 0===i||i,e=r?t.getFullYear():t.getUTCFullYear(),o=(e=(e="0000"+e).substring(e.length-4))+".";return o+=((e=(r?t.getMonth():t.getUTCMonth())+1)<10?"0"+e:e)+".",o+=((e=r?t.getDate():t.getUTCDate())<10?"0"+e:e)+" ",o+=((e=r?t.getHours():t.getUTCHours())<10?"0"+e:e)+":",o+=(e=r?t.getMinutes():t.getUTCMinutes())<10?"0"+e:e}function Zc(n){return"".concat(tr("monthsShort.".concat(n.getMonth())))}function nf(n,t,i){var r,e,o,u=null,c=0;i||(i={});var f=function(){c=!1===i.leading?0:Date.now(),u=null,o=n.apply(r,e),u||(r=e=null)};return function(){var a=Date.now();c||!1!==i.leading||(c=a);var s=t-(a-c);r=this;for(var l=arguments.length,h=new Array(l),d=0;d<l;d++)h[d]=arguments[d];return e=h,s<=0||s>t?(u&&(clearTimeout(u),u=null),c=a,o=n.apply(r,e),u||(r=e=null)):u||!1===i.trailing||(u=setTimeout(f,s)),o}}function tf(n){return tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},tf(n)}function rf(n,t){return rf=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},rf(n,t)}function ef(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=cf(n);if(t){var e=cf(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return of(this,i)}}function of(n,t){if(t&&("object"===tf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return uf(n)}function uf(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function cf(n){return cf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},cf(n)}function ff(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return af(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return af(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function af(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function sf(n){var t,i,r,e,o,u,c,f,a=Qc({dateTime:n[0].date,type:"time"})+"";return{c:function(){t=Rt("div"),i=Rt("div"),r=Mt(a),o=Ut(),u=Rt("div"),c=Rt("div"),f=Mt(n[1]),Pt(i,"class","chat-message__date"),Pt(i,"title",e=n[0].dateText),Pt(c,"class","chat-message__buble"),Pt(u,"class","chat-message__box"),Pt(t,"class","chat-message chat-message_system")},m:function(n,e){xt(n,t,e),jt(t,i),jt(i,r),jt(t,o),jt(t,u),jt(u,c),jt(c,f)},p:function(n,t){var o=ff(t,1)[0];1&o&&a!==(a=Qc({dateTime:n[0].date,type:"time"})+"")&&qt(r,a),1&o&&e!==(e=n[0].dateText)&&Pt(i,"title",e),2&o&&qt(f,n[1])},i:Jn,o:Jn,d:function(n){n&&Ct(t)}}}function lf(n,t,i){var e=this,o=t.message,u=t.chat,c="",f=u.type===$;switch(o.data.type){case X:c=o.data.userId===Bg?r("systemYouInvited",u.name):r("systemUserInvited",o.authorName,o.data.userName);break;case Z:c=o.authorId===o.data.userId?r("systemChatUserLeft",o.data.userName):r(f?"systemChannelUserRemoved":"systemChatUserRemoved",o.authorName,o.data.userName);break;case nn:c=o.data.changeValue?r("systemChannelPublic",o.authorName):r("systemChannelPrivate",o.authorName);break;case tn:c=o.data.changeValue?r("systemChatLimited",o.authorName):r("systemChatUnlimited",o.authorName);break;case rn:c=f?o.data.changeValue?r("systemChannelClosed"):r("systemChannelReopened"):o.data.changeValue?r("systemChatClosed",o.authorName):r("systemChatReopened",o.authorName);break;case en:c=f?r("systemChannelRename",'"'+o.data.name+'"'):r("systemChatRename",o.authorName,'"'+o.data.name+'"');break;case on:c=f?r("systemChannelCreate",'"'+o.data.name+'"'):r("systemChatCreate",o.authorName,'"'+o.data.name+'"');break;default:c=""}return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,e),"message"in n&&i(0,o=n.message),"chat"in n&&i(2,u=n.chat)}.bind(this),[o,c,u]}!function(){if(qc=window.Intl!==undefined){var n,t={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1},i={year:"numeric",month:"long",day:"numeric"},r={year:"numeric",month:"2-digit",day:"2-digit"},e={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},o={day:"numeric",month:"short"},u={day:"numeric",month:"long"},c={hour:"numeric",minute:"numeric",hour12:!1},f={month:"short"},a={month:"long"},s={weekday:"short"},l={weekday:"long"},h={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};switch(document.documentElement.lang){case"ru":n="ru-RU";break;case"zh":n="zh-CN";break;default:n="en-GB"}var d=[n,"en"];Fc.dateTime=new window.Intl.DateTimeFormat(d,t),Fc.date=new window.Intl.DateTimeFormat(d,i),Fc.datestandard=new window.Intl.DateTimeFormat(["lt-LT","ko-KR","en"],r),Fc.datestandardtime=new window.Intl.DateTimeFormat(["lt-LT","ko-KR","en"],e),Fc.shortDate=new window.Intl.DateTimeFormat(d,o),Fc.longDate=new window.Intl.DateTimeFormat(d,u),Fc.time=new window.Intl.DateTimeFormat(d,c),Fc.relative=window.Intl.RelativeTimeFormat?new window.Intl.RelativeTimeFormat(d,{numeric:"auto"}):null,Fc.shortMonth=new window.Intl.DateTimeFormat(d,f),Fc.longMonth=new window.Intl.DateTimeFormat(d,a),Fc.shortWeekday=new window.Intl.DateTimeFormat(d,s),Fc.longWeekday=new window.Intl.DateTimeFormat(d,l),Fc.humanreadabledate=new window.Intl.DateTimeFormat(d,h),function(){Wc={month:[],monthFull:[],weekday:[],weekdayFull:[]};for(var n=0;n<12;n++){var t=new Date(2020,n,10),i=Fc.shortMonth.format(t).replace(".","");i=i.charAt(0).toUpperCase()+i.slice(1,3);var r=Fc.longMonth.format(t);r=r.charAt(0).toUpperCase()+r.slice(1),Wc.month.push(i),Wc.monthFull.push(r)}for(var e=0;e<7;e++){var o=new Date(2020,9,5+e),u=Fc.shortWeekday.format(o);u=u.charAt(0).toUpperCase()+u.slice(1);var c=Fc.longWeekday.format(o);c=c.charAt(0).toUpperCase()+c.slice(1),Wc.weekday.push(u),Wc.weekdayFull.push(c)}}()}}();var hf,df,vf,yf=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&rf(n,t)}(i,n);var t=ef(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(uf(r=t.call(this)),n,lf,sf,rt,{message:0,chat:2}),r}return i}(Pi),pf=yf;function mf(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var bf={};function wf(n){var i=this;return bf[n]||(bf[n]=Wi({userId:n}),n&&m_([n]).then(function(n){var t=this;mf(this,i),n.forEach(function(n){mf(this,t),bf[n.userId].set(n)}.bind(this))}.bind(this))["catch"](function(n){mf(this,i),d.error(t.System,n)}.bind(this))),bf[n]}function _f(n){return _f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_f(n)}var gf=undefined;function Sf(n,t){return Sf=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Sf(n,t)}function Tf(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Ef(n);if(t){var e=Ef(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return jf(this,i)}}function jf(n,t){if(t&&("object"===_f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kf(n)}function kf(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ef(n){return Ef=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ef(n)}function Af(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Of(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Of(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Of(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function xf(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Cf=function(n){return xf(this,gf),{}}.bind(undefined),If=function(n){return xf(this,gf),{}}.bind(undefined),Rf=function(n){return xf(this,gf),{}}.bind(undefined),Mf=function(n){return xf(this,gf),{}}.bind(undefined),Uf=function(n){return xf(this,gf),{}}.bind(undefined),Bf=function(n){return xf(this,gf),{}}.bind(undefined);function Df(n){var t,i,r=n[12].title,e=at(r,n,n[11],Bf);return{c:function(){t=Rt("div"),e&&e.c(),Pt(t,"class","chat-dialog__title")},m:function(n,r){xt(n,t,r),e&&e.m(t,null),i=!0},p:function(n,t){e&&e.p&&(!i||2048&t)&&ht(e,r,n,n[11],i?lt(r,n[11],t,Uf):dt(n[11]),Bf)},i:function(n){i||(Ei(e,n),i=!0)},o:function(n){Ai(e,n),i=!1},d:function(n){n&&Ct(t),e&&e.d(n)}}}function Nf(n){var t,i,r=n[12].buttons,e=at(r,n,n[11],If);return{c:function(){t=Rt("div"),e&&e.c(),Pt(t,"class","chat-dialog__buttons")},m:function(n,r){xt(n,t,r),e&&e.m(t,null),i=!0},p:function(n,t){e&&e.p&&(!i||2048&t)&&ht(e,r,n,n[11],i?lt(r,n[11],t,Cf):dt(n[11]),If)},i:function(n){i||(Ei(e,n),i=!0)},o:function(n){Ai(e,n),i=!1},d:function(n){n&&Ct(t),e&&e.d(n)}}}function Pf(n){var t,i,r,e,o,u,c,f,a,s,l,h,d=n[0]&&Df(n),v=n[12].content,y=at(v,n,n[11],Mf),p=n[1]&&Nf(n);return{c:function(){var a=this;t=Rt("div"),i=Ut(),r=Rt("div"),(e=Rt("div")).innerHTML='<i class="icons-ux icons-ux_close-gray"></i>',o=Ut(),d&&d.c(),u=Ut(),c=Rt("div"),y&&y.c(),f=Ut(),p&&p.c(),Pt(t,"class","chat-dialog__shadow"),Pt(e,"class","chat-dialog__close qa-dialog-close"),Pt(c,"class","chat-dialog__content"),Pt(r,"class","chat-dialog__container ui"),zt(r,"top",n[4]),zt(r,"left",n[5]),zt(r,"bottom",n[7]),zt(r,"right",n[6]),zt(r,"transform","translate3d("+n[8]+", "+n[9]+", 0)"),di(function(){return xf(this,a),n[13].call(r)}.bind(this))},m:function(v,m){xt(v,t,m),xt(v,i,m),xt(v,r,m),jt(r,e),jt(r,o),d&&d.m(r,null),jt(r,u),jt(r,c),y&&y.m(c,null),jt(r,f),p&&p.m(r,null),a=function(n,t){var i=this;"static"===getComputedStyle(n).position&&(n.style.position="relative");var r=Rt("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;var e,o=Ft();return o?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",e=Dt(window,"message",function(n){Yn(this,i),n.source===r.contentWindow&&t()}.bind(this))):(r.src="about:blank",r.onload=function(){Yn(this,i),e=Dt(r.contentWindow,"resize",t)}.bind(this)),jt(n,r),function(){Yn(this,i),(o||e&&r.contentWindow)&&e(),Ct(r)}.bind(this)}(r,n[13].bind(r)),s=!0,l||(h=[Dt(t,"click",n[10]),Dt(e,"click",n[10])],l=!0)},p:function(n,t){var i=this,e=Af(t,1)[0];n[0]?d?(d.p(n,e),1&e&&Ei(d,1)):((d=Df(n)).c(),Ei(d,1),d.m(r,u)):d&&(ji(),Ai(d,1,1,function(){xf(this,i),d=null}.bind(this)),ki()),y&&y.p&&(!s||2048&e)&&ht(y,v,n,n[11],s?lt(v,n[11],e,Rf):dt(n[11]),Mf),n[1]?p?(p.p(n,e),2&e&&Ei(p,1)):((p=Nf(n)).c(),Ei(p,1),p.m(r,null)):p&&(ji(),Ai(p,1,1,function(){xf(this,i),p=null}.bind(this)),ki()),(!s||16&e)&&zt(r,"top",n[4]),(!s||32&e)&&zt(r,"left",n[5]),(!s||128&e)&&zt(r,"bottom",n[7]),(!s||64&e)&&zt(r,"right",n[6]),(!s||768&e)&&zt(r,"transform","translate3d("+n[8]+", "+n[9]+", 0)")},i:function(n){s||(Ei(d),Ei(y,n),Ei(p),s=!0)},o:function(n){Ai(d),Ai(y,n),Ai(p),s=!1},d:function(n){n&&Ct(t),n&&Ct(i),n&&Ct(r),d&&d.d(),y&&y.d(n),p&&p.d(),a(),l=!1,tt(h)}}}function Lf(n,t,i){var r,e,o=this,u=t.$$slots,c=void 0===u?{}:u,f=t.$$scope,a=t.withTitle,s=void 0===a||a,l=t.withButtons,h=void 0===l||l,d=ri(),v="50%",y="50%",p="auto",m="auto",b="0",w="0";function _(){var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;n-16<r?(i(5,y="8px"),i(6,p="8px"),i(8,b=0)):(i(5,y="50%"),i(6,p="auto"),i(8,b=r/2*-1+"px")),t-16<e?(i(4,v="8px"),i(7,m="8px"),i(9,w=0)):(i(4,v="50%"),i(7,m="auto"),i(9,w=e/2*-1+"px"))}ii(function(){var n=this;return xf(this,o),window.addEventListener("resize",_),_(),function(){xf(this,n),window.removeEventListener("resize",_)}.bind(this)}.bind(this));var g=function(){xf(this,o),d("close")}.bind(this);return n.$$set=function(n){xf(this,o),"withTitle"in n&&i(0,s=n.withTitle),"withButtons"in n&&i(1,h=n.withButtons),"$$scope"in n&&i(11,f=n.$$scope)}.bind(this),[s,h,r,e,v,y,p,m,b,w,g,f,c,function(){r=this.offsetWidth,e=this.offsetHeight,i(2,r),i(3,e)}]}var qf=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Sf(n,t)}(i,n);var t=Tf(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(kf(r=t.call(this)),n,Lf,Pf,rt,{withTitle:0,withButtons:1}),r}return i}(Pi),$f=qf;function zf(n){return zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zf(n)}function Wf(n,t){return Wf=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Wf(n,t)}function Ff(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Qf(n);if(t){var e=Qf(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Gf(this,i)}}function Gf(n,t){if(t&&("object"===zf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hf(n)}function Hf(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Qf(n){return Qf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Qf(n)}function Vf(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Yf(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Jf(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Jf(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jf(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Kf(n,t,i){var r=n.slice();return r[21]=t[i],r}function Xf(n){var t,i;return(t=new $f({props:{$$slots:{buttons:[ra],content:[ia],title:[na]},$$scope:{ctx:n}}})).$on("close",n[18]),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};16777247&i&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Zf(n){var t,i;return(t=new $f({props:{withButtons:!1,$$slots:{content:[oa],title:[ea]},$$scope:{ctx:n}}})).$on("close",n[14]),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};16777312&i&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function na(n){var t;return{c:function(){(t=Rt("span")).textContent="".concat(r("complaintTitle")),Pt(t,"slot","title")},m:function(n,i){xt(n,t,i)},p:Jn,d:function(n){n&&Ct(t)}}}function ta(n){var t,i,e,o,u,c,f=r(n[21].name)+"";return{c:function(){t=Rt("input"),i=Ut(),e=Rt("label"),o=Mt(f),Pt(t,"name","complaintType"),t.__value=n[21].num,t.value=t.__value,Pt(t,"class","radio"),Pt(t,"type","radio"),Pt(t,"id","complaintType"+n[21].num),n[16][0].push(t),Pt(e,"for","complaintType"+n[21].num)},m:function(r,f){xt(r,t,f),t.checked=t.__value===n[2],xt(r,i,f),xt(r,e,f),jt(e,o),u||(c=Dt(t,"change",n[15]),u=!0)},p:function(n,i){4&i&&(t.checked=t.__value===n[2])},d:function(r){r&&Ct(t),n[16][0].splice(n[16][0].indexOf(t),1),r&&Ct(i),r&&Ct(e),u=!1,c()}}}function ia(n){for(var t,i,e,o,u,c,f,a,s,l,h,d,v,y,p,m,b,w,_,g,S,T,j,k,E,A,O=(n[1].type===$?n[1].name:n[0].authorName)+"",x=r("comment")+"",C=n[4].length+"",I=fa,R=[],M=0;M<I.length;M+=1)R[M]=ta(Kf(n,I,M));return{c:function(){t=Rt("div"),i=Rt("form"),e=Rt("div"),o=Rt("i"),u=Ut(),c=Rt("b"),f=Mt(O),a=Mt(":"),s=Ut(),l=Mt(n[3]),h=Ut(),d=Rt("div");for(var r=0;r<R.length;r+=1)R[r].c();v=Ut(),y=Rt("div"),p=Rt("div"),m=Mt(x),b=Ut(),w=Rt("div"),_=Mt(C),g=Mt("/"),S=Mt(ca),T=Ut(),j=Rt("div"),k=Rt("textarea"),Pt(o,"class","icons-ux icons-ux_reply"),Pt(e,"class","chat-complaint__message"),Pt(d,"class","chat-complaint__type-list"),Pt(w,"class","chat-complaint__count"),Pt(w,"id","complaint_char_counter"),Pt(p,"class","chat-complaint__title"),Pt(k,"class","textarea"),Pt(k,"name","complaint_text"),Pt(k,"rows","3"),Pt(j,"class","complaint-window__editor"),Pt(y,"class","chat-complaint__item"),Pt(i,"class","chat-complaint"),Pt(t,"slot","content")},m:function(r,O){xt(r,t,O),jt(t,i),jt(i,e),jt(e,o),jt(e,u),jt(e,c),jt(c,f),jt(c,a),jt(e,s),jt(e,l),jt(i,h),jt(i,d);for(var x=0;x<R.length;x+=1)R[x].m(d,null);jt(i,v),jt(i,y),jt(y,p),jt(p,m),jt(p,b),jt(p,w),jt(w,_),jt(w,g),jt(w,S),jt(y,T),jt(y,j),jt(j,k),$t(k,n[4]),E||(A=[Dt(k,"input",n[17]),Dt(k,"input",n[9])],E=!0)},p:function(n,t){if(3&t&&O!==(O=(n[1].type===$?n[1].name:n[0].authorName)+"")&&qt(f,O),8&t&&qt(l,n[3]),4&t){var i;for(I=fa,i=0;i<I.length;i+=1){var r=Kf(n,I,i);R[i]?R[i].p(r,t):(R[i]=ta(r),R[i].c(),R[i].m(d,null))}for(;i<R.length;i+=1)R[i].d(1);R.length=I.length}16&t&&C!==(C=n[4].length+"")&&qt(_,C),16&t&&$t(k,n[4])},d:function(n){n&&Ct(t),It(R,n),E=!1,tt(A)}}}function ra(n){var t,i,e,o;return{c:function(){t=Rt("span"),(i=Rt("button")).textContent="".concat(r("add")),Pt(i,"class","button button_green qa-dialog-ok"),Pt(t,"slot","buttons")},m:function(r,u){xt(r,t,u),jt(t,i),e||(o=Dt(i,"click",n[10]),e=!0)},p:Jn,d:function(n){n&&Ct(t),e=!1,o()}}}function ea(n){var t,i;return{c:function(){t=Rt("span"),i=Mt(n[5]),Pt(t,"slot","title")},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,t){32&t&&qt(i,n[5])},d:function(n){n&&Ct(t)}}}function oa(n){var t,i,r;return{c:function(){t=Rt("div"),i=Rt("div"),r=Mt(n[6]),Pt(i,"class","chat-alert-text"),Pt(t,"slot","content")},m:function(n,e){xt(n,t,e),jt(t,i),jt(i,r)},p:function(n,t){64&t&&qt(r,n[6])},d:function(n){n&&Ct(t)}}}function ua(n){var t,i,r,e,o=[Zf,Xf],u=[];function c(n,t){return n[5]?0:1}return t=c(n),i=u[t]=o[t](n),{c:function(){i.c(),r=Bt()},m:function(n,i){u[t].m(n,i),xt(n,r,i),e=!0},p:function(n,e){var f=this,a=Yf(e,1)[0],s=t;(t=c(n))===s?u[t].p(n,a):(ji(),Ai(u[s],1,1,function(){Vf(this,f),u[s]=null}.bind(this)),ki(),(i=u[t])?i.p(n,a):(i=u[t]=o[t](n)).c(),Ei(i,1),i.m(r.parentNode,r))},i:function(n){e||(Ei(i),e=!0)},o:function(n){Ai(i),e=!1},d:function(n){u[t].d(n),n&&Ct(r)}}}var ca=150,fa=[{name:"spam",num:0},{name:"abuse",num:1},{name:"advert",num:2},{name:"complaintOther",num:500}];function aa(n,t,i){var e,o,u=this,c=t.message,f=t.chat,a=0,s="",l="",h="",d="",v="",y="",p="",m=wf(f.authorId);ft(n,m,function(n){return Vf(this,u),i(13,o=n)}.bind(this));var b=wf(c.authorId);ft(n,b,function(n){return Vf(this,u),i(12,e=n)}.bind(this));return n.$$set=function(n){Vf(this,u),"message"in n&&i(0,c=n.message),"chat"in n&&i(1,f=n.chat)}.bind(this),n.$$.update=function(){if(Vf(this,u),1&n.$$.dirty)switch(c.recType){case z:i(3,s=c.data.text);break;case W:i(3,s=c.data.fileName);break;case Q:c.data.text&&i(3,s=c.data.text.data.text)}2&n.$$.dirty&&(f.type===$?p=f.inviteLink?"channels/".concat(f.inviteLink):"channels/".concat(f.chatId):f.type===q&&(p="messages/".concat(f.chatId))),8192&n.$$.dirty&&o.userLogin&&(y=o.userLogin),6146&n.$$.dirty&&e.userLogin&&(i(11,v=e.userLogin),f.type===L&&(p="users/".concat(v,"/messages")))}.bind(this),[c,f,a,s,l,h,d,m,b,function(n){l.length>ca&&(n.preventDefault(),i(4,l=l.slice(0,ca)))},function(){var n={complaintType:a,complaintText:l,chatId:f.chatId,chatLink:p,chatAuthorLogin:y,chatAuthorName:f.authorName,chatMessage:s,chatMessageAuthorLogin:v,chatMessageAuthorName:c.authorName,chatUsersCount:f.countMembers,chatType:f.type,__signature:Ug};window.Ajax.post("/complaint/new/chat",n,!1,{onready:function(){i(5,h=r("complaintTitle")),i(6,d=r("complaintSuccess"))},onerror:function(){i(5,h=r("complaintTitle")),i(6,d=r("complaintError"))}},!1,!0)},v,e,o,function(t){ei.call(this,n,t)},function(){a=this.__value,i(2,a)},[[]],function(){l=this.value,i(4,l)},function(t){ei.call(this,n,t)}]}var sa=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Wf(n,t)}(i,n);var t=Ff(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Hf(r=t.call(this)),n,aa,ua,rt,{message:0,chat:1}),r}return i}(Pi),la=sa;function ha(n){return ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ha(n)}function da(n,t){return da=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},da(n,t)}function va(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=ma(n);if(t){var e=ma(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return ya(this,i)}}function ya(n,t){if(t&&("object"===ha(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pa(n)}function pa(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ma(n){return ma=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ma(n)}function ba(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function wa(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return _a(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _a(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _a(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function ga(n){var t,i,e,o=n[5]&&function(n){var t,i,e,o;return{c:function(){t=Rt("div"),(i=Rt("a")).textContent="".concat(r("delete")),Pt(i,"href","#"),Pt(t,"class","chat-window-menu__item")},m:function(r,u){xt(r,t,u),jt(t,i),e||(o=Dt(i,"click",Nt(n[9])),e=!0)},p:Jn,d:function(n){n&&Ct(t),e=!1,o()}}}(n),u=n[6]&&function(n){var t,i,e,o;return{c:function(){t=Rt("div"),(i=Rt("a")).textContent="".concat(r("complaint")),Pt(i,"href","#"),Pt(t,"class","chat-window-menu__item")},m:function(r,u){xt(r,t,u),jt(t,i),e||(o=Dt(i,"click",Nt(n[10])),e=!0)},p:Jn,d:function(n){n&&Ct(t),e=!1,o()}}}(n),c=n[7]&&function(n){var t,i,e,o;return{c:function(){t=Rt("div"),(i=Rt("a")).textContent="".concat(r("replyMessage")),Pt(i,"href","#"),Pt(t,"class","chat-window-menu__item")},m:function(r,u){xt(r,t,u),jt(t,i),e||(o=Dt(i,"click",Nt(n[11])),e=!0)},p:Jn,d:function(n){n&&Ct(t),e=!1,o()}}}(n);return{c:function(){o&&o.c(),t=Ut(),u&&u.c(),i=Ut(),c&&c.c(),e=Bt()},m:function(n,r){o&&o.m(n,r),xt(n,t,r),u&&u.m(n,r),xt(n,i,r),c&&c.m(n,r),xt(n,e,r)},p:function(n,t){n[5]&&o.p(n,t),n[6]&&u.p(n,t),n[7]&&c.p(n,t)},d:function(n){o&&o.d(n),n&&Ct(t),u&&u.d(n),n&&Ct(i),c&&c.d(n),n&&Ct(e)}}}function Sa(n){var t,i;return(t=new la({props:{message:n[1],chat:n[2]}})).$on("close",n[12]),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};2&i&&(r.message=n[1]),4&i&&(r.chat=n[2]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Ta(n){var t,i,r,e=n[8]&&ga(n),o=n[4]&&Sa(n);return{c:function(){e&&e.c(),t=Ut(),o&&o.c(),i=Bt()},m:function(n,u){e&&e.m(n,u),xt(n,t,u),o&&o.m(n,u),xt(n,i,u),r=!0},p:function(n,t){var r=this,u=wa(t,1)[0];n[8]&&e.p(n,u),n[4]?o?(o.p(n,u),16&u&&Ei(o,1)):((o=Sa(n)).c(),Ei(o,1),o.m(i.parentNode,i)):o&&(ji(),Ai(o,1,1,function(){ba(this,r),o=null}.bind(this)),ki())},i:function(n){r||(Ei(o),r=!0)},o:function(n){Ai(o),r=!1},d:function(n){e&&e.d(n),n&&Ct(t),o&&o.d(n),n&&Ct(i)}}}function ja(n,i,r){var e=this,o=i.showedMenu,u=i.message,c=i.chat,f=u.authorId===B,a=c.type===L,s=u.authorId===Bg,l=!1,h=!1,v=!!(c.perms&fn.qn)||a&&s,y=!f&&!s,p=!f&&!s&&c.type!==$&&(a||!!(c.perms&fn.Ln)),m=v||y||p,w=function(){ba(this,e),r(3,l=!0),r(0,o=!1)}.bind(this),_=function(){ba(this,e),r(4,h=!0)}.bind(this),g=function(){ba(this,e),function(n){Qi.set(n)}(u),r(0,o=!1)}.bind(this),S=function(){ba(this,e),r(4,h=!1),r(0,o=!1)}.bind(this);return n.$$set=function(n){ba(this,e),"showedMenu"in n&&r(0,o=n.showedMenu),"message"in n&&r(1,u=n.message),"chat"in n&&r(2,c=n.chat)}.bind(this),n.$$.update=function(){var i=this;if(ba(this,e),14&n.$$.dirty&&l){r(3,l=!1);var o=[];if(u.recType===Q&&u.data){var f=u.data;f.media&&f.media.forEach(function(n){ba(this,i),"string"==typeof n?o.push(n):o.push(n.messageId)}.bind(this)),f.files&&f.files.forEach(function(n){ba(this,i),"string"==typeof n?o.push(n):o.push(n.messageId)}.bind(this)),f.file&&f.file.forEach(function(n){ba(this,i),"string"==typeof n?o.push(n):o.push(n.messageId)}.bind(this)),f.text&&o.push(f.text.messageId)}u.tags&&u.tags.files&&u.tags.files.linedIds.forEach(function(n){ba(this,i),o.push(n)}.bind(this)),u.linkId&&0!==parseInt(u.linkId,16)&&o.push(u.linkId),o.push(u.messageId),o.forEach(function(n){var r=this;ba(this,i),function(n,t){var i=this;return new Promise(function(r,e){var o=this;if(r_(this,i),0!==parseInt(n,16))if(0!==parseInt(t,16))if(t)if(n){var u=b(n),c=b(t),f=x({commandType:D.j,callback:function(n,t){r_(this,o),n?e(n):r(t)}.bind(this)});Ow(D.j,[u,{Uint8:F},c],null,f)}else e("Chat id is empty");else e("Message id is empty");else e("Message id is zero");else e("Chat id is zero")}.bind(this))}(c.chatId,n).then(function(t){ba(this,r),t.result===N.Un&&Db(n)}.bind(this))["catch"](function(n){ba(this,r),d.error(t.User,n)}.bind(this))}.bind(this))}}.bind(this),[o,u,c,l,h,v,y,p,m,w,_,g,S]}var ka=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&da(n,t)}(i,n);var t=va(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(pa(r=t.call(this)),n,ja,Ta,rt,{showedMenu:0,message:1,chat:2}),r}return i}(Pi),Ea=ka;function Aa(n){return Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Aa(n)}function Oa(n,t){return Oa=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Oa(n,t)}function xa(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Ra(n);if(t){var e=Ra(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Ca(this,i)}}function Ca(n,t){if(t&&("object"===Aa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ia(n)}function Ia(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ra(n){return Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ra(n)}function Ma(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Ua(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ua(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ua(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Ba(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Da(n){var t,i,r,e,o=this;function u(t){n[7](t)}var c={message:n[0],chat:n[1]};return void 0!==n[3]&&(c.showedMenu=n[3]),i=new Ea({props:c}),ui.push(function(){return Ba(this,o),Ri(i,"showedMenu",u)}.bind(this)),{c:function(){t=Rt("div"),Mi(i.$$.fragment),Pt(t,"class","chat-dropdown-menu__list")},m:function(n,r){xt(n,t,r),Ui(i,t,null),e=!0},p:function(n,t){var e=this,o={};1&t&&(o.message=n[0]),2&t&&(o.chat=n[1]),!r&&8&t&&(r=!0,o.showedMenu=n[3],vi(function(){return Ba(this,e),r=!1}.bind(this))),i.$set(o)},i:function(n){e||(Ei(i.$$.fragment,n),e=!0)},o:function(n){Ai(i.$$.fragment,n),e=!1},d:function(n){n&&Ct(t),Bi(i)}}}function Na(n){var t,i,r=n[5]&&function(n){var t,i,r,e,o,u,c,f=n[3]&&Da(n);return{c:function(){t=Rt("div"),(i=Rt("div")).innerHTML="<i></i><i></i><i></i>",r=Ut(),f&&f.c(),Pt(i,"class","chat-dropdown-menu__btn"),Pt(t,"class",e="chat-dropdown-menu"+(n[3]?" chat-dropdown-menu_show":"")+(n[4]?" chat-dropdown-menu_bottom":""))},m:function(e,a){xt(e,t,a),jt(t,i),jt(t,r),f&&f.m(t,null),n[8](t),o=!0,u||(c=Dt(i,"click",n[6]),u=!0)},p:function(n,i){var r=this;n[3]?f?(f.p(n,i),8&i&&Ei(f,1)):((f=Da(n)).c(),Ei(f,1),f.m(t,null)):f&&(ji(),Ai(f,1,1,function(){Ba(this,r),f=null}.bind(this)),ki()),(!o||24&i&&e!==(e="chat-dropdown-menu"+(n[3]?" chat-dropdown-menu_show":"")+(n[4]?" chat-dropdown-menu_bottom":"")))&&Pt(t,"class",e)},i:function(n){o||(Ei(f),o=!0)},o:function(n){Ai(f),o=!1},d:function(i){i&&Ct(t),f&&f.d(),n[8](null),u=!1,c()}}}(n);return{c:function(){r&&r.c(),t=Bt()},m:function(n,e){r&&r.m(n,e),xt(n,t,e),i=!0},p:function(n,t){var i=Ma(t,1)[0];n[5]&&r.p(n,i)},i:function(n){i||(Ei(r),i=!0)},o:function(n){Ai(r),i=!1},d:function(n){r&&r.d(n),n&&Ct(t)}}}function Pa(n,t,i){var r,e=this,o=t.message,u=t.chat,c=!1,f=o.authorId===B,a=u.type===L,s=o.authorId===Bg,l=!1,h=!!(u.perms&fn.qn)||a&&s,d=!f&&!s,v=!f&&!s&&u.type!==$&&(a||!!(u.perms&fn.Ln)),y=h||d||v;function p(n){if(r){var t=n.target;t&&!r.contains(t)&&i(3,c=!1)}}ii(function(){var n=this;return Ba(this,e),document.addEventListener("click",p),function(){Ba(this,n),document.removeEventListener("click",p)}.bind(this)}.bind(this));var m=function(){return Ba(this,e),i(3,c=!c)}.bind(this);return n.$$set=function(n){Ba(this,e),"message"in n&&i(0,o=n.message),"chat"in n&&i(1,u=n.chat)}.bind(this),n.$$.update=function(){if(Ba(this,e),12&n.$$.dirty&&r&&c){var t=r.parentNode;if(t){var o=t.parentNode;if(o){var u=o.getBoundingClientRect(),f=t.getBoundingClientRect();i(4,l=u.bottom-f.bottom<f.height)}}}}.bind(this),[o,u,r,c,l,y,m,function(n){i(3,c=n)},function(n){var t=this;ui[n?"unshift":"push"](function(){Ba(this,t),i(2,r=n)}.bind(this))}]}var La=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Oa(n,t)}(i,n);var t=xa(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Ia(r=t.call(this)),n,Pa,Na,rt,{message:0,chat:1}),r}return i}(Pi),qa=La;function $a(n){return $a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$a(n)}function za(n,t){return za=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},za(n,t)}function Wa(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Ha(n);if(t){var e=Ha(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Fa(this,i)}}function Fa(n,t){if(t&&("object"===$a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ga(n)}function Ga(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ha(n){return Ha=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ha(n)}function Qa(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Va(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Va(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Va(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Ya(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ja(n,t,i){var r=n.slice();return r[1]=t[i],r}function Ka(n,t,i){var r=n.slice();return r[4]=t[i],r}function Xa(n){var t,i;return t=new ec({props:{message:n[0].data.quote}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.message=n[0].data.quote),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Za(n){for(var t,i,r=this,e=[],o=new Map,u=n[0].data.media,c=function(n){return Ya(this,r),n[4].messageId}.bind(this),f=0;f<u.length;f+=1){var a=Ka(n,u,f),s=c(a);o.set(s,e[f]=ns(s,a))}return{c:function(){t=Rt("div");for(var n=0;n<e.length;n+=1)e[n].c();Pt(t,"class","chat-media-list")},m:function(n,r){xt(n,t,r);for(var o=0;o<e.length;o+=1)e[o].m(t,null);i=!0},p:function(n,i){1&i&&(u=n[0].data.media,ji(),e=Ii(e,i,c,1,n,u,o,t,Ci,ns,null,Ka),ki())},i:function(n){if(!i){for(var t=0;t<u.length;t+=1)Ei(e[t]);i=!0}},o:function(n){for(var t=0;t<e.length;t+=1)Ai(e[t]);i=!1},d:function(n){n&&Ct(t);for(var i=0;i<e.length;i+=1)e[i].d()}}}function ns(n,t){var i,r,e;return r=new Vo({props:{data:t[4].data}}),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),e=!0},p:function(n,i){t=n;var e={};1&i&&(e.data=t[4].data),r.$set(e)},i:function(n){e||(Ei(r.$$.fragment,n),e=!0)},o:function(n){Ai(r.$$.fragment,n),e=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function ts(n){var t,i;return t=new Bu({props:{message:n[0].data.text}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.message=n[0].data.text),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function is(n){for(var t,i,r=this,e=[],o=new Map,u=n[0].data.files,c=function(n){return Ya(this,r),n[1].messageId}.bind(this),f=0;f<u.length;f+=1){var a=Ja(n,u,f),s=c(a);o.set(s,e[f]=rs(s,a))}return{c:function(){t=Rt("div");for(var n=0;n<e.length;n+=1)e[n].c();Pt(t,"class","chat-file-list")},m:function(n,r){xt(n,t,r);for(var o=0;o<e.length;o+=1)e[o].m(t,null);i=!0},p:function(n,i){1&i&&(u=n[0].data.files,ji(),e=Ii(e,i,c,1,n,u,o,t,Ci,rs,null,Ja),ki())},i:function(n){if(!i){for(var t=0;t<u.length;t+=1)Ei(e[t]);i=!0}},o:function(n){for(var t=0;t<e.length;t+=1)Ai(e[t]);i=!1},d:function(n){n&&Ct(t);for(var i=0;i<e.length;i+=1)e[i].d()}}}function rs(n,t){var i,r,e;return r=new Er({props:{data:t[1].data}}),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),e=!0},p:function(n,i){t=n;var e={};1&i&&(e.data=t[1].data),r.$set(e)},i:function(n){e||(Ei(r.$$.fragment,n),e=!0)},o:function(n){Ai(r.$$.fragment,n),e=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function es(n){var t,i,r,e,o,u=n[0].data.quote&&Xa(n),c=n[0].data.media&&Za(n),f=n[0].data.text&&ts(n),a=n[0].data.files&&is(n);return{c:function(){u&&u.c(),t=Ut(),c&&c.c(),i=Ut(),f&&f.c(),r=Ut(),a&&a.c(),e=Bt()},m:function(n,s){u&&u.m(n,s),xt(n,t,s),c&&c.m(n,s),xt(n,i,s),f&&f.m(n,s),xt(n,r,s),a&&a.m(n,s),xt(n,e,s),o=!0},p:function(n,o){var s=this,l=Qa(o,1)[0];n[0].data.quote?u?(u.p(n,l),1&l&&Ei(u,1)):((u=Xa(n)).c(),Ei(u,1),u.m(t.parentNode,t)):u&&(ji(),Ai(u,1,1,function(){Ya(this,s),u=null}.bind(this)),ki()),n[0].data.media?c?(c.p(n,l),1&l&&Ei(c,1)):((c=Za(n)).c(),Ei(c,1),c.m(i.parentNode,i)):c&&(ji(),Ai(c,1,1,function(){Ya(this,s),c=null}.bind(this)),ki()),n[0].data.text?f?(f.p(n,l),1&l&&Ei(f,1)):((f=ts(n)).c(),Ei(f,1),f.m(r.parentNode,r)):f&&(ji(),Ai(f,1,1,function(){Ya(this,s),f=null}.bind(this)),ki()),n[0].data.files?a?(a.p(n,l),1&l&&Ei(a,1)):((a=is(n)).c(),Ei(a,1),a.m(e.parentNode,e)):a&&(ji(),Ai(a,1,1,function(){Ya(this,s),a=null}.bind(this)),ki())},i:function(n){o||(Ei(u),Ei(c),Ei(f),Ei(a),o=!0)},o:function(n){Ai(u),Ai(c),Ai(f),Ai(a),o=!1},d:function(n){u&&u.d(n),n&&Ct(t),c&&c.d(n),n&&Ct(i),f&&f.d(n),n&&Ct(r),a&&a.d(n),n&&Ct(e)}}}function os(n,t,i){var r=this,e=t.message;return n.$$set=function(n){Ya(this,r),"message"in n&&i(0,e=n.message)}.bind(this),[e]}var us=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&za(n,t)}(i,n);var t=Wa(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Ga(r=t.call(this)),n,os,es,rt,{message:0}),r}return i}(Pi),cs=us;function fs(n){return fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fs(n)}function as(n,t){return as=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},as(n,t)}function ss(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=ds(n);if(t){var e=ds(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return ls(this,i)}}function ls(n,t){if(t&&("object"===fs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hs(n)}function hs(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ds(n){return ds=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ds(n)}function vs(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return ys(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ys(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ys(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function ps(n){var t,i;return t=new Er({props:{data:n[0].data}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0].data),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function ms(n){var t,i;return t=new Vo({props:{data:n[0].data}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0].data),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function bs(n){var t,i,r,e,o=[ms,ps],u=[];return t=function(n,t){return(n[2]||n[3])&&n[1].preview?0:1}(n),i=u[t]=o[t](n),{c:function(){i.c(),r=Bt()},m:function(n,i){u[t].m(n,i),xt(n,r,i),e=!0},p:function(n,t){var r=vs(t,1)[0];i.p(n,r)},i:function(n){e||(Ei(i),e=!0)},o:function(n){Ai(i),e=!1},d:function(n){u[t].d(n),n&&Ct(r)}}}function ws(n,t,i){var r=this,e=t.message,o=e.data,u=0===o.mime.toLowerCase().indexOf("image"),c=0===o.mime.toLowerCase().indexOf("video");return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,r),"message"in n&&i(0,e=n.message)}.bind(this),[e,o,u,c]}var _s=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&as(n,t)}(i,n);var t=ss(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(hs(r=t.call(this)),n,ws,bs,rt,{message:0}),r}return i}(Pi),gs=_s;function Ss(n,t,i){return"rgba("+function(n,t,i){var r,e,o;isFinite(n)||(n=0),isFinite(t)||(t=0),isFinite(i)||(i=0),(n/=60)<0&&(n=6- -n%6),n%=6,t=Math.max(0,Math.min(1,t/100)),i=Math.max(0,Math.min(1,i/100));var u=(1-Math.abs(2*i-1))*t,c=u*(1-Math.abs(n%2-1));n<1?(r=u,e=c,o=0):n<2?(r=c,e=u,o=0):n<3?(r=0,e=u,o=c):n<4?(r=0,e=c,o=u):n<5?(r=c,e=0,o=u):(r=u,e=0,o=c);var f=i-u/2;return[r=Math.round(255*(r+f)),e=Math.round(255*(e+f)),o=Math.round(255*(o+f))]}(77*n%360,(t||58)+n%20,(i||69)+n%20).join(",")+",1)"}function Ts(n){return Ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ts(n)}function js(n,t){return js=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},js(n,t)}function ks(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Os(n);if(t){var e=Os(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Es(this,i)}}function Es(n,t){if(t&&("object"===Ts(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return As(n)}function As(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Os(n){return Os=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Os(n)}function xs(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Cs(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Is(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Is(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Is(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Rs(n){var t;function i(n,t){return n[2].userLogin&&!n[1]?Bs:Us}var r=i(n),e=r(n);return{c:function(){t=Rt("span"),e.c(),zt(t,"color",n[4])},m:function(n,i){xt(n,t,i),e.m(t,null)},p:function(n,o){r===(r=i(n))&&e?e.p(n,o):(e.d(1),(e=r(n))&&(e.c(),e.m(t,null))),16&o&&zt(t,"color",n[4])},d:function(n){n&&Ct(t),e.d()}}}function Ms(n){var t;function i(n,t){return n[2].userLogin&&!n[1]?Ns:Ds}var r=i(n),e=r(n);return{c:function(){t=Rt("a"),e.c(),Pt(t,"href",n[5]),Pt(t,"target","_blank"),zt(t,"color",n[4])},m:function(n,i){xt(n,t,i),e.m(t,null)},p:function(n,o){r===(r=i(n))&&e?e.p(n,o):(e.d(1),(e=r(n))&&(e.c(),e.m(t,null))),32&o&&Pt(t,"href",n[5]),16&o&&zt(t,"color",n[4])},d:function(n){n&&Ct(t),e.d()}}}function Us(n){var t;return{c:function(){t=Mt(n[3])},m:function(n,i){xt(n,t,i)},p:function(n,i){8&i&&qt(t,n[3])},d:function(n){n&&Ct(t)}}}function Bs(n){var t;return{c:function(){t=Mt(n[3])},m:function(n,i){xt(n,t,i)},p:function(n,i){8&i&&qt(t,n[3])},d:function(n){n&&Ct(t)}}}function Ds(n){var t;return{c:function(){t=Mt(n[3])},m:function(n,i){xt(n,t,i)},p:function(n,i){8&i&&qt(t,n[3])},d:function(n){n&&Ct(t)}}}function Ns(n){var t;return{c:function(){t=Mt(n[3])},m:function(n,i){xt(n,t,i)},p:function(n,i){8&i&&qt(t,n[3])},d:function(n){n&&Ct(t)}}}function Ps(n){var t;function i(n,t){return n[5]?Ms:Rs}var r=i(n),e=r(n);return{c:function(){t=Rt("div"),e.c(),Pt(t,"class","chat-message__name")},m:function(n,i){xt(n,t,i),e.m(t,null)},p:function(n,o){var u=Cs(o,1)[0];r===(r=i(n))&&e?e.p(n,u):(e.d(1),(e=r(n))&&(e.c(),e.m(t,null)))},i:Jn,o:Jn,d:function(n){n&&Ct(t),e.d()}}}function Ls(n,t,i){var e,o=this,u=Jn,c=function(){var n=this;return xs(this,o),u(),u=ut(f,function(t){return xs(this,n),i(2,e=t)}.bind(this)),f}.bind(this);n.$$.on_destroy.push(function(){return xs(this,o),u()}.bind(this));var f=t.data;c();var a=t.chat,s="",l="#4a76b8",h=!1,d=!1,v="";return n.$$set=function(n){xs(this,o),"data"in n&&c(i(0,f=n.data)),"chat"in n&&i(6,a=n.chat)}.bind(this),n.$$.update=function(){xs(this,o),198&n.$$.dirty&&(e.userLogin?i(5,v="/".concat(Ng,"/users/").concat(e.userLogin)):i(5,v=""),i(3,s=e.userName||""),e.isDeleted&&i(3,s=r("deletedAccount")),i(1,h=e.userId===B),i(7,d=e.userId===Bg),h?i(4,l="#4A76B8"):a.type===L?i(4,l=d?"#007700":"#d38900"):i(4,l=Ss(j(e.userId),95,20)))}.bind(this),[f,h,e,s,l,v,a,d]}var qs=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&js(n,t)}(i,n);var t=ks(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(As(r=t.call(this)),n,Ls,Ps,rt,{data:0,chat:6}),r}return i}(Pi),$s=qs;function zs(n){return zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zs(n)}function Ws(n,t){return Ws=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Ws(n,t)}function Fs(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Qs(n);if(t){var e=Qs(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Gs(this,i)}}function Gs(n,t){if(t&&("object"===zs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hs(n)}function Hs(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Qs(n){return Qs=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Qs(n)}function Vs(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ys(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Js(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Js(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Js(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Ks(n){var t,i,r=n[1][0]+"";return{c:function(){t=Rt("span"),i=Mt(r),Pt(t,"class","chat-avatar__text")},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,t){2&t&&r!==(r=n[1][0]+"")&&qt(i,r)},d:function(n){n&&Ct(t)}}}function Xs(n){var t,i;return{c:function(){et((t=Rt("img")).src,i=n[4])||Pt(t,"src",i),Pt(t,"alt",""),Pt(t,"title",n[1]),Pt(t,"width",n[0]),Pt(t,"height",n[0])},m:function(n,i){xt(n,t,i)},p:function(n,r){16&r&&!et(t.src,i=n[4])&&Pt(t,"src",i),2&r&&Pt(t,"title",n[1]),1&r&&Pt(t,"width",n[0]),1&r&&Pt(t,"height",n[0])},d:function(n){n&&Ct(t)}}}function Zs(n){var t;function i(n,t){return n[4]?Xs:Ks}var r=i(n),e=r(n);return{c:function(){t=Rt("span"),e.c(),Pt(t,"class","chat-avatar"),zt(t,"background",n[2])},m:function(n,i){xt(n,t,i),e.m(t,null)},p:function(n,o){var u=Ys(o,1)[0];r===(r=i(n))&&e?e.p(n,u):(e.d(1),(e=r(n))&&(e.c(),e.m(t,null))),4&u&&zt(t,"background",n[2])},i:Jn,o:Jn,d:function(n){n&&Ct(t),e.d()}}}function nl(n,t,i){var r,e=this,o=Jn,u=function(){var n=this;return Vs(this,e),o(),o=ut(c,function(t){return Vs(this,n),i(6,r=t)}.bind(this)),c}.bind(this);n.$$.on_destroy.push(function(){return Vs(this,e),o()}.bind(this));var c,f=t.data,a=t.size,s=void 0===a?40:a,l="",h="#4a76b8",d=f.avatar;return f.type===L&&u(c=wf(f.authorId===Bg?f.extraId:f.authorId)),n.$$set=function(n){Vs(this,e),"data"in n&&i(5,f=n.data),"size"in n&&i(0,s=n.size)}.bind(this),n.$$.update=function(){Vs(this,e),32&n.$$.dirty&&(i(1,l=f.name||"x"),i(2,h=Ss(j(f.chatId)))),64&n.$$.dirty&&r&&i(4,d=r.userAvatar)}.bind(this),[s,l,h,c,d,f,r]}var tl=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Ws(n,t)}(i,n);var t=Fs(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Hs(r=t.call(this)),n,nl,Zs,rt,{data:5,size:0}),r}return i}(Pi),il=tl;function rl(n){return rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},rl(n)}function el(n,t){return el=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},el(n,t)}function ol(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=fl(n);if(t){var e=fl(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return ul(this,i)}}function ul(n,t){if(t&&("object"===rl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cl(n)}function cl(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function fl(n){return fl=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},fl(n)}function al(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function sl(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return ll(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ll(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ll(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function hl(n){var t,i,r=n[2][0]+"";return{c:function(){t=Rt("span"),i=Mt(r),Pt(t,"class","chat-avatar__text")},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,t){4&t&&r!==(r=n[2][0]+"")&&qt(i,r)},d:function(n){n&&Ct(t)}}}function dl(n){var t,i;return{c:function(){et((t=Rt("img")).src,i=n[0].userAvatar)||Pt(t,"src",i),Pt(t,"alt",""),Pt(t,"title",n[2]),Pt(t,"width",n[1]),Pt(t,"height",n[1])},m:function(n,i){xt(n,t,i)},p:function(n,r){1&r&&!et(t.src,i=n[0].userAvatar)&&Pt(t,"src",i),4&r&&Pt(t,"title",n[2]),2&r&&Pt(t,"width",n[1]),2&r&&Pt(t,"height",n[1])},d:function(n){n&&Ct(t)}}}function vl(n){var t;function i(n,t){return n[0].userAvatar?dl:hl}var r=i(n),e=r(n);return{c:function(){t=Rt("span"),e.c(),Pt(t,"class","chat-avatar"),zt(t,"background",n[3])},m:function(n,i){xt(n,t,i),e.m(t,null)},p:function(n,o){var u=sl(o,1)[0];r===(r=i(n))&&e?e.p(n,u):(e.d(1),(e=r(n))&&(e.c(),e.m(t,null))),8&u&&zt(t,"background",n[3])},i:Jn,o:Jn,d:function(n){n&&Ct(t),e.d()}}}function yl(n,t,i){var e=this,o=t.data,u=t.size,c=void 0===u?40:u,f="",a="#4a76b8";return n.$$set=function(n){al(this,e),"data"in n&&i(0,o=n.data),"size"in n&&i(1,c=n.size)}.bind(this),n.$$.update=function(){al(this,e),1&n.$$.dirty&&(i(2,f=o.userName||"x"),o.isDeleted&&i(2,f=r("deletedAccount")),i(3,a=Ss(j(o.userId))))}.bind(this),[o,c,f,a]}var pl=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&el(n,t)}(i,n);var t=ol(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(cl(r=t.call(this)),n,yl,vl,rt,{data:0,size:1}),r}return i}(Pi),ml=pl;function bl(n){return bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bl(n)}function wl(n,t){return wl=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},wl(n,t)}function _l(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Tl(n);if(t){var e=Tl(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return gl(this,i)}}function gl(n,t){if(t&&("object"===bl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Sl(n)}function Sl(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Tl(n){return Tl=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Tl(n)}function jl(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function kl(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return El(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return El(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function El(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Al(n){var t,i;return t=new ml({props:{data:n[2],size:n[3]}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};4&i&&(r.data=n[2]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Ol(n){var t,i;return t=new il({props:{data:n[1],size:n[3]}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};2&i&&(r.data=n[1]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function xl(n){var t,i,r,e,o=[Ol,Al],u=[];function c(n,t){return n[1].type===$?0:1}return i=c(n),r=u[i]=o[i](n),{c:function(){t=Rt("div"),r.c(),Pt(t,"class","chat-message__avatar")},m:function(n,r){xt(n,t,r),u[i].m(t,null),e=!0},p:function(n,e){var f=this,a=kl(e,1)[0],s=i;(i=c(n))===s?u[i].p(n,a):(ji(),Ai(u[s],1,1,function(){jl(this,f),u[s]=null}.bind(this)),ki(),(r=u[i])?r.p(n,a):(r=u[i]=o[i](n)).c(),Ei(r,1),r.m(t,null))},i:function(n){e||(Ei(r),e=!0)},o:function(n){Ai(r),e=!1},d:function(n){n&&Ct(t),u[i].d()}}}function Cl(n,t,i){var r,e=this,o=Jn,u=function(){var n=this;return jl(this,e),o(),o=ut(c,function(t){return jl(this,n),i(2,r=t)}.bind(this)),c}.bind(this);n.$$.on_destroy.push(function(){return jl(this,e),o()}.bind(this));var c=t.data;u();var f=t.chat,a=$g?20:40;return n.$$set=function(n){jl(this,e),"data"in n&&u(i(0,c=n.data)),"chat"in n&&i(1,f=n.chat)}.bind(this),[c,f,r,a]}var Il=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&wl(n,t)}(i,n);var t=_l(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Sl(r=t.call(this)),n,Cl,xl,rt,{data:0,chat:1}),r}return i}(Pi),Rl=Il;function Ml(n){return Ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ml(n)}function Ul(n,t){return Ul=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Ul(n,t)}function Bl(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Pl(n);if(t){var e=Pl(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Dl(this,i)}}function Dl(n,t){if(t&&("object"===Ml(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nl(n)}function Nl(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Pl(n){return Pl=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Pl(n)}function Ll(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return ql(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ql(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ql(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function $l(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function zl(n){var t,i,r,e,o=this;function u(t){n[9](t)}var c={message:n[0],chat:n[1]};return void 0!==n[3]&&(c.showedMenu=n[3]),i=new Ea({props:c}),ui.push(function(){return $l(this,o),Ri(i,"showedMenu",u)}.bind(this)),{c:function(){t=Rt("div"),Mi(i.$$.fragment),Pt(t,"class","chat-float-menu"),zt(t,"top",n[5]+"px"),zt(t,"left",n[6]+"px")},m:function(r,o){xt(r,t,o),Ui(i,t,null),n[10](t),e=!0},p:function(n,o){var u=this,c={};1&o&&(c.message=n[0]),2&o&&(c.chat=n[1]),!r&&8&o&&(r=!0,c.showedMenu=n[3],vi(function(){return $l(this,u),r=!1}.bind(this))),i.$set(c),(!e||32&o)&&zt(t,"top",n[5]+"px"),(!e||64&o)&&zt(t,"left",n[6]+"px")},i:function(n){e||(Ei(i.$$.fragment,n),e=!0)},o:function(n){Ai(i.$$.fragment,n),e=!1},d:function(r){r&&Ct(t),Bi(i),n[10](null)}}}function Wl(n){var t,i,r,e=n[1].name+"";return{c:function(){t=Rt("div"),i=Mt(e),Pt(t,"class","chat-message__name"),Pt(t,"title",r=vf?n[0].authorName:"")},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,o){2&o&&e!==(e=n[1].name+"")&&qt(i,e),1&o&&r!==(r=vf?n[0].authorName:"")&&Pt(t,"title",r)},i:Jn,o:Jn,d:function(n){n&&Ct(t)}}}function Fl(n){var t,i;return t=new $s({props:{chat:n[1],data:n[7]}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};2&i&&(r.chat=n[1]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Gl(n){var t,i;return t=new cs({props:{message:n[0]}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.message=n[0]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Hl(n){var t,i;return t=new gs({props:{message:n[0]}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.message=n[0]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Ql(n){var t,i;return t=new Bu({props:{message:n[0]}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.message=n[0]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Vl(n){var t,i,r,e,o,u,c,f,a,s,l,h,d,v,y,p,m,b,w,_,g,S=Qc({dateTime:n[0].date,type:"time"})+"",T=n[3]&&zl(n);c=new qa({props:{message:n[0],chat:n[1]}}),s=new Rl({props:{chat:n[1],data:n[7]}});var j=[Fl,Wl],k=[];function E(n,t){return n[1].type!==$?0:1}d=E(n),v=k[d]=j[d](n);var A=[Ql,Hl,Gl],O=[];function x(n,t){return n[0].recType===z?0:n[0].recType===W?1:n[0].recType===Q?2:-1}return~(p=x(n))&&(m=O[p]=A[p](n)),{c:function(){T&&T.c(),t=Ut(),i=Rt("div"),r=Rt("div"),e=Mt(S),u=Ut(),Mi(c.$$.fragment),f=Ut(),a=Rt("div"),Mi(s.$$.fragment),l=Ut(),h=Rt("div"),v.c(),y=Ut(),m&&m.c(),Pt(r,"class","chat-message__date"),Pt(r,"title",o=n[0].dateText),Pt(h,"class","chat-message__content"),Pt(a,"class","chat-message__box"),Pt(i,"class",b="chat-message"+($g?" chat-message_widget":"")+(n[3]?" chat-message_selected":""))},m:function(o,v){T&&T.m(o,v),xt(o,t,v),xt(o,i,v),jt(i,r),jt(r,e),jt(i,u),Ui(c,i,null),jt(i,f),jt(i,a),Ui(s,a,null),jt(a,l),jt(a,h),k[d].m(h,null),jt(h,y),~p&&O[p].m(h,null),n[11](i),w=!0,_||(g=Dt(i,"contextmenu",n[8]),_=!0)},p:function(n,u){var f=this,a=Ll(u,1)[0];n[3]?T?(T.p(n,a),8&a&&Ei(T,1)):((T=zl(n)).c(),Ei(T,1),T.m(t.parentNode,t)):T&&(ji(),Ai(T,1,1,function(){$l(this,f),T=null}.bind(this)),ki()),(!w||1&a)&&S!==(S=Qc({dateTime:n[0].date,type:"time"})+"")&&qt(e,S),(!w||1&a&&o!==(o=n[0].dateText))&&Pt(r,"title",o);var l={};1&a&&(l.message=n[0]),2&a&&(l.chat=n[1]),c.$set(l);var _={};2&a&&(_.chat=n[1]),s.$set(_);var g=d;(d=E(n))===g?k[d].p(n,a):(ji(),Ai(k[g],1,1,function(){$l(this,f),k[g]=null}.bind(this)),ki(),(v=k[d])?v.p(n,a):(v=k[d]=j[d](n)).c(),Ei(v,1),v.m(h,y));var C=p;(p=x(n))===C?~p&&O[p].p(n,a):(m&&(ji(),Ai(O[C],1,1,function(){$l(this,f),O[C]=null}.bind(this)),ki()),~p?((m=O[p])?m.p(n,a):(m=O[p]=A[p](n)).c(),Ei(m,1),m.m(h,null)):m=null),(!w||8&a&&b!==(b="chat-message"+($g?" chat-message_widget":"")+(n[3]?" chat-message_selected":"")))&&Pt(i,"class",b)},i:function(n){w||(Ei(T),Ei(c.$$.fragment,n),Ei(s.$$.fragment,n),Ei(v),Ei(m),w=!0)},o:function(n){Ai(T),Ai(c.$$.fragment,n),Ai(s.$$.fragment,n),Ai(v),Ai(m),w=!1},d:function(r){T&&T.d(r),r&&Ct(t),r&&Ct(i),Bi(c),Bi(s),k[d].d(),~p&&O[p].d(),n[11](null),_=!1,g()}}}function Yl(n,t,i){var r,e,o=this,u=t.message,c=t.chat,f=wf(c.type!==$?u.authorId:""),a=!1,s=0,l=0;function h(n){if(r){var t=n.target;t&&!r.contains(t)&&i(3,a=!1)}}function d(n){if(e&&!n.ctrlKey&&2!=n.button){var t=n.target;t&&!e.contains(t)&&i(3,a=!1)}}return ii(function(){var n=this;return $l(this,o),document.addEventListener("click",d),document.addEventListener("contextmenu",h),function(){$l(this,n),document.removeEventListener("click",d),document.removeEventListener("contextmenu",h)}.bind(this)}.bind(this)),n.$$set=function(n){$l(this,o),"message"in n&&i(0,u=n.message),"chat"in n&&i(1,c=n.chat)}.bind(this),[u,c,r,a,e,s,l,f,function(n){var t;if(!(null===(t=window.getSelection())||void 0===t?void 0:t.toString())){var r=n.target;"IMG"!==r.tagName&&"A"!==r.tagName&&(n.preventDefault(),i(5,s=n.pageY),i(6,l=n.pageX),i(3,a=!0))}},function(n){i(3,a=n)},function(n){var t=this;ui[n?"unshift":"push"](function(){$l(this,t),i(4,e=n)}.bind(this))},function(n){var t=this;ui[n?"unshift":"push"](function(){$l(this,t),i(2,r=n)}.bind(this))}]}var Jl=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Ul(n,t)}(i,n);var t=Bl(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Nl(r=t.call(this)),n,Yl,Vl,rt,{message:0,chat:1}),r}return i}(Pi),Kl=Jl;function Xl(n){return Xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Xl(n)}function Zl(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function nh(n,t){return nh=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},nh(n,t)}function th(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=eh(n);if(t){var e=eh(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return ih(this,i)}}function ih(n,t){if(t&&("object"===Xl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rh(n)}function rh(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function eh(n){return eh=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},eh(n)}function oh(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return uh(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return uh(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uh(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function ch(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function fh(n,t,i){var r=n.slice();return r[13]=t[i],r}function ah(n){var t;return{c:function(){Pt(t=Rt("div"),"class","chat-loader-bar")},m:function(n,i){xt(n,t,i)},d:function(n){n&&Ct(t)}}}function sh(n){var t,i;return t=new Kl({props:{chat:n[3],message:n[13]}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};8&i&&(r.chat=n[3]),4&i&&(r.message=n[13]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function lh(n){var t,i;return t=new pf({props:{chat:n[3],message:n[13]}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};8&i&&(r.chat=n[3]),4&i&&(r.message=n[13]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function hh(n){var t,i,r,e,o=Vc({dateTime:n[13].dateBar,type:"date"})+"";return{c:function(){t=Rt("div"),i=Rt("div"),r=Mt(o),e=Ut(),Pt(i,"class","chat-date-bar__title"),Pt(t,"class","chat-date-bar")},m:function(n,o){xt(n,t,o),jt(t,i),jt(i,r),jt(t,e)},p:function(n,t){4&t&&o!==(o=Vc({dateTime:n[13].dateBar,type:"date"})+"")&&qt(r,o)},i:Jn,o:Jn,d:function(n){n&&Ct(t)}}}function dh(n){var t,i,e;return{c:function(){t=Rt("div"),(i=Rt("div")).textContent="".concat(r("unreadMessages")),e=Ut(),Pt(i,"class","chat-unread-indicator__content"),Pt(t,"class","chat-unread-indicator")},m:function(n,r){xt(n,t,r),jt(t,i),jt(t,e)},p:Jn,i:Jn,o:Jn,d:function(n){n&&Ct(t)}}}function vh(n,t){var i,r,e,o,u,c=[dh,hh,lh,sh],f=[];function a(n,t){return"unread"in n[13]?0:"dateBar"in n[13]?1:n[13].recType===G?2:3}return r=a(t),e=f[r]=c[r](t),{key:n,first:null,c:function(){i=Bt(),e.c(),o=Bt(),this.first=i},m:function(n,t){xt(n,i,t),f[r].m(n,t),xt(n,o,t),u=!0},p:function(n,i){var u=this,s=r;(r=a(t=n))===s?f[r].p(t,i):(ji(),Ai(f[s],1,1,function(){ch(this,u),f[s]=null}.bind(this)),ki(),(e=f[r])?e.p(t,i):(e=f[r]=c[r](t)).c(),Ei(e,1),e.m(o.parentNode,o))},i:function(n){u||(Ei(e),u=!0)},o:function(n){Ai(e),u=!1},d:function(n){n&&Ct(i),f[r].d(n),n&&Ct(o)}}}function yh(n){for(var t,i,r,e,o,u=this,c=[],f=new Map,a=n[5]&&ah(),s=n[2],l=function(n){return ch(this,u),n[13].messageId}.bind(this),h=0;h<s.length;h+=1){var d=fh(n,s,h),v=l(d);f.set(v,c[h]=vh(v,d))}return{c:function(){t=Rt("div"),a&&a.c(),i=Ut();for(var n=0;n<c.length;n+=1)c[n].c();Pt(t,"class","chat-comments-list")},m:function(u,f){xt(u,t,f),a&&a.m(t,null),jt(t,i);for(var s=0;s<c.length;s+=1)c[s].m(t,null);var l;n[10](t),r=!0,e||(o=Dt(t,"scroll",(l=nf(n[6],100,undefined),function(n){n.isTrusted&&l.call(this,n)})),e=!0)},p:function(n,r){var e=oh(r,1)[0];n[5]?a||((a=ah()).c(),a.m(t,i)):a&&(a.d(1),a=null),12&e&&(s=n[2],ji(),c=Ii(c,e,l,1,n,s,f,t,Ci,vh,null,fh),ki())},i:function(n){if(!r){for(var t=0;t<s.length;t+=1)Ei(c[t]);r=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Ai(c[t]);r=!1},d:function(i){i&&Ct(t),a&&a.d();for(var r=0;r<c.length;r+=1)c[r].d();n[10](null),e=!1,o()}}}function ph(n,t,i){var r,e,o,u,c=this,f=Jn,a=function(){var n=this;return ch(this,c),f(),f=ut(v,function(t){return ch(this,n),i(3,r=t)}.bind(this)),v}.bind(this),s=Jn,l=function(){var n=this;return ch(this,c),s(),s=ut(h,function(t){return ch(this,n),i(9,e=t)}.bind(this)),h}.bind(this);ft(n,Lb,function(n){return ch(this,c),i(5,o=n)}.bind(this)),n.$$.on_destroy.push(function(){return ch(this,c),f()}.bind(this)),n.$$.on_destroy.push(function(){return ch(this,c),s()}.bind(this));var h=t.list;l();var d,v=t.chat;a();var y=0,p=0,m=e;function b(){var n=this;d&&hi().then(function(){if(ch(this,n),d){var t=d.scrollHeight;y=Math.max(y,0)+(t-p),i(4,d.scrollTop=y,d),(p=t)-50<=d.clientHeight&&$b()}}.bind(this))}return h.subscribe(function(){ch(this,c),b()}.bind(this)),ii(function(){ch(this,c),p=d.scrollHeight-40}.bind(this)),n.$$set=function(n){ch(this,c),"list"in n&&l(i(0,h=n.list)),"chat"in n&&a(i(1,v=n.chat))}.bind(this),n.$$.update=function(){if(ch(this,c),780&n.$$.dirty){var t;i(2,m=[]);var o=-1,f=0;if(e.length){for(var a=[],s=0,l=e.length;s<l;s++){var h=e[s],d=new Date(null===i(8,u=h.date)||void 0===u?void 0:u.getTime());d.setHours(0,0,0,0);var v=d.getTime();~a.indexOf(v)||(f++,m.push({dateBar:d,messageId:v}),a.push(v)),h.authorId!==Bg&&_(h.messageId,r.lastAccess)>0&&(t?_(h.messageId,t.messageId)<0&&(t=h,o=s+f):(t=h,o=s+f)),s+1===l&&h.authorId===Bg&&(o=-1),m.push(h)}~o&&m.splice(o,0,{unread:!0,messageId:-1})}}}.bind(this),[h,v,m,r,d,o,function(){var n=this;d&&(y=d.scrollTop,hi().then(function(){ch(this,n),d&&y<50&&$b()}.bind(this)))},b,u,e,function(n){var t=this;ui[n?"unshift":"push"](function(){ch(this,t),i(4,d=n)}.bind(this))}]}var mh=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&nh(n,t)}(o,n);var t,i,r,e=th(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Ni(rh(t=e.call(this)),n,ph,yh,rt,{list:0,chat:1,handleChange:7}),t}return t=o,(i=[{key:"handleChange",get:function(){return this.$$.ctx[7]}}])&&Zl(t.prototype,i),r&&Zl(t,r),o}(Pi),bh=mh;function wh(n){var t="Unknown";for(var i in pn)Object.prototype.hasOwnProperty.call(pn,i)&&pn[i]===n&&(t=r(i));return t}function _h(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function gh(n){var t=this,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=i.delay,e=void 0===r?0:r,o=i.duration,u=void 0===o?400:o,c=i.easing,f=void 0===c?Xn:c,a=+getComputedStyle(n).opacity;return{delay:e,duration:u,easing:f,css:function(n){return _h(this,t),"opacity: ".concat(n*a)}.bind(this)}}function Sh(n){return Sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Sh(n)}function Th(n,t){return Th=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Th(n,t)}function jh(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Ah(n);if(t){var e=Ah(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return kh(this,i)}}function kh(n,t){if(t&&("object"===Sh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Eh(n)}function Eh(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ah(n){return Ah=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ah(n)}function Oh(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function xh(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Ch(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ch(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ch(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Ih(n,t,i){var r=n.slice();return r[3]=t[i],r}function Rh(n){var t,i,r=n[3][0]+"";return{c:function(){t=Rt("a"),i=Mt(r),Pt(t,"href",n[3][1]),Pt(t,"target","_blank"),Pt(t,"title",n[3][0])},m:function(n,r){xt(n,t,r),jt(t,i)},p:Jn,d:function(n){n&&Ct(t)}}}function Mh(n){for(var t,i=n[0],r=[],e=0;e<i.length;e+=1)r[e]=Rh(Ih(n,i,e));return{c:function(){for(var n=0;n<r.length;n+=1)r[n].c();t=Bt()},m:function(n,i){for(var e=0;e<r.length;e+=1)r[e].m(n,i);xt(n,t,i)},p:function(n,e){var o=xh(e,1)[0];if(1&o){var u;for(i=n[0],u=0;u<i.length;u+=1){var c=Ih(n,i,u);r[u]?r[u].p(c,o):(r[u]=Rh(c),r[u].c(),r[u].m(t.parentNode,t))}for(;u<r.length;u+=1)r[u].d(1);r.length=i.length}},i:Jn,o:Jn,d:function(n){It(r,n),n&&Ct(t)}}}function Uh(n,t,i){var r=this,e=t.links,o=e.split(","),u=[];return n.$$set=function(n){Oh(this,r),"links"in n&&i(1,e=n.links)}.bind(this),o.forEach(function(n){Oh(this,r),n=n.trim();for(var t="https://www.mql5.com/go?link=".concat(encodeURIComponent(n)),i=0,e=Pg.length;i<e;i++)if(n.indexOf(Pg[i])>-1){t=n;break}u.push([n,t])}.bind(this)),[u,e]}var Bh=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Th(n,t)}(i,n);var t=jh(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Eh(r=t.call(this)),n,Uh,Mh,rt,{links:1}),r}return i}(Pi),Dh=Bh;function Nh(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Ph=Wi([]);function Lh(){var n=this;return(new Date).getTime()-0>3e5&&C_(jn,500).then(function(t){Nh(this,n),Ph.set(t)}.bind(this))["catch"](function(i){Nh(this,n),d.error(t.Store,i)}.bind(this)),Ph}function qh(n,t,i){for(var r=[],e=0,o=i.length;e<o&&!(r.length>t);e++){var u=i[e];("userName"in u&&u.userName&&~u.userName.toLowerCase().indexOf(n)||"userLogin"in u&&u.userLogin&&~u.userLogin.toLowerCase().indexOf(n))&&r.push(u)}return r}function $h(n){return $h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$h(n)}function zh(n,t){return zh=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},zh(n,t)}function Wh(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Hh(n);if(t){var e=Hh(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Fh(this,i)}}function Fh(n,t){if(t&&("object"===$h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gh(n)}function Gh(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Hh(n){return Hh=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Hh(n)}function Qh(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Vh(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Yh(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Yh(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yh(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Jh(n){var t,i,r;return{c:function(){t=Rt("span"),i=Mt(n[2]),Pt(t,"class",r="member-block__label"+n[3]),Pt(t,"title",n[1])},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,e){4&e&&qt(i,n[2]),8&e&&r!==(r="member-block__label"+n[3])&&Pt(t,"class",r),2&e&&Pt(t,"title",n[1])},d:function(n){n&&Ct(t)}}}function Kh(n){var t,i=n[0]>0&&Jh(n);return{c:function(){i&&i.c(),t=Bt()},m:function(n,r){i&&i.m(n,r),xt(n,t,r)},p:function(n,r){var e=Vh(r,1)[0];n[0]>0?i?i.p(n,e):((i=Jh(n)).c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:Jn,o:Jn,d:function(n){i&&i.d(n),n&&Ct(t)}}}function Xh(n,t,i){var e=this,o=t.isAuthor,u=void 0!==o&&o,c=t.perms,f=void 0===c?0:c,a="",s="",l="";return n.$$set=function(n){Qh(this,e),"isAuthor"in n&&i(4,u=n.isAuthor),"perms"in n&&i(0,f=n.perms)}.bind(this),n.$$.update=function(){if(Qh(this,e),17&n.$$.dirty)if(u)i(2,s=r("owner")),i(3,l=" member-block__label_owner");else switch(f){case an:case fn.Ln:i(1,a=r("canWriteMessages")),i(2,s=r("writer")),i(3,l=" member-block__label_writer");break;case sn:case fn.qn:i(2,s=r("moderator")),i(3,l=" member-block__label_moderator");break;case ln:case fn.$n:i(2,s=r("admin")),i(3,l=" member-block__label_admin")}}.bind(this),[f,a,s,l,u]}var Zh=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&zh(n,t)}(i,n);var t=Wh(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Gh(r=t.call(this)),n,Xh,Kh,rt,{isAuthor:4,perms:0}),r}return i}(Pi),nd=Zh;function td(n){return td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},td(n)}function id(n,t){return id=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},id(n,t)}function rd(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=ud(n);if(t){var e=ud(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return ed(this,i)}}function ed(n,t){if(t&&("object"===td(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return od(n)}function od(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ud(n){return ud=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ud(n)}function cd(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function fd(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return ad(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ad(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ad(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function sd(n){var t,i,r=n[4]&&ld(n),e=n[3]&&hd(n);return{c:function(){t=Rt("span"),r&&r.c(),i=Ut(),e&&e.c(),Pt(t,"class","member-block__tools")},m:function(n,o){xt(n,t,o),r&&r.m(t,null),jt(t,i),e&&e.m(t,null)},p:function(n,o){n[4]?r?r.p(n,o):((r=ld(n)).c(),r.m(t,i)):r&&(r.d(1),r=null),n[3]?e?e.p(n,o):((e=hd(n)).c(),e.m(t,null)):e&&(e.d(1),e=null)},d:function(n){n&&Ct(t),r&&r.d(),e&&e.d()}}}function ld(n){var t,i,e;return{c:function(){Pt(t=Rt("i"),"class","member-block__edit icons-chat icons-chat_edit"),Pt(t,"title",r("edit"))},m:function(r,o){xt(r,t,o),i||(e=Dt(t,"click",Nt(n[8])),i=!0)},p:Jn,d:function(n){n&&Ct(t),i=!1,e()}}}function hd(n){var t,i,e;return{c:function(){Pt(t=Rt("i"),"class","member-block__close icons-chat icons-chat_close"),Pt(t,"title",r("delete"))},m:function(r,o){xt(r,t,o),i||(e=Dt(t,"click",Nt(n[9])),i=!0)},p:Jn,d:function(n){n&&Ct(t),i=!1,e()}}}function dd(n){var t,i,r,e,o,u,c,f,a,s,l,h,d,v=n[2].userName+"";r=new ml({props:{data:n[2],size:vd}}),f=new nd({props:{perms:n[2].perms,isAuthor:n[2].isAuthor}});var y=!n[2].isAuthor&&(n[3]||n[4])&&sd(n);return{c:function(){t=Rt("div"),i=Rt("a"),Mi(r.$$.fragment),e=Ut(),o=Rt("a"),u=Mt(v),c=Ut(),Mi(f.$$.fragment),a=Ut(),y&&y.c(),Pt(i,"target","_blank"),Pt(i,"href",n[5]),Pt(i,"class","member-block__avatar"),Pt(o,"target","_blank"),Pt(o,"href",n[5]),Pt(o,"class","member-block__name"),Pt(t,"class",s="member-block"+(n[3]?" member-block_width-delete":"")+(n[4]?" member-block_width-edit":""))},m:function(s,v){xt(s,t,v),jt(t,i),Ui(r,i,null),jt(t,e),jt(t,o),jt(o,u),jt(o,c),Ui(f,o,null),jt(o,a),y&&y.m(o,null),l=!0,h||(d=[Dt(i,"click",n[6]),Dt(o,"click",n[6])],h=!0)},p:function(n,i){var e=fd(i,1)[0],c={};4&e&&(c.data=n[2]),r.$set(c),(!l||4&e)&&v!==(v=n[2].userName+"")&&qt(u,v);var a={};4&e&&(a.perms=n[2].perms),4&e&&(a.isAuthor=n[2].isAuthor),f.$set(a),n[2].isAuthor||!n[3]&&!n[4]?y&&(y.d(1),y=null):y?y.p(n,e):((y=sd(n)).c(),y.m(o,null)),(!l||24&e&&s!==(s="member-block"+(n[3]?" member-block_width-delete":"")+(n[4]?" member-block_width-edit":"")))&&Pt(t,"class",s)},i:function(n){l||(Ei(r.$$.fragment,n),Ei(f.$$.fragment,n),l=!0)},o:function(n){Ai(r.$$.fragment,n),Ai(f.$$.fragment,n),l=!1},d:function(n){n&&Ct(t),Bi(r),Bi(f),y&&y.d(),h=!1,tt(d)}}}var vd=30;function yd(n,t,i){var r=this,e=t.member,o=t.canDelete,u=void 0!==o&&o,c=t.canEdit,f=void 0!==c&&c,a=t.toEdit,s=t.toDelete,l=t.linkPreventDefault,h=void 0!==l&&l,d=ri(),v="/".concat(Ng,"/users/").concat(e.userLogin);var y=function(){cd(this,r),i(0,a=e)}.bind(this),p=function(){cd(this,r),i(1,s=e)}.bind(this);return n.$$set=function(n){cd(this,r),"member"in n&&i(2,e=n.member),"canDelete"in n&&i(3,u=n.canDelete),"canEdit"in n&&i(4,f=n.canEdit),"toEdit"in n&&i(0,a=n.toEdit),"toDelete"in n&&i(1,s=n.toDelete),"linkPreventDefault"in n&&i(7,h=n.linkPreventDefault)}.bind(this),[a,s,e,u,f,v,function(n){h&&n.preventDefault(),d("click")},h,y,p]}var pd=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&id(n,t)}(i,n);var t=rd(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(od(r=t.call(this)),n,yd,dd,rt,{member:2,canDelete:3,canEdit:4,toEdit:0,toDelete:1,linkPreventDefault:7}),r}return i}(Pi),md=pd;function bd(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var wd={};function _d(n,i,r){var e=this,o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined,u=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1,c=arguments.length>5&&arguments[5]!==undefined?arguments[5]:[],f=20,a=2e3/f;n&&(u>a?r&&r(c):E_(n,o,f).then(function(t){var o=this;if(bd(this,e),t&&t.users&&t.users.length){t.users.forEach(function(n){bd(this,o);var t=n.user,r=t.userId,e=t.userName,u=t.userLogin,f=t.userAvatar,a=t.isDeleted,s=i===r;c.push({isAuthor:s,perms:n.perms,userId:r,userName:e,userLogin:u,userAvatar:f,isDeleted:a})}.bind(this));var f=t.users[t.users.length-1].user.userId;_d(n,i,r,f,++u,c)}else r&&r(c)}.bind(this))["catch"](function(n){bd(this,e),d.error(t.Store,n),r&&r(c)}.bind(this)))}function gd(n,t){var i=this;return wd[n]||(wd[n]=Wi([]),_d(n,t,function(r){bd(this,i),wd[n].set(function(n,t){var i=this;return n.sort(function(n,r){bd(this,i);var e=n.userName,o=r.userName;return e&&o?n.userId===t||n.perms>r.perms?-1:n.perms<r.perms?1:(e=e[0].toLowerCase())<(o=o[0].toLowerCase())?-1:e>o?1:0:0}.bind(this)),n}(r,t))}.bind(this))),wd[n]}function Sd(n){return Sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Sd(n)}function Td(n,t){return Td=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Td(n,t)}function jd(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Ad(n);if(t){var e=Ad(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return kd(this,i)}}function kd(n,t){if(t&&("object"===Sd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ed(n)}function Ed(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ad(n){return Ad=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ad(n)}function Od(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function xd(n,t,i){var r=n.slice();return r[25]=t[i],r}function Cd(n,t,i){var r=n.slice();return r[28]=t[i],r}function Id(n,t,i){var r=n.slice();return r[25]=t[i],r}function Rd(n){var t;return{c:function(){(t=Rt("div")).textContent="".concat(r("foundEmpty")),Pt(t,"class","form-members-list__result-text")},m:function(n,i){xt(n,t,i)},p:Jn,i:Jn,o:Jn,d:function(n){n&&Ct(t)}}}function Md(n){for(var t,i,e,o,u=this,c=[],f=new Map,a=n[3],s=function(n){return Od(this,u),n[25].userId}.bind(this),l=0;l<a.length;l+=1){var h=Id(n,a,l),d=s(h);f.set(d,c[l]=Bd(d,h))}return{c:function(){(t=Rt("div")).textContent="".concat(r("mql5Members")),i=Ut();for(var n=0;n<c.length;n+=1)c[n].c();e=Bt(),Pt(t,"class","form-members-list__title")},m:function(n,r){xt(n,t,r),xt(n,i,r);for(var u=0;u<c.length;u+=1)c[u].m(n,r);xt(n,e,r),o=!0},p:function(n,t){13&t[0]&&(a=n[3],ji(),c=Ii(c,t,s,1,n,a,f,e.parentNode,Ci,Bd,e,Id),ki())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)Ei(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Ai(c[t]);o=!1},d:function(n){n&&Ct(t),n&&Ct(i);for(var r=0;r<c.length;r+=1)c[r].d(n);n&&Ct(e)}}}function Ud(n){var t;return{c:function(){(t=Rt("div")).textContent="".concat(r("emptyAddMember")),Pt(t,"class","form-members-list__result-text")},m:function(n,i){xt(n,t,i)},p:Jn,i:Jn,o:Jn,d:function(n){n&&Ct(t)}}}function Bd(n,t){var i,r,e;return(r=new md({props:{linkPreventDefault:!0,member:t[25],chat:t[0]}})).$on("click",(function(){return t[19](t[25])})),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),e=!0},p:function(n,i){t=n;var e={};8&i[0]&&(e.member=t[25]),1&i[0]&&(e.chat=t[0]),r.$set(e)},i:function(n){e||(Ei(r.$$.fragment,n),e=!0)},o:function(n){Ai(r.$$.fragment,n),e=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function Dd(n){for(var t,i,e,o,u=this,c=[],f=new Map,a=n[5],s=function(n){return Od(this,u),n[28].userId}.bind(this),l=0;l<a.length;l+=1){var h=Cd(n,a,l),d=s(h);f.set(d,c[l]=Nd(d,h))}return{c:function(){(t=Rt("div")).textContent="".concat(r("friends")),i=Ut();for(var n=0;n<c.length;n+=1)c[n].c();e=Bt(),Pt(t,"class","form-members-list__title")},m:function(n,r){xt(n,t,r),xt(n,i,r);for(var u=0;u<c.length;u+=1)c[u].m(n,r);xt(n,e,r),o=!0},p:function(n,t){37&t[0]&&(a=n[5],ji(),c=Ii(c,t,s,1,n,a,f,e.parentNode,Ci,Nd,e,Cd),ki())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)Ei(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Ai(c[t]);o=!1},d:function(n){n&&Ct(t),n&&Ct(i);for(var r=0;r<c.length;r+=1)c[r].d(n);n&&Ct(e)}}}function Nd(n,t){var i,r,e;return(r=new md({props:{linkPreventDefault:!0,member:t[28],chat:t[0]}})).$on("click",(function(){return t[20](t[28])})),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),e=!0},p:function(n,i){t=n;var e={};32&i[0]&&(e.member=t[28]),1&i[0]&&(e.chat=t[0]),r.$set(e)},i:function(n){e||(Ei(r.$$.fragment,n),e=!0)},o:function(n){Ai(r.$$.fragment,n),e=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function Pd(n,t){var i,r,e,o,u=this;function c(n){t[21](n)}var f={linkPreventDefault:!0,member:t[25],chat:t[0],canDelete:!0};return void 0!==t[4]&&(f.toDelete=t[4]),r=new md({props:f}),ui.push(function(){return Od(this,u),Ri(r,"toDelete",c)}.bind(this)),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),o=!0},p:function(n,i){var o=this;t=n;var u={};4&i[0]&&(u.member=t[25]),1&i[0]&&(u.chat=t[0]),!e&&16&i[0]&&(e=!0,u.toDelete=t[4],vi(function(){return Od(this,o),e=!1}.bind(this))),r.$set(u)},i:function(n){o||(Ei(r.$$.fragment,n),o=!0)},o:function(n){Ai(r.$$.fragment,n),o=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function Ld(n){var t,i,r;return{c:function(){t=Rt("div"),i=Rt("div"),r=Mt(n[6]),Pt(i,"class","alert alert_danger"),Pt(t,"class","form-members-add__errors")},m:function(n,e){xt(n,t,e),jt(t,i),jt(i,r)},p:function(n,t){64&t[0]&&qt(r,n[6])},d:function(n){n&&Ct(t)}}}function qd(n){var t,i,e,o,u,c,f,a,s,l,h,d,v,y,p,m,b,w,_,g,S,T=this,j=r("selectedMembers",n[2].length)+"",k=[],E=new Map,A=[Ud,Md,Rd],O=[];function x(n,t){return n[1]?n[3].length?1:2:0}s=x(n),l=O[s]=A[s](n);for(var C=!n[1]&&n[5].length&&Dd(n),I=n[2],R=function(n){return Od(this,T),n[25].userId}.bind(this),M=0;M<I.length;M+=1){var U=xd(n,I,M),B=R(U);E.set(B,k[M]=Pd(B,U))}var D=n[6]&&Ld(n);return{c:function(){t=Rt("div"),i=Rt("div"),e=Rt("div"),o=Rt("i"),u=Ut(),c=Rt("input"),f=Ut(),a=Rt("div"),l.c(),h=Ut(),C&&C.c(),d=Ut(),v=Rt("div"),y=Rt("div"),p=Mt(j),m=Ut(),b=Rt("div");for(var n=0;n<k.length;n+=1)k[n].c();w=Ut(),D&&D.c(),Pt(o,"class","icons-chat icons-chat_search-gray"),Pt(c,"type","text"),Pt(c,"class","input"),Pt(c,"placeholder",r("searchMembers")),Pt(e,"class","chat-members-search"),Pt(a,"class","form-members-list"),Pt(i,"class","form-members-add__left-part"),Pt(y,"class","form-members-selected__title"),Pt(b,"class","form-members-list"),Pt(v,"class","form-members-add__right-part"),Pt(t,"slot","content"),Pt(t,"class","form-members-add")},m:function(r,l){xt(r,t,l),jt(t,i),jt(i,e),jt(e,o),jt(e,u),jt(e,c),$t(c,n[1]),jt(i,f),jt(i,a),O[s].m(a,null),jt(a,h),C&&C.m(a,null),jt(t,d),jt(t,v),jt(v,y),jt(y,p),jt(v,m),jt(v,b);for(var T=0;T<k.length;T+=1)k[T].m(b,null);jt(t,w),D&&D.m(t,null),_=!0,g||(S=Dt(c,"input",n[18]),g=!0)},p:function(n,i){var e=this;2&i[0]&&c.value!==n[1]&&$t(c,n[1]);var o=s;(s=x(n))===o?O[s].p(n,i):(ji(),Ai(O[o],1,1,function(){Od(this,e),O[o]=null}.bind(this)),ki(),(l=O[s])?l.p(n,i):(l=O[s]=A[s](n)).c(),Ei(l,1),l.m(a,h)),!n[1]&&n[5].length?C?(C.p(n,i),34&i[0]&&Ei(C,1)):((C=Dd(n)).c(),Ei(C,1),C.m(a,null)):C&&(ji(),Ai(C,1,1,function(){Od(this,e),C=null}.bind(this)),ki()),(!_||4&i[0])&&j!==(j=r("selectedMembers",n[2].length)+"")&&qt(p,j),21&i[0]&&(I=n[2],ji(),k=Ii(k,i,R,1,n,I,E,b,Ci,Pd,null,xd),ki()),n[6]?D?D.p(n,i):((D=Ld(n)).c(),D.m(t,null)):D&&(D.d(1),D=null)},i:function(n){if(!_){Ei(l),Ei(C);for(var t=0;t<I.length;t+=1)Ei(k[t]);_=!0}},o:function(n){Ai(l),Ai(C);for(var t=0;t<k.length;t+=1)Ai(k[t]);_=!1},d:function(n){n&&Ct(t),O[s].d(),C&&C.d();for(var i=0;i<k.length;i+=1)k[i].d();D&&D.d(),g=!1,S()}}}function $d(n){var t,i,e,o,u,c,f,a,s=r("append")+"";return{c:function(){t=Rt("span"),(i=Rt("button")).textContent="".concat(r("close")),e=Ut(),o=Rt("button"),u=Mt(s),Pt(i,"class","button button_white qa-dialog-cancel"),Pt(o,"class","button button_green qa-dialog-ok"),o.disabled=c=!n[2].length,Pt(t,"slot","buttons")},m:function(r,c){xt(r,t,c),jt(t,i),jt(t,e),jt(t,o),jt(o,u),f||(a=[Dt(i,"click",n[9]),Dt(o,"click",n[10])],f=!0)},p:function(n,t){4&t[0]&&c!==(c=!n[2].length)&&(o.disabled=c)},d:function(n){n&&Ct(t),f=!1,tt(a)}}}function zd(n){var t,i;return(t=new $f({props:{withTitle:!1,$$slots:{buttons:[$d],content:[qd]},$$scope:{ctx:n}}})).$on("close",n[22]),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};127&i[0]|4&i[1]&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Wd(n,i,e){var o,u,c=this,f=i.chat,a=ri(),s={},l=gd(f.chatId,f.authorId);ft(n,l,function(n){return Od(this,c),e(17,u=n)}.bind(this));var h=[],v="",y=[],p=Lh();ft(n,p,function(n){return Od(this,c),e(16,o=n)}.bind(this));var m,b,w,_=[],g=[],S=[],T="";function j(){if(o&&u){var n=0;e(5,_=[]);for(var t=0,i=o.length;t<i;t++){var r=o[t];if(!~h.indexOf(r.userId)&&(_.push(r),++n>=3))break}}}var k=function(){Od(this,c),a("close")}.bind(this),E=function(){var n=this;Od(this,c);var i=f.type===q?fn.Ln:fn.Pn,o="";e(6,T="");var u=[];y.forEach(function(r){var c=this;Od(this,n),u.push(O_(f.chatId,r.userId,i).then(function(n){Od(this,c);var t=n.chatId,o=r;o.perms=i,e(0,f.countMembers++,f),function(n,t){var i=this;wd[n]&&wd[n].update(function(n){bd(this,i);for(var r=-1,e=0,o=n.length;e<o;e++)if(n[e].userId==t.userId){r=e;break}return~r?n.splice(r,1,t):n.push(t),n}.bind(this))}(t,o)}.bind(this))["catch"](function(n){Od(this,c),o&&(o+=" ,"),o+=r.userName,d.error(t.User,n)}.bind(this)))}.bind(this)),Promise.allSettled(u).then(function(){Od(this,n),o?e(6,T=r("notAllowedAdd",o)):k(),e(2,y=[])}.bind(this))}.bind(this);var A=function(n){Od(this,c),e(2,y=y.concat([n]))}.bind(this),O=function(n){Od(this,c),e(2,y=y.concat([n]))}.bind(this);return n.$$set=function(n){Od(this,c),"chat"in n&&e(0,f=n.chat)}.bind(this),n.$$.update=function(){var i=this;if(Od(this,c),20&n.$$.dirty[0]&&m){for(var r=y,f=0,a=r.length;f<a;f++)if(r[f].userId===m.userId){r.splice(f,1);break}e(2,y=r),e(4,m=undefined)}if(135172&n.$$.dirty[0]&&u&&(e(12,h=[]),u.forEach(function(n){Od(this,i),h.push(n.userId)}.bind(this)),y&&y.forEach(function(n){Od(this,i),h.push(n.userId)}.bind(this))),2050&n.$$.dirty[0]&&v&&(s[v]?e(13,g=s[v]):R_(v,50).then(function(n){var t=this;Od(this,i),e(11,s[v]=[],s),n.forEach(function(n){Od(this,t),s[v].push(n)}.bind(this)),e(13,g=s[v])}.bind(this))["catch"](function(n){Od(this,i),d.error(t.User,n)}.bind(this))),12296&n.$$.dirty[0]&&g){e(3,S=[]);for(var _=0,T=g.length;_<T;_++){var k=g[_];~h.indexOf(k.userId)||S.push(k)}}147456&n.$$.dirty[0]&&!b&&u&&e(14,b=l.subscribe(j)),98304&n.$$.dirty[0]&&!w&&o&&e(15,w=p.subscribe(j)),4096&n.$$.dirty[0]&&h&&j()}.bind(this),[f,v,y,S,m,_,T,l,p,k,E,s,h,g,b,w,o,u,function(){v=this.value,e(1,v)},A,O,function(n){e(4,m=n),e(2,y)},function(t){ei.call(this,n,t)}]}var Fd=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Td(n,t)}(i,n);var t=jd(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Ed(r=t.call(this)),n,Wd,zd,rt,{chat:0},null,[-1,-1]),r}return i}(Pi),Gd=Fd;function Hd(n){return Hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Hd(n)}function Qd(n,t){return Qd=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Qd(n,t)}function Vd(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Kd(n);if(t){var e=Kd(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Yd(this,i)}}function Yd(n,t){if(t&&("object"===Hd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Jd(n)}function Jd(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Kd(n){return Kd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Kd(n)}function Xd(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Zd(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return nv(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return nv(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nv(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function tv(n){var t,i,r,e=(null===(t=n[0])||void 0===t?void 0:t.userName)+"";return{c:function(){i=Rt("span"),r=Mt(e),Pt(i,"slot","title")},m:function(n,t){xt(n,i,t),jt(i,r)},p:function(n,t){var i;1&t&&e!==(e=(null===(i=n[0])||void 0===i?void 0:i.userName)+"")&&qt(r,e)},d:function(n){n&&Ct(i)}}}function iv(n){var t,i;return{c:function(){t=Rt("div"),i=Mt(n[7]),Pt(t,"class","alert alert_danger")},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,t){128&t&&qt(i,n[7])},d:function(n){n&&Ct(t)}}}function rv(n){var t,i,e,o,u,c,f,a,s,l,h,d,v,y,p,m,b,w,_,g,S,T=r("moderatorDesc")+"",j=r("adminDesc")+"",k=n[7]&&iv(n);return{c:function(){t=Rt("div"),(i=Rt("div")).textContent="".concat(r("permissions"),":"),e=Ut(),o=Rt("div"),u=Rt("input"),(c=Rt("label")).textContent="".concat(r("postMessages")),f=Ut(),a=Rt("div"),s=Rt("input"),(l=Rt("label")).textContent="".concat(r("moderator")),h=Ut(),d=Rt("div"),v=Ut(),y=Rt("div"),p=Rt("input"),(m=Rt("label")).textContent="".concat(r("admin")),b=Ut(),w=Rt("div"),_=Ut(),k&&k.c(),Pt(i,"class","member-edit-perms__title"),Pt(u,"type","checkbox"),Pt(u,"name","write"),Pt(u,"id","checkboxWrite"),u.disabled=n[1],Pt(c,"for","checkboxWrite"),Pt(o,"class","toggle-btn"),Pt(s,"type","checkbox"),Pt(s,"name","moderate"),Pt(s,"id","checkboxModerate"),s.disabled=n[3],Pt(l,"for","checkboxModerate"),Pt(a,"class","toggle-btn"),Pt(d,"class","chat-prompt"),Pt(p,"type","checkbox"),Pt(p,"name","admin"),Pt(p,"id","checkboxAdmin"),p.disabled=n[6],Pt(m,"for","checkboxAdmin"),Pt(y,"class","toggle-btn"),Pt(w,"class","chat-prompt"),Pt(t,"slot","content"),Pt(t,"class","member-edit-perms")},m:function(r,E){xt(r,t,E),jt(t,i),jt(t,e),jt(t,o),jt(o,u),u.checked=n[2],jt(o,c),jt(t,f),jt(t,a),jt(a,s),s.checked=n[4],jt(a,l),jt(t,h),jt(t,d),d.innerHTML=T,jt(t,v),jt(t,y),jt(y,p),p.checked=n[5],jt(y,m),jt(t,b),jt(t,w),w.innerHTML=j,jt(t,_),k&&k.m(t,null),g||(S=[Dt(u,"change",n[11]),Dt(u,"change",n[12]),Dt(s,"change",n[13]),Dt(s,"change",n[14]),Dt(p,"change",n[15]),Dt(p,"change",n[16])],g=!0)},p:function(n,i){2&i&&(u.disabled=n[1]),4&i&&(u.checked=n[2]),8&i&&(s.disabled=n[3]),16&i&&(s.checked=n[4]),64&i&&(p.disabled=n[6]),32&i&&(p.checked=n[5]),n[7]?k?k.p(n,i):((k=iv(n)).c(),k.m(t,null)):k&&(k.d(1),k=null)},d:function(n){n&&Ct(t),k&&k.d(),g=!1,tt(S)}}}function ev(n){var t,i,e,o,u,c,f,a,s=r("save")+"";return{c:function(){t=Rt("span"),(i=Rt("button")).textContent="".concat(r("close")),e=Ut(),o=Rt("button"),u=Mt(s),Pt(i,"class","button button_white qa-dialog-cancel"),Pt(o,"class","button button_green qa-dialog-ok"),o.disabled=c=!!n[7],Pt(t,"slot","buttons")},m:function(r,c){xt(r,t,c),jt(t,i),jt(t,e),jt(t,o),jt(o,u),f||(a=[Dt(i,"click",n[8]),Dt(o,"click",n[9])],f=!0)},p:function(n,t){128&t&&c!==(c=!!n[7])&&(o.disabled=c)},d:function(n){n&&Ct(t),f=!1,tt(a)}}}function ov(n){var t,i;return(t=new $f({props:{$$slots:{buttons:[ev],content:[rv],title:[tv]},$$scope:{ctx:n}}})).$on("close",n[8]),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r=Zd(i,1)[0],e={};262399&r&&(e.$$scope={dirty:r,ctx:n}),t.$set(e)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function uv(n,i,r){var e=this,o=i.chat,u=i.member,c=!1,f=!1,a=!1,s=!1,l=!1,h=!1,v="",y=o.perms&fn.$n;for(var p in fn)if(Object.prototype.hasOwnProperty.call(fn,p)){if(!u)break;var m=fn[p],b=!!(m&u.perms),w=u.perms>=o.perms&&!y;switch(m){case fn.Ln:c=w,f=b;break;case fn.qn:a=!y,s=b;break;case fn.$n:h=!y,l=b}}var _=function(){Xd(this,e),r(0,u=undefined)}.bind(this),g=function(){var n=this;if(Xd(this,e),u){var i=0;f&&(i|=fn.Ln),s&&(i|=fn.qn),l&&(i|=fn.$n),O_(o.chatId,u.userId,i).then(function(t){Xd(this,n),function(n,t,i){var r=this;wd[n]&&wd[n].update(function(n){bd(this,r);for(var e=0,o=n.length;e<o;e++)if(n[e].userId===t){n[e].perms=i;break}return n}.bind(this))}(t.chatId,t.userId,t.perm),_()}.bind(this))["catch"](function(i){Xd(this,n),d.error(t.User,i),r(7,v=i)}.bind(this))}}.bind(this);var S=function(){Xd(this,e),f||(r(4,s=!1),r(5,l=!1))}.bind(this);var T=function(){Xd(this,e),s?r(2,f=!0):r(5,l=!1)}.bind(this);var j=function(){Xd(this,e),l&&(r(2,f=!0),r(4,s=!0))}.bind(this);return n.$$set=function(n){Xd(this,e),"chat"in n&&r(10,o=n.chat),"member"in n&&r(0,u=n.member)}.bind(this),[u,c,f,a,s,l,h,v,_,g,o,function(){f=this.checked,r(2,f)},S,function(){s=this.checked,r(4,s)},T,function(){l=this.checked,r(5,l)},j]}var cv=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Qd(n,t)}(i,n);var t=Vd(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Jd(r=t.call(this)),n,uv,ov,rt,{chat:10,member:0}),r}return i}(Pi),fv=cv;function av(n){return av="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},av(n)}function sv(n,t){return sv=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},sv(n,t)}function lv(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=vv(n);if(t){var e=vv(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return hv(this,i)}}function hv(n,t){if(t&&("object"===av(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dv(n)}function dv(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function vv(n){return vv=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},vv(n)}function yv(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return pv(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return pv(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pv(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function mv(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function bv(n){kt(n,"svelte-1p20pcl",".chat-members-list.svelte-1p20pcl{height:400px;max-height:100%;margin-left:16px}.chat-members-list__content.svelte-1p20pcl{padding-top:16px}.alert.svelte-1p20pcl{margin-right:16px}")}function wv(n,t,i){var r=n.slice();return r[21]=t[i],r}function _v(n){for(var t,i,r=this,e=[],o=new Map,u=n[6],c=function(n){return mv(this,r),n[21].userId}.bind(this),f=0;f<u.length;f+=1){var a=wv(n,u,f),s=c(a);o.set(s,e[f]=Sv(s,a))}return{c:function(){for(var n=0;n<e.length;n+=1)e[n].c();t=Bt()},m:function(n,r){for(var o=0;o<e.length;o+=1)e[o].m(n,r);xt(n,t,r),i=!0},p:function(n,i){1733&i&&(u=n[6],ji(),e=Ii(e,i,c,1,n,u,o,t.parentNode,Ci,Sv,t,wv),ki())},i:function(n){if(!i){for(var t=0;t<u.length;t+=1)Ei(e[t]);i=!0}},o:function(n){for(var t=0;t<e.length;t+=1)Ai(e[t]);i=!1},d:function(n){for(var i=0;i<e.length;i+=1)e[i].d(n);n&&Ct(t)}}}function gv(n){var t;return{c:function(){(t=Rt("div")).textContent="".concat(r("errorUserNotFound")),Pt(t,"class","alert alert_warning svelte-1p20pcl")},m:function(n,i){xt(n,t,i)},p:Jn,i:Jn,o:Jn,d:function(n){n&&Ct(t)}}}function Sv(n,t){var i,r,e,o,u,c=this;function f(n){t[15](n)}function a(n){t[16](n)}var s={member:t[21],chat:t[0],canEdit:Bg!==t[21].userId&&t[9]&&(t[0].perms>t[21].perms||t[10]),canDelete:Bg!==t[21].userId&&t[9]&&(t[0].perms>t[21].perms||t[10])};return void 0!==t[7]&&(s.toEdit=t[7]),void 0!==t[2]&&(s.toDelete=t[2]),r=new md({props:s}),ui.push(function(){return mv(this,c),Ri(r,"toEdit",f)}.bind(this)),ui.push(function(){return mv(this,c),Ri(r,"toDelete",a)}.bind(this)),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),u=!0},p:function(n,i){var u=this;t=n;var c={};64&i&&(c.member=t[21]),1&i&&(c.chat=t[0]),65&i&&(c.canEdit=Bg!==t[21].userId&&t[9]&&(t[0].perms>t[21].perms||t[10])),65&i&&(c.canDelete=Bg!==t[21].userId&&t[9]&&(t[0].perms>t[21].perms||t[10])),!e&&128&i&&(e=!0,c.toEdit=t[7],vi(function(){return mv(this,u),e=!1}.bind(this))),!o&&4&i&&(o=!0,c.toDelete=t[2],vi(function(){return mv(this,u),o=!1}.bind(this))),r.$set(c)},i:function(n){u||(Ei(r.$$.fragment,n),u=!0)},o:function(n){Ai(r.$$.fragment,n),u=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function Tv(n){var t,i,r,e=this;function o(t){n[18](t)}var u={chat:n[0]};return void 0!==n[7]&&(u.member=n[7]),t=new fv({props:u}),ui.push(function(){return mv(this,e),Ri(t,"member",o)}.bind(this)),{c:function(){Mi(t.$$.fragment)},m:function(n,i){Ui(t,n,i),r=!0},p:function(n,r){var e=this,o={};1&r&&(o.chat=n[0]),!i&&128&r&&(i=!0,o.member=n[7],vi(function(){return mv(this,e),i=!1}.bind(this))),t.$set(o)},i:function(n){r||(Ei(t.$$.fragment,n),r=!0)},o:function(n){Ai(t.$$.fragment,n),r=!1},d:function(n){Bi(t,n)}}}function jv(n){var t,i,r,e,o,u,c,f,a,s,l,h=[gv,_v],d=[];function v(n,t){return n[1]&&!n[6].length?0:1}o=v(n),u=d[o]=h[o](n);var y=n[7]&&Tv(n);return{c:function(){t=Rt("div"),i=Rt("div"),r=Ut(),e=Rt("div"),u.c(),c=Ut(),y&&y.c(),f=Bt(),zt(i,"height",n[3]+"px"),Pt(e,"class","chat-members-list__content svelte-1p20pcl"),zt(e,"transform","translate3d(0,"+n[5]+"px,0)"),Pt(t,"class","chat-members-list svelte-1p20pcl")},m:function(u,h){xt(u,t,h),jt(t,i),jt(t,r),jt(t,e),d[o].m(e,null),n[17](t),xt(u,c,h),y&&y.m(u,h),xt(u,f,h),a=!0,s||(l=Dt(t,"scroll",nf(n[11],100,undefined)),s=!0)},p:function(n,t){var r=this,c=yv(t,1)[0];(!a||8&c)&&zt(i,"height",n[3]+"px");var s=o;(o=v(n))===s?d[o].p(n,c):(ji(),Ai(d[s],1,1,function(){mv(this,r),d[s]=null}.bind(this)),ki(),(u=d[o])?u.p(n,c):(u=d[o]=h[o](n)).c(),Ei(u,1),u.m(e,null)),(!a||32&c)&&zt(e,"transform","translate3d(0,"+n[5]+"px,0)"),n[7]?y?(y.p(n,c),128&c&&Ei(y,1)):((y=Tv(n)).c(),Ei(y,1),y.m(f.parentNode,f)):y&&(ji(),Ai(y,1,1,function(){mv(this,r),y=null}.bind(this)),ki())},i:function(n){a||(Ei(u),Ei(y),a=!0)},o:function(n){Ai(u),Ai(y),a=!1},d:function(i){i&&Ct(t),d[o].d(),n[17](null),i&&Ct(c),y&&y.d(i),i&&Ct(f),s=!1,l()}}}function kv(n,i,r){var e,o=this,u=i.chat,c=i.searchText,f=void 0===c?"":c,a=gd(u.chatId,u.authorId);ft(n,a,function(n){return mv(this,o),r(14,e=n)}.bind(this));var s,l,h,v=0,y=0,p=0,m=[],b=m.length,w=[],_=u.perms&fn.qn,g=u.perms&fn.$n;function S(){var n=s.offsetHeight;y=Math.floor(n/42)}function T(){if(s){var n=s.scrollTop,t=Math.floor(n/42),i=t-y;i<0&&(i=0),r(5,p=Math.ceil(42*i));var e=t-y;e<0&&(e=0),r(6,m=w.slice(e,t+2*y))}}return ii(function(){var n=this;return mv(this,o),window.addEventListener("resize",S),S(),T(),function(){mv(this,n),window.removeEventListener("resize",S)}.bind(this)}.bind(this)),n.$$set=function(n){mv(this,o),"chat"in n&&r(0,u=n.chat),"searchText"in n&&r(1,f=n.searchText)}.bind(this),n.$$.update=function(){var i=this;if(mv(this,o),16386&n.$$.dirty)if(f){var c=f.toLowerCase();r(13,w=e.filter(function(n){return mv(this,i),~n.userName.toLowerCase().indexOf(c)||~n.userLogin.toLowerCase().indexOf(c)}.bind(this)))}else r(13,w=e);5&n.$$.dirty&&h&&(O_(u.chatId,h.userId,0,!0).then(function(n){mv(this,i);var t=n.chatId,e=n.userId;n.isDelete&&(!function(n,t){var i=this;wd[n]&&wd[n].update(function(n){bd(this,i);for(var r=0,e=n.length;r<e;r++)if(n[r].userId===t){n.splice(r,1);break}return n}.bind(this))}(t,e),r(0,u.countMembers--,u))}.bind(this))["catch"](function(n){mv(this,i),d.error(t.User,n)}.bind(this)),r(2,h=undefined)),8192&n.$$.dirty&&w&&T(),12288&n.$$.dirty&&(r(12,b=w.length),r(3,v=42*b))}.bind(this),[u,f,h,v,s,p,m,l,a,_,g,T,b,w,e,function(n){r(7,l=n)},function(n){r(2,h=n),r(0,u)},function(n){var t=this;ui[n?"unshift":"push"](function(){mv(this,t),r(4,s=n)}.bind(this))},function(n){r(7,l=n)}]}var Ev=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&sv(n,t)}(i,n);var t=lv(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(dv(r=t.call(this)),n,kv,jv,rt,{chat:0,searchText:1},bv),r}return i}(Pi),Av=Ev;function Ov(n){return Ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ov(n)}function xv(n,t){return xv=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},xv(n,t)}function Cv(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Mv(n);if(t){var e=Mv(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Iv(this,i)}}function Iv(n,t){if(t&&("object"===Ov(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Rv(n)}function Rv(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Mv(n){return Mv=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Mv(n)}function Uv(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Bv(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Bv(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bv(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Dv(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Nv(n){kt(n,"svelte-x37lsg",".chat-members-window.svelte-x37lsg{width:600px;max-width:100%}.chat-members-window__add.svelte-x37lsg{float:left;margin-left:0}")}function Pv(n){var t,i,e,o,u,c,f,a,s,l,h,d=this;function v(t){n[7](t)}var y={searchText:n[2]};return void 0!==n[0]&&(y.chat=n[0]),f=new Av({props:y}),ui.push(function(){return Dv(this,d),Ri(f,"chat",v)}.bind(this)),{c:function(){t=Rt("div"),i=Rt("div"),e=Rt("i"),o=Ut(),u=Rt("input"),c=Ut(),Mi(f.$$.fragment),Pt(e,"class","icons-chat icons-chat_search-gray"),Pt(u,"type","text"),Pt(u,"class","input"),Pt(u,"placeholder",r("searchMembers")),Pt(i,"class","chat-members-search"),Pt(t,"slot","content"),Pt(t,"class","chat-members-window svelte-x37lsg")},m:function(r,a){xt(r,t,a),jt(t,i),jt(i,e),jt(i,o),jt(i,u),$t(u,n[2]),jt(t,c),Ui(f,t,null),s=!0,l||(h=Dt(u,"input",n[6]),l=!0)},p:function(n,t){var i=this;4&t&&u.value!==n[2]&&$t(u,n[2]);var r={};4&t&&(r.searchText=n[2]),!a&&1&t&&(a=!0,r.chat=n[0],vi(function(){return Dv(this,i),a=!1}.bind(this))),f.$set(r)},i:function(n){s||(Ei(f.$$.fragment,n),s=!0)},o:function(n){Ai(f.$$.fragment,n),s=!1},d:function(n){n&&Ct(t),Bi(f),l=!1,h()}}}function Lv(n){var t,i,e;return{c:function(){(t=Rt("button")).textContent="".concat(r("addMembers")),Pt(t,"class","button button_blue-and-white chat-members-window__add qa-add-members svelte-x37lsg")},m:function(r,o){xt(r,t,o),i||(e=Dt(t,"click",n[5]),i=!0)},p:Jn,d:function(n){n&&Ct(t),i=!1,e()}}}function qv(n){var t,i,e,o,u,c=n[1]&&Lv(n);return{c:function(){t=Rt("span"),(i=Rt("button")).textContent="".concat(r("close")),e=Ut(),c&&c.c(),Pt(i,"class","button button_white qa-dialog-cancel"),Pt(t,"slot","buttons")},m:function(r,f){xt(r,t,f),jt(t,i),jt(t,e),c&&c.m(t,null),o||(u=Dt(i,"click",n[4]),o=!0)},p:function(n,i){n[1]?c?c.p(n,i):((c=Lv(n)).c(),c.m(t,null)):c&&(c.d(1),c=null)},d:function(n){n&&Ct(t),c&&c.d(),o=!1,u()}}}function $v(n){var t,i,r,e=this;function o(t){n[9](t)}var u={};return void 0!==n[0]&&(u.chat=n[0]),t=new Gd({props:u}),ui.push(function(){return Dv(this,e),Ri(t,"chat",o)}.bind(this)),t.$on("close",n[10]),{c:function(){Mi(t.$$.fragment)},m:function(n,i){Ui(t,n,i),r=!0},p:function(n,r){var e=this,o={};!i&&1&r&&(i=!0,o.chat=n[0],vi(function(){return Dv(this,e),i=!1}.bind(this))),t.$set(o)},i:function(n){r||(Ei(t.$$.fragment,n),r=!0)},o:function(n){Ai(t.$$.fragment,n),r=!1},d:function(n){Bi(t,n)}}}function zv(n){var t,i,r,e;(t=new $f({props:{withTitle:!1,$$slots:{buttons:[qv],content:[Pv]},$$scope:{ctx:n}}})).$on("close",n[8]);var o=n[3]&&$v(n);return{c:function(){Mi(t.$$.fragment),i=Ut(),o&&o.c(),r=Bt()},m:function(n,u){Ui(t,n,u),xt(n,i,u),o&&o.m(n,u),xt(n,r,u),e=!0},p:function(n,i){var e=this,u=Uv(i,1)[0],c={};4111&u&&(c.$$scope={dirty:u,ctx:n}),t.$set(c),n[3]?o?(o.p(n,u),8&u&&Ei(o,1)):((o=$v(n)).c(),Ei(o,1),o.m(r.parentNode,r)):o&&(ji(),Ai(o,1,1,function(){Dv(this,e),o=null}.bind(this)),ki())},i:function(n){e||(Ei(t.$$.fragment,n),Ei(o),e=!0)},o:function(n){Ai(t.$$.fragment,n),Ai(o),e=!1},d:function(n){Bi(t,n),n&&Ct(i),o&&o.d(n),n&&Ct(r)}}}function Wv(n,t,i){var r=this,e=t.chat,o=t.canAdd,u=void 0===o||o,c=ri(),f="",a=!1,s=function(){Dv(this,r),c("close")}.bind(this),l=function(){Dv(this,r),i(3,a=!0)}.bind(this);var h=function(){Dv(this,r),i(3,a=!1)}.bind(this);return n.$$set=function(n){Dv(this,r),"chat"in n&&i(0,e=n.chat),"canAdd"in n&&i(1,u=n.canAdd)}.bind(this),[e,u,f,a,s,l,function(){f=this.value,i(2,f)},function(n){i(0,e=n)},function(t){ei.call(this,n,t)},function(n){i(0,e=n)},h]}var Fv=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&xv(n,t)}(i,n);var t=Cv(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Rv(r=t.call(this)),n,Wv,zv,rt,{chat:0,canAdd:1},Nv),r}return i}(Pi),Gv=Fv;function Hv(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Qv(n){var t=this;return new Promise(function(i,r){var e=this;if(Hv(this,t),n){var o=x({commandType:D.hn,callback:function(n,t){Hv(this,e),n?r(n):i(t)}.bind(this)}),u=b(n);Ow(D.hn,[u],null,o)}else r("Chat id is empty")}.bind(this))}function Vv(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Yv(n){return{chatId:n.chatId,type:n.type,isPublic:n.isPublic,isLimited:!!n.isLimited,isClosed:!!n.isClosed,name:n.name,description:n.description,links:n.links,inviteLink:n.inviteLink,language:n.language,avatar:n.avatar,avatarToUpload:undefined,avatarIsPresent:!!n.avatarIsPresent,authorId:n.authorId,countMembers:n.countMembers,perms:n.perms,errorInviteLink:"",errorCommon:"",errorName:!1,errorDescription:!1,avatarError:!1}}var Jv,Kv,Xv=undefined,Zv=undefined,ny=undefined,ty=null;function iy(){clearTimeout(Jv),Jv=setTimeout((function(){Zv.removeAttribute("style"),ty&&(Zv.style.maxWidth=ty);var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=Zv.offsetWidth,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,r=Zv.offsetHeight;n-16<t?(Zv.style.left="8px",Zv.style.right="8px",Zv.style.marginLeft=0):(Zv.style.left="50%",Zv.style.right="auto",Zv.style.marginLeft=t/2*-1+"px"),i-16<r?(Zv.style.top="8px",Zv.style.bottom="8px",Zv.style.marginTop=0):(Zv.style.top="50%",Zv.style.bottom="auto",Zv.style.marginTop=r/2*-1+"px"),Zv.classList.remove("chat-dialog__container_hidden")}),50)}function ry(n){if(n)switch(n.code||n.keyCode){case"Escape":case 27:n.preventDefault(),n.stopPropagation(),oy()}}function ey(n){var t=this,i=n.createCallback,r=void 0===i?null:i,e=n.okCallback,o=n.hideCallback,u=n.okColor,c=void 0===u?"green":u,f=n.appendCallback,a=n.title,s=n.okText,l=void 0===s?"Ok":s,h=n.cancelText,d=void 0===h?"Cancel":h,v=n.maxWidth,y=void 0===v?null:v,p=n.showCloseBtn,m=void 0===p||p,b=n.hideButtons;if(window.document.addEventListener("keydown",ry),ny=o,ty=y,(Xv=document.createElement("div")).className="chat-dialog__shadow",document.body.appendChild(Xv),Xv.addEventListener("click",oy),(Zv=document.createElement("div")).className="chat-dialog__container chat-dialog__container_hidden ui",Zv.addEventListener("click",function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,t),n.stopPropagation()}.bind(this)),m){var w=document.createElement("div");w.className="chat-dialog__close qa-dialog-close",w.innerHTML='<i class="icons-ux icons-ux_close-gray"></i>',w.addEventListener("click",oy),Zv.appendChild(w)}if(a){var _='<div class="chat-dialog__title">'.concat(a,"</div>");Zv.insertAdjacentHTML("beforeend",_)}var g=document.createElement("div");if(g.className="chat-dialog__content",Zv.appendChild(g),!b){var S=document.createElement("div");S.className="chat-dialog__buttons",Zv.appendChild(S);var T=document.createElement("button");T.className="button button_white qa-dialog-cancel",T.innerText=d,S.appendChild(T),T.addEventListener("click",oy),(Kv=document.createElement("button")).className="button button_".concat(c," qa-dialog-ok"),Kv.innerText=l,S.appendChild(Kv),Kv.addEventListener("click",(function(n){e&&e(),oy(n,!0)}))}r&&r(g),document.body.appendChild(Zv),iy(),f&&setTimeout((function(){f()}),60),window.addEventListener("resize",iy)}function oy(n,t){window.document.removeEventListener("keydown",ry),n&&n.stopPropagation(),Zv&&Xv&&(ny&&!t&&ny(),Xv.parentNode.removeChild(Xv),Zv.parentNode.removeChild(Zv),window.removeEventListener("resize",iy)),Zv=undefined,Xv=undefined,ny=undefined}function uy(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var cy,fy,ay,sy,ly,hy=200,dy=0,vy=0,yy=0,py=0,my=!1,by={x:0,y:0};function wy(){my=!1}function _y(n){my=!0,by.x=n.clientX,by.y=n.clientY}function gy(n){if(my){var t=n.clientX,i=n.clientY,r=t-by.x,e=i-by.y;by.x=t,by.y=i,jy(dy+r,vy+e)}}function Sy(){clearInterval(sy)}function Ty(n){var t=yy/py;(yy+=60*(n?1:-1))<hy&&(yy=hy),(py=Math.round(yy/t))<hy&&(py=hy,yy=Math.round(py*t)),fy.clearRect(0,0,hy,hy),fy.drawImage(cy,dy,vy,yy,py)}function jy(n,t){n>=0?n=0:n<-yy+hy&&(n=-yy+hy),t>=0?t=0:t<-py+hy&&(t=-py+hy),dy=n,vy=t,fy.clearRect(0,0,hy,hy),fy.drawImage(cy,n,t,yy,py)}function ky(n){var t=this,i=n.parentNode,r=n.direction,e=n.callback,o=n.icon,u=document.createElement("div");u.innerHTML='<i class="icons-ux icons-ux_'.concat(o,'"></i>'),u.className="avatar-editor__control avatar-editor__control_".concat(r),e&&(u.addEventListener("mousedown",function(n){uy(this,t),n.stopPropagation(),n.preventDefault(),Sy(),sy=setInterval(e,50)}.bind(this)),u.addEventListener("touchstart",function(n){uy(this,t),n.stopPropagation(),n.preventDefault(),Sy(),sy=setInterval(e,50)}.bind(this),{passive:!0}),u.addEventListener("mouseup",Sy),u.addEventListener("mouseout",Sy),u.addEventListener("touchend",function(){uy(this,t),Sy()}.bind(this),{passive:!0})),i.appendChild(u)}function Ey(n){var t=this,i=n.parentNode,r=n.localization,e=document.createElement("div");e.className="avatar-editor",ky({parentNode:e,direction:"top",callback:function(){uy(this,t),jy(dy,vy-10)}.bind(this),icon:"arrow-up"}),ky({parentNode:e,direction:"right",callback:function(){uy(this,t),jy(dy+10,vy)}.bind(this),icon:"arrow-right"}),ky({parentNode:e,direction:"bottom",callback:function(){uy(this,t),jy(dy,vy+10)}.bind(this),icon:"arrow-down"}),ky({parentNode:e,direction:"left",callback:function(){uy(this,t),jy(dy-10,vy)}.bind(this),icon:"arrow-left"});var o=document.createElement("div");o.className="avatar-editor__draggable",e.appendChild(o),o.addEventListener("mousemove",gy),o.addEventListener("mousedown",_y),o.addEventListener("mouseup",wy),o.addEventListener("mouseout",wy),o.addEventListener("dragstart",function(n){uy(this,t),n.preventDefault()}.bind(this)),function(n){var t=n.parentNode,i=new FileReader;i.onload=function(n){(cy=new Image).onload=function(){(ay=document.createElement("canvas")).className="avatar-editor__canvas",ay.width=hy,ay.height=hy,fy=ay.getContext("2d"),yy=cy.width,py=cy.height;var n=yy/py;yy>py?yy=(py=hy)*n:py=(yy=hy)/n,fy.drawImage(cy,0,0,yy,py),t.appendChild(ay)},cy.src=n.target.result},i.readAsDataURL(ly)}({parentNode:e}),i.appendChild(e);var u=document.createElement("div");u.className="avatar-editor__zoom";var c=document.createElement("div");c.className="avatar-editor__zoom-btn",c.innerHTML='<span class="avatar-editor__zoom-icon">+</span>'.concat(r.zoomIn||""),c.addEventListener("click",function(){uy(this,t),Ty(!0)}.bind(this)),u.appendChild(c);var f=document.createElement("div");f.className="avatar-editor__zoom-btn",f.innerHTML='<span class="avatar-editor__zoom-icon">-</span>'.concat(r.zoomOut||""),f.addEventListener("click",function(){uy(this,t),Ty()}.bind(this)),u.appendChild(f),i.appendChild(u)}function Ay(){dy=0,vy=0,ay=null,Sy()}function Oy(n){return Oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Oy(n)}function xy(n,t){return xy=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},xy(n,t)}function Cy(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=My(n);if(t){var e=My(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Iy(this,i)}}function Iy(n,t){if(t&&("object"===Oy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ry(n)}function Ry(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function My(n){return My=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},My(n)}function Uy(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function By(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Dy(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Dy(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dy(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Ny(n){var t,i,r,e,o,u,c,f,a,s;return{c:function(){t=Rt("div"),i=Rt("div"),r=Mt(n[5]),e=Mt("/"),o=Mt(n[4]),u=Ut(),c=Rt("input"),Pt(i,"class","count-input__counter"),Pt(c,"autocomplete","off"),Pt(c,"class",f="input"+(n[1]?" field-validation-error":"")),Pt(c,"placeholder",n[2]),Pt(c,"type",n[3]),Pt(c,"maxlength",n[4]),c.value=n[0],Pt(t,"class","count-input")},m:function(f,l){xt(f,t,l),jt(t,i),jt(i,r),jt(i,e),jt(i,o),jt(t,u),jt(t,c),a||(s=[Dt(c,"input",n[8]),Dt(c,"input",n[6])],a=!0)},p:function(n,t){var i=By(t,1)[0];32&i&&qt(r,n[5]),16&i&&qt(o,n[4]),2&i&&f!==(f="input"+(n[1]?" field-validation-error":""))&&Pt(c,"class",f),4&i&&Pt(c,"placeholder",n[2]),8&i&&Pt(c,"type",n[3]),16&i&&Pt(c,"maxlength",n[4]),1&i&&c.value!==n[0]&&(c.value=n[0])},i:Jn,o:Jn,d:function(n){n&&Ct(t),a=!1,tt(s)}}}function Py(n,t,i){var r=this,e=t.value,o=void 0===e?"":e,u=t.error,c=void 0!==u&&u,f=t.placeholder,a=void 0===f?"":f,s=t.type,l=void 0===s?"text":s,h=t.maxlength,d=void 0===h?10:h,v=t.minlength,y=void 0===v?0:v,p=o.length;return n.$$set=function(n){Uy(this,r),"value"in n&&i(0,o=n.value),"error"in n&&i(1,c=n.error),"placeholder"in n&&i(2,a=n.placeholder),"type"in n&&i(3,l=n.type),"maxlength"in n&&i(4,d=n.maxlength),"minlength"in n&&i(7,y=n.minlength)}.bind(this),n.$$.update=function(){Uy(this,r),1&n.$$.dirty&&i(5,p=o.length)}.bind(this),[o,c,a,l,d,p,function(n){i(0,o=n.target.value),o.length>y&&i(1,c=!1)},y,function(t){ei.call(this,n,t)}]}var Ly=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&xy(n,t)}(i,n);var t=Cy(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Ry(r=t.call(this)),n,Py,Ny,rt,{value:0,error:1,placeholder:2,type:3,maxlength:4,minlength:7}),r}return i}(Pi),qy=Ly;function $y(n){return $y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$y(n)}var zy=undefined;function Wy(n,t){return Wy=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Wy(n,t)}function Fy(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Qy(n);if(t){var e=Qy(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Gy(this,i)}}function Gy(n,t){if(t&&("object"===$y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hy(n)}function Hy(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Qy(n){return Qy=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Qy(n)}function Vy(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Yy(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Yy(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yy(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Jy(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Ky=function(n){return Jy(this,zy),{}}.bind(undefined),Xy=function(n){return Jy(this,zy),{}}.bind(undefined),Zy=function(n){return Jy(this,zy),{}}.bind(undefined),np=function(n){return Jy(this,zy),{}}.bind(undefined),tp=function(n){return Jy(this,zy),{}}.bind(undefined),ip=function(n){return Jy(this,zy),{}}.bind(undefined);function rp(n,t,i){var r=n.slice();return r[27]=t[i][0],r[28]=t[i][1],r}function ep(n){var t,i,r=n[0].errorCommon+"";return{c:function(){t=Rt("div"),i=Mt(r),Pt(t,"class","alert alert_danger")},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,t){1&t&&r!==(r=n[0].errorCommon+"")&&qt(i,r)},d:function(n){n&&Ct(t)}}}function op(n){var t;return{c:function(){Pt(t=Rt("i"),"class","icons-chat icons-chat_no-image")},m:function(n,i){xt(n,t,i)},p:Jn,d:function(n){n&&Ct(t)}}}function up(n){var t,i;return{c:function(){et((t=Rt("img")).src,i=n[0].avatar)||Pt(t,"src",i),Pt(t,"alt","")},m:function(n,i){xt(n,t,i)},p:function(n,r){1&r&&!et(t.src,i=n[0].avatar)&&Pt(t,"src",i)},d:function(n){n&&Ct(t)}}}function cp(n){var t,i,e;return{c:function(){(t=Rt("button")).textContent="".concat(r("delete")),Pt(t,"class","button button_red")},m:function(r,o){xt(r,t,o),i||(e=Dt(t,"click",Nt(n[8])),i=!0)},p:Jn,d:function(n){n&&Ct(t),i=!1,e()}}}function fp(n){var t,i;return{c:function(){t=Rt("div"),i=Mt(n[2]),Pt(t,"class","chat-form__avatar-error")},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,t){4&t&&qt(i,n[2])},d:function(n){n&&Ct(t)}}}function ap(n){var t,i,e,o=r("privateChannel")+"";return{c:function(){t=Mt(o),i=Ut(),(e=Rt("span")).textContent="".concat(r("privateChannelDesc")),Pt(e,"class","chat-form__desc-label")},m:function(n,r){xt(n,t,r),xt(n,i,r),xt(n,e,r)},p:Jn,d:function(n){n&&Ct(t),n&&Ct(i),n&&Ct(e)}}}function sp(n){var t,i,e,o=r("privateChat")+"";return{c:function(){t=Mt(o),i=Ut(),(e=Rt("span")).textContent="".concat(r("privateChatDesc")),Pt(e,"class","chat-form__desc-label")},m:function(n,r){xt(n,t,r),xt(n,i,r),xt(n,e,r)},p:Jn,d:function(n){n&&Ct(t),n&&Ct(i),n&&Ct(e)}}}function lp(n){var t,i,e,o=r("publicChannel")+"";return{c:function(){t=Mt(o),i=Ut(),(e=Rt("span")).textContent="".concat(r("publicChannelDesc")),Pt(e,"class","chat-form__desc-label")},m:function(n,r){xt(n,t,r),xt(n,i,r),xt(n,e,r)},p:Jn,d:function(n){n&&Ct(t),n&&Ct(i),n&&Ct(e)}}}function hp(n){var t,i,e,o=r("publicChat")+"";return{c:function(){t=Mt(o),i=Ut(),(e=Rt("span")).textContent="".concat(r("publicChatDesc")),Pt(e,"class","chat-form__desc-label")},m:function(n,r){xt(n,t,r),xt(n,i,r),xt(n,e,r)},p:Jn,d:function(n){n&&Ct(t),n&&Ct(i),n&&Ct(e)}}}function dp(n){var t,i,e,o,u,c;return{c:function(){t=Rt("div"),i=Rt("input"),(o=Rt("label")).textContent="".concat(r("isLimited")),Pt(i,"type","checkbox"),Pt(i,"name","isLimited"),Pt(i,"class","checkbox"),Pt(i,"id","chatIsLimited"),i.checked=e=!n[0].isLimited,Pt(o,"for","chatIsLimited"),Pt(t,"class","chat-form__item")},m:function(r,e){xt(r,t,e),jt(t,i),jt(t,o),u||(c=Dt(i,"change",n[17]),u=!0)},p:function(n,t){1&t&&e!==(e=!n[0].isLimited)&&(i.checked=e)},d:function(n){n&&Ct(t),u=!1,c()}}}function vp(n){var t,i,e,o,u,c,f,a,s,l,h,d,v,y=n[0].errorInviteLink&&yp(n);return{c:function(){t=Rt("div"),(i=Rt("div")).textContent="".concat(r("urlChannel")),e=Ut(),o=Rt("div"),(u=Rt("span")).textContent="".concat(n[4]),c=Ut(),f=Rt("input"),s=Ut(),(l=Rt("div")).textContent="".concat(r("urlChannelDesc")),h=Ut(),y&&y.c(),Pt(i,"class","chat-form__label"),Pt(u,"class","chat-form__invite-link-label"),Pt(f,"class",a="input"+(n[0].errorInviteLink?" field-validation-error":"")),Pt(f,"type","text"),Pt(f,"name","invite_link"),Pt(f,"placeholder","link"),Pt(o,"class","chat-form__invite-link"),Pt(l,"class","chat-form__tip"),Pt(t,"class","chat-form__item")},m:function(r,a){xt(r,t,a),jt(t,i),jt(t,e),jt(t,o),jt(o,u),jt(o,c),jt(o,f),$t(f,n[0].inviteLink),jt(t,s),jt(t,l),jt(t,h),y&&y.m(t,null),d||(v=[Dt(f,"input",n[21]),Dt(f,"input",n[22])],d=!0)},p:function(n,i){1&i&&a!==(a="input"+(n[0].errorInviteLink?" field-validation-error":""))&&Pt(f,"class",a),1&i&&f.value!==n[0].inviteLink&&$t(f,n[0].inviteLink),n[0].errorInviteLink?y?y.p(n,i):((y=yp(n)).c(),y.m(t,null)):y&&(y.d(1),y=null)},d:function(n){n&&Ct(t),y&&y.d(),d=!1,tt(v)}}}function yp(n){var t,i,r=n[0].errorInviteLink+"";return{c:function(){t=Rt("span"),i=Mt(r),Pt(t,"class","field-validation-error")},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,t){1&t&&r!==(r=n[0].errorInviteLink+"")&&qt(i,r)},d:function(n){n&&Ct(t)}}}function pp(n){var t,i,e=r("none"!==n[27]?n[27]:"other")+"";return{c:function(){t=Rt("option"),i=Mt(e),t.__value=n[28],t.value=t.__value},m:function(n,r){xt(n,t,r),jt(t,i)},p:Jn,d:function(n){n&&Ct(t)}}}function mp(n){var t,i,e,o,u,c,f,a,s,l,h,d,v,y,p,m,b,w,_,g,S,T,j,k,E,A,O,x,C,I,R,M,U,B,D,N,P,L,q,$,z,W,F,G,H,Q,V,Y,J,K,X,Z,nn,tn,rn,en,on,un,cn,fn,an,sn,ln=this,hn=r(n[1]?"chatLanguage":"channelLanguage")+"",dn=n[0].errorCommon&&ep(n);function vn(n,t){return n[0].avatar?up:op}var yn=vn(n),mn=yn(n);function bn(t){n[11](t)}function wn(t){n[12](t)}var _n={placeholder:r("chatNamePlaceholder"),type:"text",maxlength:60,minlength:_p};void 0!==n[0].name&&(_n.value=n[0].name),void 0!==n[0].errorName&&(_n.error=n[0].errorName),s=new qy({props:_n}),ui.push(function(){return Jy(this,ln),Ri(s,"value",bn)}.bind(this)),ui.push(function(){return Jy(this,ln),Ri(s,"error",wn)}.bind(this));var gn=n[0].avatar&&cp(n),Sn=n[2]&&fp(n);function Tn(n,t){return n[1]?sp:ap}var jn=Tn(n),kn=jn(n);function En(n,t){return n[1]?hp:lp}var An=En(n),On=An(n),xn=n[1]&&dp(n);function Cn(t){n[18](t)}function In(t){n[19](t)}var Rn={placeholder:r(n[1]?"groupDescPlaceholder":"channelDescPlaceholder"),type:"text",minlength:_p,maxlength:90};void 0!==n[0].description&&(Rn.value=n[0].description),void 0!==n[0].errorDescription&&(Rn.error=n[0].errorDescription),P=new qy({props:Rn}),ui.push(function(){return Jy(this,ln),Ri(P,"value",Cn)}.bind(this)),ui.push(function(){return Jy(this,ln),Ri(P,"error",In)}.bind(this));for(var Mn=!n[1]&&1===n[0].isPublic&&vp(n),Un=Object.entries(pn),Bn=[],Dn=0;Dn<Un.length;Dn+=1)Bn[Dn]=pp(rp(n,Un,Dn));var Nn=n[10].content,Pn=at(Nn,n,n[9],ip),Ln=n[10]["button-name"],qn=at(Ln,n,n[9],np),$n=qn||function(n){var t,i=r(n[1]?"createGroup":"createChannel")+"";return{c:function(){t=Mt(i)},m:function(n,i){xt(n,t,i)},p:function(n,e){2&e&&i!==(i=r(n[1]?"createGroup":"createChannel")+"")&&qt(t,i)},d:function(n){n&&Ct(t)}}}(n),zn=n[10].buttons,Wn=at(zn,n,n[9],Xy);return{c:function(){var l=this;t=Rt("div"),dn&&dn.c(),i=Ut(),e=Rt("div"),o=Rt("div"),u=Rt("div"),mn.c(),c=Ut(),f=Rt("div"),a=Rt("div"),Mi(s.$$.fragment),d=Ut(),v=Rt("div"),(y=Rt("button")).textContent="".concat(r("selectFile")),p=Rt("input"),m=Ut(),gn&&gn.c(),b=Ut(),(w=Rt("div")).textContent="".concat(r("fileDesc")),_=Ut(),Sn&&Sn.c(),S=Ut(),T=Rt("div"),j=Rt("div"),k=Rt("input"),E=Ut(),A=Rt("label"),kn.c(),O=Ut(),x=Rt("div"),C=Rt("input"),I=Ut(),R=Rt("label"),On.c(),M=Ut(),xn&&xn.c(),U=Ut(),B=Rt("div"),(D=Rt("div")).textContent="".concat(r("chatDesc")),N=Ut(),Mi(P.$$.fragment),$=Ut(),z=Rt("div"),(W=Rt("div")).textContent="".concat(r("links")),F=Ut(),G=Rt("input"),H=Ut(),Mn&&Mn.c(),Q=Ut(),V=Rt("div"),Y=Rt("div"),J=Mt(hn),K=Ut(),X=Rt("div"),Z=Rt("select");for(var h=0;h<Bn.length;h+=1)Bn[h].c();nn=Ut(),Pn&&Pn.c(),tn=Ut(),rn=Rt("div"),en=Rt("button"),$n&&$n.c(),on=Ut(),(un=Rt("button")).textContent="".concat(r("cancel")),cn=Ut(),Wn&&Wn.c(),Pt(u,"class","chat-form__avatar"),Pt(a,"class","chat-form__item"),Pt(y,"class","button button_green"),Pt(p,"type","file"),Pt(p,"accept",bp),Pt(p,"name","avatar"),Pt(v,"class","box-file"),Pt(w,"class","chat-form__avatar-desc"),Pt(f,"class","chat-form__avatar-form"),Pt(o,"class",g="chat-form__avatar-block"+(n[2]?" chat-form__avatar-block_error":"")),Pt(e,"class","chat-form__item"),Pt(k,"type","radio"),Pt(k,"name","ispublic"),Pt(k,"class","radio"),k.__value=0,k.value=k.__value,Pt(k,"id","chatIsPrivate"),n[15][0].push(k),Pt(A,"for","chatIsPrivate"),Pt(j,"class","chat-form__option"),Pt(C,"type","radio"),Pt(C,"name","ispublic"),C.__value=1,C.value=C.__value,Pt(C,"class","radio"),Pt(C,"id","chatIsPublic"),n[15][0].push(C),Pt(R,"for","chatIsPublic"),Pt(x,"class","chat-form__option"),Pt(T,"class","chat-form__options"),Pt(D,"class","chat-form__label"),Pt(B,"class","chat-form__item"),Pt(W,"class","chat-form__label"),Pt(G,"autocomplete","off"),Pt(G,"class","input"),Pt(G,"placeholder",r("linksPlaceholder")),Pt(G,"type","text"),Pt(z,"class","chat-form__item"),Pt(Y,"class","chat-form__label"),Pt(Z,"name","language"),void 0===n[0].language&&di(function(){return Jy(this,l),n[23].call(Z)}.bind(this)),Pt(X,"class","select"),Pt(V,"class","chat-form__item"),Pt(en,"class","button button_green"),Pt(un,"class","button button_white"),Pt(rn,"class","chat-form__buttons"),Pt(t,"class","chat-form__content")},m:function(r,l){xt(r,t,l),dn&&dn.m(t,null),jt(t,i),jt(t,e),jt(e,o),jt(o,u),mn.m(u,null),jt(o,c),jt(o,f),jt(f,a),Ui(s,a,null),jt(f,d),jt(f,v),jt(v,y),jt(v,p),n[13](p),jt(f,m),gn&&gn.m(f,null),jt(f,b),jt(f,w),jt(f,_),Sn&&Sn.m(f,null),jt(t,S),jt(t,T),jt(T,j),jt(j,k),k.checked=k.__value===n[0].isPublic,jt(j,E),jt(j,A),kn.m(A,null),jt(T,O),jt(T,x),jt(x,C),C.checked=C.__value===n[0].isPublic,jt(x,I),jt(x,R),On.m(R,null),jt(t,M),xn&&xn.m(t,null),jt(t,U),jt(t,B),jt(B,D),jt(B,N),Ui(P,B,null),jt(t,$),jt(t,z),jt(z,W),jt(z,F),jt(z,G),$t(G,n[0].links),jt(t,H),Mn&&Mn.m(t,null),jt(t,Q),jt(t,V),jt(V,Y),jt(Y,J),jt(V,K),jt(V,X),jt(X,Z);for(var h=0;h<Bn.length;h+=1)Bn[h].m(Z,null);Wt(Z,n[0].language),jt(t,nn),Pn&&Pn.m(t,null),jt(t,tn),jt(t,rn),jt(rn,en),$n&&$n.m(en,null),jt(rn,on),jt(rn,un),jt(rn,cn),Wn&&Wn.m(rn,null),fn=!0,an||(sn=[Dt(p,"input",n[7]),Dt(k,"change",n[14]),Dt(C,"change",n[16]),Dt(G,"input",n[20]),Dt(Z,"change",n[23]),Dt(en,"click",Nt(n[6])),Dt(un,"click",Nt(n[5]))],an=!0)},p:function(n,e){var c=this,a=Vy(e,1)[0];n[0].errorCommon?dn?dn.p(n,a):((dn=ep(n)).c(),dn.m(t,i)):dn&&(dn.d(1),dn=null),yn===(yn=vn(n))&&mn?mn.p(n,a):(mn.d(1),(mn=yn(n))&&(mn.c(),mn.m(u,null)));var d={};!l&&1&a&&(l=!0,d.value=n[0].name,vi(function(){return Jy(this,c),l=!1}.bind(this))),!h&&1&a&&(h=!0,d.error=n[0].errorName,vi(function(){return Jy(this,c),h=!1}.bind(this))),s.$set(d),n[0].avatar?gn?gn.p(n,a):((gn=cp(n)).c(),gn.m(f,b)):gn&&(gn.d(1),gn=null),n[2]?Sn?Sn.p(n,a):((Sn=fp(n)).c(),Sn.m(f,null)):Sn&&(Sn.d(1),Sn=null),(!fn||4&a&&g!==(g="chat-form__avatar-block"+(n[2]?" chat-form__avatar-block_error":"")))&&Pt(o,"class",g),1&a&&(k.checked=k.__value===n[0].isPublic),jn===(jn=Tn(n))&&kn?kn.p(n,a):(kn.d(1),(kn=jn(n))&&(kn.c(),kn.m(A,null))),1&a&&(C.checked=C.__value===n[0].isPublic),An===(An=En(n))&&On?On.p(n,a):(On.d(1),(On=An(n))&&(On.c(),On.m(R,null))),n[1]?xn?xn.p(n,a):((xn=dp(n)).c(),xn.m(t,U)):xn&&(xn.d(1),xn=null);var v={};if(2&a&&(v.placeholder=r(n[1]?"groupDescPlaceholder":"channelDescPlaceholder")),!L&&1&a&&(L=!0,v.value=n[0].description,vi(function(){return Jy(this,c),L=!1}.bind(this))),!q&&1&a&&(q=!0,v.error=n[0].errorDescription,vi(function(){return Jy(this,c),q=!1}.bind(this))),P.$set(v),1&a&&G.value!==n[0].links&&$t(G,n[0].links),n[1]||1!==n[0].isPublic?Mn&&(Mn.d(1),Mn=null):Mn?Mn.p(n,a):((Mn=vp(n)).c(),Mn.m(t,Q)),(!fn||2&a)&&hn!==(hn=r(n[1]?"chatLanguage":"channelLanguage")+"")&&qt(J,hn),0&a){var y;for(Un=Object.entries(pn),y=0;y<Un.length;y+=1){var p=rp(n,Un,y);Bn[y]?Bn[y].p(p,a):(Bn[y]=pp(p),Bn[y].c(),Bn[y].m(Z,null))}for(;y<Bn.length;y+=1)Bn[y].d(1);Bn.length=Un.length}1&a&&Wt(Z,n[0].language),Pn&&Pn.p&&(!fn||512&a)&&ht(Pn,Nn,n,n[9],fn?lt(Nn,n[9],a,tp):dt(n[9]),ip),qn?qn.p&&(!fn||512&a)&&ht(qn,Ln,n,n[9],fn?lt(Ln,n[9],a,Zy):dt(n[9]),np):$n&&$n.p&&(!fn||2&a)&&$n.p(n,fn?a:-1),Wn&&Wn.p&&(!fn||512&a)&&ht(Wn,zn,n,n[9],fn?lt(zn,n[9],a,Ky):dt(n[9]),Xy)},i:function(n){fn||(Ei(s.$$.fragment,n),Ei(P.$$.fragment,n),Ei(Pn,n),Ei($n,n),Ei(Wn,n),fn=!0)},o:function(n){Ai(s.$$.fragment,n),Ai(P.$$.fragment,n),Ai(Pn,n),Ai($n,n),Ai(Wn,n),fn=!1},d:function(i){i&&Ct(t),dn&&dn.d(),mn.d(),Bi(s),n[13](null),gn&&gn.d(),Sn&&Sn.d(),n[15][0].splice(n[15][0].indexOf(k),1),kn.d(),n[15][0].splice(n[15][0].indexOf(C),1),On.d(),xn&&xn.d(),Bi(P),Mn&&Mn.d(),It(Bn,i),Pn&&Pn.d(i),$n&&$n.d(i),Wn&&Wn.d(i),an=!1,tt(sn)}}}var bp=".png, .jpg, .jpeg, .gif",wp=200,_p=3;function gp(n,t,i){var e,o,u,c=this,f=t.$$slots,a=void 0===f?{}:f,s=t.$$scope,l=ri(),h=t.chat,d="".concat(cS?"":"https://www.mql5.com","/").concat(Ng,"/channels/");function v(){u&&(i(3,u.type="",u),i(3,u.value="",u),i(3,u.type="file",u))}function y(n){var t=this;ey({cancelText:r("close"),okText:r("save"),showCloseBtn:!1,createCallback:function(i){Jy(this,t),function(n){var t=n.parentNode,i=n.file,r=n.localization,e=void 0===r?{}:r;Ay(),t&&i&&i.type.match(/image.*/)&&(ly=i,Ey({parentNode:t,localization:e}))}({parentNode:i,file:n,localization:{zoomIn:r("zoomIn"),zoomOut:r("zoomOut")}})}.bind(this),okCallback:function(){var n=this;Jy(this,t),function(n){if(!ay)return null;ay.toBlob?ay.toBlob(n):ay.msToBlob?n(ay.msToBlob()):n(ly)}(function(t){Jy(this,n),i(0,h.avatarToUpload=t,h),i(0,h.avatarToUpload.lastModified=(new Date).getTime(),h),i(0,h.avatarToUpload.name="avatar",h);var r=URL.createObjectURL(t);i(0,h.avatar=r,h)}.bind(this)),Ay(),i(2,o=undefined),v(),i(0,h.avatarIsPresent=!0,h)}.bind(this),hideCallback:function(){Jy(this,t),Ay(),v()}.bind(this)})}var p=function(){Jy(this,c),l("close")}.bind(this),m=function(){Jy(this,c);var n=!1;(h.name.length<_p&&(i(0,h.errorName=!0,h),n=!0),h.isPublic&&h.description.length<_p&&(i(0,h.errorDescription=!0,h),n=!0),h.isPublic&&!h.avatar)&&(i(2,o=r(e?"pleaseUploadAvatar":"pleaseUploadAvatarChannel")),n=!0);h.isPublic&&h.errorInviteLink&&(n=!0),n||l("submit")}.bind(this);var b=function(n){Jy(this,c),i(0,h.isLimited=!n.target.checked,h)}.bind(this);var w=function(){var n=this;Jy(this,c),setTimeout(function(){Jy(this,n),h.errorInviteLink&&i(0,h.errorInviteLink=undefined,h)}.bind(this),0)}.bind(this);return n.$$set=function(n){Jy(this,c),"chat"in n&&i(0,h=n.chat),"$$scope"in n&&i(9,s=n.$$scope)}.bind(this),n.$$.update=function(){Jy(this,c),1&n.$$.dirty&&(i(1,e=h.type===q),h.avatarError&&!h.isPublic&&i(0,h.avatarError=!1,h),h.errorDescription&&!h.isPublic&&i(0,h.errorDescription=!1,h))}.bind(this),[h,e,o,u,d,p,m,function(n){var t=n.target.files[0];if(t){var e=new FileReader;e.onload=function(n){var e=new Image;e.onload=function(){var n=e.width,u=e.height;n>=wp&&u>=wp?y(t):i(2,o=r("avatarErrorSize",wp,wp))},e.src=n.target.result},e.readAsDataURL(t)}else i(0,h.avatar=undefined,h)},function(){i(0,h.avatar=undefined,h),i(0,h.avatarIsPresent=!1,h),i(0,h.avatarToUpload=undefined,h)},s,a,function(t){n.$$.not_equal(h.name,t)&&(h.name=t,i(0,h))},function(t){n.$$.not_equal(h.errorName,t)&&(h.errorName=t,i(0,h))},function(n){var t=this;ui[n?"unshift":"push"](function(){Jy(this,t),i(3,u=n)}.bind(this))},function(){h.isPublic=this.__value,i(0,h)},[[]],function(){h.isPublic=this.__value,i(0,h)},b,function(t){n.$$.not_equal(h.description,t)&&(h.description=t,i(0,h))},function(t){n.$$.not_equal(h.errorDescription,t)&&(h.errorDescription=t,i(0,h))},function(){h.links=this.value,i(0,h)},w,function(){h.inviteLink=this.value,i(0,h)},function(){var n,t;h.language=(t=(n=this).querySelector(":checked")||n.options[0])&&t.__value,i(0,h)}]}var Sp=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Wy(n,t)}(i,n);var t=Fy(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Hy(r=t.call(this)),n,gp,mp,rt,{chat:0}),r}return i}(Pi),Tp=Sp;function jp(n){return jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},jp(n)}function kp(n,t){return kp=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},kp(n,t)}function Ep(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=xp(n);if(t){var e=xp(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Ap(this,i)}}function Ap(n,t){if(t&&("object"===jp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Op(n)}function Op(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function xp(n){return xp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},xp(n)}function Cp(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Ip(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ip(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ip(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Rp(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Mp(n){kt(n,"svelte-1vi6obo",".chat-create.svelte-1vi6obo{z-index:6;background:#fff;position:absolute;overflow:auto;left:0;top:0;bottom:0;right:321px}@media(max-width: 1600px){.chat-create.svelte-1vi6obo{right:241px}}@media(max-width: 1000px){.chat-create.svelte-1vi6obo{right:0}}.chat-create__close.svelte-1vi6obo{position:absolute;right:11px;top:4px;background:0;border:0;padding:0}.chat-create__close.svelte-1vi6obo:hover{background:0;opacity:0.8}")}function Up(n){var t,i,e,o,u,c,f,a,s,l,h,d,v,y,p,m,b,w=(n[0].isClosed?r(n[0].type===$?"openChannel":"openGroup"):r(n[0].type===$?"closeChannel":"closeGroup"))+"",_=r("membersCount",n[0].countMembers)+"",g=n[3]&&function(n){var t,i,e;return{c:function(){(t=Rt("button")).textContent="".concat(r("deleteUpper")),Pt(t,"class","button button_red")},m:function(r,o){xt(r,t,o),i||(e=Dt(t,"click",n[9]),i=!0)},p:Jn,d:function(n){n&&Ct(t),i=!1,e()}}}(n);return{c:function(){t=Rt("div"),i=Rt("div"),(e=Rt("div")).textContent="".concat(r("management")),o=Ut(),u=Rt("div"),c=Rt("button"),f=Mt(w),a=Ut(),g&&g.c(),s=Ut(),l=Rt("div"),h=Rt("div"),d=Mt(_),v=Ut(),y=Rt("div"),(p=Rt("button")).textContent="".concat(r("editMembers")),Pt(e,"class","chat-form__label"),Pt(c,"class","button button_white"),Pt(u,"class","chat-form__buttons chat-form__buttons_without-margin"),Pt(i,"class","chat-form__item"),Pt(h,"class","chat-form__label"),Pt(p,"class","button button_white button_blue-and-white qa-edit-members"),Pt(l,"class","chat-form__item"),Pt(t,"slot","content")},m:function(r,w){xt(r,t,w),jt(t,i),jt(i,e),jt(i,o),jt(i,u),jt(u,c),jt(c,f),jt(u,a),g&&g.m(u,null),jt(t,s),jt(t,l),jt(l,h),jt(h,d),jt(l,v),jt(l,y),jt(y,p),m||(b=[Dt(c,"click",n[8]),Dt(p,"click",n[10])],m=!0)},p:function(n,t){1&t&&w!==(w=(n[0].isClosed?r(n[0].type===$?"openChannel":"openGroup"):r(n[0].type===$?"closeChannel":"closeGroup"))+"")&&qt(f,w),n[3]&&g.p(n,t),1&t&&_!==(_=r("membersCount",n[0].countMembers)+"")&&qt(d,_)},d:function(n){n&&Ct(t),g&&g.d(),m=!1,tt(b)}}}function Bp(n){var t;return{c:function(){(t=Rt("span")).textContent="".concat(r("save")),Pt(t,"slot","button-name")},m:function(n,i){xt(n,t,i)},p:Jn,d:function(n){n&&Ct(t)}}}function Dp(n){var t,i;return(t=new $f({props:{$$slots:{buttons:[Lp],content:[Pp],title:[Np]},$$scope:{ctx:n}}})).$on("close",n[12]),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};131074&i&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Np(n){var t;return{c:function(){(t=Rt("span")).textContent="".concat(r("deletion")),Pt(t,"slot","title")},m:function(n,i){xt(n,t,i)},p:Jn,d:function(n){n&&Ct(t)}}}function Pp(n){var t,i;return{c:function(){t=Rt("div"),Pt(i=Rt("div"),"class","chat-alert-text"),Pt(t,"slot","content")},m:function(r,e){xt(r,t,e),jt(t,i),i.innerHTML=n[4]},p:Jn,d:function(n){n&&Ct(t)}}}function Lp(n){var t,i,e,o,u,c;return{c:function(){t=Rt("span"),(i=Rt("button")).textContent="".concat(r("cancel")),e=Ut(),(o=Rt("button")).textContent="".concat(r("deleteUpper")),Pt(i,"class","button button_white qa-dialog-cancel"),Pt(o,"class","button button_red qa-dialog-ok"),Pt(t,"slot","buttons")},m:function(r,f){xt(r,t,f),jt(t,i),jt(t,e),jt(t,o),u||(c=[Dt(i,"click",n[11]),Dt(o,"click",n[7])],u=!0)},p:Jn,d:function(n){n&&Ct(t),u=!1,tt(c)}}}function qp(n){var t,i,r,e=this;function o(t){n[13](t)}var u={};return void 0!==n[0]&&(u.chat=n[0]),t=new Gv({props:u}),ui.push(function(){return Rp(this,e),Ri(t,"chat",o)}.bind(this)),t.$on("close",n[14]),{c:function(){Mi(t.$$.fragment)},m:function(n,i){Ui(t,n,i),r=!0},p:function(n,r){var e=this,o={};!i&&1&r&&(i=!0,o.chat=n[0],vi(function(){return Rp(this,e),i=!1}.bind(this))),t.$set(o)},i:function(n){r||(Ei(t.$$.fragment,n),r=!0)},o:function(n){Ai(t.$$.fragment,n),r=!1},d:function(n){Bi(t,n)}}}function $p(n){var t,i,e,o,u,c,f,a,s,l;(u=new Tp({props:{chat:n[0],$$slots:{"button-name":[Bp],content:[Up]},$$scope:{ctx:n}}})).$on("close",n[6]),u.$on("submit",n[5]);var h=n[1]&&Dp(n),d=n[2]&&qp(n);return{c:function(){t=Rt("div"),i=Rt("button"),e=Rt("i"),o=Ut(),Mi(u.$$.fragment),c=Ut(),h&&h.c(),f=Ut(),d&&d.c(),Pt(e,"class","icons-chat icons-chat_close-gray"),Pt(i,"class","chat-create__close button svelte-1vi6obo"),Pt(i,"title",r("close")),Pt(t,"class","chat-create ui svelte-1vi6obo")},m:function(r,v){xt(r,t,v),jt(t,i),jt(i,e),jt(t,o),Ui(u,t,null),jt(t,c),h&&h.m(t,null),jt(t,f),d&&d.m(t,null),a=!0,s||(l=Dt(i,"click",Nt(n[6])),s=!0)},p:function(n,i){var r=this,e=Cp(i,1)[0],o={};1&e&&(o.chat=n[0]),131079&e&&(o.$$scope={dirty:e,ctx:n}),u.$set(o),n[1]?h?(h.p(n,e),2&e&&Ei(h,1)):((h=Dp(n)).c(),Ei(h,1),h.m(t,f)):h&&(ji(),Ai(h,1,1,function(){Rp(this,r),h=null}.bind(this)),ki()),n[2]?d?(d.p(n,e),4&e&&Ei(d,1)):((d=qp(n)).c(),Ei(d,1),d.m(t,null)):d&&(ji(),Ai(d,1,1,function(){Rp(this,r),d=null}.bind(this)),ki())},i:function(n){a||(Ei(u.$$.fragment,n),Ei(h),Ei(d),a=!0)},o:function(n){Ai(u.$$.fragment,n),Ai(h),Ai(d),a=!1},d:function(n){n&&Ct(t),Bi(u),h&&h.d(),d&&d.d(),s=!1,l()}}}function zp(n,i,e){var o=this,u=i.chat,c=ri(),f=vf,a=!1,s=!1,l="deleteChatConfirm";switch(u.type){case q:l="deletionTextGroup";break;case $:l="deletionTextChannel"}var h=r(l,'<b>"'.concat(u.name,'"</b>'));function v(){c("close")}var y=function(){Rp(this,o),e(1,a=!0)}.bind(this),p=function(){Rp(this,o),e(2,s=!0)}.bind(this),m=function(){Rp(this,o),e(1,a=!1)}.bind(this),w=function(){Rp(this,o),e(1,a=!1)}.bind(this);var _=function(){Rp(this,o),e(2,s=!1)}.bind(this);return n.$$set=function(n){Rp(this,o),"chat"in n&&e(0,u=n.chat)}.bind(this),[u,a,s,f,h,function(){var n=this;e(0,u.errorCommon="",u),j_(u).then(function(){var i=this;Rp(this,n),u.avatarIsPresent&&u.avatarToUpload?g_(u.avatarToUpload,u.chatId).then(function(){Rp(this,i),v()}.bind(this))["catch"](function(n){Rp(this,i),e(0,u.errorCommon=n,u),d.error(t.User,n,"Upload avatar")}.bind(this)):u.avatarIsPresent?v():function(n){var t=this;return new Promise(function(i,r){var e=this;if(S_(this,t),n)if(0!==parseInt(n,16)){var o=x({commandType:D.K,callback:function(n){S_(this,e),n?r(n):i()}.bind(this)}),u=b(n);Ow(D.K,[u,{Uint8:0}],null,o)}else r("Chat id is zero");else r("Chat id is empty")}.bind(this))}(u.chatId).then(function(){Rp(this,i),v()}.bind(this))["catch"](function(n){Rp(this,i),e(0,u.errorCommon=n,u),d.error(t.User,n,"Delete avatar")}.bind(this))}.bind(this))["catch"](function(i){Rp(this,n),d.error(t.User,i,"Create chat"),e(0,i===N.Cn?u.errorInviteLink=r("inviteLinkExists"):u.errorCommon=i,u)}.bind(this))},v,function(){Qv(u.chatId),u.type===$?window.fz&&window.fz("event",{name:"MQL5+Chat+Channel+Delete",unit:"Type",value:u.isPublic?"public":"private"}):u.type===q&&window.fz&&window.fz("event",{name:"MQL5+Chat+Group+Delete",unit:"Type",value:u.isPublic?"public":"private"}),v()},function(){var n=this;e(0,u.isClosed=!u.isClosed,u),j_(u).then(function(){Rp(this,n),v()}.bind(this))["catch"](function(i){Rp(this,n),d.error(t.User,i,"Close chat")}.bind(this))},y,p,m,w,function(n){e(0,u=n)},_]}var Wp=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&kp(n,t)}(i,n);var t=Ep(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Op(r=t.call(this)),n,zp,$p,rt,{chat:0},Mp),r}return i}(Pi),Fp=Wp;function Gp(n){return Gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Gp(n)}function Hp(n,t){return Hp=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Hp(n,t)}function Qp(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Jp(n);if(t){var e=Jp(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Vp(this,i)}}function Vp(n,t){if(t&&("object"===Gp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Yp(n)}function Yp(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Jp(n){return Jp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Jp(n)}function Kp(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Xp(n){var t,i;function r(n,t){return n[11]?tm:nm}var e=r(n),o=e(n),u=!$g&&function(n){var t,i,r,e=n[12]&&im(n),o=!n[4]&&rm(n),u=(n[24]||n[9].perms&fn.$n)&&!n[4]&&em(n);return{c:function(){e&&e.c(),t=Ut(),o&&o.c(),i=Ut(),u&&u.c(),r=Bt()},m:function(n,c){e&&e.m(n,c),xt(n,t,c),o&&o.m(n,c),xt(n,i,c),u&&u.m(n,c),xt(n,r,c)},p:function(n,c){n[12]?e?e.p(n,c):((e=im(n)).c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null),n[4]?o&&(o.d(1),o=null):o?o.p(n,c):((o=rm(n)).c(),o.m(i.parentNode,i)),(n[24]||n[9].perms&fn.$n)&&!n[4]?u?u.p(n,c):((u=em(n)).c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},d:function(n){e&&e.d(n),n&&Ct(t),o&&o.d(n),n&&Ct(i),u&&u.d(n),n&&Ct(r)}}}(n);return{c:function(){t=Rt("div"),o.c(),i=Ut(),u&&u.c(),Pt(t,"class","chat-window-header__title"+($g?" chat-window-header__title_widget":""))},m:function(n,r){xt(n,t,r),o.m(t,null),jt(t,i),u&&u.m(t,null)},p:function(n,c){e===(e=r(n))&&o?o.p(n,c):(o.d(1),(o=e(n))&&(o.c(),o.m(t,i))),$g||u.p(n,c)},i:Jn,o:Jn,d:function(n){n&&Ct(t),o.d(),u&&u.d()}}}function Zp(n){var t,i,e,o,u,c,f,a,s,l,h,d,v,y,p,m,b,w,_,g=r("membersCount",n[9].countMembers)+"";function S(n,t){return n[9].avatar?um:om}var T=S(n),j=T(n),k=(n[24]||n[9].perms&fn.$n)&&cm(n),E=n[24]&&function(n){var t,i,e;return{c:function(){(t=Rt("span")).textContent="".concat(r("deleteUpper")),Pt(t,"class","chat-info__delete-button")},m:function(r,o){xt(r,t,o),i||(e=Dt(t,"click",Nt(n[30])),i=!0)},p:Jn,d:function(n){n&&Ct(t),i=!1,e()}}}(n),A=n[9].description&&fm(n),O=n[9].links&&am(n),x=n[9].inviteLink&&sm(n),C=(n[24]||n[9].isSubscribed&&(n[15]||n[5]&&n[9].perms&fn.qn))&&hm(n),I=n[24]&&function(n){var t,i,e,o,u,c,f,a,s,l,h,d,v,y,p,m=n[9].authorName+"",b=wh(n[9].language)+"",w=(n[9].type===$?r("channel"):r("group"))+"";return{c:function(){t=Rt("div"),(i=Rt("div")).textContent="".concat(r("owner")),e=Ut(),o=Rt("a"),u=Mt(m),c=Ut(),f=Rt("div"),(a=Rt("div")).textContent="".concat(r("chatLanguage")),s=Ut(),l=Mt(b),h=Ut(),d=Rt("div"),(v=Rt("div")).textContent="".concat(r("type")),y=Ut(),p=Mt(w),Pt(i,"class","chat-info__label"),Pt(o,"href",n[22]),Pt(o,"target","_blank"),Pt(t,"class","chat-info__item"),Pt(a,"class","chat-info__label"),Pt(f,"class","chat-info__item"),Pt(v,"class","chat-info__label"),Pt(d,"class","chat-info__item")},m:function(n,r){xt(n,t,r),jt(t,i),jt(t,e),jt(t,o),jt(o,u),xt(n,c,r),xt(n,f,r),jt(f,a),jt(f,s),jt(f,l),xt(n,h,r),xt(n,d,r),jt(d,v),jt(d,y),jt(d,p)},p:function(n,t){512&t[0]&&m!==(m=n[9].authorName+"")&&qt(u,m),4194304&t[0]&&Pt(o,"href",n[22]),512&t[0]&&b!==(b=wh(n[9].language)+"")&&qt(l,b),512&t[0]&&w!==(w=(n[9].type===$?r("channel"):r("group"))+"")&&qt(p,w)},d:function(n){n&&Ct(t),n&&Ct(c),n&&Ct(f),n&&Ct(h),n&&Ct(d)}}}(n);return{c:function(){t=Rt("div"),i=Rt("div"),j.c(),e=Ut(),o=Rt("div"),u=Rt("div"),c=Mt(n[2]),f=Ut(),k&&k.c(),a=Ut(),E&&E.c(),s=Ut(),A&&A.c(),l=Ut(),h=Rt("div"),O&&O.c(),d=Ut(),x&&x.c(),v=Ut(),y=Rt("div"),p=Rt("div"),m=Mt(g),b=Ut(),C&&C.c(),w=Ut(),I&&I.c(),Pt(i,"class","chat-info__avatar"),Pt(u,"class","chat-info__title"),Pt(p,"class","chat-info__label"),Pt(y,"class","chat-info__item"),Pt(h,"class","chat-info__other-info"),Pt(o,"class","chat-info__content"),Pt(t,"class","chat-info")},m:function(n,r){xt(n,t,r),jt(t,i),j.m(i,null),jt(t,e),jt(t,o),jt(o,u),jt(u,c),jt(u,f),k&&k.m(u,null),jt(u,a),E&&E.m(u,null),jt(o,s),A&&A.m(o,null),jt(o,l),jt(o,h),O&&O.m(h,null),jt(h,d),x&&x.m(h,null),jt(h,v),jt(h,y),jt(y,p),jt(p,m),jt(y,b),C&&C.m(y,null),jt(h,w),I&&I.m(h,null),_=!0},p:function(n,t){var e=this;T===(T=S(n))&&j?j.p(n,t):(j.d(1),(j=T(n))&&(j.c(),j.m(i,null))),(!_||4&t[0])&&qt(c,n[2]),n[24]||n[9].perms&fn.$n?k?k.p(n,t):((k=cm(n)).c(),k.m(u,a)):k&&(k.d(1),k=null),n[24]&&E.p(n,t),n[9].description?A?A.p(n,t):((A=fm(n)).c(),A.m(o,l)):A&&(A.d(1),A=null),n[9].links?O?(O.p(n,t),512&t[0]&&Ei(O,1)):((O=am(n)).c(),Ei(O,1),O.m(h,d)):O&&(ji(),Ai(O,1,1,function(){Kp(this,e),O=null}.bind(this)),ki()),n[9].inviteLink?x?(x.p(n,t),512&t[0]&&Ei(x,1)):((x=sm(n)).c(),Ei(x,1),x.m(h,v)):x&&(ji(),Ai(x,1,1,function(){Kp(this,e),x=null}.bind(this)),ki()),(!_||512&t[0])&&g!==(g=r("membersCount",n[9].countMembers)+"")&&qt(m,g),n[24]||n[9].isSubscribed&&(n[15]||n[5]&&n[9].perms&fn.qn)?C?C.p(n,t):((C=hm(n)).c(),C.m(y,null)):C&&(C.d(1),C=null),n[24]&&I.p(n,t)},i:function(n){_||(Ei(O),Ei(x),_=!0)},o:function(n){Ai(O),Ai(x),_=!1},d:function(n){n&&Ct(t),j.d(),k&&k.d(),E&&E.d(),A&&A.d(),O&&O.d(),x&&x.d(),C&&C.d(),I&&I.d()}}}function nm(n){var t,i;return{c:function(){t=Rt("span"),i=Mt(n[2]),Pt(t,"class","chat-window-header__name")},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,t){4&t[0]&&qt(i,n[2])},d:function(n){n&&Ct(t)}}}function tm(n){var t,i;return{c:function(){t=Rt("a"),i=Mt(n[2]),Pt(t,"class","chat-window-header__name"),Pt(t,"target","_blank"),Pt(t,"href",n[11])},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,r){4&r[0]&&qt(i,n[2]),2048&r[0]&&Pt(t,"href",n[11])},d:function(n){n&&Ct(t)}}}function im(n){var t,i;return{c:function(){t=Rt("span"),i=Mt(n[12]),Pt(t,"title",n[13])},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,r){4096&r[0]&&qt(i,n[12]),8192&r[0]&&Pt(t,"title",n[13])},d:function(n){n&&Ct(t)}}}function rm(n){var t,i,e,o;return{c:function(){t=Rt("button"),Pt(i=Rt("i"),"class","icons-chat icons-chat_info"),Pt(t,"class","button chat-window-header__button-icon"),Pt(t,"title",r("info"))},m:function(r,u){xt(r,t,u),jt(t,i),e||(o=Dt(t,"click",Nt(n[33])),e=!0)},p:Jn,d:function(n){n&&Ct(t),e=!1,o()}}}function em(n){var t,i,e,o;return{c:function(){t=Rt("button"),Pt(i=Rt("i"),"class","icons-chat icons-chat_edit-big"),Pt(t,"class","button chat-window-header__button-icon"),Pt(t,"title",r("edit"))},m:function(r,u){xt(r,t,u),jt(t,i),e||(o=Dt(t,"click",Nt(n[34])),e=!0)},p:Jn,d:function(n){n&&Ct(t),e=!1,o()}}}function om(n){var t;return{c:function(){Pt(t=Rt("i"),"class","icons-chat icons-chat_no-image")},m:function(n,i){xt(n,t,i)},p:Jn,d:function(n){n&&Ct(t)}}}function um(n){var t,i;return{c:function(){et((t=Rt("img")).src,i=n[9].avatar)||Pt(t,"src",i),Pt(t,"alt","")},m:function(n,i){xt(n,t,i)},p:function(n,r){512&r[0]&&!et(t.src,i=n[9].avatar)&&Pt(t,"src",i)},d:function(n){n&&Ct(t)}}}function cm(n){var t,i,e,o;return{c:function(){t=Rt("button"),Pt(i=Rt("i"),"class","icons-chat icons-chat_edit-big"),Pt(t,"class","button chat-window-header__button-icon"),Pt(t,"title",r("edit"))},m:function(r,u){xt(r,t,u),jt(t,i),e||(o=Dt(t,"click",Nt(n[29])),e=!0)},p:Jn,d:function(n){n&&Ct(t),e=!1,o()}}}function fm(n){var t,i,r=n[9].description+"";return{c:function(){t=Rt("div"),i=Mt(r),Pt(t,"class","chat-info__desc")},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,t){512&t[0]&&r!==(r=n[9].description+"")&&qt(i,r)},d:function(n){n&&Ct(t)}}}function am(n){var t,i,e,o,u,c;return u=new Dh({props:{links:n[9].links}}),{c:function(){t=Rt("div"),(i=Rt("div")).textContent="".concat(r("usefulLinks")),e=Ut(),o=Rt("div"),Mi(u.$$.fragment),Pt(i,"class","chat-info__label"),Pt(o,"class","chat-info__links"),Pt(t,"class","chat-info__item")},m:function(n,r){xt(n,t,r),jt(t,i),jt(t,e),jt(t,o),Ui(u,o,null),c=!0},p:function(n,t){var i={};512&t[0]&&(i.links=n[9].links),u.$set(i)},i:function(n){c||(Ei(u.$$.fragment,n),c=!0)},o:function(n){Ai(u.$$.fragment,n),c=!1},d:function(n){n&&Ct(t),Bi(u)}}}function sm(n){var t,i,e,o,u,c,f,a,s,l,h,d,v,y=r(n[15]?"urlGroup":"urlChannel")+"",p=n[8]&&lm(n);return{c:function(){t=Rt("div"),i=Rt("div"),e=Mt(y),o=Ut(),u=Rt("div"),p&&p.c(),c=Ut(),f=Rt("a"),a=Mt(n[21]),s=Ut(),(l=Rt("span")).innerHTML='<i class="icons-chat icons-chat_copy"></i>',Pt(i,"class","chat-info__label"),Pt(f,"href",n[21]),Pt(l,"class","chat-info__copy"),Pt(u,"class","chat-info__invite-link"),Pt(t,"class","chat-info__item")},m:function(r,y){xt(r,t,y),jt(t,i),jt(i,e),jt(t,o),jt(t,u),p&&p.m(u,null),jt(u,c),jt(u,f),jt(f,a),jt(u,s),jt(u,l),h=!0,d||(v=Dt(l,"click",n[31]),d=!0)},p:function(n,t){var i=this;(!h||32768&t[0])&&y!==(y=r(n[15]?"urlGroup":"urlChannel")+"")&&qt(e,y),n[8]?p?(p.p(n,t),256&t[0]&&Ei(p,1)):((p=lm(n)).c(),Ei(p,1),p.m(u,c)):p&&(ji(),Ai(p,1,1,function(){Kp(this,i),p=null}.bind(this)),ki()),(!h||2097152&t[0])&&qt(a,n[21]),(!h||2097152&t[0])&&Pt(f,"href",n[21])},i:function(n){h||(Ei(p),h=!0)},o:function(n){Ai(p),h=!1},d:function(n){n&&Ct(t),p&&p.d(),d=!1,v()}}}function lm(n){var t,i,e;return{c:function(){(t=Rt("span")).textContent="".concat(r("copied")),Pt(t,"class","chat-info__copied")},m:function(n,i){xt(n,t,i),e=!0},p:Jn,i:function(n){var r=this;e||(di(function(){Kp(this,r),i||(i=xi(t,gh,{},!0)),i.run(1)}.bind(this)),e=!0)},o:function(n){i||(i=xi(t,gh,{},!1)),i.run(0),e=!1},d:function(n){n&&Ct(t),n&&i&&i.end()}}}function hm(n){var t,i,e;return{c:function(){(t=Rt("a")).textContent="".concat(r("membersList")),Pt(t,"href","/")},m:function(r,o){xt(r,t,o),i||(e=Dt(t,"click",Nt(n[32])),i=!0)},p:Jn,d:function(n){n&&Ct(t),i=!1,e()}}}function dm(n){var t,i,e;return{c:function(){(t=Rt("button")).textContent="".concat(r("delete")),Pt(t,"class","button button_tiny chat-window-header__button button_red")},m:function(r,o){xt(r,t,o),i||(e=Dt(t,"click",Nt(n[35])),i=!0)},p:Jn,d:function(n){n&&Ct(t),i=!1,e()}}}function vm(n){var t;function i(n,t){return n[9].isSubscribed?pm:ym}var r=i(n),e=r(n);return{c:function(){e.c(),t=Bt()},m:function(n,i){e.m(n,i),xt(n,t,i)},p:function(n,o){r===(r=i(n))&&e?e.p(n,o):(e.d(1),(e=r(n))&&(e.c(),e.m(t.parentNode,t)))},d:function(n){e.d(n),n&&Ct(t)}}}function ym(n){var t,i,e;return{c:function(){(t=Rt("button")).textContent="".concat(r("subscribe")),Pt(t,"class","button button_tiny chat-window-header__button button_green")},m:function(r,o){xt(r,t,o),i||(e=Dt(t,"click",Nt(n[37])),i=!0)},p:Jn,d:function(n){n&&Ct(t),i=!1,e()}}}function pm(n){var t,i,e;return{c:function(){(t=Rt("button")).textContent="".concat(r("unsubscribe")),Pt(t,"class","button button_tiny chat-window-header__button button_white")},m:function(r,o){xt(r,t,o),i||(e=Dt(t,"click",Nt(n[36])),i=!0)},p:Jn,d:function(n){n&&Ct(t),i=!1,e()}}}function mm(n){var t,i,e,o;return{c:function(){t=Rt("span"),Pt(i=Rt("i"),"class","icons-chat icons-chat_close-gray"),Pt(t,"class","chat-window-header__close"),Pt(t,"title",r("back"))},m:function(n,r){xt(n,t,r),jt(t,i),e||(o=Dt(t,"click",Nm),e=!0)},p:Jn,d:function(n){n&&Ct(t),e=!1,o()}}}function bm(n){var t,i,r;return{c:function(){(t=Rt("span")).innerHTML='<i class="icons-chat icons-chat_up"></i>',Pt(t,"class","chat-window-header__close")},m:function(e,o){xt(e,t,o),i||(r=Dt(t,"click",n[38]),i=!0)},p:Jn,d:function(n){n&&Ct(t),i=!1,r()}}}function wm(n){var t,i;return(t=new $f({props:{$$slots:{buttons:[Am],content:[Em],title:[_m]},$$scope:{ctx:n}}})).$on("close",n[40]),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};98848&i[0]|32768&i[1]&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function _m(n){var t;return{c:function(){(t=Rt("span")).textContent="".concat(r("deletion")),Pt(t,"slot","title")},m:function(n,i){xt(n,t,i)},p:Jn,d:function(n){n&&Ct(t)}}}function gm(n){var t,i=r("deleteAllMessagesFromConfirm","<b>".concat(Vv(n[9].name),"</b>"))+"";return{c:function(){Pt(t=Rt("div"),"class","chat-alert-text")},m:function(n,r){xt(n,t,r),t.innerHTML=i},p:function(n,e){512&e[0]&&i!==(i=r("deleteAllMessagesFromConfirm","<b>".concat(Vv(n[9].name),"</b>"))+"")&&(t.innerHTML=i)},d:function(n){n&&Ct(t)}}}function Sm(n){var t;function i(n,t){return n[15]?km:n[5]?jm:Tm}var r=i(n),e=r(n);return{c:function(){t=Rt("div"),e.c(),Pt(t,"class","chat-alert-text")},m:function(n,i){xt(n,t,i),e.m(t,null)},p:function(n,o){r===(r=i(n))&&e?e.p(n,o):(e.d(1),(e=r(n))&&(e.c(),e.m(t,null)))},d:function(n){n&&Ct(t),e.d()}}}function Tm(n){var t,i=r("deleteChatConfirm")+"";return{c:function(){t=Mt(i)},m:function(n,i){xt(n,t,i)},p:Jn,d:function(n){n&&Ct(t)}}}function jm(n){var t,i,e=r("deletionTextChannel",'<b>"'.concat(Vv(n[9].name),'"</b>'))+"";return{c:function(){t=new Ht,i=Bt(),t.a=i},m:function(n,r){t.m(e,n,r),xt(n,i,r)},p:function(n,i){512&i[0]&&e!==(e=r("deletionTextChannel",'<b>"'.concat(Vv(n[9].name),'"</b>'))+"")&&t.p(e)},d:function(n){n&&Ct(i),n&&t.d()}}}function km(n){var t,i,e=r("deletionTextGroup",'<b>"'.concat(Vv(n[9].name),'"</b>'))+"";return{c:function(){t=new Ht,i=Bt(),t.a=i},m:function(n,r){t.m(e,n,r),xt(n,i,r)},p:function(n,i){512&i[0]&&e!==(e=r("deletionTextGroup",'<b>"'.concat(Vv(n[9].name),'"</b>'))+"")&&t.p(e)},d:function(n){n&&Ct(i),n&&t.d()}}}function Em(n){var t;var i=function(n,t){return n[24]?Sm:gm}(n),r=i(n);return{c:function(){t=Rt("div"),r.c(),Pt(t,"slot","content")},m:function(n,i){xt(n,t,i),r.m(t,null)},p:function(n,t){r.p(n,t)},d:function(n){n&&Ct(t),r.d()}}}function Am(n){var t,i,e,o,u,c;return{c:function(){t=Rt("div"),(i=Rt("button")).textContent="".concat(r("close")),e=Ut(),(o=Rt("button")).textContent="".concat(r("deleteUpper")),Pt(i,"class","button button_white qa-dialog-cancel"),Pt(o,"class","button button_red"),Pt(t,"slot","buttons")},m:function(r,f){xt(r,t,f),jt(t,i),jt(t,e),jt(t,o),u||(c=[Dt(i,"click",Nt(n[39])),Dt(o,"click",Nt(n[25]))],u=!0)},p:Jn,d:function(n){n&&Ct(t),u=!1,tt(c)}}}function Om(n){var t,i;return(t=new Fp({props:{chat:n[10]}})).$on("close",n[41]),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1024&i[0]&&(r.chat=n[10]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function xm(n){var t,i;return(t=new $f({props:{$$slots:{buttons:[Um],content:[Mm],title:[Cm]},$$scope:{ctx:n}}})).$on("close",n[43]),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};131616&i[0]|32768&i[1]&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Cm(n){var t;return{c:function(){(t=Rt("span")).textContent="".concat(r("unsubscribe")),Pt(t,"slot","title")},m:function(n,i){xt(n,t,i)},p:Jn,d:function(n){n&&Ct(t)}}}function Im(n){var t,i,e=r("unsubscribeConfirmGroup","<b>".concat(Vv(n[9].name),"</b>"))+"";return{c:function(){t=new Ht,i=Bt(),t.a=i},m:function(n,r){t.m(e,n,r),xt(n,i,r)},p:function(n,i){512&i[0]&&e!==(e=r("unsubscribeConfirmGroup","<b>".concat(Vv(n[9].name),"</b>"))+"")&&t.p(e)},d:function(n){n&&Ct(i),n&&t.d()}}}function Rm(n){var t,i,e=r("unsubscribeConfirmChannel","<b>".concat(Vv(n[9].name),"</b>"))+"";return{c:function(){t=new Ht,i=Bt(),t.a=i},m:function(n,r){t.m(e,n,r),xt(n,i,r)},p:function(n,i){512&i[0]&&e!==(e=r("unsubscribeConfirmChannel","<b>".concat(Vv(n[9].name),"</b>"))+"")&&t.p(e)},d:function(n){n&&Ct(i),n&&t.d()}}}function Mm(n){var t,i;function r(n,t){return n[5]?Rm:Im}var e=r(n),o=e(n);return{c:function(){t=Rt("div"),i=Rt("div"),o.c(),Pt(i,"class","chat-alert-text"),Pt(t,"slot","content")},m:function(n,r){xt(n,t,r),jt(t,i),o.m(i,null)},p:function(n,t){e===(e=r(n))&&o?o.p(n,t):(o.d(1),(o=e(n))&&(o.c(),o.m(i,null)))},d:function(n){n&&Ct(t),o.d()}}}function Um(n){var t,i,e,o,u,c;return{c:function(){t=Rt("div"),(i=Rt("button")).textContent="".concat(r("close")),e=Ut(),(o=Rt("button")).textContent="".concat(r("unsubscribe")),Pt(i,"class","button button_white qa-dialog-cancel"),Pt(o,"class","button button_green"),Pt(t,"slot","buttons")},m:function(r,f){xt(r,t,f),jt(t,i),jt(t,e),jt(t,o),u||(c=[Dt(i,"click",Nt(n[42])),Dt(o,"click",Nt(n[26]))],u=!0)},p:Jn,d:function(n){n&&Ct(t),u=!1,tt(c)}}}function Bm(n){var t,i;return(t=new Gv({props:{canAdd:!(!n[5]||!n[9].isSubscribed)||n[15]&&n[9].isSubscribed&&!n[9].isLimited||!!(n[9].perms&fn.qn),chat:n[20]}})).$on("close",n[44]),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};33312&i[0]&&(r.canAdd=!(!n[5]||!n[9].isSubscribed)||n[15]&&n[9].isSubscribed&&!n[9].isLimited||!!(n[9].perms&fn.qn)),1048576&i[0]&&(r.chat=n[20]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Dm(n){var t,i,e,o,u,c,f,a,s,l,h,d,v,y,p,m=[Zp,Xp],b=[];function w(n,t){return n[18]?0:1}i=w(n),e=b[i]=m[i](n);var _=!$g&&function(n){var t,i=n[4]&&!n[3]&&dm(n);return{c:function(){i&&i.c(),t=Bt()},m:function(n,r){i&&i.m(n,r),xt(n,t,r)},p:function(n,r){n[4]&&!n[3]?i?i.p(n,r):((i=dm(n)).c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d:function(n){i&&i.d(n),n&&Ct(t)}}}(n),g=(n[5]||n[15])&&!n[14]&&vm(n),S=!$g&&function(n){var t;function i(n,t){return n[18]?bm:mm}var r=i(n),e=r(n);return{c:function(){e.c(),t=Bt()},m:function(n,i){e.m(n,i),xt(n,t,i)},p:function(n,o){r===(r=i(n))&&e?e.p(n,o):(e.d(1),(e=r(n))&&(e.c(),e.m(t.parentNode,t)))},d:function(n){e.d(n),n&&Ct(t)}}}(n),T=$g&&function(n){var t,i,e,o;return{c:function(){t=Rt("span"),Pt(i=Rt("i"),"class","icons-chat icons-chat_back"),Pt(t,"class","chat-window-header__close chat-window-header__close_widget"),Pt(t,"title",r("back"))},m:function(n,r){xt(n,t,r),jt(t,i),e||(o=Dt(t,"click",Nm),e=!0)},p:Jn,d:function(n){n&&Ct(t),e=!1,o()}}}(),j=n[16]&&wm(n),k=n[10]&&Om(n),E=n[17]&&xm(n),A=n[7]&&Bm(n);return{c:function(){t=Rt("div"),e.c(),o=Ut(),u=Rt("div"),_&&_.c(),c=Ut(),g&&g.c(),f=Ut(),S&&S.c(),a=Ut(),T&&T.c(),l=Ut(),j&&j.c(),h=Ut(),k&&k.c(),d=Ut(),E&&E.c(),v=Ut(),A&&A.c(),y=Bt(),Pt(u,"class","chat-window-header__tools"),Pt(t,"class",s="chat-window-header "+(n[18]?"chat-window-header_info":"")+" ui")},m:function(n,r){xt(n,t,r),b[i].m(t,null),jt(t,o),jt(t,u),_&&_.m(u,null),jt(u,c),g&&g.m(u,null),jt(u,f),S&&S.m(u,null),jt(t,a),T&&T.m(t,null),xt(n,l,r),j&&j.m(n,r),xt(n,h,r),k&&k.m(n,r),xt(n,d,r),E&&E.m(n,r),xt(n,v,r),A&&A.m(n,r),xt(n,y,r),p=!0},p:function(n,r){var c=this,a=i;(i=w(n))===a?b[i].p(n,r):(ji(),Ai(b[a],1,1,function(){Kp(this,c),b[a]=null}.bind(this)),ki(),(e=b[i])?e.p(n,r):(e=b[i]=m[i](n)).c(),Ei(e,1),e.m(t,o)),$g||_.p(n,r),!n[5]&&!n[15]||n[14]?g&&(g.d(1),g=null):g?g.p(n,r):((g=vm(n)).c(),g.m(u,f)),$g||S.p(n,r),$g&&T.p(n,r),(!p||262144&r[0]&&s!==(s="chat-window-header "+(n[18]?"chat-window-header_info":"")+" ui"))&&Pt(t,"class",s),n[16]?j?(j.p(n,r),65536&r[0]&&Ei(j,1)):((j=wm(n)).c(),Ei(j,1),j.m(h.parentNode,h)):j&&(ji(),Ai(j,1,1,function(){Kp(this,c),j=null}.bind(this)),ki()),n[10]?k?(k.p(n,r),1024&r[0]&&Ei(k,1)):((k=Om(n)).c(),Ei(k,1),k.m(d.parentNode,d)):k&&(ji(),Ai(k,1,1,function(){Kp(this,c),k=null}.bind(this)),ki()),n[17]?E?(E.p(n,r),131072&r[0]&&Ei(E,1)):((E=xm(n)).c(),Ei(E,1),E.m(v.parentNode,v)):E&&(ji(),Ai(E,1,1,function(){Kp(this,c),E=null}.bind(this)),ki()),n[7]?A?(A.p(n,r),128&r[0]&&Ei(A,1)):((A=Bm(n)).c(),Ei(A,1),A.m(y.parentNode,y)):A&&(ji(),Ai(A,1,1,function(){Kp(this,c),A=null}.bind(this)),ki())},i:function(n){p||(Ei(e),Ei(j),Ei(k),Ei(E),Ei(A),p=!0)},o:function(n){Ai(e),Ai(j),Ai(k),Ai(E),Ai(A),p=!1},d:function(n){n&&Ct(t),b[i].d(),_&&_.d(),g&&g.d(),S&&S.d(),T&&T.d(),n&&Ct(l),j&&j.d(n),n&&Ct(h),k&&k.d(n),n&&Ct(d),E&&E.d(n),n&&Ct(v),A&&A.d(n),n&&Ct(y)}}}function Nm(){bb()}function Pm(n,i,e){var o,u,c,f=this,a=Jn,s=function(){var n=this;return Kp(this,f),a(),a=ut(p,function(t){return Kp(this,n),e(9,o=t)}.bind(this)),p}.bind(this),l=Jn,h=function(){var n=this;return Kp(this,f),l(),l=ut(b,function(t){return Kp(this,n),e(27,u=t)}.bind(this)),b}.bind(this),v=Jn,y=function(){var n=this;return Kp(this,f),v(),v=ut(_,function(t){return Kp(this,n),e(28,c=t)}.bind(this)),_}.bind(this);n.$$.on_destroy.push(function(){return Kp(this,f),a()}.bind(this)),n.$$.on_destroy.push(function(){return Kp(this,f),l()}.bind(this)),n.$$.on_destroy.push(function(){return Kp(this,f),v()}.bind(this));var p=i.selectedChat;s();var m,b,w,_,g=i.needEdit,S=void 0!==g&&g,T="",j="",k="",E="",A=!1,O=!1,x=!1,C=!1,I=!1,R=vf,M=!1,U=!1,D=!1,N=!1,P=!1,z="",W=!1,F="";var G=function(){Kp(this,f),e(0,S=!0)}.bind(this),H=function(){Kp(this,f),e(16,M=!0)}.bind(this),Q=function(){Kp(this,f),function(n){var t=document.createElement("textarea");if(t.value=n,t.style.position="fixed",t.style.left="9999px",document.body.appendChild(t),t.focus(),Br){var i=document.createRange();i.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(i),t.setSelectionRange(0,999999)}else t.select();document.execCommand("copy"),t.blur(),document.body.removeChild(t)}(z),e(8,W=!0)}.bind(this),V=function(){Kp(this,f),e(7,P=!0)}.bind(this),Y=function(){Kp(this,f),e(18,N=!0)}.bind(this),J=function(){Kp(this,f),e(0,S=!0)}.bind(this),K=function(){Kp(this,f),e(16,M=!0)}.bind(this),X=function(){Kp(this,f),e(17,D=!0)}.bind(this),Z=function(){Kp(this,f),e(6,U=!0)}.bind(this),nn=function(){Kp(this,f),e(18,N=!1)}.bind(this),tn=function(){Kp(this,f),e(16,M=!1)}.bind(this),rn=function(){Kp(this,f),e(16,M=!1)}.bind(this),en=function(){Kp(this,f),e(0,S=!1)}.bind(this),on=function(){Kp(this,f),e(17,D=!1)}.bind(this),un=function(){Kp(this,f),e(17,D=!1)}.bind(this),cn=function(){Kp(this,f),e(7,P=!1)}.bind(this);return n.$$set=function(n){Kp(this,f),"selectedChat"in n&&s(e(1,p=n.selectedChat)),"needEdit"in n&&e(0,S=n.needEdit)}.bind(this),n.$$.update=function(){var i=this;if(Kp(this,f),268435968&n.$$.dirty[0]&&R&&!c&&y(e(23,_=wf(o.authorId))),268435456&n.$$.dirty[0]&&c&&e(22,F="/".concat(Ng,"/users/").concat(c.userLogin)),513&n.$$.dirty[0]&&e(10,m=S?Yv(o):undefined),64&n.$$.dirty[0]&&U&&(!function(){var n=this,i=C?fn.Pn:fn.Ln;O_(o.chatId,Bg,i).then(function(){Kp(this,n),o.type===$?window.fz&&window.fz("track","MQL5+Chat+Channel+Join"):o.type===q&&window.fz&&window.fz("track","MQL5+Chat+Group+Join"),vt(p,o.isSubscribed=_n,o)}.bind(this))["catch"](function(i){Kp(this,n),d.error(t.User,i)}.bind(this))}(),e(6,U=!1)),640&n.$$.dirty[0]&&P&&e(20,w=Yv(o)),256&n.$$.dirty[0]&&W&&setTimeout(function(){Kp(this,i),e(8,W=!1)}.bind(this),2e3),134218300&n.$$.dirty[0])if(e(2,T=o.name),e(3,A=o.authorId===B),e(14,O=o.authorId===Bg),e(4,x=o.type===L),e(5,C=o.type===$),e(15,I=o.type===q),e(21,z="https://www.mql5.com/".concat(Ng,"/").concat(C?"channels":"groups","/").concat(o.inviteLink)),!A&&x){var a;h(e(19,b=gd(o.chatId,o.authorId)));for(var s=0,l=u.length;s<l;s++){var v=u[s];if(v.userId!==Bg){a=v;break}}a&&(a.isDeleted?e(2,T=r("deletedAccount")):(e(2,T=a.userName||T),a.userLogin&&e(11,j="/".concat(Ng,"/users/").concat(a.userLogin.toLowerCase()))))}else x||!$g&&o.countMembers&&(e(12,k=r("ofUsers",o.countMembers)),C&&e(13,E="".concat(r("owner"),": ").concat(o.authorName)))}.bind(this),[S,p,T,A,x,C,U,P,W,o,m,j,k,E,O,I,M,D,N,b,w,z,F,_,R,function(){var n=this;R?(Qv(o.chatId),o.type===$?window.fz&&window.fz("event",{name:"MQL5+Chat+Channel+Delete",unit:"Type",value:o.isPublic?"public":"private"}):o.type===q?window.fz&&window.fz("event",{name:"MQL5+Chat+Group+Delete",unit:"Type",value:o.isPublic?"public":"private"}):window.fz&&window.fz("track","MQL5+Chat+Delete"),Nm()):x&&O_(o.chatId,Bg,0,!0).then(function(){Kp(this,n),window.fz&&window.fz("track","MQL5+Chat+Delete"),vt(p,o.isSubscribed=gn,o)}.bind(this))["catch"](function(i){Kp(this,n),d.error(t.User,i)}.bind(this))},function(){var n=this;O_(o.chatId,Bg,0,!0).then(function(){Kp(this,n),o.type===$?window.fz&&window.fz("track","MQL5+Chat+Channel+Leave"):o.type===q&&window.fz&&window.fz("track","MQL5+Chat+Group+Leave"),vt(p,o.isSubscribed=gn,o)}.bind(this))["catch"](function(i){Kp(this,n),d.error(t.User,i)}.bind(this))},u,c,G,H,Q,V,Y,J,K,X,Z,nn,tn,rn,en,on,un,cn]}var Lm=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Hp(n,t)}(i,n);var t=Qp(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Yp(r=t.call(this)),n,Pm,Dm,rt,{selectedChat:1,needEdit:0},null,[-1,-1]),r}return i}(Pi),qm=Lm;function $m(n){return $m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$m(n)}function zm(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Wm(n,t){return Wm=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Wm(n,t)}function Fm(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Qm(n);if(t){var e=Qm(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Gm(this,i)}}function Gm(n,t){if(t&&("object"===$m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hm(n)}function Hm(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Qm(n){return Qm=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Qm(n)}function Vm(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Ym(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ym(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ym(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Jm(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Km(n){var t,i,r,e,o,u,c,f=this;function a(t){n[5](t)}var s={selectedChat:n[0]};void 0!==n[2]&&(s.needEdit=n[2]),i=new qm({props:s}),ui.push(function(){return Jm(this,f),Ri(i,"needEdit",a)}.bind(this));var l={list:Ib,chat:n[0]};o=new bh({props:l}),n[6](o);var h=!Lg&&function(n){var t,i;return t=new zc({props:{chat:n[0],resizeList:n[1]}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.chat=n[0]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}(n);return{c:function(){t=Rt("div"),Mi(i.$$.fragment),e=Ut(),Mi(o.$$.fragment),u=Ut(),h&&h.c(),Pt(t,"class","chat-window"+($g?" chat-window_widget":""))},m:function(n,r){xt(n,t,r),Ui(i,t,null),jt(t,e),Ui(o,t,null),jt(t,u),h&&h.m(t,null),c=!0},p:function(n,t){var e=this,u=Vm(t,1)[0],c={};1&u&&(c.selectedChat=n[0]),!r&&4&u&&(r=!0,c.needEdit=n[2],vi(function(){return Jm(this,e),r=!1}.bind(this))),i.$set(c);var f={};1&u&&(f.chat=n[0]),o.$set(f),Lg||h.p(n,u)},i:function(n){c||(Ei(i.$$.fragment,n),Ei(o.$$.fragment,n),Ei(h),c=!0)},o:function(n){Ai(i.$$.fragment,n),Ai(o.$$.fragment,n),Ai(h),c=!1},d:function(r){r&&Ct(t),Bi(i),n[6](null),Bi(o),h&&h.d()}}}function Xm(n,i,r){var e,o,u=this,c=i.chat;return ii(function(){Jm(this,u),function(){var n=this;Ib.set([]),Ib.set([]),Ob=undefined,xb=undefined,Pb=!1,Lb.set(!1),$b();var i=ct(yb);i&&D_(i.chatId).then(function(t){Nb(this,n),t&&kg(t)}.bind(this))["catch"](function(i){Nb(this,n),d.error(t.System,i)}.bind(this))}()}.bind(this)),n.$$set=function(n){Jm(this,u),"chat"in n&&r(0,c=n.chat)}.bind(this),[c,function(){o.handleChange()},e,o,function(){r(2,e=!1)},function(n){r(2,e=n)},function(n){var t=this;ui[n?"unshift":"push"](function(){Jm(this,t),r(3,o=n)}.bind(this))}]}var Zm=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Wm(n,t)}(o,n);var t,i,r,e=Fm(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Ni(Hm(t=e.call(this)),n,Xm,Km,rt,{chat:0,closeEdit:4,resizeList:1}),t}return t=o,(i=[{key:"closeEdit",get:function(){return this.$$.ctx[4]}},{key:"resizeList",get:function(){return this.$$.ctx[1]}}])&&zm(t.prototype,i),r&&zm(t,r),o}(Pi),nb=Zm;function tb(n){var t="";return n.type===$?n.inviteLink?t="/".concat(Ng,"/channels/").concat(n.inviteLink):n.chatId&&(t="/".concat(Ng,"/channels/").concat(n.chatId)):n.chatId&&(t="/".concat(Ng,"/messages/").concat(n.chatId)),t}var ib=new RegExp("^/[a-z]{2}/.*");function rb(n){return function(n){if(Array.isArray(n))return eb(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"==typeof n)return eb(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return eb(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eb(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}var ob=!!window.history,ub=window.location.href,cb=[],fb=!0;function ab(n){var t=n.link;if(!fb){var i=window.location;t!==i.pathname&&(i=i.origin?i.origin+t:i.protocol+"//"+i.hostname+t,window.history.pushState({},document.title,i),function(n){if(n){ib.test(n)&&(n=n.substring(3));var t=document.getElementById("langmenu");if(t){var i=t.querySelectorAll("a");if(i.length)for(var r=0,e=i.length;r<e;r++){var o=i[r].getAttribute("href");if(o){var u=o.substring(0,3);i[r].setAttribute("href",u+n)}}}}}(t))}}function sb(){fb||ab({link:ub})}function lb(){var n=this;ob&&(fb=!1,window.addEventListener("popstate",function(t){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,n);for(var i=window.location.href,r=0,e=cb.length;r<e;r++){var o=cb[r],u=i.match(o.path);if(u&&u.length){u.shift(),o.callback(rb(u));break}}}.bind(this)))}function hb(n){var t=n.path,i=n.callback;t=(t=t.replace("{id}","([a-zA-Z0-9]+)")).replace("{login}","([a-zA-Z0-9]+)"),t=new RegExp("".concat(t,"$"),"i"),cb.push({path:t,callback:i})}var db=undefined;var vb,yb=Wi(undefined);function pb(n){var t=ct(yb);t&&n.chatId===t.chatId&&(yb.set(n),function(n){var t=n.link;if(!fb){var i=window.location;t!==i.pathname&&(i=i.origin?i.origin+t:i.protocol+"//"+i.hostname+t,window.history.replaceState({},document.title,i))}}({link:tb(n)}))}function mb(){return ct(yb)}function bb(){var n=ct(yb);n&&!n.isSubscribed&&bg(n.chatId),yb.set(undefined),vb&&(sb(),vb.$destroy(),vb=undefined)}function wb(){vb&&vb.closeEdit()}function _b(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}yb.subscribe(function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,db),!!n&&n.type===L}.bind(undefined));var gb={};function Sb(n,i){var r=this;return new Promise(function(e,o){var u=this;_b(this,r);var c=function(n){for(var t=ct(Ib),i=null,r=0,e=t.length;r<e;r++)if(t[r].messageId===n){i=t[r];break}return i}(n);c?e({message:c,key:i}):i_(n).then(function(n){_b(this,u);var t=ct(yb);t&&t.changeId===n.chatId||o("Received a message from an inactive chat");var r=n.message;r?e({message:r,key:i}):o("Message is empty")}.bind(this))["catch"](function(n){_b(this,u),d.error(t.System,n),o(n)}.bind(this))}.bind(this))}function Tb(n){var i=this,r=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return new Promise(function(e,o){var u=this;if(_b(this,i),n.recType===Q)if(gb[n.messageId])e(gb[n.messageId]);else{var c=[],f=n.collection;f&&(f.quote&&!r&&f.quote.forEach(function(n){_b(this,u),c.push(Sb(n,"quote"))}.bind(this)),f.text&&f.text.forEach(function(n){_b(this,u),Rb(n),c.push(Sb(n,"text"))}.bind(this)),f.file&&f.file.forEach(function(n){_b(this,u),Rb(n),c.push(Sb(n,"file"))}.bind(this)));var a=[];Promise.allSettled(c).then(function(i){var r=this;_b(this,u);var o={};i.forEach(function(n){var i=this;if(_b(this,r),"fulfilled"===n.status){var e=n.value,u=e.message,c=e.key;switch(u.recType){case Q:"quote"===c&&a.push(new Promise(function(n,r){var e=this;_b(this,i),Tb(u,!0).then(function(t){_b(this,e),o.quote=t,n()}.bind(this))["catch"](function(n){_b(this,e),d.error(t.System,n),r()}.bind(this))}.bind(this)));break;case z:"quote"===c?o.quote=u:o.text=u;break;case W:u.data.preview&&u.data.preview.type?(o.media||(o.media=[]),o.media.push(u)):(o.files||(o.files=[]),o.files.push(u))}}}.bind(this)),a.length?Promise.allSettled(a).then(function(){_b(this,r),n.data=o,gb[n.messageId]=n,e(n)}.bind(this)):(n.data=o,gb[n.messageId]=n,e(n))}.bind(this))}else o("Message not type collection")}.bind(this))}function jb(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var kb={};function Eb(n,i){var r=this;return new Promise(function(e,o){var u=this;jb(this,r);var c=function(n){for(var t=ct(Ib),i=null,r=0,e=t.length;r<e;r++)if(t[r].messageId===n){i=t[r];break}return i}(n);c?e({message:c,key:i}):i_(n).then(function(n){jb(this,u);var t=n.message;t?e({message:t,key:i}):o("Message is empty")}.bind(this))["catch"](function(n){jb(this,u),d.error(t.System,n),o()}.bind(this))}.bind(this))}function Ab(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Ob,xb,Cb=[],Ib=Wi([]);function Rb(n){var t=this;0!==parseInt(n,16)&&(Cb.push(n),Ib.update(function(i){Ab(this,t);for(var r=0,e=i.length;r<e;r++)(i[r].linkId&&i[r].linkId===n||i[r].messageId===n)&&(i.splice(r,1),r--,e--);return i}.bind(this)))}function Mb(n){var t=this;return n.sort(function(n,i){return Ab(this,t),n.sequence>i.sequence?1:n.sequence<i.sequence?-1:0}.bind(this)),n}function Ub(n){var t=this;Ib.update(function(i){return Ab(this,t),~Cb.indexOf(n.messageId)||n.recType===H?i:(n.linkId&&parseInt(n.linkId,16)>0&&Db(n.linkId),i.push(n),Mb(i))}.bind(this))}function Bb(n){var i=this;Ib.update(function(r){var e=this;return Ab(this,i),n.forEach(function(n){var i=this;Ab(this,e),(!Ob||_(n.messageId,Ob)<0)&&(Ob=n.messageId),(!xb||_(n.messageId,xb)>0)&&(xb=n.messageId),n.recType!==F&&n.recType!==H&&(n.recType===Q?Tb(n).then(function(n){Ab(this,i),Ub(n)}.bind(this))["catch"](function(n){Ab(this,i),d.error(t.Store,n)}.bind(this)):~Cb.indexOf(n.messageId)||(n.linkId&&parseInt(n.linkId,16)>0&&Db(n.linkId),n.tags&&(n.tags.quote||n.tags.files)?function(n){var i=this,r=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return new Promise(function(e,o){var u=this;if(jb(this,i),n.tags)if(kb[n.messageId])e(kb[n.messageId]);else{var c=[],f=n.tags;f&&(f.quote&&!r&&c.push(Eb(f.quote.citedId,"quote")),f.files&&f.files.linedIds.forEach(function(n){jb(this,u),Rb(n),c.push(Eb(n,"file"))}.bind(this)));var a=[];Promise.allSettled(c).then(function(i){var r=this;jb(this,u);var o={text:n.data.text||""};i.forEach(function(n){var i=this;if(jb(this,r),"fulfilled"===n.status){var e=n.value,u=e.message;"quote"===e.key?u.recType===z?o.quote=u:u.recType===Q?a.push(new Promise(function(n,r){var e=this;jb(this,i),Tb(u,!0).then(function(t){jb(this,e),o.quote=t,n()}.bind(this))["catch"](function(n){jb(this,e),d.error(t.System,n),r()}.bind(this))}.bind(this))):o.quote||(o.quote=u):u.recType===W&&(u.data.preview&&u.data.preview.type?(o.media||(o.media=[]),o.media.push(u)):(o.files||(o.files=[]),o.files.push(u)))}}.bind(this)),a.length?Promise.allSettled(a).then(function(){jb(this,r),n.data=o,kb[n.messageId]=n,e(n)}.bind(this)):(n.data=o,kb[n.messageId]=n,e(n))}.bind(this))}else o("Message does not contain tags")}.bind(this))}(n).then(function(n){Ab(this,i),Ub(n)}.bind(this))["catch"](function(n){Ab(this,i),d.error(t.Store,n)}.bind(this)):r.push(n)))}.bind(this)),Mb(r)}.bind(this))}function Db(n){var t=this;Cb.push(n),Ib.update(function(i){Ab(this,t);for(var r=0,e=i.length;r<e;r++)if(i[r].messageId===n){i.splice(r,1);break}return i}.bind(this))}function Nb(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Pb=!1,Lb=Wi(!1);function qb(n){var t=ct(yb);if(t&&n.chatId===t.chatId){Lb.set(!1);var i=n.result===N.Bn,r=n.messages;Bb(r),i&&r.length||(Pb=!0)}}function $b(){Pb||ct(Lb)||function(n){var i=this,r=ct(yb);r&&(Lb.set(!0),n_(r.chatId,n).then(qb)["catch"](function(n){Nb(this,i),d.error(t.System,n)}.bind(this)))}(Ob)}function zb(n,i){if(n)d.error(t.System,n);else{var r=ct(yb);if(r&&i&&r.chatId===i.chatId){var e=i.message;e&&(e.recType===F?e.linkId&&Db(e.linkId):Bb([e]))}}}function Wb(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var Fb=function(){function n(t,i,r){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.dataview=t,this.pos=i,this.pos_end=null!=r?i+r:t.byteLength}var t,i,r;return t=n,i=[{key:"Size",value:function(){return this.pos_end-this.pos}},{key:"advance",value:function(n){if(this.pos+n>this.pos_end)throw new Error("Buffer overflow");this.pos+=n}},{key:"isEnded",value:function(){return this.pos>=this.pos_end}},{key:"getInt32",value:function(){if(this.pos+4>this.pos_end)throw new Error("Buffer overflow");var n=this.dataview.getInt32(this.pos,!0);return this.pos+=4,n}},{key:"getUint32",value:function(){if(this.pos+4>this.pos_end)throw new Error("Buffer overflow");var n=this.dataview.getUint32(this.pos,!0);return this.pos+=4,n}},{key:"getInt16",value:function(){if(this.pos+2>this.pos_end)throw new Error("Buffer overflow");var n=this.dataview.getInt16(this.pos,!0);return this.pos+=2,n}},{key:"getUint16",value:function(){if(this.pos+2>this.pos_end)throw new Error("Buffer overflow");var n=this.dataview.getUint16(this.pos,!0);return this.pos+=2,n}},{key:"getInt8",value:function(){if(this.pos>=this.pos_end)throw new Error("Buffer overflow");return this.dataview.getInt8(this.pos++)}},{key:"getUint8",value:function(){if(this.pos>=this.pos_end)throw new Error("Buffer overflow");return this.dataview.getUint8(this.pos++)}},{key:"getString8",value:function(){var n=this.getUint8();return v(this.getBinary(n))}},{key:"getString16",value:function(){var n=this.getUint16();return v(this.getBinary(n))}},{key:"getString32",value:function(){var n=this.getUint32();return v(this.getBinary(n))}},{key:"getInt64NumberLikeString",value:function(){var n=!(arguments.length>0&&arguments[0]!==undefined)||arguments[0],t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],i=8;if(this.pos+i>this.pos_end)throw new Error("Buffer overflow");var r=new Uint8Array(this.dataview.buffer,this.pos,i);n&&(this.pos+=i);for(var e=t&&r.length>0&&r[0]>=128,o=[],u=r.length-1;u>=0;u--){var c=r[u];e&&(c=256-(u===r.length-1?0:1)-c);for(var f=0,a=o.length;c>0||f<a;f++)c+=256*(o[f]||0),o[f]=c%10,c=(c-o[f])/10}return(e?"-":"")+o.reverse().join("")}},{key:"getBinary",value:function(n){if(0===n)return"";if(this.pos+n>this.pos_end)throw new Error("Buffer overflow");var t=new Uint8Array(this.dataview.buffer,this.pos,n),i=String.fromCharCode.apply(null,t);return this.pos+=n,i}},{key:"getBlob",value:function(n,t){if(0===n)return null;if(this.pos+n>this.pos_end)throw new Error("Buffer overflow");var i=new Blob([new Uint8Array(this.dataview.buffer,this.pos,n)],{type:t});return this.pos+=n,URL.createObjectURL(i)}},{key:"getReader32",value:function(){var t=this.getUint32();if(t>this.pos_end-this.pos)throw new Error("Buffer overflow");var i=new n(this.dataview,this.pos,t);return this.pos+=t,i}},{key:"getReader16",value:function(){var t=this.getUint16();if(t>this.pos_end-this.pos)throw new Error("Buffer overflow");var i=new n(this.dataview,this.pos,t);return this.pos+=t,i}}],i&&Wb(t.prototype,i),r&&Wb(t,r),n}();function Gb(n,t,i){if("string"==typeof i)for(var r=0;r<i.length;r++)n.setUint8(t++,i.charCodeAt(r));else if(Array.isArray(i))for(var e=0;e<i.length;++e)t=Gb(n,t,i[e]);else if("String"in i||"String8"in i||"String16"in i||"String32"in i){var o;"String8"in i?(o=T(i.String8),n.setUint8(t++,o.length)):"String16"in i?(o=T(i.String16),n.setUint16(t,o.length,!0),t+=2):"String32"in i?(o=T(i.String32),n.setUint32(t,o.length,!0),t+=4):o=T(i.String);for(var u=0;u<o.length;u++)n.setUint8(t++,o.charCodeAt(u))}else"Uint8"in i?n.setUint8(t++,i.Uint8):"Int8"in i?n.setInt8(t++,i.Int8):"Uint16"in i?(n.setUint16(t,i.Uint16,!0),t+=2):"Int16"in i?(n.setInt16(t,i.Int16,!0),t+=2):"Uint32"in i?(n.setUint32(t,i.Uint32,!0),t+=4):"Int32"in i?(n.setInt32(t,i.Int32,!0),t+=4):"Uint64"in i&&(n.setBigUint64(t,i.Uint64,!0),t+=8);return t}function Hb(n){if(n===undefined)return 0;if("string"==typeof n)return n.length;if(Array.isArray(n)){for(var t=0,i=0;i<n.length;++i)t+=Hb(n[i]);return t}return"String"in n?T(n.String).length:"String8"in n?T(n.String8).length+1:"String16"in n?T(n.String16).length+2:"String32"in n?T(n.String32).length+4:"Uint8"in n||"Int8"in n?1:"Uint16"in n||"Int16"in n?2:"Uint32"in n||"Int32"in n?4:void 0}function Qb(n){var t=this,i="<([a-zA-Z]+)>([0-9a-fA-F]+)</(?:[a-zA-Z]+)>",r=n.match(new RegExp(i,"g"));if(r){var e={};return r.forEach(function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,t);var r=n.match(new RegExp(i));if(r&&3===r.length){var o=r[1],u=r[2];e[o]||(e[o]=[]),e[o].push(u)}}.bind(this)),e}}var Vb,Yb=["bytes","kb","mb","gb","tb"];function Jb(n,t){var i=n.getBinary(32),r=function(n){if(0==n)return"0 Byte";var t=parseInt(Math.floor(Math.log(n)/Math.log(1024)));return Math.round(n/Math.pow(1024,t),2)+" "+Yb[t]}(n.getInt32()),e=n.getString16(),o=n.getString16(),u=undefined,c=0,f=0,a=0;n.isEnded()||(n.getUint16(),c=n.getInt8(),f=n.getInt32(),a=n.getInt32(),u=n.getBlob(n.Size(),"image/png")),t.data=c||f||a?{hash:i,fileSize:r,mime:e,fileName:o,url:"https://"+Wg+"/attach/0x"+t.messageIdLE,preview:{type:c,width:f,height:a,src:u}}:{hash:i,fileSize:r,mime:e,fileName:o,url:"https://"+Wg+"/attach/0x"+t.messageIdLE}}function Kb(n,i){var r=n.getReader32();if(r.Size()<=0)return"";switch(i.recType){case z:!function(n,i){var r=n.getBinary(n.getUint32()),e=n.getReader32(),o=Vv(v(r));if(i.data={text:o},e)for(i.tags={};!e.isEnded();)try{var u=e.getUint8();e.getUint16(),e.getUint16();var c=e.getReader16();if(0===c.Size())return;if(u===V){var f=c.getString16(),a=Vv(c.getString16()),s=Vv(c.getString16()),l=Vv(c.getString16()),h=void 0;0!==c.Size()&&(h={width:c.getInt16(),height:c.getInt16(),hash:c.getUint8(),src:"https://"+Wg+"/enrichment/0x"+i.messageIdLE}),i.tags.enrich={url:f,title:a,siteName:s,description:l,preview:h}}else if(u===Y){var y=m(c.getBinary(8)),p=c.getUint8(),b=m(c.getBinary(8)),w=c.getString16(),_=Vv(c.getString16());i.tags.quote={citedId:y,citedType:p,citedUser:b,citedAuthor:w,citedText:_}}else if(u===J){var g=c.getUint8();c.getUint8();for(var S=[];!c.isEnded();)S.push(m(c.getBinary(8)));i.tags.files={type:g,linedIds:S}}}catch(T){d.error(t.Parse,T)}}(r,i);break;case Q:i.collection=function(n){var t=n.getBinary(n.getUint32());return n.getReader32(),Qb(v(t))}(r);break;case G:i.data=function(n){var t=n.getUint8(),i={type:t};switch(t){case X:case Z:i.userId=m(n.getBinary(8)),i.userName=n.getString16();break;case nn:case tn:case rn:i.changeValue=n.getUint8();break;case en:case on:i.name=n.getString16()}return i}(r);break;case W:Jb(r,i)}}function Xb(n){try{var i=n.getReader32(),r=i.getBinary(8),e=i.getBinary(8),o=Vv(i.getString16()),u=i.getUint32(),c=i.getUint8(),f=i.getBinary(8),a=g(r),s={messageId:m(r),messageIdLE:w(r),authorId:m(e),authorName:o,sequence:u,recType:c,date:a,dateText:Xc({date:a}),linkId:m(f)};return Kb(i,s),s}catch(l){d.error(t.Parse,l)}return null}function Zb(n,i){try{var r,e=n.getReader32();i&&(e=(r=e).getReader32());var o=e.getBinary(8),u=e.getBinary(8),c=e.getBinary(8),f=Vv(e.getString16()),a=e.getUint8(),s=e.getUint8(),l=e.getUint8(),h=e.getUint8(),v=e.getBinary(8),y=e.getBinary(8),p=Vv(e.getString16()),b=Vv(e.getString16()),_=Vv(e.getString16()),S=Vv(e.getString16()),T=e.getInt32(),j=e.getInt32(),k=e.getInt32(),E=e.getInt32(),A=e.getInt32(),O=e.getUint8();e.getBinary(32);var x=e.getBinary(8),C=e.getBinary(8),I=e.getInt16(),R=0!==e.getInt8(),M=0;try{M=e.getInt8()}catch($){d.error(t.Parse,$)}var U=g(v),B=m(o),D=m(c),N=m(u),P="";O&&(P="https://"+Wg+"/avatar/0x"+w(o)+"?"+N);var L={chatId:B,changeId:N,authorId:D,authorName:f,type:a,isPublic:s,isLimited:l,isClosed:h,lastUpdate:m(v),extraId:m(y),name:p,description:b,links:_,inviteLink:S,language:T,countAdmins:j,countModers:k,countInvited:E,countReaders:A,countMembers:j+k+E+A,avatarIsPresent:O,avatar:P,lastSeen:m(x),lastAccess:m(C),perms:I,isMuted:R?1:0,isSubscribed:M,date:U,dateText:Xc({date:U})};if(i&&!r.isEnded())try{var q=Xb(r);q&&(L.topMessage=q)}catch($){d.error(t.Parse,$)}return L}catch($){return d.error(t.Parse,$),null}}function nw(n,i){var r=[];if(!n)return r;try{for(;!n.isEnded();){var e=Zb(n,i);e&&r.push(e)}}catch(o){d.error(t.Parse,o)}return r}function tw(n){var t=n.getBinary(8),i=Xb(n);return i?{chatId:m(t),message:i}:{chatId:m(t)}}function iw(n,t){return{result:t,messageId:m(n.getBinary(8))}}function rw(n,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:_n,e={chats:[],result:i};if(!n)return e;try{for(;!n.isEnded();){var o=Zb(n,r);o&&e.chats.push(o)}}catch(u){d.error(t.Parse,u)}return e}!function(n){n[n.INT_8=0]="INT_8",n[n.UINT_8=1]="UINT_8",n[n.STRING_8=2]="STRING_8",n[n.INT_16=3]="INT_16",n[n.UINT_16=4]="UINT_16",n[n.STRING_16=5]="STRING_16",n[n.INT_32=6]="INT_32",n[n.UINT_32=7]="UINT_32",n[n.STRING_32=8]="STRING_32",n[n.INT_64=9]="INT_64",n[n.INT_64_HEX=10]="INT_64_HEX",n[n.UINT_8_32=11]="UINT_8_32",n[n.zn=12]="ARRAY",n[n.Wn=13]="BLOCK"}(Vb||(Vb={}));var ew=[{name:"userId",type:Vb.INT_64_HEX},{name:"userName",type:Vb.STRING_16},{name:"userLogin",type:Vb.STRING_16},{name:"userAvatar",type:Vb.STRING_16},{name:"isDeleted",type:Vb.UINT_8}];function ow(n){var t=n.getReader32();return{userId:m(t.getBinary(8)),userName:Vv(t.getString16()),userLogin:t.getString16(),userAvatar:t.getString16(),isDeleted:t.getUint8()}}function uw(n){for(var i=[];!n.isEnded();)try{i.push(ow(n))}catch(r){d.error(t.Parse,r)}return i}function cw(n,t){var i=this,r={};return t.forEach(function(t){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,i);var e="";switch(t.type){case Vb.INT_8:e=n.getInt8();break;case Vb.UINT_8:e=n.getUint8();break;case Vb.STRING_8:e=n.getString8();break;case Vb.INT_16:e=n.getInt16();break;case Vb.UINT_16:e=n.getUint16();break;case Vb.STRING_16:e=n.getString16();break;case Vb.INT_32:e=n.getInt32();break;case Vb.UINT_32:e=n.getUint32();break;case Vb.STRING_32:e=n.getString32();break;case Vb.INT_64:e=n.getBinary(8);break;case Vb.INT_64_HEX:e=function(n){for(var t="",i=0;i<n.length;i++){var r=15&n.charCodeAt(i),e=n.charCodeAt(i)>>4&15;t+=e<10?String.fromCharCode(e+48):String.fromCharCode(e+55),t+=r<10?String.fromCharCode(r+48):String.fromCharCode(r+55)}return t}(n.getBinary(8));break;case Vb.UINT_8_32:e=n.getBinary(32);break;case Vb.zn:if(!("struct"in t)||!t.struct)throw new Error("Struct is empty");for(e=[];!n.isEnded();)try{var o=n.getReader32();e.push(cw(o,t.struct))}catch(u){new Error(u)}break;case Vb.Wn:if(!("struct"in t)||!t.struct)throw new Error("Struct is empty");e=cw(n.getReader32(),t.struct);break;default:throw new Error("Unknown type")}r[t.name]=e}.bind(this)),r}var fw=[{name:"chatId",type:Vb.INT_64_HEX},{name:"userId",type:Vb.INT_64_HEX},{name:"isDelete",type:Vb.UINT_8},{name:"perm",type:Vb.UINT_16}];var aw=[{name:"user",type:Vb.Wn,struct:ew},{name:"perms",type:Vb.UINT_16}],sw=[{name:"chatId",type:Vb.INT_64_HEX},{name:"users",type:Vb.zn,struct:aw}];function lw(n){return cw(n,sw)}var hw=[{name:"users",type:Vb.zn,struct:ew}];var dw=[{name:"chatId",type:Vb.INT_64_HEX},{name:"userId",type:Vb.INT_64_HEX},{name:"userName",type:Vb.STRING_16},{name:"permission",type:Vb.UINT_16},{name:"isDeleted",type:Vb.UINT_8}];var vw=[{name:"count",type:Vb.UINT_32}];function yw(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var pw,mw=undefined,bw=undefined,ww=!1,_w=2e3,gw=undefined,Sw=undefined,Tw=!1,jw=!1;function kw(){function n(n){d.warning(t.WebSocket,"disconnected"),Ew()}ww||(ww=!0,d.info(t.WebSocket,"connecting"),(bw=new WebSocket("wss://"+Wg)).binaryType="arraybuffer",bw.onopen=function(){var n=this;d.info(t.WebSocket,"connected"),d.info(t.WebSocket,"authorization"),function(){var n=0,t=0,i=0;if(Vr){var r=(Vr+"").split(".");t=parseInt(r[0],10),r.length>1&&(i=parseInt(r[1],10))}var e=100*t+i,o=0,u=2,c=0,f=b(Bg),a=function(n){if(n.length%2)return"";for(var t="",i=n.length-2;i>=0;i-=2){var r=S(n.charCodeAt(i+0)),e=S(n.charCodeAt(i+1));t+=String.fromCharCode(16*r+e)}return t}(uS);Ow(D.u,[{Uint8:8},{Uint8:4},{Uint32:1},{Uint32:c},f,{Uint32:e},{Uint32:o},{Uint8:u},a,{Uint8:n},{Uint32:0}],null,undefined)}(),function(n){var t=this;return new Promise(function(i,r){var e=this;L_(this,t);var o=x({commandType:D.O,callback:function(n,t){L_(this,e),n?r(n):i(t)}.bind(this)}),u=[{Uint8:8},{Uint8:4},{Uint32:1},b(n)];Ow(D.O,u,null,o)}.bind(this))}(mw).then(function(i){var r,e=this;yw(this,n),d.info(t.WebSocket,"authorized"),hf=(r=i).userId,r.userName,r.userFlags,df=r.Fn,vf=r.Gn,function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;Ow(D.$,[{Uint8:n?1:0}],null,undefined)}(_n),_w=2e3,C({commandType:"first-connect"}).then(function(n){yw(this,e),n.run(null),n["delete"]()}.bind(this),function(){yw(this,e)}.bind(this))}.bind(this))["catch"](function(i){var r=this;yw(this,n),C({commandType:"error"}).then(function(n){yw(this,r),n.run(i)}.bind(this),function(){yw(this,r)}.bind(this)),d.error(t.WebSocket,"auth failed: ".concat(i))}.bind(this)),ww=!1},bw.onerror=function(){ww=!1,bw.close()},bw.onmessage=Vw,bw.addEventListener("close",n),window.addEventListener("beforeunload",(function(){rS(),bw.removeEventListener("close",n),bw.close()})))}function Ew(){d.info(t.WebSocket,"reconnect");var n,i=bw;setTimeout((function(){var n=this;jw&&x({commandType:"first-connect",isDefault:!0,callback:function(i){var r=this;yw(this,n),i?C({commandType:"error"}).then(function(n){yw(this,r),n.run(i)}.bind(this),function(){yw(this,r)}.bind(this)):(function(){var n=this;d.info(t.Store,"get chat updates"),y_(_g(tg),_n,kn).then(function(t){ng(this,n),mg(t.chats,P,!0)}.bind(this))["catch"](function(i){ng(this,n),d.error(t.Store,i)}.bind(this)),d_(L,_g(ig),_n,kn).then(function(t){ng(this,n),mg(t.chats,L,!0)}.bind(this))["catch"](function(i){ng(this,n),d.error(t.Store,i)}.bind(this)),d_(q,_g(rg),_n,kn).then(function(t){ng(this,n),mg(t.chats,q,!0)}.bind(this))["catch"](function(i){ng(this,n),d.error(t.Store,i)}.bind(this)),d_($,_g(eg),_n,kn).then(function(t){ng(this,n),mg(t.chats,$,!0)}.bind(this))["catch"](function(i){ng(this,n),d.error(t.Store,i)}.bind(this))}(),function(){var n=this,i=ct(yb);i&&(d.info(t.System,"get message updates"),n_(i.chatId,xb,_n).then(qb)["catch"](function(i){Nb(this,n),d.error(t.System,i)}.bind(this)))}())}.bind(this)}),kw(),i.removeAllListeners&&i.removeAllListeners();try{i.close()}catch(r){d.error(t.WebSocket,"error close old websoket")}}),(n=_w,_w*=(3+Math.random())/2,Math.min(n,3e4)))}function Aw(n){window.Ajax.post("https://"+Wg+"/auth",{token:mw},!1,{onready:function(t){n&&n({result:t})},onerror:function(t){n&&n({error:t})}},!1,!0)}function Ow(n,i,r,e){if(bw){if(e||(e=p(++O)),bw.readyState!==bw.OPEN)return function(n,t,i,r){setTimeout((function(){Ow(n,t,i,r)}),1e3)}(n,i,r,e),void d.warning(t.WebSocket,"WebSocket not open, try resend after timeout");var o=13+(i?Hb(i):0),u=new ArrayBuffer(o),c=new DataView(u);c.setUint8(0,n),e?Gb(c,1,e):(c.setUint32(1,287454020,!1),c.setUint32(5,1432778632,!1)),c.setUint32(9,o+(r||0)-13,!0),i&&Gb(c,13,i);try{if(lS){var f=new Date,a=("0"+f.getHours()).slice(-2),s=("0"+f.getMinutes()).slice(-2),l=("0"+f.getSeconds()).slice(-2),h=("00"+f.getMilliseconds()).slice(-3),v="".concat(a,":").concat(s,":").concat(l,":").concat(h," code: ").concat(n,", name: ").concat(Cw(n),",");v+=" id: ".concat(window.BigInt?y(e):m(e),", length: ").concat(u.byteLength," byte"),d.info(t.Send,v)}return void bw.send(u)}catch(b){return d.error(t.WebSocket,b,"Send message"),void(bw&&1===bw.readyState||(d.warning(t.WebSocket,"WebSocket closed, try reconnect"),Ew()))}}else d.warning(t.WebSocket,"WebSocket not created")}function xw(n){for(var t in N)if(Object.prototype.hasOwnProperty.call(N,t)&&N[t]===n)return t;return"[UNKNOWN_RESULT]"}function Cw(n){for(var t in D)if(Object.prototype.hasOwnProperty.call(D,t)&&D[t]===n)return t;return"[UNKNOWN_RESULT]"}function Iw(n){return n>0}function Rw(n,i,r){var e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:D.fn,o=new FileReader;o.onloadend=function(o){for(var u,c,f,a=o.target.result,s=0;s<a.byteLength;){var l=Math.min(131072,a.byteLength-s);if(q_(l,s,r,e),l>1e3)for(var h=0,v=1;v<=10;v++){var y=parseInt(v*l/10,10);u=s+h,c=s+y,f=void 0,f=a.slice(u,c),lS&&d.info(t.Send,"block length: ".concat(f.byteLength," byte")),bw.send(f),h=y}else{var p=a.slice(s);lS&&d.info(t.Send,"block length: ".concat(p.byteLength," byte")),bw.send(p)}s+=l}n=null,i()},o.readAsArrayBuffer(n)}function Mw(n){var t=this,i=n.reader,r=n.requestIdBin;C({commandType:D.an,id:r}).then(function(n){yw(this,t),n.run(null,i)}.bind(this),function(){yw(this,t)}.bind(this))}function Uw(n){var i=this,r=n.reader,e=n.res,o=n.requestIdBin,u=rw(r,e);d.info(t.WebSocket,"received chats: ".concat(u.chats.length)),C({commandType:D.k,id:o}).then(function(n){yw(this,i),n.run(undefined,u),n["delete"]()}.bind(this),function(){yw(this,i)}.bind(this))}function Bw(n,i,r){var e=this,o=function(n,i){for(var r=n.getUint8(),e=n.getBinary(8),o=n.getBinary(8),u=n.getInt16(),c={result:i,isAscending:r,chatId:m(e),lastAccess:m(o),perms:u,messages:[]};!n.isEnded();)try{var f=Xb(n);if(!f)continue;c.messages.push(f)}catch(a){d.error(t.Parse,a)}return c}(n,r);C({commandType:D.A,id:i}).then(function(n){yw(this,e),n.run(undefined,o),n["delete"]()}.bind(this),function(){yw(this,e)}.bind(this))}function Dw(n){var t=this,i=n.reader,r=n.requestIdBin,e=rw(i,n.res,gn);C({commandType:D.G,id:r}).then(function(n){yw(this,t),n.run(undefined,e)}.bind(this),function(){yw(this,t)}.bind(this))}function Nw(n){var i=this,r=n.reader,e=n.requestIdBin,o=function(n){return cw(n,fw)}(r),u=o.userId,c=o.chatId,f=o.isDelete;u===Bg&&(f?bg(c):D_(c).then(function(n){yw(this,i),n&&(pb(n),kg(n))}.bind(this))["catch"](function(n){yw(this,i),d.error(t.System,n)}.bind(this))),C({commandType:D._,id:e}).then(function(n){yw(this,i),n.run(undefined,o),n["delete"]()}.bind(this),function(){yw(this,i)}.bind(this))}function Pw(n){var t=this,i=function(n){return cw(n,dw)}(n.reader);i&&C({commandType:D.M}).then(function(n){yw(this,t),n.run(undefined,i)}.bind(this),function(){yw(this,t)}.bind(this))}function Lw(n){var t=this,i=n.reader,r=n.requestIdBin,e=function(n){return cw(n,hw).users}(i);C({commandType:D.H,id:r}).then(function(n){yw(this,t),n.run(undefined,e),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this))}function qw(n){var t=this,i=n.requestIdBin,r=n.res;C({commandType:D.tn,id:i}).then(function(n){yw(this,t),n.run(undefined,r),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this))}function $w(n){var t=this,i=n.reader,r=n.requestIdBin,e=function(n){return cw(n,vw).count}(i);C({commandType:D.mn,id:r}).then(function(n){yw(this,t),n.run(undefined,e),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this))}function zw(n){var i=this,r=n.reader,e=n.res,o=n.requestIdBin,u=rw(r,e);d.info(t.WebSocket,"received chats by type: ".concat(u.chats.length)),C({commandType:D.pn,id:o}).then(function(n){yw(this,i),n.run(undefined,u),n["delete"]()}.bind(this),function(){yw(this,i)}.bind(this))}function Ww(n){var t=this,i=function(n){var t=n.getBinary(8),i=n.getBinary(8);return{chatId:m(t),lastSeen:m(i)}}(n.reader);C({commandType:D.B}).then(function(n){yw(this,t),n.run(undefined,i)}.bind(this),function(){yw(this,t)}.bind(this))}function Fw(n){var t=this,i=n.code,r=n.reader,e=n.res,o=n.requestIdBin,u=n.size;switch(i){case D.k:Uw({reader:r,res:e,requestIdBin:o});break;case D.q:(function(){var n=this;yw(this,t);var i=lw(r);C({commandType:D.q,id:o}).then(function(t){yw(this,n),t.run(undefined,i),t["delete"]()}.bind(this),function(){yw(this,n)}.bind(this))}).bind(this)();break;case D.A:Bw(r,o,e);break;case D.on:!function(n){var t=this,i=n.reader,r=n.requestIdBin,e=(n.res,Zb(i,_n));e&&(C({commandType:D.on,id:r}).then(function(n){yw(this,t),n.run(undefined,e),r&&n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this)),C({commandType:D.on}).then(function(n){yw(this,t),n.run(undefined,e)}.bind(this),function(){yw(this,t)}.bind(this)))}({reader:r,requestIdBin:o,res:e});break;case D.T:!function(n){var t=this,i=n.reader,r=n.requestIdBin,e=(n.res,Zb(i,_n));e&&C({commandType:D.T,id:r}).then(function(n){yw(this,t),n.run(undefined,e),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this))}({reader:r,requestIdBin:o,res:e});break;case D.S:(function(){var n=this;yw(this,t);var i=r.getBinary(8);C({commandType:D.S,id:o}).then(function(t){yw(this,n),t.run(null,m(i)),t["delete"]()}.bind(this),function(){yw(this,n)}.bind(this))}).bind(this)();break;case D.P:(function(){var n=this;yw(this,t);var i=uw(r);C({commandType:D.P,id:o}).then(function(t){yw(this,n),t.run(null,i),t["delete"]()}.bind(this),function(){yw(this,n)}.bind(this))}).bind(this)();break;case D.j:!function(n){var t=this,i=n.reader,r=n.requestIdBin,e=iw(i,n.res);C({commandType:D.j,id:r}).then(function(n){yw(this,t),n.run(undefined,e),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this))}({reader:r,requestIdBin:o,res:e});break;case D.X:!function(n){var t=this,i=n.reader,r=n.size,e=n.requestIdBin,o=i.getBlob(r-1,"image/png");C({commandType:D.X,id:e}).then(function(n){yw(this,t),n.run({avatar:o}),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this))}({reader:r,size:u,requestIdBin:o});break;case D.G:Dw({reader:r,requestIdBin:o,res:e});break;case D._:Nw({reader:r,requestIdBin:o});break;case D.an:Mw({reader:r,requestIdBin:o});break;case D.K:C({commandType:D.K,id:o}).then(function(n){yw(this,t),n.run(),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this));break;case D.g:C({commandType:D.g,id:o}).then(function(n){yw(this,t),n.run(null),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this));break;case D.hn:!function(n){var t=this,i=n.requestIdBin;C({commandType:D.hn,id:i}).then(function(n){yw(this,t),n.run(null,"Success"),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this))}({requestIdBin:o});break;case D.H:Lw({reader:r,res:e,requestIdBin:o});break;case D.tn:qw({requestIdBin:o,res:e});break;case D.F:!function(n){var t=this,i=n.requestIdBin;C({commandType:D.F,id:i}).then(function(n){yw(this,t),n.run({}),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this))}({requestIdBin:o});break;case D.W:!function(n){var t=this,i=n.reader,r=n.requestIdBin,e=uw(i);C({commandType:D.W,id:r}).then(function(n){yw(this,t),n.run({users:e}),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this))}({reader:r,requestIdBin:o});break;case D.L:!function(n){var t=this,i=n.reader,r=n.requestIdBin,e=uw(i);C({commandType:D.L,id:r}).then(function(n){yw(this,t),n.run(undefined,e),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this))}({reader:r,requestIdBin:o});break;case D.mn:$w({reader:r,requestIdBin:o});break;case D.pn:zw({reader:r,res:e,requestIdBin:o});break;case D.un:!function(n){var t=this,i=n.reader,r=(n.res,n.requestIdBin),e=tw(i);C({commandType:D.un,id:r}).then(function(n){yw(this,t),n.run(undefined,e),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this))}({reader:r,res:e,requestIdBin:o});break;case D.fn:C({commandType:D.fn,id:o}).then(function(n){yw(this,t),n.run({}),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this))}}function Gw(n){switch(n){case N.bn:return"Generic fail";case N.wn:return"Access denied";case N._n:return"Invalid parameters";case N.gn:return"Invalid request";case N.Sn:return"Invalid version (of protocol or something)";case N.Tn:return"Failed call, we need disconnect";case N.jn:return"Out of memory situation";case N.kn:return"Sql query error";case N.En:return"User banned to interact with other user";case N.An:return"Network problems";case N.On:return"File/data too big";case N.xn:return"Data didn't exist";case N.Cn:return"Duplicate";case N.In:return"User banned temporary for too many messages or assigning";case N.Rn:return"Messaging disallowed with this user (due only-friends checkbox)";case N.Mn:return"Something interrupted request processing"}}function Hw(n){var t=this,i=n.code,r=n.res,e=n.requestIdBin,o=Gw(r);switch(i){case D.g:C({commandType:D.g,id:e}).then(function(n){yw(this,t),n.run(r!==N.Cn?o:r),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this));break;case D.S:C({commandType:D.S,id:e}).then(function(n){yw(this,t);var i=r!==N.Cn&&r!==N.Rn;n.run(i?o:r),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this));break;case D.on:!function(n){var t=this,i=n.requestIdBin,r=n.res;C({commandType:D.on,id:i}).then(function(n){yw(this,t),n.run(r),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this))}({requestIdBin:e,res:o});break;case D.T:!function(n){var t=this,i=n.requestIdBin,r=n.res;C({commandType:D.T,id:i}).then(function(n){yw(this,t),n.run(r),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this))}({requestIdBin:e,res:o});break;case D.A:C({commandType:D.A,id:e}).then(function(n){yw(this,t),n.run(o),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this));break;case D.q:C({commandType:D.q,id:e}).then(function(n){yw(this,t),n.run(o),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this));break;case D.H:C({commandType:D.H,id:e}).then(function(n){yw(this,t),n.run(o),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this));break;case D.j:C({commandType:D.j,id:e}).then(function(n){yw(this,t),n.run(o),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this));break;case D.K:C({commandType:D.K,id:e}).then(function(n){yw(this,t),n.run(o),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this));break;case D._:C({commandType:D._,id:e}).then(function(n){yw(this,t),n.run({error:o}),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this));break;case D.mn:C({commandType:D.mn,id:e}).then(function(n){yw(this,t),n.run(o),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this));break;case D.pn:C({commandType:D.pn,id:e}).then(function(n){yw(this,t),n.run(o),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this));break;case D.k:C({commandType:D.k,id:e}).then(function(n){yw(this,t),n.run(o),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this));break;default:C({commandType:i,id:e}).then(function(n){yw(this,t),n.run(o),n["delete"]()}.bind(this),function(){yw(this,t)}.bind(this))}}function Qw(n){var i=this,r=n.code,e=n.reader,o=n.requestIdBin,u=n.size;switch(r){case D.Y:(function(){yw(this,i),e.getInt8()}).bind(this)();break;case D.O:(function(){var n=this;yw(this,i);var t=e.getInt8();if(Iw(t)){var r=function(n){var t=n.getBinary(8),i=n.getString16(),r=n.getInt32();return{userId:m(t),userName:i,userFlags:r,Fn:!!(r&cn),Gn:!!(r&un)}}(e);C({commandType:D.O,id:o}).then(function(t){yw(this,n),t.run(undefined,r),t["delete"]()}.bind(this),function(){yw(this,n)}.bind(this))}else{var u=Gw(t);C({commandType:D.O,id:o}).then(function(t){yw(this,n),t.run(u),t["delete"]()}.bind(this),function(){yw(this,n)}.bind(this))}}).bind(this)();break;case D.I:(function(){var n=this;yw(this,i);var t=Zb(e);C({commandType:D.I}).then(function(i){yw(this,n),i.run(undefined,t)}.bind(this),function(){yw(this,n)}.bind(this))}).bind(this)();break;case D.B:Ww({reader:e});break;case D.R:(function(){var n=this;yw(this,i),d.info(t.WebSocket,"Notify message add");var r=tw(e);r&&function(n){var t=this,i=n.commandType;return new Promise(function(n,r){if(E(this,t),i in A){var e=A[i];if(!e)return void r();n(e)}r()}.bind(this))}({commandType:D.R}).then(function(t){if(yw(this,n),t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&t[i].run(null,r)}.bind(this),function(){yw(this,n)}.bind(this))}).bind(this)();break;case D.M:Pw({reader:e});break;default:(function(){yw(this,i);var n=e.getInt8();lS&&d.info(t.Received,"result: ".concat(n," ").concat(xw(n)));var c=xw(n);if(Iw(n))switch(n){case N.Un:case N.Dn:case N.Nn:Fw({code:r,reader:e,res:n,requestIdBin:o,size:u});break;case N.Bn:!function(n){var i=this,r=n.code,e=n.reader,o=n.res,u=n.requestIdBin;switch(r){case D.k:Uw({reader:e,res:o,requestIdBin:u});break;case D.q:(function(){var n=this;yw(this,i);var t=lw(e);C({commandType:D.q,id:u}).then(function(i){yw(this,n),i.run(undefined,t),i["delete"]()}.bind(this),function(){yw(this,n)}.bind(this))}).bind(this)();break;case D.A:Bw(e,u,o);break;case D.j:(function(){var n=this;yw(this,i);var r=iw(e,o),c=r.messageId;gw&&0===parseInt(c,16)?Rw(gw,function(){yw(this,n),gw=null}.bind(this),function(t,i){var e=this;yw(this,n),C({commandType:D.j,id:u}).then(function(n){yw(this,e),t?n.run(t):(r.messageId=i.messageId,n.run(t,r)),n["delete"]()}.bind(this),function(){yw(this,e)}.bind(this))}.bind(this),D.j):(gw&&(gw=null,d.warning(t.WebSocket,"file skipped by hash")),C({commandType:D.j,id:u}).then(function(t){yw(this,n),t.run("file skipped by hash",r),t["delete"]()}.bind(this),function(){yw(this,n)}.bind(this)))}).bind(this)();break;case D.K:Sw?Rw(Sw,function(){yw(this,i),Sw=null}.bind(this),function(){var n=this;yw(this,i),C({commandType:D.K,id:u}).then(function(t){yw(this,n),t.run(),t["delete"]()}.bind(this),function(){yw(this,n)}.bind(this))}.bind(this)):(Sw&&(Sw=null,d.warning(t.WebSocket,"avatar skipped by hash")),C({commandType:D.K,id:u}).then(function(n){yw(this,i),n.run("file skipped by hash"),n["delete"]()}.bind(this),function(){yw(this,i)}.bind(this)));break;case D.an:Mw({reader:e,requestIdBin:u});break;case D.G:Dw({reader:e,requestIdBin:u,res:o});break;case D.H:Lw({reader:e,res:o,requestIdBin:u});break;case D.tn:qw({requestIdBin:u,res:o});break;case D.pn:zw({reader:e,res:o,requestIdBin:u})}}({code:r,reader:e,res:n,requestIdBin:o})}else d.error(t.WebSocket,"code ".concat(r,": ").concat(c," ").concat(n)),Hw({code:r,res:n,requestIdBin:o})}).bind(this)()}}function Vw(n){if(pw){var i=new Uint8Array(n.data),r=new Uint8Array(pw.byteLength+i.byteLength);r.set(pw,0),r.set(i,pw.byteLength),pw=r}else pw=new Uint8Array(n.data);var e=new DataView(pw.buffer),o=pw.buffer.byteLength;if(!(e.byteLength<13)){var u=e.getUint8(0),c=new Fb(e,1,8).getBinary(8),f=e.getUint32(9,!0);if(!(e.byteLength<f+13)){var a=new Fb(e,13);pw=pw.byteLength>f+13?pw.slice(f+13):null;try{if(lS){var s=new Date,l=("0"+s.getHours()).slice(-2),h=("0"+s.getMinutes()).slice(-2),v=("0"+s.getSeconds()).slice(-2),p=("00"+s.getMilliseconds()).slice(-3),b="".concat(l,":").concat(h,":").concat(v,":").concat(p," code: ").concat(u,", name: ").concat(Cw(u),",");b+=" id: ".concat(window.BigInt?y(c):m(c),", length: ").concat(o," byte"),d.info(t.Received,b)}Qw({code:u,reader:a,requestIdBin:c,size:f})}catch(w){d.errorHandler(w)}}}}function Yw(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Jw(n){var t=this,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:gn,e=gn;return new Promise(function(o,u){var c=this;if(Yw(this,t),n){var f=x({commandType:D.G,callback:function(n,t){Yw(this,c),n?u(n):o(t)}.bind(this)});Ow(D.G,[{Uint8:r},{String16:n},{Uint8:e},{Uint32:i}],null,f)}else u("Keyword is empty")}.bind(this))}function Kw(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Xw(n,t){var i=this;return new Promise(function(r,e){var o=this;if(Kw(this,i),n)if(t){var u=b(n),c=b(t),f=x({commandType:D.tn,callback:function(n,t){Kw(this,o),n?e(n):r(t)}.bind(this)});Ow(D.tn,[u,c],null,f)}else e("Last access is empty");else e("Chat id is empty")}.bind(this))}function Zw(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function n_(n,t){var i=this,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return new Promise(function(e,o){var u=this;if(Zw(this,i),0!==parseInt(n,16))if(n){var c=b(n),f=t?b(t):M,a=x({commandType:D.A,callback:function(n,t){Zw(this,u),n?o(n):e(t)}.bind(this)});Ow(D.A,[c,{Uint8:r},f,{Uint32:4096}],null,a)}else o("Chat id is empty");else o("Chat id is zero")}.bind(this))}function t_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function i_(n){var t=this;return new Promise(function(i,r){var e=this;if(t_(this,t),0!==parseInt(n,16))if(n){var o=b(n),u=x({commandType:D.un,callback:function(n,t){t_(this,e),n?r(n):i(t)}.bind(this)});Ow(D.un,[o],null,u)}else r("Message id is empty");else r("Message id is zero")}.bind(this))}function r_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function e_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function o_(n,t,i){var r=this;return new Promise(function(e,o){var u=this;if(e_(this,r),0!==parseInt(n,16))if(n){var c=b(n),f=x({commandType:D.j,callback:function(n,t){e_(this,u),n?o(n):e(t)}.bind(this)}),a=[];if(i&&i.length){var s=[];i.forEach(function(n){var t=this;if(e_(this,u),n.tagType===Y&&"citedId"in n){var i=[{Uint8:n.tagType},{Uint16:0},{Uint16:0}],r=[b(n.citedId),{Uint8:n.citedType},b(n.citedUser),{String16:n.citedAuthor},{String16:n.citedText}],e=[].concat(i,[{Uint16:Hb(r)}],r);s.push(e)}else if(n.tagType===J&&"linedIds"in n){var o=[{Uint8:n.tagType},{Uint16:0},{Uint16:0}],c=[];n.linedIds.forEach(function(n){e_(this,t),c.push(b(n))}.bind(this));var f=[{Uint8:n.type},{Uint8:n.linedIds.length},c],a=[].concat(o,[{Uint16:Hb(f)}],f);s.push(a)}}.bind(this)),a=[c,{Uint8:z},{String32:t},{Uint32:Hb(s)},s]}else a=[c,{Uint8:z},{String32:t},{Uint32:0}];Ow(D.j,a,null,f)}else o("Chat id is empty");else o("Chat id is zero")}.bind(this))}function u_(n){return function(n){if(Array.isArray(n))return c_(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"==typeof n)return c_(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c_(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c_(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function f_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var a_=window.Uint8Array?new Uint8Array([139,22,96,224,115,20,103,83,95,225,254,248,9,43,105,26,39,200,253,236,146,105,43,153,4,74,142,140,44,204,239,233,137,90,166,229,193,243,253,164,31,83,99,67,154,127,243,184,19,54,180,200,198,59,213,81,215,22,74,96,224,79,170,166]):undefined;function s_(n){var i=this;return new Promise(function(r,e){if(f_(this,i),n)if(a_){var o=new FileReader,u=n.slice(0,n.size);o.onloadend=function(){var i=this;if(o.readyState!==FileReader.DONE)return d.error(t.System,"read file error","Prepare file"),void e("read file error");var u=o.result,c=new Uint8Array(u.byteLength+a_.byteLength);if(c.set(new Uint8Array(u)),c.set(a_,u.byteLength),window.crypto)window.crypto.subtle.digest("SHA-256",u).then(function(e){var o=this;f_(this,i);var u=String.fromCharCode.apply(null,u_(new Uint8Array(e)));window.crypto.subtle.digest("SHA-256",c).then(function(t){f_(this,o);var i=String.fromCharCode.apply(null,u_(new Uint8Array(t)));r({cipherKey:i,hash:u,fileSize:n.size,mime:n.type,fileName:n.name,file:n})}.bind(this))["catch"](function(n){f_(this,o),d.error(t.System,n)}.bind(this))}.bind(this))["catch"](function(n){f_(this,i),d.error(t.System,n)}.bind(this));else{if(!window.msCrypto)return void e("The browser doesn't support crypto");var f=window.msCrypto.subtle.digest("SHA-256",u);f.oncomplete=function(){var t=String.fromCharCode.apply(null,u_(new Uint8Array(f.result))),i=window.msCrypto.subtle.digest("SHA-256",c);i.oncomplete=function(){var e=String.fromCharCode.apply(null,u_(new Uint8Array(i.result)));r({cipherKey:e,hash:t,fileSize:n.size,mime:n.type,fileName:n.name,file:n})}}}},o.readAsArrayBuffer(u)}else e("The browser doesn't support Uint8Array");else e("File is undefined")}.bind(this))}function l_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function h_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function d_(){var n=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:L,i=arguments.length>1?arguments[1]:undefined,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:100,o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;return new Promise(function(u,c){var f=this;h_(this,n);var a=i?b(i):M,s=x({commandType:D.pn,callback:function(n,t){h_(this,f),n?c(n):u(t)}.bind(this)});Ow(D.pn,[{Uint8:r},a,{Uint8:o},{Uint32:e},{Uint8:t}],null,s)}.bind(this))}function v_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function y_(n){var t=this,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:100,e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;return new Promise(function(o,u){var c=this;v_(this,t);var f=n?b(n):M,a=x({commandType:D.k,callback:function(n,t){v_(this,c),n?u(n):o(t)}.bind(this)});Ow(D.k,[{Uint8:i},f,{Uint8:e},{Uint32:r}],null,a)}.bind(this))}function p_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function m_(n){var t=this;return new Promise(function(i,r){var e=this;if(p_(this,t),n&&n.length){var o=x({commandType:D.L,callback:function(n,t){p_(this,e),n?r(n):i(t)}.bind(this)}),u=[];n.forEach(function(n){p_(this,e),u.push(b(n))}.bind(this)),Ow(D.L,u,null,o)}else r("Users id is empty")}.bind(this))}function b_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function w_(n){var t=this;return new Promise(function(i,r){var e=this;if(b_(this,t),n){var o=x({commandType:D.S,callback:function(n,t){b_(this,e),n?r(n):i(t)}.bind(this)}),u=[],c=n.isPublic?n.inviteLink:"";if(n.type===q)u=[{Uint8:q},{Uint8:n.isPublic},{Uint8:n.isLimited?1:0},{String16:n.name},{String16:n.description},{String16:n.links},{String16:c},{Uint32:n.language}];else if(n.type===$)u=[{Uint8:$},{Uint8:n.isPublic},{String16:n.name},{String16:n.description},{String16:n.links},{String16:c},{Uint32:n.language}];else{var f=b(n.userId);u=[{Uint8:L},f]}Ow(D.S,u,null,o)}else r("Chat object is empty")}.bind(this))}function __(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function g_(n,t){var i=this;return new Promise(function(r,e){var o=this;if(__(this,i),t)if(0!==parseInt(t,16))if(function(n){return!!n&&(!!n.size&&!(["image/gif","image/jpeg","image/png"].indexOf(n.type)<0))}(n)){var u=x({commandType:D.K,callback:function(n){__(this,o),n?e(n):r()}.bind(this)}),c=b(t);s_(n).then(function(n){__(this,o);var t=n.cipherKey,i=n.hash,r=n.fileSize,e=n.mime,f=n.fileName;!function(n){Sw=n}(n.file),Ow(D.K,[c,{Uint8:1},t,i,{Uint32:r},{String16:e},{String16:f}],null,u)}.bind(this))["catch"](function(n){__(this,o),e(n)}.bind(this))}else e("File is not valid");else e("Chat id is zero");else e("Chat id is empty")}.bind(this))}function S_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function T_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function j_(n){var t=this;return new Promise(function(i,r){var e=this;if(T_(this,t),n)if(0!==parseInt(n.chatId,16)){var o=x({commandType:D.g,callback:function(n,t){T_(this,e),n?r(n):i(t)}.bind(this)}),u=b(n.chatId),c=n.isPublic?n.inviteLink:"",f=[u,{Uint8:n.isPublic},{Uint8:n.isLimited?1:0},{Uint8:n.isClosed},{String16:n.name},{String16:n.description},{String16:n.links},{String16:c},{Uint32:n.language}];Ow(D.g,f,null,o)}else r("Chat id is zero");else r("Chat object is empty")}.bind(this))}function k_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function E_(n,t){var i=this,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:100;return new Promise(function(e,o){var u=this;if(k_(this,i),n)if(0!==parseInt(n,16)){var c=x({commandType:D.q,callback:function(n,t){k_(this,u),n?o(n):e(t)}.bind(this)}),f=b(n);t=t?b(t):M,Ow(D.q,[f,t,{Uint32:r}],null,c)}else o("Chat id is zero");else o("Chat id is empty")}.bind(this))}function A_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function O_(n,t){var i=this,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,e=arguments.length>3&&arguments[3]!==undefined&&arguments[3];return new Promise(function(o,u){var c=this;if(A_(this,i),0!==parseInt(n,16))if(0!==parseInt(t,16))if(n)if(t){var f=x({commandType:D._,callback:function(n,t){A_(this,c),n?u(n):o(t)}.bind(this)}),a=b(n),s=b(t);Ow(D._,[a,s,{Uint8:e?1:0},{Uint16:r}],null,f)}else u("User id is empty");else u("Chat id is empty");else u("User id is zero");else u("Chat id is zero")}.bind(this))}function x_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function C_(){var n=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:jn,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;return new Promise(function(e,o){var u=this;x_(this,n);var c=x({commandType:D.H,callback:function(n,t){x_(this,u),n?o(n):e(t)}.bind(this)}),f=M;r&&(f=b(r)),Ow(D.H,[{Uint8:t},f,{Uint32:i}],null,c)}.bind(this))}function I_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function R_(n){var t=this,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;return new Promise(function(r,e){var o=this;if(I_(this,t),n){var u=x({commandType:D.P,callback:function(n,t){I_(this,o),n?e(n):r(t)}.bind(this)});Ow(D.P,[{String16:n},{Uint32:i}],null,u)}else e("Keyword is empty")}.bind(this))}function M_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function U_(){var n=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:mn,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:pn.none,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1,e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:10,o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;return new Promise(function(u,c){var f=this;M_(this,n);var a=x({commandType:D.an,callback:function(n,t){if(M_(this,f),n)c(n);else{var i=nw(t,r);u(i)}}.bind(this)});Ow(D.an,[{Uint8:o},{Uint8:t},{Uint32:i},{Uint8:r},{Uint32:e}],null,a)}.bind(this))}function B_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function D_(n){var t=this,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return new Promise(function(r,e){var o=this;if(B_(this,t),0!==parseInt(n,16)){var u=x({commandType:D.on,callback:function(n,t){B_(this,o),n?e(n):r(t)}.bind(this)});Ow(D.on,[b(n),{Uint8:i}],null,u)}else e("Chat id is zero")}.bind(this))}function N_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function P_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function L_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function q_(n,t,i){var r,e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:D.fn;i&&(r=x({commandType:e,callback:i})),Ow(D.fn,[{Uint32:t}],n,r)}function $_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var z_=dg/20;function W_(){var n=this,i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:q,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined,e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:20;return new Promise(function(u,c){$_(this,n);var f=1,a=[];o<=0?c("Count is zero"):function s(){var n=this;f>z_&&u(a),d_(i,r,e,o).then(function(t){$_(this,n),a=a.concat(t.chats),t.result===N.Bn&&t.chats.length?(f++,r=e===gn?t.chats[t.chats.length-1].lastUpdate:t.chats[0].lastUpdate,s()):u(a)}.bind(this))["catch"](function(i){$_(this,n),d.error(t.System,i),u(a)}.bind(this))}()}.bind(this))}var F_=Wi([]),G_=Wi([]);var H_=undefined;function Q_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var V_=Wi(0),Y_=function(n,t,i){var r;return function(){for(var e=this,o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];var f=u,a=i&&!r;clearTimeout(r),r=setTimeout((function(){r=null,i||n.apply(e,f)}),t),a&&n.apply(e,f)}}((function(){var n=this;if(!Bg||Bg===B)return;(function(){var n=this;return new Promise(function(t,i){var r=this;N_(this,n);var e=x({commandType:D.mn,callback:function(n,e){N_(this,r),n?i(n):t(e)}.bind(this)});Ow(D.mn,null,null,e)}.bind(this))})().then(function(t){Q_(this,n),V_.set(t)}.bind(this))["catch"](function(i){Q_(this,n),d.error(t.System,i,"Unread")}.bind(this))}),500,!1);function J_(n){return _(n.lastUpdate||U,n.lastAccess||U)>0}function K_(n,t){if(n){var i=n.querySelector(".notify-icon_messages");if(i){var r=i.querySelector(".notify-icon_count");r&&i.removeChild(r),t>0&&(i.innerHTML='<i class="notify-icon_count">'.concat(t,"</i>"))}}}function X_(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Z_(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Z_(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z_(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function ng(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}V_.subscribe(function(n){Q_(this,H_),function(n){var t=document.getElementById("notifyMessages");t&&K_(t,n);var i=document.getElementById("notifyMessagesMobile");i&&K_(i,n);!function(n){var t=document.getElementById("counterMessagesMenu");if(!t)return;t.innerHTML=n>0?"<i>".concat(n,"</i>"):""}(n)}(n=Math.min(n,99)),function(n){oS("mql5_chats_unread",n+"")}(n)}.bind(undefined));var tg=Wi([]),ig=Wi([]),rg=Wi([]),eg=Wi([]),og=!0,ug=!0,cg=!0,fg=!0,ag=!1,sg=!1,lg=Wi([]),hg=Wi(0),dg=1e3;function vg(n){var t=this;return n.filter(function(n){return ng(this,t),n.authorId===hf}.bind(this))}function yg(n){var t=tg;switch(n){case P:t=tg;break;case L:t=ig;break;case q:t=rg;break;case $:t=eg}return t}function pg(n,t){switch(n){case L:ug=t;break;case q:cg=t;break;case $:fg=t;break;default:og=t}}function mg(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:P;arguments.length>2&&undefined;n&&n.length&&Tg(n,yg(t))}function bg(n){var t=this;tg.update(function(i){var r=this;return ng(this,t),i.filter(function(t){return ng(this,r),t.chatId!==n}.bind(this))}.bind(this)),ig.update(function(i){var r=this;return ng(this,t),i.filter(function(t){return ng(this,r),t.chatId!==n}.bind(this))}.bind(this)),rg.update(function(i){var r=this;return ng(this,t),i.filter(function(t){return ng(this,r),t.chatId!==n}.bind(this))}.bind(this)),eg.update(function(i){var r=this;return ng(this,t),i.filter(function(t){return ng(this,r),t.chatId!==n}.bind(this))}.bind(this))}function wg(n,t){var i=this;n=n.sort(function(n,t){return ng(this,i),_(t.lastUpdate,n.lastUpdate)}.bind(this)),yg(t).set(n)}function _g(n){var t=this,i=U,r=ct(n);return r.length?(r.forEach(function(n){ng(this,t),_(n.lastUpdate,i)>0&&(i=n.lastUpdate)}.bind(this)),i):i}function gg(){var n=this,i=[];i.push(y_(undefined,gn,kn).then(function(t){ng(this,n),mg(t.chats,P)}.bind(this))["catch"](function(i){ng(this,n),d.error(t.Store,i)}.bind(this))),i.push(d_(L,undefined,gn,kn).then(function(t){ng(this,n),mg(t.chats,L)}.bind(this))["catch"](function(i){ng(this,n),d.error(t.Store,i)}.bind(this))),i.push(W_(q).then(function(t){ng(this,n),mg(t,q)}.bind(this))),i.push(W_($).then(function(t){ng(this,n),mg(t,$)}.bind(this))),Promise.allSettled(i).then(function(){ng(this,n),sg=!0}.bind(this))}function Sg(n){var i=this,r=function(n){var t=!1;switch(n){case L:t=ug;break;case q:t=cg;break;case $:t=fg;break;default:t=og}return t}(n);if(r&&!ag){ag=!0;var e=ct(yg(n)),o=undefined;switch(e.length&&(o=e[e.length-1].lastUpdate),n){case L:case q:case $:d_(n,o,gn,kn).then(function(t){ng(this,i),t.chats.length&&t.result===N.Bn||pg(n,!1),mg(t.chats,n),ag=!1}.bind(this))["catch"](function(n){ng(this,i),d.error(t.Store,n),ag=!1}.bind(this));break;case P:y_(o,gn,kn).then(function(t){ng(this,i),t.chats.length&&t.result===N.Bn||pg(n,!1),mg(t.chats,n),ag=!1}.bind(this))["catch"](function(n){ng(this,i),d.error(t.Store,n),ag=!1}.bind(this))}}}function Tg(n,t){var i=this;t.update(function(t){var r=this;return ng(this,i),t.length?(n.forEach(function(n){ng(this,r);for(var i=!1,e=0,o=t.length;e<o;e++){if(t[e].chatId===n.chatId){n.isSubscribed?t.splice(e,1,n):t.splice(e,1),i=!0;break}}!i&&n.isSubscribed&&t.push(n)}.bind(this)),t.sort(function(n,t){return ng(this,r),_(t.lastUpdate,n.lastUpdate)}.bind(this)),t):(n.sort(function(n,t){return ng(this,r),_(t.lastUpdate,n.lastUpdate)}.bind(this)),n)}.bind(this))}function jg(n,t){var i=this;t.update(function(t){var r=this;if(ng(this,i),!t.length)return n.isSubscribed&&t.push(n),t;for(var e=!1,o=0,u=t.length;o<u;o++){if(t[o].chatId===n.chatId){n.isSubscribed?t.splice(o,1,n):t.splice(o,1),e=!0;break}}return e&&(t=t.sort(function(n,t){return ng(this,r),_(t.lastUpdate,n.lastUpdate)}.bind(this))),!e&&n.isSubscribed&&(_(n.lastUpdate,t[0].lastUpdate)?t.unshift(n):t.push(n)),t}.bind(this))}function kg(n){jg(n,tg),jg(n,yg(n.type))}function Eg(n,t,i){var r=this;i.update(function(i){ng(this,r);for(var e=0,o=i.length;e<o;e++){var u=i[e];if(u.chatId===n){u.lastAccess=t;break}}return i}.bind(this))}function Ag(){var n=this;hg.subscribe(function(t){ng(this,n),Hg&&function(n){Gg.setItem("mql5_chats_type",n)}(t)}.bind(this)),rg.subscribe(function(t){var i;ng(this,n),Yg(),i=vg(t),F_.set(i)}.bind(this)),eg.subscribe(function(t){var i;ng(this,n),Yg(),i=vg(t),G_.set(i)}.bind(this)),Fi([tg,ig,rg,eg],function(t){ng(this,n);var i=[],r=X_(t,4),e=r[0],o=r[1],u=r[2],c=r[3];return e.length&&i.push(P),o.length&&i.push(L),u.length&&i.push(q),c.length&&i.push($),!~i.indexOf(ct(hg))&&Hg&&sg&&hg.set(P),Y_(),i}.bind(this)).subscribe(function(t){ng(this,n),lg.set(t)}.bind(this))}var Og="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function xg(n){var t,i,r,e,o,u,c,f="",a=0;for(n=function(n){n=n.replace(/\r\n/g,"\n");for(var t="",i=0;i<n.length;i++){var r=n.charCodeAt(i);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(n);a<n.length;)e=(t=n.charCodeAt(a++))>>2,o=(3&t)<<4|(i=n.charCodeAt(a++))>>4,u=(15&i)<<2|(r=n.charCodeAt(a++))>>6,c=63&r,isNaN(i)?u=c=64:isNaN(r)&&(c=64),f=f+Og.charAt(e)+Og.charAt(o)+Og.charAt(u)+Og.charAt(c);return f}function Cg(n){var t,i,r,e,o,u,c="",f=0;for(n=n.replace(/[^A-Za-z0-9+/=]/g,"");f<n.length;)t=Og.indexOf(n.charAt(f++))<<2|(e=Og.indexOf(n.charAt(f++)))>>4,i=(15&e)<<4|(o=Og.indexOf(n.charAt(f++)))>>2,r=(3&o)<<6|(u=Og.indexOf(n.charAt(f++))),c+=String.fromCharCode(t),64!==o&&(c+=String.fromCharCode(i)),64!==u&&(c+=String.fromCharCode(r));return c=function(n){var t="",i=0,r=0,e=0,o=0;for(;i<n.length;)(r=n.charCodeAt(i))<128?(t+=String.fromCharCode(r),i++):r>191&&r<224?(e=n.charCodeAt(i+1),t+=String.fromCharCode((31&r)<<6|63&e),i+=2):(e=n.charCodeAt(i+1),o=n.charCodeAt(i+2),t+=String.fromCharCode((15&r)<<12|(63&e)<<6|63&o),i+=3);return t}(c),c}function Ig(n){return Ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ig(n)}function Rg(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Mg,Ug,Bg,Dg,Ng,Pg,Lg,qg,$g,zg,Wg,Fg,Gg=window.globalStorage(),Hg=!1,Qg=!1,Vg=0;function Yg(){Qg=!0}function Jg(){Gg.removeItem("mql5_chats_tok"),Gg.removeItem("mql5_chats"),Gg.removeItem("mql5_chats_verify"),Gg.removeItem("mql5_chats_connect"),Gg.removeItem("mql5_chats_unread"),Gg.setItem("mql5_chats_tok",Mg+";"+Vg),tg.set([]),ig.set([]),rg.set([]),eg.set([]),gg(),Kg()}function Kg(){Gg.setItem("mql5_chats_verify",(new Date).getTime())}function Xg(n,t){if("mql5_chats_type"===n)if(t&&t.length){var i=parseInt(t,10);isNaN(i)?hg.set(0):hg.set(i)}else hg.set(0);else hg.set(0)}function Zg(n){var t=this,i=new RegExp("msg[0-9].mql5.(dev|com)");return n.forEach(function(n){Rg(this,t);var r=n.avatar;r&&(r=r.replace(i,Wg),n.avatar=r),n.date=new Date(n.date)}.bind(this)),n}function nS(n,i){if("mql5_chats"===n){if(!i||!i.length)return gg(),void Kg();var r=undefined;try{(i=Cg(i))&&(r=window.JSON.parse(i))}catch(e){d.error(t.Store,e)}if(!r||"object"!==Ig(r))return gg(),void Kg();r.group=r.group||[],r.channel=r.channel||[],Array.isArray(r.group)||(r.group=[]),Array.isArray(r.channel)||(r.channel=[]),d.info(t.Store,"received group: ".concat(r.group.length)),d.info(t.Store,"received channel: ".concat(r.channel.length)),r.group=Zg(r.group),r.channel=Zg(r.channel),rg.set(r.group),eg.set(r.channel),function(){var n=this,i=[];i.push(y_(undefined,gn,kn).then(function(t){ng(this,n),mg(t.chats,P,!0)}.bind(this))["catch"](function(i){ng(this,n),d.error(t.Store,i)}.bind(this))),i.push(d_(L,undefined,gn,kn).then(function(t){ng(this,n),mg(t.chats,L,!0)}.bind(this))["catch"](function(i){ng(this,n),d.error(t.Store,i)}.bind(this))),i.push(d_(q,_g(rg),_n,kn).then(function(t){ng(this,n),mg(t.chats,q,!0)}.bind(this))["catch"](function(i){ng(this,n),d.error(t.Store,i)}.bind(this))),i.push(d_($,_g(eg),_n,kn).then(function(t){ng(this,n),mg(t.chats,$,!0)}.bind(this))["catch"](function(i){ng(this,n),d.error(t.Store,i)}.bind(this))),Promise.allSettled(i).then(function(){ng(this,n),sg=!0}.bind(this))}(),function(){var n=this;Gg.getItem("mql5_chats_verify",function(i,r){var e=this;if(Rg(this,n),"mql5_chats_verify"===i)if(r&&r.length){var o=parseInt(r,10);isNaN(o)?Kg():(new Date).getTime()-o>36e5&&(d.info(t.Store,"Verify chats"),W_(q).then(function(n){Rg(this,e),wg(n,q)}.bind(this)),W_($).then(function(n){Rg(this,e),wg(n,$)}.bind(this)),Kg())}else Kg()}.bind(this))}()}}function tS(n,t){if("mql5_chats_tok"===n)if(t&&t.length){var i=t.split(";");if(2===i.length){var r=i[0],e=parseInt(i[1],10);r===Mg&&e===Vg?(Gg.getItem("mql5_chats_type",Xg),Gg.getItem("mql5_chats",nS)):Jg()}else Jg()}else Jg()}function iS(n,t){Hg||(Hg=!0,Mg=n,Vg=t,setInterval((function(){Qg&&function(){if(Gg&&Gg.supported){for(var n={group:[],channel:[]},t=ct(rg),i=ct(eg),r=0,e=0,o=t.length;e<o&&!(r>dg/2);e++)n.group.push(t[e]),r++;for(var u=0,c=i.length;u<c&&!(r>dg);u++)n.channel.push(i[u]),r++;var f=JSON.stringify(n);Gg.setItem("mql5_chats",xg(f)),Gg.setItem("mql5_chats_type",ct(hg)),Qg=!1}}()}),5e3),Gg.getItem("mql5_chats_tok",tS))}function rS(){Gg.setItem("mql5_chats_connect",(new Date).getTime())}function eS(n){var t=this;return new Promise(function(i,r){Rg(this,t),Gg&&Gg.supported?Gg.getItem(n,(function(t,r){i(t===n?r:"")})):r("Local storage is not supported")}.bind(this))}function oS(n,t){Gg&&Gg.supported&&Gg.setItem(n,t)}var uS,cS=!1,fS=48,aS=54,sS=512,lS=!1;function hS(n){var t=this;n&&(eS("chat_extended_logs").then(function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,t),1===parseInt(n)&&(lS=!0)}.bind(this)),"mode"in n&&"dev"===n.mode&&(lS=!0),"complaint_key"in n&&(Ug=n.complaint_key),"userIdHex"in n&&(Bg=n.userIdHex),"user_login"in n&&(Dg=n.user_login),"language"in n&&(Ng=n.language),"play_sounds"in n&&n.play_sounds,"access_level"in n&&n.access_level,"sig"in n&&n.sig,"friendly_hosts"in n&&(Pg=n.friendly_hosts),"readonly"in n&&(Lg=n.readonly),"isMobile"in n&&(cS=n.isMobile),"type"in n&&(qg=n.type,fS=($g=qg===En)?An:On,aS=$g?xn:Cn,sS=$g||cS?In:Rn),"token"in n&&(zg=n.token),"url"in n&&(Wg=n.url),"version"in n&&(Fg=n.version),"uniq"in n&&(uS=n.uniq))}var dS=null;function vS(n){var t=n.text,i=void 0===t?"":t,e=n.parentNode;if(dS&&yS(),e){(dS=document.createElement("div")).className="chat-window",$g&&dS.classList.add("chat-window_widget");var o=document.createElement("div");o.className="chat-error-window ui";var u='<div class="chat-error-window__content">';u+='<i class="icons-chat icons-chat_chat-big"></i>',u+='<div class="chat-error-window__text">'.concat(i,"</div>"),u+="</div>",o.innerHTML=u;var c=document.createElement("div");c.className="chat-error-window__close",c.setAttribute("title",r("close")),c.innerHTML='<i class="icons-chat icons-chat_close-gray"></i>',c.addEventListener("click",yS),dS.appendChild(o),dS.appendChild(c),e.appendChild(dS)}}function yS(){sb(),dS&&dS.parentNode&&(dS.parentNode.removeChild(dS),dS=null)}function pS(n){return pS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},pS(n)}function mS(n,t){return mS=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},mS(n,t)}function bS(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=gS(n);if(t){var e=gS(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return wS(this,i)}}function wS(n,t){if(t&&("object"===pS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _S(n)}function _S(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function gS(n){return gS=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},gS(n)}function SS(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function TS(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return jS(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return jS(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jS(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function kS(n,t,i){var r=n.slice();return r[7]=t[i],r}function ES(n){for(var t,i=n[2],r=[],e=0;e<i.length;e+=1)r[e]=OS(kS(n,i,e));return{c:function(){t=Rt("div");for(var n=0;n<r.length;n+=1)r[n].c();Pt(t,"class","chat-choice-type chat-choice-type_widget")},m:function(i,e){xt(i,t,e);for(var o=0;o<r.length;o+=1)r[o].m(t,null);n[6](t)},p:function(n,e){if(30&e){var o;for(i=n[2],o=0;o<i.length;o+=1){var u=kS(n,i,o);r[o]?r[o].p(u,e):(r[o]=OS(u),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},d:function(i){i&&Ct(t),It(r,i),n[6](null)}}}function AS(n){var t,i=n[4][n[7]].text+"";return{c:function(){t=Mt(i)},m:function(n,i){xt(n,t,i)},p:function(n,r){4&r&&i!==(i=n[4][n[7]].text+"")&&qt(t,i)},d:function(n){n&&Ct(t)}}}function OS(n){var t,i,r,e,o,u,c,f,a,s=!n[1]&&AS(n);function l(){return n[5](n[7])}return{c:function(){t=Rt("button"),i=Rt("i"),e=Ut(),s&&s.c(),o=Ut(),Pt(i,"class",r="icons-chat icons-chat_"+(n[3]===n[7]?n[4][n[7]].iconWidgetActive:n[4][n[7]].iconWidget)),Pt(t,"class",u="chat-choice-type__item"+(n[3]===n[7]?" chat-choice-type__item_active":"")),Pt(t,"title",c=n[4][n[7]].title)},m:function(n,r){xt(n,t,r),jt(t,i),jt(t,e),s&&s.m(t,null),jt(t,o),f||(a=Dt(t,"click",Nt(l)),f=!0)},p:function(e,f){n=e,12&f&&r!==(r="icons-chat icons-chat_"+(n[3]===n[7]?n[4][n[7]].iconWidgetActive:n[4][n[7]].iconWidget))&&Pt(i,"class",r),n[1]?s&&(s.d(1),s=null):s?s.p(n,f):((s=AS(n)).c(),s.m(t,o)),12&f&&u!==(u="chat-choice-type__item"+(n[3]===n[7]?" chat-choice-type__item_active":""))&&Pt(t,"class",u),4&f&&c!==(c=n[4][n[7]].title)&&Pt(t,"title",c)},d:function(n){n&&Ct(t),s&&s.d(),f=!1,a()}}}function xS(n){var t,i=n[2].length&&ES(n);return{c:function(){i&&i.c(),t=Bt()},m:function(n,r){i&&i.m(n,r),xt(n,t,r)},p:function(n,r){var e=TS(r,1)[0];n[2].length?i?i.p(n,e):((i=ES(n)).c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:Jn,o:Jn,d:function(n){i&&i.d(n),n&&Ct(t)}}}function CS(n,t,i){var e,o,u,c=this;ft(n,lg,function(n){return SS(this,c),i(2,e=n)}.bind(this)),ft(n,hg,function(n){return SS(this,c),i(3,o=n)}.bind(this));var f=[{icon:"flat-chats",iconWidget:"chats",iconWidgetActive:"chats-active",title:r("allChats"),text:r("allChatsShort")},{icon:"flat-personal-chats",iconWidget:"personal-chats",iconWidgetActive:"personal-chats-active",title:r("privateChats"),text:r("privateChatsShort")},{icon:"flat-group-chats",iconWidget:"group-chats",iconWidgetActive:"group-chats-active",title:r("groupChats"),text:r("groupChatsShort")},{icon:"flat-channels",iconWidget:"channels",iconWidgetActive:"channels-active",title:r("channels"),text:r("channels")}],a=!1;ii(function(){var n=this;SS(this,c),u&&window.ResizeObserver&&new ResizeObserver(function(){SS(this,n),i(1,a=u.offsetWidth<330)}.bind(this)).observe(u)}.bind(this));var s=function(n){SS(this,c),vt(hg,o=n,o)}.bind(this);return[u,a,e,o,f,s,function(n){var t=this;ui[n?"unshift":"push"](function(){SS(this,t),i(0,u=n)}.bind(this))}]}var IS=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&mS(n,t)}(i,n);var t=bS(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(_S(r=t.call(this)),n,CS,xS,rt,{}),r}return i}(Pi),RS=IS;function MS(n){return MS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},MS(n)}function US(n,t){return US=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},US(n,t)}function BS(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=PS(n);if(t){var e=PS(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return DS(this,i)}}function DS(n,t){if(t&&("object"===MS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return NS(n)}function NS(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function PS(n){return PS=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},PS(n)}function LS(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function qS(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return $S(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $S(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $S(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function zS(n,t,i){var r=n.slice();return r[4]=t[i],r}function WS(n){for(var t,i=n[0],r=[],e=0;e<i.length;e+=1)r[e]=FS(zS(n,i,e));return{c:function(){t=Rt("div");for(var n=0;n<r.length;n+=1)r[n].c();Pt(t,"class","chat-choice-type")},m:function(n,i){xt(n,t,i);for(var e=0;e<r.length;e+=1)r[e].m(t,null)},p:function(n,e){if(7&e){var o;for(i=n[0],o=0;o<i.length;o+=1){var u=zS(n,i,o);r[o]?r[o].p(u,e):(r[o]=FS(u),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},d:function(n){n&&Ct(t),It(r,n)}}}function FS(n){var t,i,r,e,o,u,c;function f(){return n[3](n[4])}return{c:function(){t=Rt("button"),Pt(i=Rt("i"),"class",r="icons-chat icons-chat_"+n[2][n[4]].icon),Pt(t,"class",e="chat-choice-type__item"+(n[1]===n[4]?" chat-choice-type__item_active":"")),Pt(t,"title",o=n[2][n[4]].title)},m:function(n,r){xt(n,t,r),jt(t,i),u||(c=Dt(t,"click",Nt(f)),u=!0)},p:function(u,c){n=u,1&c&&r!==(r="icons-chat icons-chat_"+n[2][n[4]].icon)&&Pt(i,"class",r),3&c&&e!==(e="chat-choice-type__item"+(n[1]===n[4]?" chat-choice-type__item_active":""))&&Pt(t,"class",e),1&c&&o!==(o=n[2][n[4]].title)&&Pt(t,"title",o)},d:function(n){n&&Ct(t),u=!1,c()}}}function GS(n){var t,i=n[0].length&&WS(n);return{c:function(){i&&i.c(),t=Bt()},m:function(n,r){i&&i.m(n,r),xt(n,t,r)},p:function(n,r){var e=qS(r,1)[0];n[0].length?i?i.p(n,e):((i=WS(n)).c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:Jn,o:Jn,d:function(n){i&&i.d(n),n&&Ct(t)}}}function HS(n,t,i){var e,o,u=this;ft(n,lg,function(n){return LS(this,u),i(0,e=n)}.bind(this)),ft(n,hg,function(n){return LS(this,u),i(1,o=n)}.bind(this));var c=[{icon:"flat-chats",title:r("allChats")},{icon:"flat-personal-chats",title:r("privateChats")},{icon:"flat-group-chats",title:r("groupChats")},{icon:"flat-channels",title:r("channels")}],f=function(n){LS(this,u),vt(hg,o=n,o)}.bind(this);return[e,o,c,f]}var QS=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&US(n,t)}(i,n);var t=BS(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(NS(r=t.call(this)),n,HS,GS,rt,{}),r}return i}(Pi),VS=QS;function YS(n){return YS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},YS(n)}function JS(n,t){return JS=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},JS(n,t)}function KS(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=nT(n);if(t){var e=nT(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return XS(this,i)}}function XS(n,t){if(t&&("object"===YS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ZS(n)}function ZS(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function nT(n){return nT=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},nT(n)}function tT(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function iT(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return rT(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return rT(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rT(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function eT(n){var t;return{c:function(){Pt(t=Rt("span"),"class","chat-line__read-mark")},m:function(i,r){xt(i,t,r),t.innerHTML=n[7]},p:function(n,i){128&i&&(t.innerHTML=n[7])},d:function(n){n&&Ct(t)}}}function oT(n){var t;return{c:function(){Pt(t=Rt("span"),"class","chat-line__unread"),Pt(t,"title",r("unreadMessages"))},m:function(n,i){xt(n,t,i)},p:Jn,d:function(n){n&&Ct(t)}}}function uT(n){var t,i,r,e,o,u,c,f,a,s,l,h,d,v,y,p,m,b,w,_,g=Vc({dateTime:n[0].date,type:"smart"})+"";function S(n,t){return n[1]?oT:n[2]?eT:void 0}r=new il({props:{data:n[0],size:fS}});var T=S(n),j=T&&T(n);return{c:function(){t=Rt("a"),i=Rt("span"),Mi(r.$$.fragment),e=Ut(),o=Rt("span"),u=Rt("span"),c=Rt("span"),f=Mt(n[5]),a=Ut(),s=Rt("span"),l=Mt(g),d=Ut(),v=Rt("span"),y=Ut(),j&&j.c(),Pt(i,"class","chat-line__avatar"),Pt(c,"class","chat-line__name"),Pt(s,"class","chat-line__date"),Pt(s,"title",h=n[0].dateText),Pt(u,"class","chat-line__header"),Pt(v,"class","chat-line__desc"),Pt(o,"class","chat-line__content"),Pt(t,"href",p=tb(n[0])),Pt(t,"class",m="chat-line"+(n[3]?" chat-line_active":"")+(n[1]||n[2]?" chat-line_marked":"")+($g?" chat-line_min":""))},m:function(h,p){xt(h,t,p),jt(t,i),Ui(r,i,null),jt(t,e),jt(t,o),jt(o,u),jt(u,c),jt(c,f),jt(u,a),jt(u,s),jt(s,l),jt(o,d),jt(o,v),v.innerHTML=n[6],jt(t,y),j&&j.m(t,null),b=!0,w||(_=Dt(t,"click",Nt(n[10])),w=!0)},p:function(n,i){var e=iT(i,1)[0],o={};1&e&&(o.data=n[0]),r.$set(o),(!b||32&e)&&qt(f,n[5]),(!b||1&e)&&g!==(g=Vc({dateTime:n[0].date,type:"smart"})+"")&&qt(l,g),(!b||1&e&&h!==(h=n[0].dateText))&&Pt(s,"title",h),(!b||64&e)&&(v.innerHTML=n[6]),T===(T=S(n))&&j?j.p(n,e):(j&&j.d(1),(j=T&&T(n))&&(j.c(),j.m(t,null))),(!b||1&e&&p!==(p=tb(n[0])))&&Pt(t,"href",p),(!b||14&e&&m!==(m="chat-line"+(n[3]?" chat-line_active":"")+(n[1]||n[2]?" chat-line_marked":"")+($g?" chat-line_min":"")))&&Pt(t,"class",m)},i:function(n){b||(Ei(r.$$.fragment,n),b=!0)},o:function(n){Ai(r.$$.fragment,n),b=!1},d:function(n){n&&Ct(t),Bi(r),j&&j.d(),w=!1,_()}}}function cT(n,t,i){var e,o,u=this,c=Jn,f=function(){var n=this;return tT(this,u),c(),c=ut(a,function(t){return tT(this,n),i(8,e=t)}.bind(this)),a}.bind(this);ft(n,yb,function(n){return tT(this,u),i(9,o=n)}.bind(this)),n.$$.on_destroy.push(function(){return tT(this,u),c()}.bind(this));var a,s=t.chat,l=s.type!==$&&s.topMessage&&s.topMessage.authorId===Bg,h=!!s.isSubscribed&&J_(s),d=o&&s.chatId===o.chatId,v=s.name,y=m(),p=b();function m(){var n="";return s.topMessage?(s.topMessage.recType===z?n=s.topMessage.data.text:s.topMessage.recType===W&&(n=s.topMessage.data.fileName),s.type===q&&(n=s.topMessage.authorId===Bg?"".concat(r("you"),": ").concat(n):"".concat(s.topMessage.authorName,": ").concat(n))):s.description&&(n=s.description),n}function b(){var n=_(s.lastUpdate,s.lastSeen)>0?"sent":"delivered";return'<i class="icons-chat icons-chat_'.concat(n,'"></i>')}s.type===L&&(v="",f(a=wf(s.authorId===Bg?s.extraId:s.authorId)));var w=function(){tT(this,u),JE(s.chatId,undefined)}.bind(this);return n.$$set=function(n){tT(this,u),"chat"in n&&i(0,s=n.chat)}.bind(this),n.$$.update=function(){tT(this,u),513&n.$$.dirty&&s&&(i(3,d=o&&s.chatId===o.chatId),i(6,y=m()),i(7,p=b()),i(1,h=!!s.isSubscribed&&J_(s)),i(2,l=s.type!==$&&s.topMessage&&s.topMessage.authorId===Bg)),259&n.$$.dirty&&(e?e.isDeleted?(df||vf||(bg(s.changeId),h&&Xw(s.chatId,s.lastUpdate)),i(5,v=r("deletedAccount"))):e.userName&&i(5,v=e.userName):i(5,v=s.name))}.bind(this),[s,h,l,d,a,v,y,p,e,o,w]}var fT=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&JS(n,t)}(i,n);var t=KS(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(ZS(r=t.call(this)),n,cT,uT,rt,{chat:0}),r}return i}(Pi),aT=fT;function sT(n){return sT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},sT(n)}function lT(n,t){return lT=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},lT(n,t)}function hT(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=yT(n);if(t){var e=yT(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return dT(this,i)}}function dT(n,t){if(t&&("object"===sT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vT(n)}function vT(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function yT(n){return yT=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},yT(n)}function pT(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return mT(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return mT(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mT(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function bT(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function wT(n,t,i){var r=n.slice();return r[11]=t[i],r}function _T(n){for(var t,i,r=this,e=[],o=new Map,u=n[0],c=function(n){return bT(this,r),n[11].chatId}.bind(this),f=0;f<u.length;f+=1){var a=wT(n,u,f),s=c(a);o.set(s,e[f]=ST(s,a))}return{c:function(){for(var n=0;n<e.length;n+=1)e[n].c();t=Bt()},m:function(n,r){for(var o=0;o<e.length;o+=1)e[o].m(n,r);xt(n,t,r),i=!0},p:function(n,i){1&i&&(u=n[0],ji(),e=Ii(e,i,c,1,n,u,o,t.parentNode,Ci,ST,t,wT),ki())},i:function(n){if(!i){for(var t=0;t<u.length;t+=1)Ei(e[t]);i=!0}},o:function(n){for(var t=0;t<e.length;t+=1)Ai(e[t]);i=!1},d:function(n){for(var i=0;i<e.length;i+=1)e[i].d(n);n&&Ct(t)}}}function gT(n){var t,i,r;return{c:function(){t=Rt("div"),i=Rt("i"),r=new Ht,Pt(i,"class","icons-chat icons-chat_chat-big"),r.a=null,Pt(t,"class","empty-chats-list")},m:function(e,o){xt(e,t,o),jt(t,i),r.m(n[5],t)},p:function(n,t){32&t&&r.p(n[5])},i:Jn,o:Jn,d:function(n){n&&Ct(t)}}}function ST(n,t){var i,r,e;return r=new aT({props:{chat:t[11]}}),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),e=!0},p:function(n,i){t=n;var e={};1&i&&(e.chat=t[11]),r.$set(e)},i:function(n){e||(Ei(r.$$.fragment,n),e=!0)},o:function(n){Ai(r.$$.fragment,n),e=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function TT(n){var t,i,r,e,o,u,c,f,a,s,l=[gT,_T],h=[];function d(n,t){return n[0].length?1:0}return o=d(n),u=h[o]=l[o](n),{c:function(){t=Rt("div"),i=Rt("div"),r=Ut(),e=Rt("div"),u.c(),Pt(i,"class","chat-panel__expand"),zt(i,"height",n[2]+"px"),Pt(e,"class","chat-panel__list"),zt(e,"transform","translate3d(0,"+n[4]+"px,0)"),Pt(t,"class",c="chat-panel"+($g?" chat-panel_widget":" chat-panel_standalone")+(n[6].length?" chat-panel_width-choice-type":""))},m:function(u,c){xt(u,t,c),jt(t,i),jt(t,r),jt(t,e),h[o].m(e,null),n[10](t),f=!0,a||(s=Dt(t,"scroll",nf(n[7],100,undefined)),a=!0)},p:function(n,r){var a=this,s=pT(r,1)[0];(!f||4&s)&&zt(i,"height",n[2]+"px");var v=o;(o=d(n))===v?h[o].p(n,s):(ji(),Ai(h[v],1,1,function(){bT(this,a),h[v]=null}.bind(this)),ki(),(u=h[o])?u.p(n,s):(u=h[o]=l[o](n)).c(),Ei(u,1),u.m(e,null)),(!f||16&s)&&zt(e,"transform","translate3d(0,"+n[4]+"px,0)"),(!f||64&s&&c!==(c="chat-panel"+($g?" chat-panel_widget":" chat-panel_standalone")+(n[6].length?" chat-panel_width-choice-type":"")))&&Pt(t,"class",c)},i:function(n){f||(Ei(u),f=!0)},o:function(n){Ai(u),f=!1},d:function(i){i&&Ct(t),h[o].d(),n[10](null),a=!1,s()}}}function jT(n,t,i){var e,o,u,c=this,f=Jn,a=function(){var n=this;return bT(this,c),f(),f=ut(s,function(t){return bT(this,n),i(8,e=t)}.bind(this)),s}.bind(this);ft(n,hg,function(n){return bT(this,c),i(9,o=n)}.bind(this)),ft(n,lg,function(n){return bT(this,c),i(6,u=n)}.bind(this)),n.$$.on_destroy.push(function(){return bT(this,c),f()}.bind(this));var s,l,h=0,d=[],v=0,y="";function p(){if(l){var n=$g?42:72,t=e.length;i(2,h=t*n);for(var r=l.scrollTop,u=l.offsetHeight,c=0,f=0,a=0,s=0;c<t;){if(f+n>r){s=Math.max(c-7,0),a=Math.max(f-7*n,0);break}f+=n,c++}for(;c<t&&(c++,!((f+=n)>r+u)););var y=Math.min(c+7,t);t&&t-y<7&&Sg(o),i(4,v=Math.ceil(a)),i(0,d=e.slice(s,y))}}return ii(function(){var n=this;return bT(this,c),window.addEventListener("resize",p),p(),function(){bT(this,n),window.removeEventListener("resize",p)}.bind(this)}.bind(this)),n.$$.update=function(){if(bT(this,c),514&n.$$.dirty&&o!==undefined&&l&&i(1,l.scrollTop=0,l),512&n.$$.dirty)switch(o){case L:a(i(3,s=ig));break;case q:a(i(3,s=rg));break;case $:a(i(3,s=eg));break;default:a(i(3,s=tg))}256&n.$$.dirty&&e&&p(),1&n.$$.dirty&&(d.length||i(5,y=$g?r("emptyChatsList","/".concat(Ng,"/users/").concat(Dg,"/messages")):r("emptyChatsListShort")))}.bind(this),[d,l,h,s,v,y,u,p,e,o,function(n){var t=this;ui[n?"unshift":"push"](function(){bT(this,t),i(1,l=n),i(9,o)}.bind(this))}]}var kT=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&lT(n,t)}(i,n);var t=hT(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(vT(r=t.call(this)),n,jT,TT,rt,{}),r}return i}(Pi),ET=kT;function AT(n){return AT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},AT(n)}function OT(n,t){return OT=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},OT(n,t)}function xT(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=RT(n);if(t){var e=RT(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return CT(this,i)}}function CT(n,t){if(t&&("object"===AT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return IT(n)}function IT(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function RT(n){return RT=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},RT(n)}function MT(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function UT(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return BT(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return BT(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BT(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function DT(n){var t,i,r,e,o,u,c,f,a,s=n[0].name+"";return r=new il({props:{data:n[0],size:NT}}),{c:function(){t=Rt("a"),i=Rt("span"),Mi(r.$$.fragment),e=Ut(),o=Rt("span"),u=Mt(s),Pt(i,"class","chat-search-result__avatar"),Pt(o,"class","chat-search-result__name"),Pt(t,"class","chat-search-result"),Pt(t,"href",n[1])},m:function(s,l){xt(s,t,l),jt(t,i),Ui(r,i,null),jt(t,e),jt(t,o),jt(o,u),c=!0,f||(a=[Dt(t,"click",Nt(n[2])),Dt(t,"click",n[3])],f=!0)},p:function(n,i){var e=UT(i,1)[0],o={};1&e&&(o.data=n[0]),r.$set(o),(!c||1&e)&&s!==(s=n[0].name+"")&&qt(u,s),(!c||2&e)&&Pt(t,"href",n[1])},i:function(n){c||(Ei(r.$$.fragment,n),c=!0)},o:function(n){Ai(r.$$.fragment,n),c=!1},d:function(n){n&&Ct(t),Bi(r),f=!1,tt(a)}}}var NT=25;function PT(n,t,i){var r,e=this,o=t.chat;return n.$$set=function(n){MT(this,e),"chat"in n&&i(0,o=n.chat)}.bind(this),n.$$.update=function(){MT(this,e),1&n.$$.dirty&&i(1,r=tb(o))}.bind(this),[o,r,function(){JE(o.chatId,undefined)},function(t){ei.call(this,n,t)}]}var LT=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&OT(n,t)}(i,n);var t=xT(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(IT(r=t.call(this)),n,PT,DT,rt,{chat:0}),r}return i}(Pi),qT=LT;function $T(n){return $T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$T(n)}function zT(n,t){return zT=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},zT(n,t)}function WT(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=HT(n);if(t){var e=HT(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return FT(this,i)}}function FT(n,t){if(t&&("object"===$T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return GT(n)}function GT(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function HT(n){return HT=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},HT(n)}function QT(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function VT(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return YT(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return YT(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YT(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function JT(n){var t,i,r,e,o,u,c,f,a,s=n[0].userName+"";return r=new ml({props:{data:n[0],size:KT}}),{c:function(){t=Rt("a"),i=Rt("span"),Mi(r.$$.fragment),e=Ut(),o=Rt("span"),u=Mt(s),Pt(i,"class","chat-search-result__avatar"),Pt(o,"class","chat-search-result__name"),Pt(t,"class","chat-search-result"),Pt(t,"href",n[1])},m:function(s,l){xt(s,t,l),jt(t,i),Ui(r,i,null),jt(t,e),jt(t,o),jt(o,u),c=!0,f||(a=[Dt(t,"click",Nt(n[2])),Dt(t,"click",n[4])],f=!0)},p:function(n,i){var e=VT(i,1)[0],o={};1&e&&(o.data=n[0]),r.$set(o),(!c||1&e)&&s!==(s=n[0].userName+"")&&qt(u,s),(!c||2&e)&&Pt(t,"href",n[1])},i:function(n){c||(Ei(r.$$.fragment,n),c=!0)},o:function(n){Ai(r.$$.fragment,n),c=!1},d:function(n){n&&Ct(t),Bi(r),f=!1,tt(a)}}}var KT=25;function XT(n,t,i){var r,e,o=this,u=t.user;return n.$$set=function(n){QT(this,o),"user"in n&&i(0,u=n.user)}.bind(this),n.$$.update=function(){QT(this,o),9&n.$$.dirty&&i(1,e="/".concat(Ng,"/users/").concat(null===i(3,r=u.userLogin)||void 0===r?void 0:r.toLowerCase()))}.bind(this),[u,e,function(){u.userId&&QE(u.userId,undefined)},r,function(t){ei.call(this,n,t)}]}var ZT=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&zT(n,t)}(i,n);var t=WT(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(GT(r=t.call(this)),n,XT,JT,rt,{user:0}),r}return i}(Pi),nj=ZT;function tj(n){return tj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},tj(n)}function ij(n,t){return ij=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},ij(n,t)}function rj(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=uj(n);if(t){var e=uj(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return ej(this,i)}}function ej(n,t){if(t&&("object"===tj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oj(n)}function oj(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function uj(n){return uj=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},uj(n)}function cj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function fj(n,t,i){var r=n.slice();return r[29]=t[i],r}function aj(n,t,i){var r=n.slice();return r[29]=t[i],r}function sj(n,t,i){var r=n.slice();return r[29]=t[i],r}function lj(n,t,i){var r=n.slice();return r[24]=t[i],r}function hj(n,t,i){var r=n.slice();return r[24]=t[i],r}function dj(n,t,i){var r=n.slice();return r[29]=t[i],r}function vj(n){var t,i,r,e,o=[pj,yj],u=[];function c(n,t){return n[17]?0:1}return i=c(n),r=u[i]=o[i](n),{c:function(){t=Rt("div"),r.c(),Pt(t,"class","chat-search-panel__result")},m:function(n,r){xt(n,t,r),u[i].m(t,null),e=!0},p:function(n,e){var f=this,a=i;(i=c(n))===a?u[i].p(n,e):(ji(),Ai(u[a],1,1,function(){cj(this,f),u[a]=null}.bind(this)),ki(),(r=u[i])?r.p(n,e):(r=u[i]=o[i](n)).c(),Ei(r,1),r.m(t,null))},i:function(n){e||(Ei(r),e=!0)},o:function(n){Ai(r),e=!1},d:function(n){n&&Ct(t),u[i].d()}}}function yj(n){var t,i,r,e,o,u,c,f=(n[11]||n[12])&&mj(n),a=n[16]&&bj(n),s=[_j,wj],l=[];function h(n,t){return"users"===n[9]?0:1}return e=h(n),o=l[e]=s[e](n),{c:function(){t=Rt("div"),f&&f.c(),i=Ut(),a&&a.c(),r=Ut(),o.c(),u=Bt(),Pt(t,"class","chat-search-panel__tabs")},m:function(n,o){xt(n,t,o),f&&f.m(t,null),jt(t,i),a&&a.m(t,null),xt(n,r,o),l[e].m(n,o),xt(n,u,o),c=!0},p:function(n,r){var c=this;n[11]||n[12]?f?f.p(n,r):((f=mj(n)).c(),f.m(t,i)):f&&(f.d(1),f=null),n[16]?a?a.p(n,r):((a=bj(n)).c(),a.m(t,null)):a&&(a.d(1),a=null);var d=e;(e=h(n))===d?l[e].p(n,r):(ji(),Ai(l[d],1,1,function(){cj(this,c),l[d]=null}.bind(this)),ki(),(o=l[e])?o.p(n,r):(o=l[e]=s[e](n)).c(),Ei(o,1),o.m(u.parentNode,u))},i:function(n){c||(Ei(o),c=!0)},o:function(n){Ai(o),c=!1},d:function(n){n&&Ct(t),f&&f.d(),a&&a.d(),n&&Ct(r),l[e].d(n),n&&Ct(u)}}}function pj(n){var t,i;return{c:function(){t=Rt("div"),(i=Rt("div")).textContent="".concat(r("foundEmpty")),Pt(i,"class","chat-search-panel__empty-result"),Pt(t,"class","chat-search-panel__errors")},m:function(n,r){xt(n,t,r),jt(t,i)},p:Jn,i:Jn,o:Jn,d:function(n){n&&Ct(t)}}}function mj(n){var t,i,e,o,u,c=r("users")+"";return{c:function(){t=Rt("div"),i=Mt(c),Pt(t,"class",e="chat-search-panel__tab"+("users"===n[9]?" chat-search-panel__tab_active":""))},m:function(r,e){xt(r,t,e),jt(t,i),o||(u=Dt(t,"click",n[22]),o=!0)},p:function(n,i){512&i[0]&&e!==(e="chat-search-panel__tab"+("users"===n[9]?" chat-search-panel__tab_active":""))&&Pt(t,"class",e)},d:function(n){n&&Ct(t),o=!1,u()}}}function bj(n){var t,i,e,o,u,c=r("chats")+"";return{c:function(){t=Rt("div"),i=Mt(c),Pt(t,"class",e="chat-search-panel__tab"+("chats"===n[9]?" chat-search-panel__tab_active":""))},m:function(r,e){xt(r,t,e),jt(t,i),o||(u=Dt(t,"click",n[23]),o=!0)},p:function(n,i){512&i[0]&&e!==(e="chat-search-panel__tab"+("chats"===n[9]?" chat-search-panel__tab_active":""))&&Pt(t,"class",e)},d:function(n){n&&Ct(t),o=!1,u()}}}function wj(n){var t,i,r,e,o=n[15]&&gj(n),u=n[13]&&Tj(n),c=n[14]&&kj(n);return{c:function(){t=Rt("div"),o&&o.c(),i=Ut(),u&&u.c(),r=Ut(),c&&c.c(),Pt(t,"class","chat-search-panel__tab-content")},m:function(n,f){xt(n,t,f),o&&o.m(t,null),jt(t,i),u&&u.m(t,null),jt(t,r),c&&c.m(t,null),e=!0},p:function(n,e){var f=this;n[15]?o?(o.p(n,e),32768&e[0]&&Ei(o,1)):((o=gj(n)).c(),Ei(o,1),o.m(t,i)):o&&(ji(),Ai(o,1,1,function(){cj(this,f),o=null}.bind(this)),ki()),n[13]?u?(u.p(n,e),8192&e[0]&&Ei(u,1)):((u=Tj(n)).c(),Ei(u,1),u.m(t,r)):u&&(ji(),Ai(u,1,1,function(){cj(this,f),u=null}.bind(this)),ki()),n[14]?c?(c.p(n,e),16384&e[0]&&Ei(c,1)):((c=kj(n)).c(),Ei(c,1),c.m(t,null)):c&&(ji(),Ai(c,1,1,function(){cj(this,f),c=null}.bind(this)),ki())},i:function(n){e||(Ei(o),Ei(u),Ei(c),e=!0)},o:function(n){Ai(o),Ai(u),Ai(c),e=!1},d:function(n){n&&Ct(t),o&&o.d(),u&&u.d(),c&&c.d()}}}function _j(n){var t,i,r,e,o=n[12]&&Aj(n),u=n[10]&&xj(n),c=n[11]&&Ij(n);return{c:function(){t=Rt("div"),o&&o.c(),i=Ut(),u&&u.c(),r=Ut(),c&&c.c(),Pt(t,"class","chat-search-panel__tab-content")},m:function(n,f){xt(n,t,f),o&&o.m(t,null),jt(t,i),u&&u.m(t,null),jt(t,r),c&&c.m(t,null),e=!0},p:function(n,e){var f=this;n[12]?o?(o.p(n,e),4096&e[0]&&Ei(o,1)):((o=Aj(n)).c(),Ei(o,1),o.m(t,i)):o&&(ji(),Ai(o,1,1,function(){cj(this,f),o=null}.bind(this)),ki()),n[10]?u?(u.p(n,e),1024&e[0]&&Ei(u,1)):((u=xj(n)).c(),Ei(u,1),u.m(t,r)):u&&(ji(),Ai(u,1,1,function(){cj(this,f),u=null}.bind(this)),ki()),n[11]?c?(c.p(n,e),2048&e[0]&&Ei(c,1)):((c=Ij(n)).c(),Ei(c,1),c.m(t,null)):c&&(ji(),Ai(c,1,1,function(){cj(this,f),c=null}.bind(this)),ki())},i:function(n){e||(Ei(o),Ei(u),Ei(c),e=!0)},o:function(n){Ai(o),Ai(u),Ai(c),e=!1},d:function(n){n&&Ct(t),o&&o.d(),u&&u.d(),c&&c.d()}}}function gj(n){for(var t,i,e,o,u=this,c=[],f=new Map,a=n[8],s=function(n){return cj(this,u),n[29].chatId}.bind(this),l=0;l<a.length;l+=1){var h=sj(n,a,l),d=s(h);f.set(d,c[l]=Sj(d,h))}return{c:function(){t=Rt("div"),(i=Rt("div")).textContent="".concat(r("subscribed"),":"),e=Ut();for(var n=0;n<c.length;n+=1)c[n].c();Pt(i,"class","chat-search-panel__title"),Pt(t,"class","chat-search-panel__subscribed")},m:function(n,r){xt(n,t,r),jt(t,i),jt(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,i){262400&i[0]&&(a=n[8],ji(),c=Ii(c,i,s,1,n,a,f,t,Ci,Sj,null,sj),ki())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)Ei(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Ai(c[t]);o=!1},d:function(n){n&&Ct(t);for(var i=0;i<c.length;i+=1)c[i].d()}}}function Sj(n,t){var i,r,e;return(r=new qT({props:{chat:t[29]}})).$on("click",t[18]),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),e=!0},p:function(n,i){t=n;var e={};256&i[0]&&(e.chat=t[29]),r.$set(e)},i:function(n){e||(Ei(r.$$.fragment,n),e=!0)},o:function(n){Ai(r.$$.fragment,n),e=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function Tj(n){for(var t,i,e,o,u=this,c=[],f=new Map,a=n[5],s=function(n){return cj(this,u),n[29].chatId}.bind(this),l=0;l<a.length;l+=1){var h=aj(n,a,l),d=s(h);f.set(d,c[l]=jj(d,h))}return{c:function(){t=Rt("div"),(i=Rt("div")).textContent="".concat(r("channels"),":"),e=Ut();for(var n=0;n<c.length;n+=1)c[n].c();Pt(i,"class","chat-search-panel__title"),Pt(t,"class","chat-search-panel__channels")},m:function(n,r){xt(n,t,r),jt(t,i),jt(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,i){262176&i[0]&&(a=n[5],ji(),c=Ii(c,i,s,1,n,a,f,t,Ci,jj,null,aj),ki())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)Ei(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Ai(c[t]);o=!1},d:function(n){n&&Ct(t);for(var i=0;i<c.length;i+=1)c[i].d()}}}function jj(n,t){var i,r,e;return(r=new qT({props:{chat:t[29]}})).$on("click",t[18]),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),e=!0},p:function(n,i){t=n;var e={};32&i[0]&&(e.chat=t[29]),r.$set(e)},i:function(n){e||(Ei(r.$$.fragment,n),e=!0)},o:function(n){Ai(r.$$.fragment,n),e=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function kj(n){for(var t,i,e,o,u=this,c=[],f=new Map,a=n[6],s=function(n){return cj(this,u),n[29].chatId}.bind(this),l=0;l<a.length;l+=1){var h=fj(n,a,l),d=s(h);f.set(d,c[l]=Ej(d,h))}return{c:function(){t=Rt("div"),(i=Rt("div")).textContent="".concat(r("groupChats"),":"),e=Ut();for(var n=0;n<c.length;n+=1)c[n].c();Pt(i,"class","chat-search-panel__title"),Pt(t,"class","chat-search-panel__group")},m:function(n,r){xt(n,t,r),jt(t,i),jt(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,i){262208&i[0]&&(a=n[6],ji(),c=Ii(c,i,s,1,n,a,f,t,Ci,Ej,null,fj),ki())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)Ei(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Ai(c[t]);o=!1},d:function(n){n&&Ct(t);for(var i=0;i<c.length;i+=1)c[i].d()}}}function Ej(n,t){var i,r,e;return(r=new qT({props:{chat:t[29]}})).$on("click",t[18]),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),e=!0},p:function(n,i){t=n;var e={};64&i[0]&&(e.chat=t[29]),r.$set(e)},i:function(n){e||(Ei(r.$$.fragment,n),e=!0)},o:function(n){Ai(r.$$.fragment,n),e=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function Aj(n){for(var t,i,e,o,u=this,c=[],f=new Map,a=n[7],s=function(n){return cj(this,u),n[29].chatId}.bind(this),l=0;l<a.length;l+=1){var h=dj(n,a,l),d=s(h);f.set(d,c[l]=Oj(d,h))}return{c:function(){t=Rt("div"),(i=Rt("div")).textContent="".concat(r("privateChats"),":"),e=Ut();for(var n=0;n<c.length;n+=1)c[n].c();Pt(i,"class","chat-search-panel__title"),Pt(t,"class","chat-search-panel__private")},m:function(n,r){xt(n,t,r),jt(t,i),jt(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,i){262272&i[0]&&(a=n[7],ji(),c=Ii(c,i,s,1,n,a,f,t,Ci,Oj,null,dj),ki())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)Ei(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Ai(c[t]);o=!1},d:function(n){n&&Ct(t);for(var i=0;i<c.length;i+=1)c[i].d()}}}function Oj(n,t){var i,r,e;return(r=new qT({props:{chat:t[29]}})).$on("click",t[18]),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),e=!0},p:function(n,i){t=n;var e={};128&i[0]&&(e.chat=t[29]),r.$set(e)},i:function(n){e||(Ei(r.$$.fragment,n),e=!0)},o:function(n){Ai(r.$$.fragment,n),e=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function xj(n){for(var t,i,e,o,u=this,c=[],f=new Map,a=n[3],s=function(n){return cj(this,u),n[24].userId}.bind(this),l=0;l<a.length;l+=1){var h=hj(n,a,l),d=s(h);f.set(d,c[l]=Cj(d,h))}return{c:function(){t=Rt("div"),(i=Rt("div")).textContent="".concat(r("friends"),":"),e=Ut();for(var n=0;n<c.length;n+=1)c[n].c();Pt(i,"class","chat-search-panel__title"),Pt(t,"class","chat-search-panel__friends")},m:function(n,r){xt(n,t,r),jt(t,i),jt(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,i){262152&i[0]&&(a=n[3],ji(),c=Ii(c,i,s,1,n,a,f,t,Ci,Cj,null,hj),ki())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)Ei(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Ai(c[t]);o=!1},d:function(n){n&&Ct(t);for(var i=0;i<c.length;i+=1)c[i].d()}}}function Cj(n,t){var i,r,e;return(r=new nj({props:{user:t[24]}})).$on("click",t[18]),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),e=!0},p:function(n,i){t=n;var e={};8&i[0]&&(e.user=t[24]),r.$set(e)},i:function(n){e||(Ei(r.$$.fragment,n),e=!0)},o:function(n){Ai(r.$$.fragment,n),e=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function Ij(n){for(var t,i,e,o,u=this,c=[],f=new Map,a=n[4],s=function(n){return cj(this,u),n[24].userId}.bind(this),l=0;l<a.length;l+=1){var h=lj(n,a,l),d=s(h);f.set(d,c[l]=Rj(d,h))}return{c:function(){t=Rt("div"),(i=Rt("div")).textContent="".concat(r("mql5Members"),":"),e=Ut();for(var n=0;n<c.length;n+=1)c[n].c();Pt(i,"class","chat-search-panel__title"),Pt(t,"class","chat-search-panel__users")},m:function(n,r){xt(n,t,r),jt(t,i),jt(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,i){262160&i[0]&&(a=n[4],ji(),c=Ii(c,i,s,1,n,a,f,t,Ci,Rj,null,lj),ki())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)Ei(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)Ai(c[t]);o=!1},d:function(n){n&&Ct(t);for(var i=0;i<c.length;i+=1)c[i].d()}}}function Rj(n,t){var i,r,e;return(r=new nj({props:{user:t[24]}})).$on("click",t[18]),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),e=!0},p:function(n,i){t=n;var e={};16&i[0]&&(e.user=t[24]),r.$set(e)},i:function(n){e||(Ei(r.$$.fragment,n),e=!0)},o:function(n){Ai(r.$$.fragment,n),e=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function Mj(n){var t,i,e,o,u,c,f,a,s,l,h,d,v=n[2]&&vj(n);return{c:function(){t=Rt("div"),i=Rt("div"),e=Rt("input"),o=Rt("i"),u=Ut(),c=Rt("div"),f=Rt("i"),a=Rt("i"),s=Ut(),v&&v.c(),Pt(e,"class","input"),Pt(e,"type","text"),Pt(e,"placeholder",r("searchUserPlaceholder")),Pt(o,"class","icons-chat icons-chat_search"),Pt(f,"class","icons-chat icons-chat_close"),Pt(a,"class","icons-chat icons-chat_close-active"),Pt(c,"title",r("close")),Pt(c,"class","chat-search-panel__close"),Pt(i,"class","chat-search-panel ui"),Pt(t,"class","chat-search-panel__container")},m:function(r,y){xt(r,t,y),jt(t,i),jt(i,e),n[19](e),$t(e,n[2]),jt(i,o),jt(i,u),jt(i,c),jt(c,f),jt(c,a),jt(t,s),v&&v.m(t,null),l=!0,h||(d=[Dt(e,"input",n[20]),Dt(e,"blur",n[21]),Dt(c,"click",n[18])],h=!0)},p:function(n,i){var r=this;4&i[0]&&e.value!==n[2]&&$t(e,n[2]),n[2]?v?(v.p(n,i),4&i[0]&&Ei(v,1)):((v=vj(n)).c(),Ei(v,1),v.m(t,null)):v&&(ji(),Ai(v,1,1,function(){cj(this,r),v=null}.bind(this)),ki())},i:function(n){l||(Ei(v),l=!0)},o:function(n){Ai(v),l=!1},d:function(i){i&&Ct(t),n[19](null),v&&v.d(),h=!1,tt(d)}}}function Uj(n,i,r){var e,o=this,u=i.showedSearch,c=void 0!==u&&u,f="",a=[],s=[],l=[],h=[],v=[],y=[],p="users",m=!1,b=!1,w=!1,_=!1,g=!1,S=!1,T=!1,j=!1;var k=function(){cj(this,o),f||r(0,c=!1)}.bind(this),E=function(){cj(this,o),r(9,p="users")}.bind(this),A=function(){cj(this,o),r(9,p="chats")}.bind(this);return n.$$set=function(n){cj(this,o),"showedSearch"in n&&r(0,c=n.showedSearch)}.bind(this),n.$$.update=function(){var i=this;cj(this,o),4&n.$$.dirty[0]&&(f.length>2?(R_(f,20).then(function(n){cj(this,i),r(4,s=n)}.bind(this))["catch"](function(n){cj(this,i),r(4,s=[]),d.error(t.User,n)}.bind(this)),Jw(f,20).then(function(n){cj(this,i),r(5,l=n.chats?n.chats:[])}.bind(this))["catch"](function(n){cj(this,i),r(5,l=[]),d.error(t.User,n)}.bind(this)),Jw(f,20,_n).then(function(n){cj(this,i),r(6,h=n.chats?n.chats:[])}.bind(this))["catch"](function(n){cj(this,i),r(6,h=[]),d.error(t.User,n)}.bind(this)),function(n,t){var i=this;return new Promise(function(r){var e=this;Nh(this,i),n=n.toLowerCase();var o,u=[],c=Lh(),f=ct(c);if(f.length)u=qh(n,t,f),r(u);else var a=c.subscribe(function(i){var c=this;Nh(this,e),clearTimeout(o),i.length>0?(u=qh(n,t,i),r(u),a&&a()):o=setTimeout(function(){Nh(this,c),r(u),a&&a()}.bind(this),5e3)}.bind(this))}.bind(this))}(f,20).then(function(n){cj(this,i),r(3,a=n)}.bind(this))):(r(3,a=[]),r(4,s=[]),r(5,l=[]),r(6,h=[]),r(7,v=[]),r(8,y=[]))),130552&n.$$.dirty[0]&&(r(10,m=!!a.length),r(11,b=!!s.length),r(12,w=!!v.length),r(13,_=!!l.length),r(14,g=!!h.length),r(15,S=!!y.length),r(16,T=_||g||S),r(17,j=!(m||b||w||T))),73216&n.$$.dirty[0]&&(m||b||w||"users"!==p?T||"chats"!==p||r(9,p="users"):r(9,p="chats")),3&n.$$.dirty[0]&&c&&e&&e.focus()}.bind(this),[c,e,f,a,s,l,h,v,y,p,m,b,w,_,g,S,T,j,function(){r(0,c=!1)},function(n){var t=this;ui[n?"unshift":"push"](function(){cj(this,t),r(1,e=n)}.bind(this))},function(){f=this.value,r(2,f)},k,E,A]}var Bj=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&ij(n,t)}(i,n);var t=rj(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(oj(r=t.call(this)),n,Uj,Mj,rt,{showedSearch:0},null,[-1,-1]),r}return i}(Pi),Dj=Bj;function Nj(n){return Nj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Nj(n)}function Pj(n,t){return Pj=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Pj(n,t)}function Lj(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=zj(n);if(t){var e=zj(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return qj(this,i)}}function qj(n,t){if(t&&("object"===Nj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $j(n)}function $j(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function zj(n){return zj=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},zj(n)}function Wj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Fj(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Gj(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Gj(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gj(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Hj(n){var t,i;return(t=new Gd({props:{chat:n[0]}})).$on("close",n[1]),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};1&Fj(i,1)[0]&&(r.chat=n[0]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Qj(n,t,i){var r=this,e=t.chat,o=function(){Wj(this,r),Kj()}.bind(this);return n.$$set=function(n){Wj(this,r),"chat"in n&&i(0,e=n.chat)}.bind(this),[e,o]}var Vj,Yj=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Pj(n,t)}(i,n);var t=Lj(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni($j(r=t.call(this)),n,Qj,Hj,rt,{chat:0}),r}return i}(Pi),Jj=Yj;function Kj(){Vj&&(Vj.$destroy(),Vj=undefined)}function Xj(n){return Xj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Xj(n)}function Zj(n,t){return Zj=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Zj(n,t)}function nk(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=rk(n);if(t){var e=rk(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return tk(this,i)}}function tk(n,t){if(t&&("object"===Xj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ik(n)}function ik(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function rk(n){return rk=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},rk(n)}function ek(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ok(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return uk(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return uk(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uk(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function ck(n,t,i){var r=n.slice();return r[7]=t[i],r}function fk(n){var t,i,e,o,u,c,f,a,s=r(n[7].key)+"";function l(){return n[3](n[7])}return{c:function(){t=Rt("div"),i=Rt("i"),e=Ut(),o=Mt(s),u=Ut(),Pt(i,"class","icons-chat icons-chat_"+n[7].icon),Pt(t,"class",c="chat-tabs__item"+(n[0].type===n[7].type?" chat-tabs__item_active":""))},m:function(n,r){xt(n,t,r),jt(t,i),jt(t,e),jt(t,o),jt(t,u),f||(a=Dt(t,"click",l),f=!0)},p:function(i,r){n=i,1&r&&c!==(c="chat-tabs__item"+(n[0].type===n[7].type?" chat-tabs__item_active":""))&&Pt(t,"class",c)},d:function(n){n&&Ct(t),f=!1,a()}}}function ak(n){for(var t,i,r,e,o,u,c=n[1],f=[],a=0;a<c.length;a+=1)f[a]=fk(ck(n,c,a));return(o=new Tp({props:{chat:n[0]}})).$on("close",n[4]),o.$on("submit",n[5]),{c:function(){t=Rt("div"),i=Rt("div");for(var n=0;n<f.length;n+=1)f[n].c();r=Ut(),e=Rt("div"),Mi(o.$$.fragment),Pt(i,"class","chat-tabs__list"),Pt(e,"class","chat-tabs__content"),Pt(t,"class","chat-tabs")},m:function(n,c){xt(n,t,c),jt(t,i);for(var a=0;a<f.length;a+=1)f[a].m(i,null);jt(t,r),jt(t,e),Ui(o,e,null),u=!0},p:function(n,t){var r=ok(t,1)[0];if(7&r){var e;for(c=n[1],e=0;e<c.length;e+=1){var u=ck(n,c,e);f[e]?f[e].p(u,r):(f[e]=fk(u),f[e].c(),f[e].m(i,null))}for(;e<f.length;e+=1)f[e].d(1);f.length=c.length}var a={};1&r&&(a.chat=n[0]),o.$set(a)},i:function(n){u||(Ei(o.$$.fragment,n),u=!0)},o:function(n){Ai(o.$$.fragment,n),u=!1},d:function(n){n&&Ct(t),It(f,n),Bi(o)}}}function sk(n,t,i){var r=this,e=t.chat,o=Object.assign({},e);o.type=e.type===q?$:q;var u=[{type:q,key:"createGroup",icon:"flat-group-chats"},{type:$,key:"createChannel",icon:"flat-channels"}];function c(n){if(n!==e.type){var t=Object.assign({},e);for(var r in o)o.hasOwnProperty(r)&&i(0,e[r]=o[r],e);o=t}}var f=function(n){ek(this,r),c(n.type)}.bind(this);return n.$$set=function(n){ek(this,r),"chat"in n&&i(0,e=n.chat)}.bind(this),[e,u,c,f,function(t){ei.call(this,n,t)},function(t){ei.call(this,n,t)}]}var lk=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Zj(n,t)}(i,n);var t=nk(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(ik(r=t.call(this)),n,sk,ak,rt,{chat:0}),r}return i}(Pi),hk=lk;function dk(n){return dk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},dk(n)}function vk(n,t){return vk=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},vk(n,t)}function yk(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=bk(n);if(t){var e=bk(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return pk(this,i)}}function pk(n,t){if(t&&("object"===dk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mk(n)}function mk(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function bk(n){return bk=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},bk(n)}function wk(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function _k(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return gk(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return gk(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gk(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Sk(n){kt(n,"svelte-1qi8yp0",".chat-create.svelte-1qi8yp0{overflow:auto;z-index:6;background:#fff;position:absolute;left:0;top:0;bottom:0;right:321px}@media(max-width: 1600px){.chat-create.svelte-1qi8yp0{right:241px}}@media(max-width: 1000px){.chat-create.svelte-1qi8yp0{right:0}}.chat-create__close.svelte-1qi8yp0{position:absolute;right:11px;top:4px;background:0;border:0;padding:0}.chat-create__close.svelte-1qi8yp0:hover{background:0;opacity:0.8}")}function Tk(n){var t,i,e,o,u,c,f,a;return(u=new hk({props:{chat:n[0]}})).$on("close",n[1]),u.$on("submit",n[2]),{c:function(){t=Rt("div"),i=Rt("button"),e=Rt("i"),o=Ut(),Mi(u.$$.fragment),Pt(e,"class","icons-chat icons-chat_close-gray"),Pt(i,"class","chat-create__close button svelte-1qi8yp0"),Pt(i,"title",r("close")),Pt(t,"class","chat-create ui svelte-1qi8yp0")},m:function(r,s){xt(r,t,s),jt(t,i),jt(i,e),jt(t,o),Ui(u,t,null),c=!0,f||(a=Dt(i,"click",Nt(n[1])),f=!0)},p:function(n,t){var i={};1&_k(t,1)[0]&&(i.chat=n[0]),u.$set(i)},i:function(n){c||(Ei(u.$$.fragment,n),c=!0)},o:function(n){Ai(u.$$.fragment,n),c=!1},d:function(n){n&&Ct(t),Bi(u),f=!1,a()}}}function jk(n,i,e){var o=this,u=ri(),c=i.selectedType,f=i.chat,a=void 0===f?{type:c,isPublic:0,isLimited:!1,name:"",description:"",links:"",inviteLink:"",language:pn[Ng],avatar:"",avatarToUpload:undefined,avatarIsPresent:!1,errorInviteLink:undefined,errorName:!1,errorDescription:!1,errorCommon:"",avatarError:!1}:f,s=function(){wk(this,o),u("close")}.bind(this);function l(n){var t=this;a.type===$?window.fz&&window.fz("event",{name:"MQL5+Chat+Channel+New",unit:"Type",value:a.isPublic?"public":"private"}):a.type===q&&window.fz&&window.fz("event",{name:"MQL5+Chat+Group+New",unit:"Type",value:a.isPublic?"public":"private"}),s(),JE(n,function(n){wk(this,t),function(n){Kj(),Vj=new Jj({target:document.body,props:{chat:n}})}(n)}.bind(this))}return n.$$set=function(n){wk(this,o),"selectedType"in n&&e(3,c=n.selectedType),"chat"in n&&e(0,a=n.chat)}.bind(this),[a,s,function(){var n=this;e(0,a.errorCommon="",a),w_(a).then(function(i){var r=this;wk(this,n),a.avatarIsPresent&&a.avatarToUpload?g_(a.avatarToUpload,i).then(function(){wk(this,r),l(i)}.bind(this))["catch"](function(n){wk(this,r),e(0,a.avatarError=!0,a),d.error(t.User,n,"Upload avatar")}.bind(this)):l(i)}.bind(this))["catch"](function(i){wk(this,n),d.error(t.User,i,"Create chat"),e(0,i===N.Cn?a.errorInviteLink=r("inviteLinkExists"):a.errorCommon=i,a)}.bind(this))},c]}var kk=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&vk(n,t)}(i,n);var t=yk(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(mk(r=t.call(this)),n,jk,Tk,rt,{selectedType:3,chat:0},Sk),r}return i}(Pi),Ek=kk;function Ak(n){return Ak="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ak(n)}function Ok(n,t){return Ok=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Ok(n,t)}function xk(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Rk(n);if(t){var e=Rk(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Ck(this,i)}}function Ck(n,t){if(t&&("object"===Ak(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ik(n)}function Ik(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Rk(n){return Rk=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Rk(n)}function Mk(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Uk(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Bk(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Bk(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bk(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Dk(n){var t,i;return(t=new Ek({props:{selectedType:n[2]}})).$on("close",n[6]),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};4&i&&(r.selectedType=n[2]),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Nk(n){var t,i,e,o,u,c,f,a,s,l,h,d,v,y,p=n[1]&&Dk(n);return{c:function(){t=Rt("div"),i=Rt("button"),e=Rt("i"),o=Ut(),u=Rt("button"),c=Rt("i"),f=Ut(),a=Rt("button"),s=Rt("i"),l=Ut(),p&&p.c(),h=Bt(),Pt(e,"class","icons-chat icons-chat_search"),Pt(i,"class","chat-tools-panel__button"),Pt(i,"title",r("search")),Pt(c,"class","icons-chat icons-chat_add-group-chat"),Pt(u,"class","chat-tools-panel__button"),Pt(u,"title",r("createGroup")),Pt(s,"class","icons-chat icons-chat_add-channel"),Pt(a,"class","chat-tools-panel__button"),Pt(a,"title",r("createChannel")),Pt(t,"class","chat-tools-panel")},m:function(r,m){xt(r,t,m),jt(t,i),jt(i,e),jt(t,o),jt(t,u),jt(u,c),jt(t,f),jt(t,a),jt(a,s),xt(r,l,m),p&&p.m(r,m),xt(r,h,m),d=!0,v||(y=[Dt(i,"click",Nt(n[3])),Dt(u,"click",Nt(n[4])),Dt(a,"click",Nt(n[5]))],v=!0)},p:function(n,t){var i=this,r=Uk(t,1)[0];n[1]?p?(p.p(n,r),2&r&&Ei(p,1)):((p=Dk(n)).c(),Ei(p,1),p.m(h.parentNode,h)):p&&(ji(),Ai(p,1,1,function(){Mk(this,i),p=null}.bind(this)),ki())},i:function(n){d||(Ei(p),d=!0)},o:function(n){Ai(p),d=!1},d:function(n){n&&Ct(t),n&&Ct(l),p&&p.d(n),n&&Ct(h),v=!1,tt(y)}}}function Pk(n,t,i){var r=this,e=t.showedSearch,o=void 0!==e&&e,u=t.showedCreate,c=void 0!==u&&u,f=q,a=function(){Mk(this,r),i(0,o=!0)}.bind(this),s=function(){Mk(this,r),i(2,f=q),i(1,c=!0)}.bind(this),l=function(){Mk(this,r),i(2,f=$),i(1,c=!0)}.bind(this),h=function(){Mk(this,r),i(1,c=!1)}.bind(this);return n.$$set=function(n){Mk(this,r),"showedSearch"in n&&i(0,o=n.showedSearch),"showedCreate"in n&&i(1,c=n.showedCreate)}.bind(this),[o,c,f,a,s,l,h]}var Lk=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Ok(n,t)}(i,n);var t=xk(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(Ik(r=t.call(this)),n,Pk,Nk,rt,{showedSearch:0,showedCreate:1}),r}return i}(Pi),qk=Lk;function $k(n){return $k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$k(n)}function zk(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Wk(n,t){return Wk=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},Wk(n,t)}function Fk(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Qk(n);if(t){var e=Qk(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Gk(this,i)}}function Gk(n,t){if(t&&("object"===$k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hk(n)}function Hk(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Qk(n){return Qk=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Qk(n)}function Vk(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Yk(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Yk(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yk(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Jk(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Kk(n){var t,i,r,e=this;function o(t){n[6](t)}var u={};return void 0!==n[0]&&(u.showedSearch=n[0]),t=new Dj({props:u}),ui.push(function(){return Jk(this,e),Ri(t,"showedSearch",o)}.bind(this)),{c:function(){Mi(t.$$.fragment)},m:function(n,i){Ui(t,n,i),r=!0},p:function(n,r){var e=this,o={};!i&&1&r&&(i=!0,o.showedSearch=n[0],vi(function(){return Jk(this,e),i=!1}.bind(this))),t.$set(o)},i:function(n){r||(Ei(t.$$.fragment,n),r=!0)},o:function(n){Ai(t.$$.fragment,n),r=!1},d:function(n){Bi(t,n)}}}function Xk(n){var t,i;return t=new VS({}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function Zk(n){var t,i;return t=new RS({}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function nE(n){var t,i,r,e,o,u,c,f=!$g&&function(n){var t,i,r,e,o,u,c=this;function f(t){n[4](t)}function a(t){n[5](t)}var s={};void 0!==n[0]&&(s.showedSearch=n[0]),void 0!==n[1]&&(s.showedCreate=n[1]),t=new qk({props:s}),ui.push(function(){return Jk(this,c),Ri(t,"showedSearch",f)}.bind(this)),ui.push(function(){return Jk(this,c),Ri(t,"showedCreate",a)}.bind(this));var l=n[0]&&Kk(n);return{c:function(){Mi(t.$$.fragment),e=Ut(),l&&l.c(),o=Bt()},m:function(n,i){Ui(t,n,i),xt(n,e,i),l&&l.m(n,i),xt(n,o,i),u=!0},p:function(n,e){var u=this,c={};!i&&1&e&&(i=!0,c.showedSearch=n[0],vi(function(){return Jk(this,u),i=!1}.bind(this))),!r&&2&e&&(r=!0,c.showedCreate=n[1],vi(function(){return Jk(this,u),r=!1}.bind(this))),t.$set(c),n[0]?l?(l.p(n,e),1&e&&Ei(l,1)):((l=Kk(n)).c(),Ei(l,1),l.m(o.parentNode,o)):l&&(ji(),Ai(l,1,1,function(){Jk(this,u),l=null}.bind(this)),ki())},i:function(n){u||(Ei(t.$$.fragment,n),Ei(l),u=!0)},o:function(n){Ai(t.$$.fragment,n),Ai(l),u=!1},d:function(n){Bi(t,n),n&&Ct(e),l&&l.d(n),n&&Ct(o)}}}(n);i=new ET({});var a=[Zk,Xk],s=[];return o=s[e=$g?0:1]=a[e](n),{c:function(){f&&f.c(),t=Ut(),Mi(i.$$.fragment),r=Ut(),o.c(),u=Bt()},m:function(n,o){f&&f.m(n,o),xt(n,t,o),Ui(i,n,o),xt(n,r,o),s[e].m(n,o),xt(n,u,o),c=!0},p:function(n,t){var i=Vk(t,1)[0];$g||f.p(n,i)},i:function(n){c||(Ei(f),Ei(i.$$.fragment,n),Ei(o),c=!0)},o:function(n){Ai(f),Ai(i.$$.fragment,n),Ai(o),c=!1},d:function(n){f&&f.d(n),n&&Ct(t),Bi(i,n),n&&Ct(r),s[e].d(n),n&&Ct(u)}}}function tE(n,t,i){var r=!1,e=!1;return[r,e,function(){i(0,r=!1)},function(){i(1,e=!1)},function(n){i(0,r=n)},function(n){i(1,e=n)},function(n){i(0,r=n)}]}var iE,rE,eE,oE=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&Wk(n,t)}(o,n);var t,i,r,e=Fk(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Ni(Hk(t=e.call(this)),n,tE,nE,rt,{closeSearch:2,closeCreate:3}),t}return t=o,(i=[{key:"closeSearch",get:function(){return this.$$.ctx[2]}},{key:"closeCreate",get:function(){return this.$$.ctx[3]}}])&&zk(t.prototype,i),r&&zk(t,r),o}(Pi),uE=oE;function cE(n){n&&(!function(){if(!iE)return;iE.$destroy(),iE=undefined}(),iE=new uE({target:n}))}function fE(n){return fE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fE(n)}function aE(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var sE,lE,hE=!1,dE=!1;function vE(n){n&&n.preventDefault&&n.preventDefault(),dE?yE():_E()}function yE(){ME(),AE&&(AE.classList.add("hidden"),dE=!1,rE&&rE.classList.remove("link-notify_opened"),eE&&(eE.removeEventListener("click",vE),eE.classList.remove("link-notify_opened-mobile")))}var pE={};function mE(n,t){vb&&vb.resizeList(),(pE=pE||{}).width=n,pE.height=t,oS("chat",JSON.stringify(pE))}function bE(n){if(rE&&$g){Aw((function(t){t.error,t.result;n&&n(),cE(o)}));var t=pE.height,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e=document.body.querySelector(".cover .head");e&&(i-=e.clientHeight),t>i&&(t=i);var o=window.createElement(document.body,"div",{className:"chat-widget"});if(UE(o),o.style.width=pE.width+"px",o.style.height=t+"px",e){var u=window.getOffsetSum(e);u.top>5&&(o.style.top=u.top+41+"px")}var c=window.createElement(o,"div",{className:"chat-widget-footer"}),f=window.createElement(c,"div",{className:"chatWidgetError",id:"chatWidgetError"});BE(window.createElement(f,"div")),window.createElement(c,"a",{className:"bottomButton expandIco",href:"/"+Ng+"/users/"+Dg+"/messages",target:"_blank",title:r("expandWindow")}),function(n,t,i,r,e){var o=0,u=0,c=function(){for(var t=window.createElement(n,"DIV",{className:"resizeGrip"}),i=0;i<6;i++)window.createElement(t,"DIV");return t}();function f(r){r.preventDefault&&r.preventDefault(),r.clientX>0&&(o=Math.max(t,n.offsetLeft+n.offsetWidth-r.clientX),n.style.width=o+"px",e&&e(o)),r.clientY-document.body.offsetTop<window.innerHeight&&(u=Math.max(i,r.clientY-n.offsetTop),n.style.height=u+"px")}function a(n){n.preventDefault&&n.preventDefault(),window.removeEventListener("mousemove",f,!1),window.removeEventListener("mouseup",a,!1),r&&0!==o&&0!==u&&r(o,u),window.setCursor("auto")}c.addEventListener("mousedown",(function(n){n.preventDefault&&n.preventDefault(),window.addEventListener("mousemove",f,!1),window.addEventListener("mouseup",a,!1),window.setCursor("ne-resize")}),!1)}(o,240,240,mE,(function(n){}))}}function wE(){window.SearchBoxContainer&&window.SearchBoxContainer.Hide(undefined,!0),AE&&AE.classList.remove("hidden"),dE=!0,rE&&rE.classList.add("link-notify_opened"),eE&&(eE.addEventListener("click",vE),eE.classList.add("link-notify_opened-mobile"))}function _E(n){var t=this;AE?(wE(),n&&n()):gE(function(){aE(this,t),bE((function(){Tw||(AE.innerHTML='<div class="not-support">Your browser is not supported</div>'),wE(),n&&n()}))}.bind(this))}function gE(n){hE?setTimeout(n,100):(SE(),function(n){var i=this;new Promise(function(n){var r=this;aE(this,i),eS("chat").then(function(i){aE(this,r);try{(pE=JSON.parse(i))&&"object"===fE(pE)||(oS("chat","{}"),pE={})}catch(e){d.error(t.System,e),oS("chat","{}"),pE={}}n()}.bind(this))["catch"](function(i){aE(this,r),d.error(t.System,i),oS("chat","{}"),pE={},n()}.bind(this))}.bind(this)).then(function(){aE(this,i),pE.width=pE.width||400;var t=window.getWindowSize();pE.height=pE.height||Math.max(t.height/2-(t.height/2%54-30)|0,354),n&&n()}.bind(this))}(n),LE(),rE&&$g&&(rE.onclick=function(n){n.preventDefault(),vE()}),hE=!0)}function SE(){Y_(),PE(),x({commandType:D.R,callback:Y_})}function TE(){var n=this;rE=document.getElementById("notifyMessages"),eE=document.getElementById("notifyMessagesMobile"),function(){var n=this;eS("mql5_chats_unread").then(function(t){Q_(this,n);var i=parseInt(t,10)||0;V_.set(i)}.bind(this))["catch"](function(i){Q_(this,n),d.error(t.System,i,"Unread")}.bind(this))}(),function(){var n=this;return new Promise(function(t){var i=this;Rg(this,n),Gg.getItem("mql5_chats_connect",function(n,r){Rg(this,i),"mql5_chats_connect"===n&&t(parseInt(r,10)||0)}.bind(this))}.bind(this))}().then(function(t){var i=this;if(aE(this,n),rE&&(rE.onclick=function(n){var t=this;n.preventDefault(),$E(function(){aE(this,t),gE(vE)}.bind(this))}),t){var r=6e4,e=(new Date).getTime()-t;e<r?sE=setTimeout(function(){var n=this;if(aE(this,i),"visible"===document.visibilityState)return jE(),void $E(SE);lE=setInterval(function(){var t=this;aE(this,n),"visible"===document.visibilityState&&(jE(),$E(function(){aE(this,t),Y_()}.bind(this)))}.bind(this),r)}.bind(this),r-e):$E(SE)}else $E(SE)}.bind(this))}function jE(){clearInterval(lE),clearTimeout(sE)}function kE(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function EE(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var AE,OE=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.lastNotified=0,this.storeKey="mql5_chats_last-notified";try{window.Audio&&(this.soundNewMessage=new Audio("https://c.mql5.com/i/message/new_message_click2.mp3"))}catch(i){d.error(t.System,i,"Sound")}}var i,r,e;return i=n,r=[{key:"getLastNotified",value:function(){var n=this;return new Promise(function(t){var i=this;kE(this,n),eS(this.storeKey).then(function(n){if(kE(this,i),n!==undefined){var r=0;null!==n&&(r=parseInt(n,10)),r>this.lastNotified&&(this.lastNotified=r),t(this.lastNotified)}else t(this.lastNotified)}.bind(this))}.bind(this))}},{key:"setLastNotified",value:function(n){oS(this.storeKey,n+""),this.lastNotified=n}},{key:"newMessage",value:function(n){var i=this;this.soundNewMessage&&this.getLastNotified().then(function(r){var e,o=this;if(kE(this,i),(!0===window.isWindowActive||window.isLastActiveWindow())&&r<n){try{var u=null===(e=this.soundNewMessage)||void 0===e?void 0:e.play();u!==undefined&&u.then(function(){kE(this,o)}.bind(this))["catch"](function(n){kE(this,o),d.error(t.System,n,"Sound")}.bind(this))}catch(c){d.error(t.System,c,"Sound")}this.setLastNotified(n)}}.bind(this))}}],r&&EE(i.prototype,r),e&&EE(i,e),n}();function xE(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var CE,IE=null,RE=!1;function ME(){yS(),iE&&iE.closeCreate(),wb()}function UE(n){AE=n}function BE(n){n}function DE(){window.HotKeys.Add(27,(function(){1!==Qe()&&1!==Qe()&&(ME(),bb(),wb(),iE&&iE.closeSearch(),$g&&yE())})),window.HotKeys.Add(113,(function(){$g&&vE()}))}function NE(n,i){var r=this;if(!n&&i)if(i.isDeleted){bg(i.chatId);var e=mb();e&&e.chatId===i.chatId&&bb()}else D_(i.chatId).then(function(n){xE(this,r),n&&(pb(n),kg(n))}.bind(this))["catch"](function(n){xE(this,r),d.error(t.System,n,"Main")}.bind(this))}function PE(){x({commandType:D.R,callback:function(n,i){if(n)d.error(t.System,n,"Main");else if(i){var r=i.message;r.authorId!==Bg&&CE&&CE.newMessage(r.date.getTime())}}})}function LE(){var n=this;CE=new OE,Ag(),iS(Dg,Fg),DE(),x({commandType:D.I,isDefault:!0,callback:NE}),x({commandType:D.B,isDefault:!0,callback:function(i,r){var e=this;xE(this,n),r&&D_(r.chatId).then(function(n){xE(this,e),n&&kg(n)}.bind(this))["catch"](function(n){xE(this,e),d.error(t.System,n,"Main")}.bind(this))}.bind(this)}),x({commandType:D.M,isDefault:!0,callback:function(i,r){xE(this,n),i?d.error(t.System,i,"Main"):r&&(r.isDeleted&&bg(r.chatId),r.permission&fn.qn||function(n){var t=ct(yb);t&&n===t.chatId&&wb()}(r.chatId),NE(i,r))}.bind(this)}),x({commandType:D.R,callback:function(n,i){var r=this;n?d.log(n,null,Tn):i&&D_(i.chatId).then(function(n){var e=this;if(xE(this,r),n){pb(n),kg(n);var o=mb();o&&o.chatId===i.chatId&&n.lastAccess!==n.lastUpdate&&Xw(n.chatId,n.lastUpdate).then(function(){xE(this,e),function(n,t){Eg(n.chatId,t,tg),Eg(n.chatId,t,yg(n.type))}(o,n.lastUpdate)}.bind(this))["catch"](function(n){xE(this,e),d.error(t.System,n,"Main")}.bind(this))}}.bind(this))["catch"](function(n){xE(this,r),d.error(t.System,n,"Main")}.bind(this))}}),x({commandType:D.R,callback:zb})}function qE(){var n=this;if(zg&&Wg)return function(n){var t=this,i=n.token;return new Promise(function(n,r){var e=this;yw(this,t),window.WebSocket&&(Tw=!0),Tw?(i&&(mw=i),x({commandType:"first-connect",isDefault:!0,callback:function(t){var i=this;yw(this,e),t?C({commandType:"error"}).then(function(n){yw(this,i),n.run(t)}.bind(this),function(){yw(this,i)}.bind(this)):(jw=!0,n())}.bind(this)}),kw()):r("WebSocket is not supported by this browser.")}.bind(this))}({token:zg,url:Wg,login:Dg}).then(function(){xE(this,n),RE=!0,rS()}.bind(this))["catch"](function(i){var r=this;xE(this,n),d.error(t.System,i,"Main"),C({commandType:"error"}).then(function(n){xE(this,r),n.run(i||"Connection error",!0)}.bind(this))["catch"](function(n){xE(this,r),d.error(t.System,n,"Main")}.bind(this))}.bind(this));d.error(t.System,"Connection error","Main")}function $E(n){var t=this;if(RE)setTimeout(n,100);else{var i=IE;IE=i?function(){i(),n&&setTimeout(n,100)}:n,qE().then(function(){xE(this,t),IE&&(IE(),IE=null)}.bind(this))}}function zE(){return pn[Ng]}function WE(){vS({text:r("chatNotFound","javascript:void(false);","window.chatWidget.closeAllPopups();","button button_small button_blue"),parentNode:AE})}function FE(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function GE(n){var i=this,e=n.userId,o=n.showButton,u=void 0===o||o,c=n.key,f=void 0===c?"friendAddToChatNote":c,a=n.keyInfo,s=void 0===a?null:a;m_([e]).then(function(n){if(FE(this,i),n&&n.length){var t=n[0],e=Vv(t.userName||t.userLogin),o='<a href="/'.concat(Ng,"/users/").concat(t.userLogin,'" target="_blank">').concat(e,"</a>"),c='<div class="chat-error-window__text">'.concat(r(s||f,o),"</div>");u&&(c+='<a href="/'.concat(Ng,"/users/").concat(t.userLogin,'" target="_blank" class="button button_small button_blue">\n                ').concat(r("friendAddToChat"),"\n                </a>")),vS({text:c,parentNode:AE})}}.bind(this))["catch"](function(n){FE(this,i),vS({text:'<div class="chat-error-window__text">'.concat(r(f),"</div>"),parentNode:AE}),d.error(t.System,n)}.bind(this))}function HE(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function QE(n,i){var r=this;"number"==typeof n&&(n=k(n)),ME(),w_({type:L,isPublic:0,name:"",description:"",links:"",inviteLink:"",language:0,userId:n}).then(function(n){var e=this;HE(this,r),D_(n).then(function(n){HE(this,e),n&&(parseInt(n.lastAccess,16)||window.fz&&window.fz("track","MQL5+Chat+New"),pb(n),kg(n),KE(n),i&&i())}.bind(this))["catch"](function(i){HE(this,e),d.error(t.User,i,"Open"),bg(n),WE()}.bind(this))}.bind(this))["catch"](function(i){var e=this;if(HE(this,r),i===N.Rn){var o=j(n)-1;C_(jn,1,k(o)).then(function(t){HE(this,e),!i&&t&&t.length&&t[0].userId===n?GE({userId:n,showButton:!1,key:"friendWaitingPair",keyInfo:"friendWaitingPairWithName"}):GE({userId:n,key:"errorUserNonChatablePrivacyFriends",keyInfo:"privacyOnlyFriendsWithName"})}.bind(this))["catch"](function(n){HE(this,e),d.error(t.User,n,"Open")}.bind(this))}else d.error(t.User,i,"Open")}.bind(this))}function VE(n,t){cS&&$g?window.doPost(null,"/".concat(Ng,"/users/").concat(Dg,"/messages"),null,{user:n}):($g&&setTimeout((function(){var n=this;_E(function(){HE(this,n),AE&&AE.scrollIntoView(!1)}.bind(this))}),50),setTimeout((function(){if(QE(t),window.history){var n=window.location;n=n.origin+n.pathname,window.history.pushState({},document.title,n)}}),52))}function YE(n,i){var r=this;n&&(ME(),/^[0-9a-fA-F]{16}$/.test(n)?JE(n,function(n){HE(this,r)}.bind(this)):function(n){var t=this,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return new Promise(function(r,e){var o=this;if(P_(this,t),n){var u=x({commandType:D.T,callback:function(n,t){P_(this,o),n?e(n):r(t)}.bind(this)});Ow(D.T,[{String16:n},{Uint8:i}],null,u)}else e("Chat invite link is empty")}.bind(this))}(n).then(function(n){HE(this,r),KE(n)}.bind(this))["catch"](function(n){HE(this,r),WE(),d.error(t.User,n,"Open")}.bind(this)))}function JE(n,i){var r=this;ME();var e=function(n){for(var t=ct(tg),i=undefined,r=0,e=t.length;r<e;r++){var o=t[r];if(o.chatId===n){i=o;break}}return i}(n);if(e)return KE(e),void(i&&i(e));D_(n).then(function(n){HE(this,r),n&&(pb(n),kg(n),KE(n),i&&i(n))}.bind(this))["catch"](function(i){HE(this,r),d.error(t.User,i,"Open"),bg(n),WE()}.bind(this))}function KE(n){var t,i;n&&(t=AE,i=n,bb(),t&&(ab({link:tb(i)}),yb.set(i),vb=new nb({target:t,props:{chat:yb}})))}function XE(n){return XE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},XE(n)}function ZE(n,t){return ZE=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},ZE(n,t)}function nA(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=rA(n);if(t){var e=rA(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return tA(this,i)}}function tA(n,t){if(t&&("object"===XE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return iA(n)}function iA(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function rA(n){return rA=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},rA(n)}function eA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function oA(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return uA(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return uA(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uA(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function cA(n){var t,i,e,o=n[0].countMembers+"";return{c:function(){t=Rt("div"),i=Rt("i"),e=Mt(o),Pt(i,"class","icons-chat icons-chat_members"),Pt(t,"class","chat-block__members"),Pt(t,"title",r("members"))},m:function(n,r){xt(n,t,r),jt(t,i),jt(t,e)},p:function(n,t){1&t&&o!==(o=n[0].countMembers+"")&&qt(e,o)},d:function(n){n&&Ct(t)}}}function fA(n){var t,i,r=n[0].description+"";return{c:function(){t=Rt("div"),i=Mt(r),Pt(t,"class","chat-block__desc")},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,t){1&t&&r!==(r=n[0].description+"")&&qt(i,r)},d:function(n){n&&Ct(t)}}}function aA(n){var t,i,r,e,o,u,c,f,a,s,l,h,d,v=n[0].name+"";r=new il({props:{data:n[0],size:sA}});var y=n[1]&&cA(n),p=n[0].description&&fA(n);return{c:function(){t=Rt("div"),i=Rt("a"),Mi(r.$$.fragment),e=Ut(),o=Rt("div"),u=Rt("div"),c=Rt("a"),f=Mt(v),a=Ut(),y&&y.c(),s=Ut(),p&&p.c(),Pt(i,"href",n[2]),Pt(i,"class","chat-block__avatar"),Pt(c,"href",n[2]),Pt(u,"class","chat-block__name"),Pt(o,"class","chat-block__content"),Pt(t,"class","chat-block")},m:function(v,m){xt(v,t,m),jt(t,i),Ui(r,i,null),jt(t,e),jt(t,o),jt(o,u),jt(u,c),jt(c,f),jt(o,a),y&&y.m(o,null),jt(o,s),p&&p.m(o,null),l=!0,h||(d=[Dt(i,"click",Nt(n[3])),Dt(c,"click",Nt(n[3]))],h=!0)},p:function(n,t){var e=oA(t,1)[0],u={};1&e&&(u.data=n[0]),r.$set(u),(!l||4&e)&&Pt(i,"href",n[2]),(!l||1&e)&&v!==(v=n[0].name+"")&&qt(f,v),(!l||4&e)&&Pt(c,"href",n[2]),n[1]?y?y.p(n,e):((y=cA(n)).c(),y.m(o,s)):y&&(y.d(1),y=null),n[0].description?p?p.p(n,e):((p=fA(n)).c(),p.m(o,null)):p&&(p.d(1),p=null)},i:function(n){l||(Ei(r.$$.fragment,n),l=!0)},o:function(n){Ai(r.$$.fragment,n),l=!1},d:function(n){n&&Ct(t),Bi(r),y&&y.d(),p&&p.d(),h=!1,tt(d)}}}var sA=80;function lA(n,t,i){var r,e=this,o=t.chat,u=t.showCountMembers,c=void 0!==u&&u;return n.$$set=function(n){eA(this,e),"chat"in n&&i(0,o=n.chat),"showCountMembers"in n&&i(1,c=n.showCountMembers)}.bind(this),n.$$.update=function(){eA(this,e),1&n.$$.dirty&&i(2,r=tb(o))}.bind(this),[o,c,r,function(){JE(o.chatId)}]}var hA=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&ZE(n,t)}(i,n);var t=nA(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(iA(r=t.call(this)),n,lA,aA,rt,{chat:0,showCountMembers:1}),r}return i}(Pi),dA=hA;function vA(n){return vA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},vA(n)}var yA=undefined;function pA(n,t){return pA=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},pA(n,t)}function mA(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=_A(n);if(t){var e=_A(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return bA(this,i)}}function bA(n,t){if(t&&("object"===vA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wA(n)}function wA(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _A(n){return _A=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_A(n)}function gA(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return SA(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return SA(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SA(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function TA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function jA(n,t,i){var r=n.slice();return r[4]=t[i],r}var kA=function(n){return TA(this,yA),{}}.bind(undefined),EA=function(n){return TA(this,yA),{}}.bind(undefined);function AA(n,t){var i,r,e;return r=new dA({props:{chat:t[4],showCountMembers:t[1]}}),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),e=!0},p:function(n,i){t=n;var e={};1&i&&(e.chat=t[4]),2&i&&(e.showCountMembers=t[1]),r.$set(e)},i:function(n){e||(Ei(r.$$.fragment,n),e=!0)},o:function(n){Ai(r.$$.fragment,n),e=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function OA(n){for(var t,i,r,e=this,o=[],u=new Map,c=n[3].title,f=at(c,n,n[2],EA),a=n[0],s=function(n){return TA(this,e),n[4].chatId}.bind(this),l=0;l<a.length;l+=1){var h=jA(n,a,l),d=s(h);u.set(d,o[l]=AA(d,h))}return{c:function(){t=Rt("div"),f&&f.c(),i=Ut();for(var n=0;n<o.length;n+=1)o[n].c();Pt(t,"class","chat-intro__list-box")},m:function(n,e){xt(n,t,e),f&&f.m(t,null),jt(t,i);for(var u=0;u<o.length;u+=1)o[u].m(t,null);r=!0},p:function(n,i){var e=gA(i,1)[0];f&&f.p&&(!r||4&e)&&ht(f,c,n,n[2],r?lt(c,n[2],e,kA):dt(n[2]),EA),3&e&&(a=n[0],ji(),o=Ii(o,e,s,1,n,a,u,t,Ci,AA,null,jA),ki())},i:function(n){if(!r){Ei(f,n);for(var t=0;t<a.length;t+=1)Ei(o[t]);r=!0}},o:function(n){Ai(f,n);for(var t=0;t<o.length;t+=1)Ai(o[t]);r=!1},d:function(n){n&&Ct(t),f&&f.d(n);for(var i=0;i<o.length;i+=1)o[i].d()}}}function xA(n,t,i){var r=this,e=t.$$slots,o=void 0===e?{}:e,u=t.$$scope,c=t.chatList,f=void 0===c?[]:c,a=t.showCountMembers,s=void 0!==a&&a;return n.$$set=function(n){TA(this,r),"chatList"in n&&i(0,f=n.chatList),"showCountMembers"in n&&i(1,s=n.showCountMembers),"$$scope"in n&&i(2,u=n.$$scope)}.bind(this),[f,s,u,o]}var CA=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&pA(n,t)}(i,n);var t=mA(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(wA(r=t.call(this)),n,xA,OA,rt,{chatList:0,showCountMembers:1}),r}return i}(Pi),IA=CA;function RA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var MA=Wi([]);function UA(){!function(){var n=this,i=zE()||hn;U_(mn,i,gn,32).then(function(r){var e=this;RA(this,n),r.length||i===hn?(r.length<32&&i!==hn&&U_(mn,hn,gn,32).then(function(n){var t=this;RA(this,e),MA.update(function(i){return RA(this,t),i.concat(n)}.bind(this))}.bind(this))["catch"](function(n){RA(this,e),d.error(t.System,n,"Popular list")}.bind(this)),MA.set(r)):U_(mn,hn,gn,32).then(function(n){RA(this,e),MA.set(n)}.bind(this))["catch"](function(n){RA(this,e),d.error(t.System,n,"Popular list")}.bind(this))}.bind(this))["catch"](function(i){RA(this,n),d.error(t.System,i,"Popular list")}.bind(this))}()}function BA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var DA=Wi([]);function NA(){!function(){var n=this,i=zE()||hn;U_(bn,i,gn,32).then(function(r){var e=this;BA(this,n),r.length||i===hn?DA.set(r):U_(bn,hn,gn,32).then(function(n){BA(this,e),DA.set(n)}.bind(this))["catch"](function(n){BA(this,e),d.error(t.System,n,"Recommended list")}.bind(this))}.bind(this))["catch"](function(i){BA(this,n),d.error(t.System,i,"Recommended list")}.bind(this))}()}var PA=undefined;function LA(n){return LA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},LA(n)}function qA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var $A=Wi([]),zA=Wi([]),WA=!1,FA=!1;function GA(n,t){for(var i=undefined,r=0,e=t.length;r<e;r++){var o=t[r];if(o.topMessage&&o.topMessage.messageId===n){i=o;break}}return i}function HA(){FA=!0,function(){var n=this,i=zE()||hn;U_(wn,i,_n,200).then(function(r){var e=this;qA(this,n),r.length||i===hn?$A.set(r):U_(wn,hn,_n,200).then(function(n){qA(this,e),$A.set(n)}.bind(this))["catch"](function(n){qA(this,e),d.error(t.System,n,"New list")}.bind(this))}.bind(this))["catch"](function(i){qA(this,n),d.error(t.System,i,"New list")}.bind(this))}()}function QA(n,t){return QA=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},QA(n,t)}function VA(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=KA(n);if(t){var e=KA(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return YA(this,i)}}function YA(n,t){if(t&&("object"===XA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return JA(n)}function JA(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function KA(n){return KA=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},KA(n)}function XA(n){return XA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},XA(n)}function ZA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function nO(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return tO(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return tO(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tO(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function iO(n){var t,i,r,e=Vc({dateTime:n[0].date,type:"smart"})+"";return{c:function(){t=Rt("div"),i=Mt(e),Pt(t,"class","chat-top-message__date"),Pt(t,"title",r=n[0].dateText)},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,o){1&o&&e!==(e=Vc({dateTime:n[0].date,type:"smart"})+"")&&qt(i,e),1&o&&r!==(r=n[0].dateText)&&Pt(t,"title",r)},d:function(n){n&&Ct(t)}}}function rO(n){var t,i,r,e=Vc({dateTime:n[0].topMessage.date,type:"smart"})+"";return{c:function(){t=Rt("div"),i=Mt(e),Pt(t,"class","chat-top-message__date"),Pt(t,"title",r=n[0].topMessage.dateText)},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,o){1&o&&e!==(e=Vc({dateTime:n[0].topMessage.date,type:"smart"})+"")&&qt(i,e),1&o&&r!==(r=n[0].topMessage.dateText)&&Pt(t,"title",r)},d:function(n){n&&Ct(t)}}}function eO(n){var t,i=n[0].description+"";return{c:function(){t=Mt(i)},m:function(n,i){xt(n,t,i)},p:function(n,r){1&r&&i!==(i=n[0].description+"")&&qt(t,i)},d:function(n){n&&Ct(t)}}}function oO(n){var t;function i(n,t){return n[0].topMessage.recType===z||n[0].topMessage.recType===Q?cO:n[0].topMessage.recType===W?uO:void 0}var r=i(n),e=r&&r(n);return{c:function(){e&&e.c(),t=Bt()},m:function(n,i){e&&e.m(n,i),xt(n,t,i)},p:function(n,o){r===(r=i(n))&&e?e.p(n,o):(e&&e.d(1),(e=r&&r(n))&&(e.c(),e.m(t.parentNode,t)))},d:function(n){e&&e.d(n),n&&Ct(t)}}}function uO(n){var t,i=n[0].topMessage.data.preview&&n[0].topMessage.data.preview.type===Sn&&fO(n);return{c:function(){i&&i.c(),t=Bt()},m:function(n,r){i&&i.m(n,r),xt(n,t,r)},p:function(n,r){n[0].topMessage.data.preview&&n[0].topMessage.data.preview.type===Sn?i?i.p(n,r):((i=fO(n)).c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d:function(n){i&&i.d(n),n&&Ct(t)}}}function cO(n){var t,i,r=n[3]&&aO(n),e=n[2]&&sO(n);return{c:function(){r&&r.c(),t=Ut(),e&&e.c(),i=Bt()},m:function(n,o){r&&r.m(n,o),xt(n,t,o),e&&e.m(n,o),xt(n,i,o)},p:function(n,o){n[3]?r?r.p(n,o):((r=aO(n)).c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),n[2]?e?e.p(n,o):((e=sO(n)).c(),e.m(i.parentNode,i)):e&&(e.d(1),e=null)},d:function(n){r&&r.d(n),n&&Ct(t),e&&e.d(n),n&&Ct(i)}}}function fO(n){var t,i,r,e,o;return{c:function(){t=Rt("a"),et((i=Rt("img")).src,r=n[0].topMessage.data.url)||Pt(i,"src",r),Pt(i,"loading","lazy"),Pt(i,"alt",""),Pt(t,"class","chat-top-message__image"),Pt(t,"href",n[4]),zt(t,"background-image","url('"+n[0].topMessage.data.preview.src+"')")},m:function(r,u){xt(r,t,u),jt(t,i),e||(o=Dt(t,"click",Nt(n[5])),e=!0)},p:function(n,e){1&e&&!et(i.src,r=n[0].topMessage.data.url)&&Pt(i,"src",r),16&e&&Pt(t,"href",n[4]),1&e&&zt(t,"background-image","url('"+n[0].topMessage.data.preview.src+"')")},d:function(n){n&&Ct(t),e=!1,o()}}}function aO(n){var t,i,r,e,o;return{c:function(){var e;t=Rt("a"),et((i=Rt("img")).src,r=n[3].url)||Pt(i,"src",r),Pt(i,"loading","lazy"),Pt(i,"alt",""),Pt(t,"class","chat-top-message__image"),Pt(t,"href",n[4]),zt(t,"background-image","url('"+(null===(e=n[3].preview)||void 0===e?void 0:e.src)+"')")},m:function(r,u){xt(r,t,u),jt(t,i),e||(o=Dt(t,"click",Nt(n[5])),e=!0)},p:function(n,e){var o;(8&e&&!et(i.src,r=n[3].url)&&Pt(i,"src",r),16&e&&Pt(t,"href",n[4]),8&e)&&zt(t,"background-image","url('"+(null===(o=n[3].preview)||void 0===o?void 0:o.src)+"')")},d:function(n){n&&Ct(t),e=!1,o()}}}function sO(n){var t,i;return{c:function(){t=Rt("div"),i=Mt(n[2]),Pt(t,"class","chat-top-message__text")},m:function(n,r){xt(n,t,r),jt(t,i)},p:function(n,t){4&t&&qt(i,n[2])},d:function(n){n&&Ct(t)}}}function lO(n){var t,i,r,e,o,u,c,f,a,s,l,h,d,v,y,p,m=n[0].name+"";function b(n,t){return n[0].topMessage?rO:iO}o=new il({props:{data:n[0],size:hO}});var w=b(n),_=w(n);function g(n,t){return n[0].topMessage?oO:eO}var S=g(n),T=S(n);return{c:function(){t=Rt("div"),i=Rt("div"),r=Rt("div"),e=Rt("a"),Mi(o.$$.fragment),u=Ut(),c=Rt("div"),f=Rt("div"),a=Rt("a"),s=Mt(m),l=Ut(),_.c(),h=Ut(),d=Rt("div"),T.c(),Pt(e,"href",n[4]),Pt(e,"class","chat-top-message__avatar"),Pt(a,"href",n[4]),Pt(f,"class","chat-top-message__name"),Pt(c,"class","chat-top-message__info"),Pt(r,"class","chat-top-message__header"),Pt(d,"class","chat-top-message__desc"),Pt(i,"class","chat-top-message__box"),Pt(t,"class","chat-top-message"),Pt(t,"data-colimn",n[1])},m:function(m,b){xt(m,t,b),jt(t,i),jt(i,r),jt(r,e),Ui(o,e,null),jt(r,u),jt(r,c),jt(c,f),jt(f,a),jt(a,s),jt(c,l),_.m(c,null),jt(i,h),jt(i,d),T.m(d,null),v=!0,y||(p=[Dt(e,"click",Nt(n[5])),Dt(a,"click",Nt(n[5]))],y=!0)},p:function(n,i){var r=nO(i,1)[0],u={};1&r&&(u.data=n[0]),o.$set(u),(!v||16&r)&&Pt(e,"href",n[4]),(!v||1&r)&&m!==(m=n[0].name+"")&&qt(s,m),(!v||16&r)&&Pt(a,"href",n[4]),w===(w=b(n))&&_?_.p(n,r):(_.d(1),(_=w(n))&&(_.c(),_.m(c,null))),S===(S=g(n))&&T?T.p(n,r):(T.d(1),(T=S(n))&&(T.c(),T.m(d,null))),(!v||2&r)&&Pt(t,"data-colimn",n[1])},i:function(n){v||(Ei(o.$$.fragment,n),v=!0)},o:function(n){Ai(o.$$.fragment,n),v=!1},d:function(n){n&&Ct(t),Bi(o),_.d(),T.d(),y=!1,tt(p)}}}$A.subscribe(function(n){var i,r,e,o,u=this;if(qA(this,PA),FA){for(var c=zE()||hn,f=[],a=0,s=[],l=function(t,u){var c=this,l=n[t];if(!l.topMessage)return"continue";if(~s.indexOf(l.topMessage.messageId))return"continue";if(l.topMessage.recType===Q){var h=l.topMessage.collection;if(!h||l.topMessage.data)return"continue";h.text&&h.text.forEach(function(t){qA(this,c);var i=GA(t,n);i&&i.topMessage&&l.topMessage&&(s.push(i.topMessage.messageId),l.topMessage.data,l.topMessage.data={text:i.topMessage})}.bind(this)),h.file&&h.file.forEach(function(t){qA(this,c);var i=GA(t,n);if(i&&i.topMessage&&l.topMessage){s.push(i.topMessage.messageId);var r=i.topMessage;if("object"===LA(r.data)&&r.recType===W){var e=r.data;if(e)0===e.mime.toLowerCase().indexOf("image")&&(l.topMessage.data?l.topMessage.data.files||(l.topMessage.data.files=[]):l.topMessage.data={files:[]},l.topMessage.data.files.push(i.topMessage))}}}.bind(this))}else if(l.topMessage.recType===W){if(l.topMessage.data&&("preview"in l.topMessage.data&&l.topMessage.data.preview&&l.topMessage.data.preview.type!==Sn||!l.topMessage.data.preview))return s.push(l.topMessage.messageId),"continue"}else if(l.topMessage.recType===z){var d=100;switch(l.language){case dn:case vn:case yn:d=30}if(l.topMessage.data&&"text"in l.topMessage.data&&"string"==typeof l.topMessage.data.text&&l.topMessage.data.text.length<d&&!(null===(r=null===(i=l.topMessage.tags)||void 0===i?void 0:i.files)||void 0===r?void 0:r.linedIds))return s.push(l.topMessage.messageId),"continue";(null===(o=null===(e=l.topMessage.tags)||void 0===e?void 0:e.files)||void 0===o?void 0:o.linedIds)&&l.topMessage.tags.files.linedIds.forEach(function(t){qA(this,c);var i=GA(t,n);if(i&&i.topMessage&&l.topMessage){s.push(i.topMessage.messageId);var r=i.topMessage;if("object"===LA(r.data)&&r.recType===W){var e=r.data;if(e)0===e.mime.toLowerCase().indexOf("image")&&(l.topMessage.data?l.topMessage.data.files||(l.topMessage.data.files=[]):l.topMessage.data={files:[]},l.topMessage.data.files.push(i.topMessage))}}}.bind(this))}return f.push(l),a++,s.push(l.topMessage.messageId),a>=32?"break":void 0},h=0,v=n.length;h<v;h++){var y=l(h);if("continue"!==y&&"break"===y)break}f.length<32&&!WA&&c!==hn&&(WA=!0,U_(wn,hn,_n,200).then(function(n){var t=this;qA(this,u),$A.update(function(i){return qA(this,t),i.concat(n)}.bind(this))}.bind(this))["catch"](function(n){qA(this,u),d.error(t.System,n,"New list")}.bind(this))),zA.set(f)}}.bind(undefined));var hO=48;function dO(n,t,i){var r,e,o,u=this,c=t.chat,f=t.column;return n.$$set=function(n){ZA(this,u),"chat"in n&&i(0,c=n.chat),"column"in n&&i(1,f=n.column)}.bind(this),n.$$.update=function(){if(ZA(this,u),1&n.$$.dirty&&i(4,o=tb(c)),1&n.$$.dirty&&c.topMessage&&(c.topMessage.recType===Q||c.topMessage.recType===z)&&c.topMessage.data){if(c.topMessage.data.files)for(var t=0,f=c.topMessage.data.files.length;t<f;t++){var a=c.topMessage.data.files[t];if("object"===XA(a)){var s=a.data;if(s.preview&&s.preview.type===Sn){i(3,e=s);break}}}if(c.topMessage.data.text){var l=c.topMessage.data.text;"object"==XA(l)?"object"==XA(l.data)&&l.data.text&&i(2,r=l.data.text):"string"==typeof l&&i(2,r=l)}}}.bind(this),[c,f,r,e,o,function(){JE(c.chatId,undefined)}]}var vO=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&QA(n,t)}(i,n);var t=VA(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(JA(r=t.call(this)),n,dO,lO,rt,{chat:0,column:1}),r}return i}(Pi),yO=vO;function pO(n){return pO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},pO(n)}function mO(n,t){return mO=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},mO(n,t)}function bO(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=gO(n);if(t){var e=gO(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return wO(this,i)}}function wO(n,t){if(t&&("object"===pO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _O(n)}function _O(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function gO(n){return gO=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},gO(n)}function SO(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return TO(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return TO(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TO(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function jO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function kO(n,t,i){var r=n.slice();return r[7]=t[i],r[9]=i,r}function EO(n,t,i){var r=n.slice();return r[10]=t[i],r[11]=t,r[12]=i,r}function AO(n){for(var t,i,r=this,e=n[1],o=[],u=0;u<e.length;u+=1)o[u]=xO(kO(n,e,u));var c=function(n){var t=this;return jO(this,r),Ai(o[n],1,1,function(){jO(this,t),o[n]=null}.bind(this))}.bind(this);return{c:function(){for(var n=0;n<o.length;n+=1)o[n].c();t=Bt()},m:function(n,r){for(var e=0;e<o.length;e+=1)o[e].m(n,r);xt(n,t,r),i=!0},p:function(n,i){if(2&i){var r;for(e=n[1],r=0;r<e.length;r+=1){var u=kO(n,e,r);o[r]?(o[r].p(u,i),Ei(o[r],1)):(o[r]=xO(u),o[r].c(),Ei(o[r],1),o[r].m(t.parentNode,t))}for(ji(),r=e.length;r<o.length;r+=1)c(r);ki()}},i:function(n){if(!i){for(var t=0;t<e.length;t+=1)Ei(o[t]);i=!0}},o:function(n){o=o.filter(Boolean);for(var t=0;t<o.length;t+=1)Ai(o[t]);i=!1},d:function(n){It(o,n),n&&Ct(t)}}}function OO(n,t){var i,r,e,o,u=this;function c(n){t[5](n,t[10],t[11],t[12])}var f={column:t[9]};return void 0!==t[10]&&(f.chat=t[10]),r=new yO({props:f}),ui.push(function(){return jO(this,u),Ri(r,"chat",c)}.bind(this)),{key:n,first:null,c:function(){i=Bt(),Mi(r.$$.fragment),this.first=i},m:function(n,t){xt(n,i,t),Ui(r,n,t),o=!0},p:function(n,i){var o=this;t=n;var u={};!e&&2&i&&(e=!0,u.chat=t[10],vi(function(){return jO(this,o),e=!1}.bind(this))),r.$set(u)},i:function(n){o||(Ei(r.$$.fragment,n),o=!0)},o:function(n){Ai(r.$$.fragment,n),o=!1},d:function(n){n&&Ct(i),Bi(r,n)}}}function xO(n){for(var t,i,r,e=this,o=[],u=new Map,c=n[7],f=function(n){return jO(this,e),n[10].chatId+n[10].date.getTime()}.bind(this),a=0;a<c.length;a+=1){var s=EO(n,c,a),l=f(s);u.set(l,o[a]=OO(l,s))}return{c:function(){t=Rt("div");for(var n=0;n<o.length;n+=1)o[n].c();i=Ut(),Pt(t,"class","chat-list-columns__column")},m:function(n,e){xt(n,t,e);for(var u=0;u<o.length;u+=1)o[u].m(t,null);jt(t,i),r=!0},p:function(n,r){2&r&&(c=n[7],ji(),o=Ii(o,r,f,1,n,c,u,t,Ci,OO,i,EO),ki())},i:function(n){if(!r){for(var t=0;t<c.length;t+=1)Ei(o[t]);r=!0}},o:function(n){for(var t=0;t<o.length;t+=1)Ai(o[t]);r=!1},d:function(n){n&&Ct(t);for(var i=0;i<o.length;i+=1)o[i].d()}}}function CO(n){var t,i,r=n[1].length&&AO(n);return{c:function(){t=Rt("div"),r&&r.c(),Pt(t,"class","chat-list-columns")},m:function(n,e){xt(n,t,e),r&&r.m(t,null),i=!0},p:function(n,i){var e=this,o=SO(i,1)[0];n[1].length?r?(r.p(n,o),2&o&&Ei(r,1)):((r=AO(n)).c(),Ei(r,1),r.m(t,null)):r&&(ji(),Ai(r,1,1,function(){jO(this,e),r=null}.bind(this)),ki())},i:function(n){i||(Ei(r),i=!0)},o:function(n){Ai(r),i=!1},d:function(n){n&&Ct(t),r&&r.d()}}}function IO(n,t,i){var r,e=this,o=Jn,u=function(){var n=this;return jO(this,e),o(),o=ut(c,function(t){return jO(this,n),i(4,r=t)}.bind(this)),c}.bind(this);n.$$.on_destroy.push(function(){return jO(this,e),o()}.bind(this));var c=t.list;u();var f=t.maxCountToShow,a=[],s=6;function l(){var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;i(3,s=4),n>=2400?i(3,s=6):n<=1366?i(3,s=2):n<=1600&&i(3,s=3)}return ii(function(){var n=this;jO(this,e);var t=nf(l,100);return window.addEventListener("resize",t),t(),function(){jO(this,n),window.removeEventListener("resize",t)}.bind(this)}.bind(this)),n.$$set=function(n){jO(this,e),"list"in n&&u(i(0,c=n.list)),"maxCountToShow"in n&&i(2,f=n.maxCountToShow)}.bind(this),n.$$.update=function(){if(jO(this,e),30&n.$$.dirty){i(1,a=[]);for(var t=0;t<s;t++)a.push([]);for(var o=0,u=r.length;o<u&&!(o>=f);o++)a[o%s].push(r[o])}}.bind(this),[c,a,f,s,r,function(n,t,e,o){e[o]=n,i(1,a),i(3,s),i(4,r),i(2,f)}]}var RO=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&mO(n,t)}(i,n);var t=bO(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(_O(r=t.call(this)),n,IO,CO,rt,{list:0,maxCountToShow:2}),r}return i}(Pi),MO=RO;function UO(n){return UO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},UO(n)}function BO(n,t){return BO=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},BO(n,t)}function DO(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=LO(n);if(t){var e=LO(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return NO(this,i)}}function NO(n,t){if(t&&("object"===UO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return PO(n)}function PO(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function LO(n){return LO=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},LO(n)}function qO(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return $O(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $O(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $O(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function zO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function WO(n){var t,i,e,o,u,c=r("new")+"";return{c:function(){t=Rt("div"),i=Mt(c),Pt(t,"class",e="chat-tabs__item"+("new"===n[0]?" chat-tabs__item_active":""))},m:function(r,e){xt(r,t,e),jt(t,i),o||(u=Dt(t,"click",n[6]),o=!0)},p:function(n,i){1&i&&e!==(e="chat-tabs__item"+("new"===n[0]?" chat-tabs__item_active":""))&&Pt(t,"class",e)},d:function(n){n&&Ct(t),o=!1,u()}}}function FO(n){var t,i,e,o,u,c=r("recommended")+"";return{c:function(){t=Rt("div"),i=Mt(c),Pt(t,"class",e="chat-tabs__item"+("recommended"===n[0]?" chat-tabs__item_active":""))},m:function(r,e){xt(r,t,e),jt(t,i),o||(u=Dt(t,"click",n[7]),o=!0)},p:function(n,i){1&i&&e!==(e="chat-tabs__item"+("recommended"===n[0]?" chat-tabs__item_active":""))&&Pt(t,"class",e)},d:function(n){n&&Ct(t),o=!1,u()}}}function GO(n){var t,i,e,o,u,c=r("popular")+"";return{c:function(){t=Rt("div"),i=Mt(c),Pt(t,"class",e="chat-tabs__item"+("popular"===n[0]?" chat-tabs__item_active":""))},m:function(r,e){xt(r,t,e),jt(t,i),o||(u=Dt(t,"click",n[8]),o=!0)},p:function(n,i){1&i&&e!==(e="chat-tabs__item"+("popular"===n[0]?" chat-tabs__item_active":""))&&Pt(t,"class",e)},d:function(n){n&&Ct(t),o=!1,u()}}}function HO(n){var t,i,e,o,u,c=r("my")+"";return{c:function(){t=Rt("div"),i=Mt(c),Pt(t,"class",e="chat-tabs__item"+("my"===n[0]?" chat-tabs__item_active":""))},m:function(r,e){xt(r,t,e),jt(t,i),o||(u=Dt(t,"click",n[9]),o=!0)},p:function(n,i){1&i&&e!==(e="chat-tabs__item"+("my"===n[0]?" chat-tabs__item_active":""))&&Pt(t,"class",e)},d:function(n){n&&Ct(t),o=!1,u()}}}function QO(n){var t,i,r,e;return i=new MO({props:{list:zA,maxCountToShow:32}}),{c:function(){t=Rt("div"),Mi(i.$$.fragment),Pt(t,"class",r="chat-tabs__content"+("new"===n[0]?"":" hidden"))},m:function(n,r){xt(n,t,r),Ui(i,t,null),e=!0},p:function(n,i){(!e||1&i&&r!==(r="chat-tabs__content"+("new"===n[0]?"":" hidden")))&&Pt(t,"class",r)},i:function(n){e||(Ei(i.$$.fragment,n),e=!0)},o:function(n){Ai(i.$$.fragment,n),e=!1},d:function(n){n&&Ct(t),Bi(i)}}}function VO(n){var t,i,r,e;return i=new IA({props:{chatList:n[2]}}),{c:function(){t=Rt("div"),Mi(i.$$.fragment),Pt(t,"class",r="chat-tabs__content"+("recommended"===n[0]?"":" hidden"))},m:function(n,r){xt(n,t,r),Ui(i,t,null),e=!0},p:function(n,o){var u={};4&o&&(u.chatList=n[2]),i.$set(u),(!e||1&o&&r!==(r="chat-tabs__content"+("recommended"===n[0]?"":" hidden")))&&Pt(t,"class",r)},i:function(n){e||(Ei(i.$$.fragment,n),e=!0)},o:function(n){Ai(i.$$.fragment,n),e=!1},d:function(n){n&&Ct(t),Bi(i)}}}function YO(n){var t,i,r,e;return i=new IA({props:{chatList:n[3]}}),{c:function(){t=Rt("div"),Mi(i.$$.fragment),Pt(t,"class",r="chat-tabs__content"+("popular"===n[0]?"":" hidden"))},m:function(n,r){xt(n,t,r),Ui(i,t,null),e=!0},p:function(n,o){var u={};8&o&&(u.chatList=n[3]),i.$set(u),(!e||1&o&&r!==(r="chat-tabs__content"+("popular"===n[0]?"":" hidden")))&&Pt(t,"class",r)},i:function(n){e||(Ei(i.$$.fragment,n),e=!0)},o:function(n){Ai(i.$$.fragment,n),e=!1},d:function(n){n&&Ct(t),Bi(i)}}}function JO(n){var t,i,r,e,o=n[4].length&&KO(n),u=n[5].length&&ZO(n);return{c:function(){t=Rt("div"),o&&o.c(),i=Ut(),u&&u.c(),Pt(t,"class",r="chat-tabs__content"+("my"===n[0]?"":" hidden"))},m:function(n,r){xt(n,t,r),o&&o.m(t,null),jt(t,i),u&&u.m(t,null),e=!0},p:function(n,c){var f=this;n[4].length?o?(o.p(n,c),16&c&&Ei(o,1)):((o=KO(n)).c(),Ei(o,1),o.m(t,i)):o&&(ji(),Ai(o,1,1,function(){zO(this,f),o=null}.bind(this)),ki()),n[5].length?u?(u.p(n,c),32&c&&Ei(u,1)):((u=ZO(n)).c(),Ei(u,1),u.m(t,null)):u&&(ji(),Ai(u,1,1,function(){zO(this,f),u=null}.bind(this)),ki()),(!e||1&c&&r!==(r="chat-tabs__content"+("my"===n[0]?"":" hidden")))&&Pt(t,"class",r)},i:function(n){e||(Ei(o),Ei(u),e=!0)},o:function(n){Ai(o),Ai(u),e=!1},d:function(n){n&&Ct(t),o&&o.d(),u&&u.d()}}}function KO(n){var t,i;return t=new IA({props:{chatList:n[4],showCountMembers:!0,$$slots:{title:[XO]},$$scope:{ctx:n}}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};16&i&&(r.chatList=n[4]),1024&i&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function XO(n){var t;return{c:function(){(t=Rt("div")).textContent="".concat(r("groupChatsShort")),Pt(t,"class","chat-intro__title-list"),Pt(t,"slot","title")},m:function(n,i){xt(n,t,i)},p:Jn,d:function(n){n&&Ct(t)}}}function ZO(n){var t,i;return t=new IA({props:{chatList:n[5],showCountMembers:!0,$$slots:{title:[nx]},$$scope:{ctx:n}}}),{c:function(){Mi(t.$$.fragment)},m:function(n,r){Ui(t,n,r),i=!0},p:function(n,i){var r={};32&i&&(r.chatList=n[5]),1024&i&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(Ei(t.$$.fragment,n),i=!0)},o:function(n){Ai(t.$$.fragment,n),i=!1},d:function(n){Bi(t,n)}}}function nx(n){var t;return{c:function(){(t=Rt("div")).textContent="".concat(r("channels")),Pt(t,"class","chat-intro__title-list"),Pt(t,"slot","title")},m:function(n,i){xt(n,t,i)},p:Jn,d:function(n){n&&Ct(t)}}}function tx(n){var t,i,r,e,o,u,c,f,a,s,l=n[1].length&&WO(n),h=vf&&n[2].length&&FO(n),d=n[3].length&&GO(n),v=(n[4].length||n[5].length)&&HO(n),y=n[1].length&&QO(n),p=vf&&n[2].length&&VO(n),m=n[3].length&&YO(n),b=(n[4].length||n[5].length)&&JO(n);return{c:function(){t=Rt("div"),l&&l.c(),i=Ut(),h&&h.c(),r=Ut(),d&&d.c(),e=Ut(),v&&v.c(),o=Ut(),y&&y.c(),u=Ut(),p&&p.c(),c=Ut(),m&&m.c(),f=Ut(),b&&b.c(),a=Bt(),Pt(t,"class","chat-tabs__list")},m:function(n,w){xt(n,t,w),l&&l.m(t,null),jt(t,i),h&&h.m(t,null),jt(t,r),d&&d.m(t,null),jt(t,e),v&&v.m(t,null),xt(n,o,w),y&&y.m(n,w),xt(n,u,w),p&&p.m(n,w),xt(n,c,w),m&&m.m(n,w),xt(n,f,w),b&&b.m(n,w),xt(n,a,w),s=!0},p:function(n,o){var s=this,w=qO(o,1)[0];n[1].length?l?l.p(n,w):((l=WO(n)).c(),l.m(t,i)):l&&(l.d(1),l=null),vf&&n[2].length?h?h.p(n,w):((h=FO(n)).c(),h.m(t,r)):h&&(h.d(1),h=null),n[3].length?d?d.p(n,w):((d=GO(n)).c(),d.m(t,e)):d&&(d.d(1),d=null),n[4].length||n[5].length?v?v.p(n,w):((v=HO(n)).c(),v.m(t,null)):v&&(v.d(1),v=null),n[1].length?y?(y.p(n,w),2&w&&Ei(y,1)):((y=QO(n)).c(),Ei(y,1),y.m(u.parentNode,u)):y&&(ji(),Ai(y,1,1,function(){zO(this,s),y=null}.bind(this)),ki()),vf&&n[2].length?p?(p.p(n,w),4&w&&Ei(p,1)):((p=VO(n)).c(),Ei(p,1),p.m(c.parentNode,c)):p&&(ji(),Ai(p,1,1,function(){zO(this,s),p=null}.bind(this)),ki()),n[3].length?m?(m.p(n,w),8&w&&Ei(m,1)):((m=YO(n)).c(),Ei(m,1),m.m(f.parentNode,f)):m&&(ji(),Ai(m,1,1,function(){zO(this,s),m=null}.bind(this)),ki()),n[4].length||n[5].length?b?(b.p(n,w),48&w&&Ei(b,1)):((b=JO(n)).c(),Ei(b,1),b.m(a.parentNode,a)):b&&(ji(),Ai(b,1,1,function(){zO(this,s),b=null}.bind(this)),ki())},i:function(n){s||(Ei(y),Ei(p),Ei(m),Ei(b),s=!0)},o:function(n){Ai(y),Ai(p),Ai(m),Ai(b),s=!1},d:function(n){n&&Ct(t),l&&l.d(),h&&h.d(),d&&d.d(),v&&v.d(),n&&Ct(o),y&&y.d(n),n&&Ct(u),p&&p.d(n),n&&Ct(c),m&&m.d(n),n&&Ct(f),b&&b.d(n),n&&Ct(a)}}}function ix(n,t,i){var r,e,o,u,c,f=this;ft(n,zA,function(n){return zO(this,f),i(1,r=n)}.bind(this)),ft(n,DA,function(n){return zO(this,f),i(2,e=n)}.bind(this)),ft(n,MA,function(n){return zO(this,f),i(3,o=n)}.bind(this)),ft(n,F_,function(n){return zO(this,f),i(4,u=n)}.bind(this)),ft(n,G_,function(n){return zO(this,f),i(5,c=n)}.bind(this)),ii(function(){zO(this,f),HA(),NA(),UA()}.bind(this));var a="new",s=function(){zO(this,f),i(0,a="new")}.bind(this),l=function(){zO(this,f),i(0,a="recommended")}.bind(this),h=function(){zO(this,f),i(0,a="popular")}.bind(this),d=function(){zO(this,f),i(0,a="my")}.bind(this);return[a,r,e,o,u,c,s,l,h,d]}var rx=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&BO(n,t)}(i,n);var t=DO(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(PO(r=t.call(this)),n,ix,tx,rt,{}),r}return i}(Pi),ex=rx;function ox(n){return ox="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ox(n)}function ux(n,t){return ux=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},ux(n,t)}function cx(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=sx(n);if(t){var e=sx(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return fx(this,i)}}function fx(n,t){if(t&&("object"===ox(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ax(n)}function ax(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function sx(n){return sx=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},sx(n)}function lx(n){var t,i,r;return i=new ex({}),{c:function(){t=Rt("div"),Mi(i.$$.fragment),Pt(t,"class","chat-intro")},m:function(n,e){xt(n,t,e),Ui(i,t,null),r=!0},p:Jn,i:function(n){r||(Ei(i.$$.fragment,n),r=!0)},o:function(n){Ai(i.$$.fragment,n),r=!1},d:function(n){n&&Ct(t),Bi(i)}}}function hx(n){return[]}var dx,vx=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&ux(n,t)}(i,n);var t=cx(i);function i(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ni(ax(r=t.call(this)),n,hx,lx,rt,{}),r}return i}(Pi),yx=vx;function px(n){!function(){if(!dx)return;dx.$destroy(),dx=undefined}(),n&&(dx=new yx({target:n}))}function mx(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function bx(){if(document.getElementById("chatContainer")){var n=document.getElementById("left-panel"),t=document.getElementById("footer");if(n&&t){var i=n.getBoundingClientRect(),r=t.getBoundingClientRect();n.style.minHeight=i.height+(window.innerHeight-r.bottom)+"px"}}}function wx(n){Aw((function(t){var i,r=this;t.error,t.result;Dg&&(i="/".concat(Ng,"/users/").concat(Dg.toLowerCase(),"/messages"),ub=i),lb(),hb({path:"/".concat(Ng,"/users/{login}/messages"),callback:function(){mx(this,r),ME(),bb()}.bind(this)}),hb({path:"/".concat(Ng,"/messages/{id}"),callback:function(n){mx(this,r),n&&n.length&&YE(n[0])}.bind(this)}),hb({path:"/".concat(Ng,"/channels/{id}"),callback:function(n){mx(this,r),n&&n.length&&YE(n[0])}.bind(this)}),n&&n(),px(AE),cE(AE)}));var t,i=document.getElementById("chatContainer");UE(i),BE(window.createElement(i,"div",{className:"chatWidgetError",id:"chatWidgetError"})),window.mqGlobal.AddOnReady((function(){bx()})),window.addEventListener("resize",(function(){clearTimeout(t),t=setTimeout((function(){bx()}),100)}))}function _x(){AE||(LE(),PE(),wx((function(){Tw||(AE.innerHTML='<div class="not-support">Your browser is not supported</div>')})))}function gx(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Sx(n){return Sx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Sx(n)}window.chatWidget=function(){var n=this,t=!1;function e(){var n=document.getElementById("chatContainer");n&&n.insertAdjacentHTML("beforebegin",'<div class="chat-errors-block" id="chatErrorsBlock"></div>')}return{init:function(n){var o=this;n&&(!function(){var n=document.getElementById("chatTranslates");if(n){var t=n.innerHTML;if(t)try{i=JSON.parse(t)}catch(r){i={},console.warn(r)}}}(),!window.WebSocket||"Set"!==(new Set).constructor.name&&"Map"!==(new Set).constructor.name?window.mqGlobal.AddOnReady((function(){e();var n=document.getElementById("chatErrorsBlock");n&&I({parentNode:n,text:r("notSupportedWebsoket"),type:"danger",permanent:!0})})):(d.enable(),hS(n=function(n){"object"!==Sx(n)&&(n={});var t=document.documentElement.clientWidth;return{mode:n.mode||"",complaint_key:n.complaint_key||"",user_id:n.user_id||0,userIdHex:n.user_id_hex,user_login:n.user_login||"",language:n.language||"en",play_sounds:n.play_sounds,access_level:n.access_level||0,sig:n.sig||"",friendly_hosts:Array.isArray(n.friendly_hosts)?n.friendly_hosts:[],readonly:n.readonly,type:parseInt(n.type,10),token:n.token||"",url:n.url||"",version:n.version||1,uniq:n.uniq||"0",isMobile:t<=414}}(n)),x({commandType:"error",isDefault:!0,callback:function(n){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];gx(this,o);var i=document.getElementById("chatErrorsBlock");i&&I({parentNode:i,text:n,type:"danger",timeout:5e3,permanent:t})}.bind(this)}),t=!0,e(),$g?TE():$E(_x)))},OpenChatWith:function(){for(var i=this,r=arguments.length,e=new Array(r),o=0;o<r;o++)e[o]=arguments[o];gx(this,n),t&&$E(function(){gx(this,i),VE.apply(void 0,e)}.bind(this))}.bind(this),closeAllPopups:ME,initialized:function(){return gx(this,n),t}.bind(this),openChatByName:function(){for(var i=this,r=arguments.length,e=new Array(r),o=0;o<r;o++)e[o]=arguments[o];gx(this,n),t&&$E(function(){gx(this,i),YE.apply(void 0,e)}.bind(this))}.bind(this)}}()}();