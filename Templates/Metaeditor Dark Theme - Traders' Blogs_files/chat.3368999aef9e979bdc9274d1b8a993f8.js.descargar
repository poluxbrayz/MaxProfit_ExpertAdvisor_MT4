!function(){"use strict";var n,t,i={};function r(n){if(n in i){for(var t=i[n],r=0,e=arguments.length<=1?0:arguments.length-1;r<e;r++)t=t.replace("{"+r+"}",r+1<1||arguments.length<=r+1?undefined:arguments[r+1]);return t}return"["+n+"]"}function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e(n)}function o(n){var t="";return n===undefined?t="undefined error":"object"===e(n)?"stack"in n&&n.stack?("message"in n&&n.message&&(t+=n.message+"\r\n"),t+=n.stack):"message"in n&&n.message?t=n.message:"type"in n&&n.type&&(t=n.type):t=n,t}function u(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}!function(n){n[n.Info=0]="Info",n[n.Warning=1]="Warning",n[n.Error=2]="Error",n[n.Attention=3]="Attention",n[n.Debug=4]="Debug",n[n.Splitter=5]="Splitter"}(n||(n={})),function(n){n[n.WebSocket=0]="WebSocket",n[n.System=1]="System",n[n.User=2]="User",n[n.Store=3]="Store",n[n.Parse=4]="Parse",n[n.Debug=5]="Debug",n[n.Send=6]="Send",n[n.Received=7]="Received",n[n.u=8]="DB",n[n.Router=9]="Router"}(t||(t={}));var c,f,a="color: inherit;",s="#3878a8",l={0:"#4aa838",1:"#d19520",2:"#a83838",3:"#a89238",4:"#474d95",5:"#797979"},h={0:"#4aa838",1:"#5c9651",2:"#5a83b1",3:"#7d3a7b",4:"#967948",5:"#8fa838",6:"#284071",7:"#71284a",8:"#7b4bbd",9:"#be7e2a"},v={0:"WebSocket",1:"System",2:"User",3:"Store",4:"Parse",5:"Debug",6:"◀ Out",7:"▶ In ",8:"DB",9:"Router"},d=function(){function t(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.enabled=!1}var i,r,e;return i=t,r=[{key:"color",value:function(n){return"".concat("color:#fff;padding:2px 4px;margin-right:8px;border-radius:2px;","background:").concat(n,";")}},{key:"enable",value:function(){this.enabled=!0}},{key:"message",value:function(t,i,r){var e,u=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;if(this.enabled&&window.console&&window.console.log)if((r instanceof Error||r instanceof Event)&&(r=o(r)),window.document.documentMode)console.log("Messages: ".concat(v[i],": ").concat(r));else{var c=[this.color(s)],f="%cMessages",d=v[i],y=this.color(t===n.Info||t===n.Debug?h[i]:l[t]);d&&(c.push(y),f+="%c".concat(d)),u&&(c.push(y),f+="%c".concat(u)),f+="%c".concat(r),c.push(a),(e=window.console).log.apply(e,[f].concat(c))}}},{key:"info",value:function(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(n.Info,t,i,r)}},{key:"warning",value:function(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(n.Warning,t,i,r)}},{key:"error",value:function(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(n.Error,t,i,r)}},{key:"attention",value:function(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(n.Attention,t,i,r)}},{key:"debug",value:function(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(n.Debug,t,i,r)}}],r&&u(i.prototype,r),e&&u(i,e),Object.defineProperty(i,"prototype",{writable:!1}),t}(),y=new d,p=["zip","txt","log","mqh","ex5","mq5","mq4","ex4","mt5","set","tpl","cl","py","sqlite","csv","ipynb","gif","png","jpg","jpeg"],b="\0\0\0\0\0\0\0\0",m="0000000000000000",w="6F49000000000000";!function(n){n[n.v=6]="AUTH_INFO",n[n._=41]="NOTIFY_USER_UPDATE",n[n.g=51]="CHAT_ACCESS_SET",n[n.S=52]="CHAT_UPDATE",n[n.j=53]="CHAT_NEW",n[n.O=54]="CHAT_GET_BY_NAME",n[n.T=55]="MESSAGE_ADD",n[n.k=56]="CHATS_GET",n[n.A=57]="MESSAGES_GET",n[n.C=58]="USER_AUTHORIZE",n[n.R=59]="USER_UNAUTHORIZE",n[n.I=62]="NOTIFY_CHAT_UPDATE",n[n.M=63]="NOTIFY_MESSAGE_ADD",n[n.U=64]="NOTIFY_ACCESS_SET",n[n.P=44]="NOTIFY_EVENT",n[n.D=68]="NOTIFY_LAST_SEEN",n[n.B=67]="SET_EVENT_MASK",n[n.N=73]="DOWNLOAD",n[n.$=75]="USERS_SEARCH",n[n.L=76]="USERS_INFO",n[n.W=77]="CHAT_USERS",n[n.q=78]="NOTIFICATIONS_ENABLE",n[n.F=81]="BANS_GET",n[n.G=82]="BAN_SET",n[n.H=83]="CHATS_SEARCH",n[n.V=84]="FRIENDS_GET",n[n.Y=85]="FRIEND_SET",n[n.J=86]="EVENTS_GET",n[n.K=87]="EVENT_GET",n[n.X=88]="CHAT_AVATAR_SET",n[n.Z=89]="CHAT_AVATAR_DOWNLOAD",n[n.nn=90]="PRIVATE_MESSAGES_GET",n[n.tn=91]="INVITE_LINK_FIND",n[n.rn=92]="CHAT_LAST_ACCESS_SET",n[n.un=93]="CHAT_MUTE",n[n.cn=94]="CHAT_GET",n[n.fn=95]="MESSAGE_GET",n[n.an=97]="MESSAGES_GET_BY_NAME",n[n.sn=98]="UPLOAD",n[n.ln=99]="CHATS_RECOMMENDED",n[n.hn=109]="ADMIN_CHATS_GET",n[n.vn=110]="ADMIN_MESSAGES_GET",n[n.dn=111]="ADMIN_CHAT_DELETE",n[n.yn=112]="MESSAGE_SEQUENCE_SYNC",n[n.pn=113]="FIND_USER_BY_SERVER",n[n.bn=125]="MESSAGE_ENRICHMENT",n[n.mn=127]="CHATS_GET_BY_TYPE",n[n.wn=128]="CHATS_GET_UNREAD_COUNT"}(c||(c={})),function(n){n[n._n=-1]="FAIL",n[n.gn=-2]="FAIL_ACCESS_DENIED",n[n.Sn=-3]="FAIL_INVALID_PARAMS",n[n.jn=-4]="FAIL_INVALID_REQUEST",n[n.On=-5]="FAIL_INVALID_VERSION",n[n.En=-6]="FAIL_DISCONNECT",n[n.Tn=-7]="FAIL_OUT_OF_MEMORY",n[n.kn=-8]="FAIL_SQL_ERROR",n[n.An=-9]="FAIL_BANNED",n[n.xn=-10]="FAIL_NETWORK",n[n.Cn=-11]="FAIL_DATA_TOO_BIG",n[n.Rn=-12]="FAIL_NOT_FOUND",n[n.In=-13]="FAIL_DUPLICATE",n[n.Mn=-14]="FAIL_BANNED_TEMPORARY",n[n.Un=-15]="FAIL_DISALLOWED",n[n.Pn=-16]="FAIL_INTERRUPTED",n[n.Dn=1]="SUCCESS",n[n.Bn=2]="SUCCESS_PARTIAL",n[n.Nn=3]="SUCCESS_SAME",n[n.$n=4]="SUCCESS_DISCONNECT"}(f||(f={}));var _,g=0,S=1,j=2,O=3;!function(n){n[n.Ln=1]="TEXT",n[n.zn=2]="FILE",n[n.Wn=3]="DELETE",n[n.qn=4]="SERVICE",n[n.Fn=5]="OVERRIDDEN",n[n.Gn=6]="COLLECTION"}(_||(_={}));var E,T=6,k=7,A=8,x=0;!function(n){n[n.Hn=1]="USER_ADD",n[n.Vn=2]="USER_REMOVE",n[n.Qn=3]="IS_PUBLIC",n[n.Yn=4]="IS_LIMITED",n[n.Jn=5]="IS_CLOSED",n[n.Kn=6]="NAME",n[n.Xn=7]="CHAT_CREATE"}(E||(E={}));var C,R,I=8,M=128,U={Zn:0,nt:1,tt:2,rt:4},P=1,D=3,B=7;!function(n){n[n.et=28261]="ENGLISH",n[n.ot=30066]="RUSSIAN",n[n.ut=25956]="GERMAN",n[n.ct=24938]="JAPAN",n[n.ft=29281]="ARABIC",n[n.st=26746]="CHINESE",n[n.lt=29300]="TURKISH",n[n.ht=29808]="PORTUGUESE",n[n.vt=29541]="SPANISH",n[n.dt=29801]="ITALIAN",n[n.yt=28523]="KOREAN",n[n.bt=29286]="FRENCH",n[n.NONE=0]="NONE"}(C||(C={})),function(n){n[n.en=28261]="en",n[n.ru=30066]="ru",n[n.de=25956]="de",n[n.ja=24938]="ja",n[n.ar=29281]="ar",n[n.zh=26746]="zh",n[n.tr=29300]="tr",n[n.pt=29808]="pt",n[n.es=29541]="es",n[n.it=29801]="it",n[n.ko=28523]="ko",n[n.fr=29286]="fr",n[n.none=0]="none"}(R||(R={}));var N,$=0,L=1,z=2,W=1,q=0,F=1,G=3,H=20,V=0,Q=25,Y=48,J=40,K=40,X=295,Z=512,nn=10485760;function tn(n){return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n>=48&&n<=57?n-48:0}function rn(n){for(var t=[],i=0,r=0;i<n.length;){var e=n.charCodeAt(i++);if(e<128)t[r++]=String.fromCharCode(e);else if(e>191&&e<224){var o=n.charCodeAt(i++);t[r++]=String.fromCharCode((31&e)<<6|63&o)}else if(e>239&&e<365){var u=((7&e)<<18|(63&n.charCodeAt(i++))<<12|(63&n.charCodeAt(i++))<<6|63&n.charCodeAt(i++))-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(1023&u))}else{var c=n.charCodeAt(i++),f=n.charCodeAt(i++);t[r++]=String.fromCharCode((15&e)<<12|(63&c)<<6|63&f)}}return t.join("")}function en(n){for(var t=BigInt(0),i=n.length;i>0;i--)t=t*BigInt(256)+BigInt(n.charCodeAt(i-1));return t}function on(n){for(var t=n,i="",r=0;r<8;r++)i+=String.fromCharCode(t%256),t=t/256|0;return i}function un(n){for(var t="",i=0;i<n.length;i++){var r=15&n.charCodeAt(i),e=n.charCodeAt(i)>>4&15;t+=e<10?String.fromCharCode(e+48):String.fromCharCode(e+55),t+=r<10?String.fromCharCode(r+48):String.fromCharCode(r+55)}return t}function cn(n){if(n.length%2)return"";for(var t="",i=0;i+1<n.length;i+=2){var r=tn(n.charCodeAt(i+0)),e=tn(n.charCodeAt(i+1));t+=String.fromCharCode(16*r+e)}return t}function fn(n){for(var t="",i=n.length-1;i>=0;i--){var r=15&n.charCodeAt(i),e=n.charCodeAt(i)>>4&15;t+=e<10?String.fromCharCode(e+48):String.fromCharCode(e+55),t+=r<10?String.fromCharCode(r+48):String.fromCharCode(r+55)}return t}function an(n){for(var t="",i=n.length;i>0;i-=2)t+=n.substring(i-2,i);return parseInt(t,16)}function sn(n){for(var t="0000000000000000"+n.toString(16).toUpperCase(),i="",r=(t=t.substring(t.length-16)).length;r>0;r-=2)i+=t.substring(r-2,r);return i}function ln(n){for(var t=[],i=0,r=0;r<n.length;r++){var e=n.charCodeAt(r);e<128?t[i++]=String.fromCharCode(e):e<2048?(t[i++]=String.fromCharCode(e>>6|192),t[i++]=String.fromCharCode(63&e|128)):55296==(64512&e)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(e=65536+((1023&e)<<10)+(1023&n.charCodeAt(++r)),t[i++]=String.fromCharCode(e>>18|240),t[i++]=String.fromCharCode(e>>12&63|128),t[i++]=String.fromCharCode(e>>6&63|128),t[i++]=String.fromCharCode(63&e|128)):(t[i++]=String.fromCharCode(e>>12|224),t[i++]=String.fromCharCode(e>>6&63|128),t[i++]=String.fromCharCode(63&e|128))}return t.join("")}function hn(n,t){return function(n,t){for(var i=Math.min(n.length,t.length);i>0;i--){if(n.charCodeAt(i-1)<t.charCodeAt(i-1))return-1;if(n.charCodeAt(i-1)>t.charCodeAt(i-1))return 1}return n.length<t.length?-1:n.length>t.length?1:0}(cn(n),cn(t))}function vn(n){for(var t=0,i=0;i<n.length;i++)t=256*t+n.charCodeAt(n.length-i-1);return new Date(t/1e4-116444736e5)}!function(n){n.wt="dev",n._t="prod"}(N||(N={}));var dn=undefined;function yn(n){var t="function"==typeof Map?new Map:undefined;return yn=function(n){if(null===n||(i=n,-1===Function.toString.call(i).indexOf("[native code]")))return n;var i;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(n))return t.get(n);t.set(n,r)}function r(){return pn(n,arguments,jn(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),wn(r,n)},yn(n)}function pn(n,t,i){return pn=Sn()?Reflect.construct.bind():function(n,t,i){var r=[null];r.push.apply(r,t);var e=new(Function.bind.apply(n,r));return i&&wn(e,i.prototype),e},pn.apply(null,arguments)}function bn(n){return function(n){if(Array.isArray(n))return An(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||kn(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&wn(n,t)}function wn(n,t){return wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},wn(n,t)}function _n(n){var t=Sn();return function(){var i,r=jn(n);if(t){var e=jn(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return gn(this,i)}}function gn(n,t){if(t&&("object"===xn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function Sn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}function jn(n){return jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jn(n)}function On(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function En(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Tn(n,t,i){return t&&En(n.prototype,t),i&&En(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function kn(n,t){if(n){if("string"==typeof n)return An(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);return"Object"===i&&n.constructor&&(i=n.constructor.name),"Map"===i||"Set"===i?Array.from(n):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?An(n,t):void 0}}function An(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function xn(n){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xn(n)}function Cn(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Rn(){}var In,Mn=function(n){return Cn(this,dn),n}.bind(undefined);function Un(n){return n()}function Pn(){return Object.create(null)}function Dn(n){n.forEach(Un)}function Bn(n){return"function"==typeof n}function Nn(n,t){return n!=n?t==t:n!==t||n&&"object"===xn(n)||"function"==typeof n}function $n(n,t){return In||(In=document.createElement("a")),In.href=t,n===In.href}function Ln(n){return 0===Object.keys(n).length}function zn(n){var t=this;if(null==n)return Rn;for(var i=arguments.length,r=new Array(i>1?i-1:0),e=1;e<i;e++)r[e-1]=arguments[e];var o=n.subscribe.apply(n,r);return o.unsubscribe?function(){return Cn(this,t),o.unsubscribe()}.bind(this):o}function Wn(n){var t,i=this;return zn(n,function(n){return Cn(this,i),t=n}.bind(this))(),t}function qn(n,t,i){n.$$.on_destroy.push(zn(t,i))}function Fn(n,t,i,r){if(n){var e=Gn(n,t,i,r);return n[0](e)}}function Gn(n,t,i,r){return n[1]&&r?function(n,t){for(var i in t)n[i]=t[i];return n}(i.ctx.slice(),n[1](r(t))):i.ctx}function Hn(n,t,i,r){if(n[2]&&r){var e=n[2](r(i));if(t.dirty===undefined)return e;if("object"===xn(e)){for(var o=[],u=Math.max(t.dirty.length,e.length),c=0;c<u;c+=1)o[c]=t.dirty[c]|e[c];return o}return t.dirty|e}return t.dirty}function Vn(n,t,i,r,e,o){if(e){var u=Gn(t,i,r,o);n.p(u,e)}}function Qn(n){if(n.ctx.length>32){for(var t=[],i=n.ctx.length/32,r=0;r<i;r++)t[r]=-1;return t}return-1}function Yn(n,t,i){return n.set(i),t}(function(n,t){return Cn(this,dn),Object.prototype.hasOwnProperty.call(n,t)}).bind(undefined);var Jn="undefined"!=typeof window,Kn=Jn?function(){return Cn(this,dn),window.performance.now()}.bind(undefined):function(){return Cn(this,dn),Date.now()}.bind(undefined),Xn=Jn?function(n){return Cn(this,dn),requestAnimationFrame(n)}.bind(undefined):Rn;var Zn=new Set;function nt(n){var t=this;Zn.forEach(function(i){Cn(this,t),i.c(n)||(Zn["delete"](i),i.f())}.bind(this)),0!==Zn.size&&Xn(nt)}function tt(n){var t,i=this;return 0===Zn.size&&Xn(nt),{promise:new Promise(function(r){Cn(this,i),Zn.add(t={c:n,f:r})}.bind(this)),abort:function(){Zn["delete"](t)}}}var it;function rt(){!0}function et(){!1}function ot(n,t){n.appendChild(t)}function ut(n,t,i){var r=ct(n);if(!r.getElementById(t)){var e=vt("style");e.id=t,e.textContent=i,at(r,e)}}function ct(n){if(!n)return document;var t=n.getRootNode?n.getRootNode():n.ownerDocument;return t&&t.host?t:n.ownerDocument}function ft(n){var t=vt("style");return at(ct(n),t),t.sheet}function at(n,t){ot(n.head||n,t)}function st(n,t,i){n.insertBefore(t,i||null)}function lt(n){n.parentNode.removeChild(n)}function ht(n,t){for(var i=0;i<n.length;i+=1)n[i]&&n[i].d(t)}function vt(n){return document.createElement(n)}function dt(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function yt(n){return document.createTextNode(n)}function pt(){return yt(" ")}function bt(){return yt("")}function mt(n,t,i,r){var e=this;return n.addEventListener(t,i,r),function(){return Cn(this,e),n.removeEventListener(t,i,r)}.bind(this)}function wt(n){return function(t){return t.preventDefault(),n.call(this,t)}}function _t(n,t,i){null==i?n.removeAttribute(t):n.getAttribute(t)!==i&&n.setAttribute(t,i)}function gt(n){return Array.from(n.childNodes)}function St(n,t){t=""+t,n.wholeText!==t&&(n.data=t)}function jt(n,t){n.value=null==t?"":t}function Ot(n,t,i,r){null===i?n.style.removeProperty(t):n.style.setProperty(t,i,r?"important":"")}function Et(n,t){for(var i=0;i<n.options.length;i+=1){var r=n.options[i];if(r.__value===t)return void(r.selected=!0)}n.selectedIndex=-1}function Tt(){if(it===undefined){it=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(n){it=!0}}return it}function kt(n,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},r=i.bubbles,e=void 0!==r&&r,o=i.cancelable,u=void 0!==o&&o,c=document.createEvent("CustomEvent");return c.initCustomEvent(n,e,u,t),c}var At=function(){function n(){var t=arguments.length>0&&arguments[0]!==undefined&&arguments[0];On(this,n),this.is_svg=!1,this.is_svg=t,this.e=this.n=null}return Tn(n,[{key:"c",value:function(n){this.h(n)}},{key:"m",value:function(n,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;this.e||(this.is_svg?this.e=dt(t.nodeName):this.e=vt(t.nodeName),this.t=t,this.c(n)),this.i(i)}},{key:"h",value:function(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}},{key:"i",value:function(n){for(var t=0;t<this.n.length;t+=1)st(this.t,this.n[t],n)}},{key:"p",value:function(n){this.d(),this.h(n),this.i(this.a)}},{key:"d",value:function(){this.n.forEach(lt)}}]),n}();var xt,Ct=new Map,Rt=0;function It(n){for(var t=5381,i=n.length;i--;)t=(t<<5)-t^n.charCodeAt(i);return t>>>0}function Mt(n,t){var i={stylesheet:ft(t),rules:{}};return Ct.set(n,i),i}function Ut(n,t,i,r,e,o,u){for(var c=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0,f=16.666/r,a="{\n",s=0;s<=1;s+=f){var l=t+(i-t)*o(s);a+=100*s+"%{".concat(u(l,1-l),"}\n")}var h=a+"100% {".concat(u(i,1-i),"}\n}"),v="__svelte_".concat(It(h),"_").concat(c),d=ct(n),y=Ct.get(d)||Mt(d,n),p=y.stylesheet,b=y.rules;b[v]||(b[v]=!0,p.insertRule("@keyframes ".concat(v," ").concat(h),p.cssRules.length));var m=n.style.animation||"";return n.style.animation="".concat(m?"".concat(m,", "):"").concat(v," ").concat(r,"ms linear ").concat(e,"ms 1 both"),Rt+=1,v}function Pt(n,t){var i=this,r=(n.style.animation||"").split(", "),e=r.filter(t?function(n){return Cn(this,i),n.indexOf(t)<0}.bind(this):function(n){return Cn(this,i),-1===n.indexOf("__svelte")}.bind(this)),o=r.length-e.length;o&&(n.style.animation=e.join(", "),(Rt-=o)||function(){var n=this;Xn(function(){var t=this;Cn(this,n),Rt||(Ct.forEach(function(n){Cn(this,t);for(var i=n.stylesheet,r=i.cssRules.length;r--;)i.deleteRule(r);n.rules={}}.bind(this)),Ct.clear())}.bind(this))}())}function Dt(n){xt=n}function Bt(){if(!xt)throw new Error("Function called outside component initialization");return xt}function Nt(n){Bt().$$.on_mount.push(n)}function $t(){var n=this,t=Bt();return function(i,r){var e=this,o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},u=o.cancelable,c=void 0!==u&&u;Cn(this,n);var f=t.$$.callbacks[i];if(f){var a=kt(i,r,{cancelable:c});return f.slice().forEach(function(n){Cn(this,e),n.call(t,a)}.bind(this)),!a.defaultPrevented}return!0}.bind(this)}function Lt(n,t){var i=this,r=n.$$.callbacks[t.type];r&&r.slice().forEach(function(n){return Cn(this,i),n.call(this,t)}.bind(this))}var zt=[],Wt=[],qt=[],Ft=[],Gt=Promise.resolve(),Ht=!1;function Vt(){Ht||(Ht=!0,Gt.then(ni))}function Qt(){return Vt(),Gt}function Yt(n){qt.push(n)}function Jt(n){Ft.push(n)}var Kt,Xt=new Set,Zt=0;function ni(){var n=xt;do{for(;Zt<zt.length;){var t=zt[Zt];Zt++,Dt(t),ti(t.$$)}for(Dt(null),zt.length=0,Zt=0;Wt.length;)Wt.pop()();for(var i=0;i<qt.length;i+=1){var r=qt[i];Xt.has(r)||(Xt.add(r),r())}qt.length=0}while(zt.length);for(;Ft.length;)Ft.pop()();Ht=!1,Xt.clear(),Dt(n)}function ti(n){if(null!==n.fragment){n.update(),Dn(n.before_update);var t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(Yt)}}function ii(){var n=this;return Kt||(Kt=Promise.resolve()).then(function(){Cn(this,n),Kt=null}.bind(this)),Kt}function ri(n,t,i){n.dispatchEvent(kt("".concat(t?"intro":"outro").concat(i)))}var ei,oi=new Set;function ui(){ei={r:0,c:[],p:ei}}function ci(){ei.r||Dn(ei.c),ei=ei.p}function fi(n,t){n&&n.i&&(oi["delete"](n),n.i(t))}function ai(n,t,i,r){var e=this;if(n&&n.o){if(oi.has(n))return;oi.add(n),ei.c.push(function(){Cn(this,e),oi["delete"](n),r&&(i&&n.d(1),r())}.bind(this)),n.o(t)}}var si={duration:0};function li(n,t,i,r){var e=t(n,i),o=r?0:1,u=null,c=null,f=null;function a(){f&&Pt(n,f)}function s(n,t){var i=n.b-o;return t*=Math.abs(i),{a:o,b:n.b,d:i,duration:t,start:n.start,end:n.start+t,group:n.group}}function l(t){var i=this,r=e||si,l=r.delay,h=void 0===l?0:l,v=r.duration,d=void 0===v?300:v,y=r.easing,p=void 0===y?Mn:y,b=r.tick,m=void 0===b?Rn:b,w=r.css,_={start:Kn()+h,b:t};t||(_.group=ei,ei.r+=1),u||c?c=_:(w&&(a(),f=Ut(n,o,t,d,h,p,w)),t&&m(0,1),u=s(_,d),Yt(function(){return Cn(this,i),ri(n,t,"start")}.bind(this)),tt(function(t){if(Cn(this,i),c&&t>c.start&&(u=s(c,d),c=null,ri(n,u.b,"start"),w&&(a(),f=Ut(n,o,u.b,u.duration,0,p,e.css))),u)if(t>=u.end)m(o=u.b,1-o),ri(n,u.b,"end"),c||(u.b?a():--u.group.r||Dn(u.group.c)),u=null;else if(t>=u.start){var r=t-u.start;o=u.a+u.d*p(r/u.duration),m(o,1-o)}return!(!u&&!c)}.bind(this)))}return{run:function(n){var t=this;Bn(e)?ii().then(function(){Cn(this,t),e=e(),l(n)}.bind(this)):l(n)},end:function(){a(),u=c=null}}}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function hi(n,t){var i=this;ai(n,1,1,function(){Cn(this,i),t["delete"](n.key)}.bind(this))}function vi(n,t,i,r,e,o,u,c,f,a,s,l){for(var h=n.length,v=o.length,d=h,y={};d--;)y[n[d].key]=d;var p=[],b=new Map,m=new Map;for(d=v;d--;){var w=l(e,o,d),_=i(w),g=u.get(_);g?r&&g.p(w,t):(g=a(_,w)).c(),b.set(_,p[d]=g),_ in y&&m.set(_,Math.abs(d-y[_]))}var S=new Set,j=new Set;function O(n){fi(n,1),n.m(c,s),u.set(n.key,n),s=n.first,v--}for(;h&&v;){var E=p[v-1],T=n[h-1],k=E.key,A=T.key;E===T?(s=E.first,h--,v--):b.has(A)?!u.has(k)||S.has(k)?O(E):j.has(A)?h--:m.get(k)>m.get(A)?(j.add(k),O(E)):(S.add(A),h--):(f(T,u),h--)}for(;h--;){var x=n[h];b.has(x.key)||f(x,u)}for(;v;)O(p[v-1]);return p}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);(function(){return Cn(this,dn),""}).bind(undefined);function di(n,t,i){var r=n.$$.props[t];r!==undefined&&(n.$$.bound[r]=i,i(n.$$.ctx[r]))}function yi(n){n&&n.c()}function pi(n,t,i,r){var e=this,o=n.$$,u=o.fragment,c=o.on_mount,f=o.on_destroy,a=o.after_update;u&&u.m(t,i),r||Yt(function(){Cn(this,e);var t=c.map(Un).filter(Bn);f?f.push.apply(f,bn(t)):Dn(t),n.$$.on_mount=[]}.bind(this)),a.forEach(Yt)}function bi(n,t){var i=n.$$;null!==i.fragment&&(Dn(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function mi(n,t){-1===n.$$.dirty[0]&&(zt.push(n),Vt(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function wi(n,t,i,r,e,o,u){var c=this,f=arguments.length>7&&arguments[7]!==undefined?arguments[7]:[-1],a=xt;Dt(n);var s=n.$$={fragment:null,ctx:null,props:o,update:Rn,not_equal:e,bound:Pn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Pn(),dirty:f,skip_bound:!1,root:t.target||a.$$.root};u&&u(s.root);var l=!1;if(s.ctx=i?i(n,t.props||{},function(t,i){Cn(this,c);var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?undefined:arguments[2]:i;return s.ctx&&e(s.ctx[t],s.ctx[t]=r)&&(!s.skip_bound&&s.bound[t]&&s.bound[t](r),l&&mi(n,t)),i}.bind(this)):[],s.update(),l=!0,Dn(s.before_update),s.fragment=!!r&&r(s.ctx),t.target){if(t.hydrate){rt();var h=gt(t.target);s.fragment&&s.fragment.l(h),h.forEach(lt)}else s.fragment&&s.fragment.c();t.intro&&fi(n.$$.fragment),pi(n,t.target,t.anchor,t.customElement),et(),ni()}Dt(a)}"function"==typeof HTMLElement&&HTMLElement;var _i=function(){function n(){On(this,n)}return Tn(n,[{key:"$destroy",value:function(){bi(this,1),this.$destroy=Rn}},{key:"$on",value:function(n,t){var i=this,r=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return r.push(t),function(){Cn(this,i);var n=r.indexOf(t);-1!==n&&r.splice(n,1)}.bind(this)}},{key:"$set",value:function(n){this.$$set&&!Ln(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}]),n}();function gi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Si(n,t){var i="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!i){if(Array.isArray(n)||(i=function(n,t){if(!n)return;if("string"==typeof n)return ji(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ji(n,t)}(n))||t&&n&&"number"==typeof n.length){i&&(n=i);var r=0,e=function(){};return{s:e,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){i=i.call(n)},n:function(){var n=i.next();return u=n.done,n},e:function(n){c=!0,o=n},f:function(){try{u||null==i["return"]||i["return"]()}finally{if(c)throw o}}}}function ji(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}var Oi=[];function Ei(n){var t,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Rn,r=new Set;function e(i){if(Nn(n,i)&&(n=i,t)){var e,o=!Oi.length,u=Si(r);try{for(u.s();!(e=u.n()).done;){var c=e.value;c[1](),Oi.push(c,n)}}catch(a){u.e(a)}finally{u.f()}if(o){for(var f=0;f<Oi.length;f+=2)Oi[f][0](Oi[f+1]);Oi.length=0}}}function o(t){e(t(n))}function u(o){var u=this,c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Rn,f=[o,c];return r.add(f),1===r.size&&(t=i(e)||Rn),o(n),function(){gi(this,u),r["delete"](f),0===r.size&&(t(),t=null)}.bind(this)}return{set:e,update:o,subscribe:u}}function Ti(n,t,i){var r,e,o=this,u=!Array.isArray(n),c=u?[n]:n,f=t.length<2;return r=i,e=function(n){var i=this;gi(this,o);var r=!1,e=[],a=0,s=Rn,l=function(){if(gi(this,i),!a){s();var r=t(u?e[0]:e,n);f?n(r):s=Bn(r)?r:Rn}}.bind(this),h=c.map(function(n,t){var o=this;return gi(this,i),zn(n,function(n){gi(this,o),e[t]=n,a&=~(1<<t),r&&l()}.bind(this),function(){gi(this,o),a|=1<<t}.bind(this))}.bind(this));return r=!0,l(),function(){Dn(h),s()}}.bind(this),{subscribe:Ei(r,e).subscribe}}function ki(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ai(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function xi(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Ci(n){return Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ci(n)}function Ri(){}var Ii=[],Mi=function(){function n(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Ri;Ai(this,n),this.subscribers=[],this._systemName="",this.stop=null,this.value=this,this.start=t}var t,i,r;return t=n,i=[{key:"set",value:function(n){if(Ii.length,o=this.value,u=n,Boolean(o!=o?u==u:o!==u||o&&"object"===Ci(o)||"function"==typeof o)&&(this.value=n,this.stop)){for(var t=!Ii.length,i=0;i<this.subscribers.length;i+=1){var r=this.subscribers[i];r[1](),Ii.push(r,this.value)}if(t){for(var e=0;e<Ii.length;e+=2)Ii[e][0](Ii[e+1]);Ii.length=0}}var o,u}},{key:"update",value:function(n){this.set(n(this.value))}},{key:"subscribe",value:function(n){var t=this,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Ri,r=[n,i];this.subscribers.push(r),1===this.subscribers.length&&(this.stop=this.start(this.set)||Ri),n(this.value);var e=function(){ki(this,t);var n=this.subscribers.indexOf(r);-1!==n&&this.subscribers.splice(n,1),0===this.subscribers.length&&this.stop&&(this.stop(),this.stop=null)}.bind(this);return e}},{key:"refresh",value:function(){var n=this;this.update(function(t){return ki(this,n),t}.bind(this))}}],i&&xi(t.prototype,i),r&&xi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),n}();function Ui(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function Pi(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Di(n,t){return Di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Di(n,t)}function Bi(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=$i(n);if(t){var e=$i(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Ni(this,i)}}function Ni(n,t){if(t&&("object"===Li(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function $i(n){return $i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$i(n)}function Li(n){return Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Li(n)}var zi=undefined&&undefined.__decorate||function(n,t,i,r){var e,o=arguments.length,u=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"===("undefined"==typeof Reflect?"undefined":Li(Reflect))&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(var c=n.length-1;c>=0;c--)(e=n[c])&&(u=(o<3?e(u):o>3?e(t,i,u):e(t,i))||u);return o>3&&u&&Object.defineProperty(t,i,u),u},Wi=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Di(n,t)}(o,n);var t,i,r,e=Bi(o);function o(){var n;return Ui(this,o),(n=e.apply(this,arguments))._systemName="layout",n.window=!1,n.edit=!1,n.search=!1,n.error=!1,n.addMembers=!1,n.create=!1,n.listMembers=!1,n.info=!1,n["delete"]=!1,n}return t=o,(i=[{key:"setLayout",value:function(n){n.window!==undefined&&(this.window=n.window),n.edit!==undefined&&(this.edit=n.edit),n.search!==undefined&&(this.search=n.search),n.error!==undefined&&(this.error=n.error),n.addMembers!==undefined&&(this.addMembers=n.addMembers),n.create!==undefined&&(this.create=n.create),n.listMembers!==undefined&&(this.listMembers=n.listMembers),n.info!==undefined&&(this.info=n.info),n["delete"]!==undefined&&(this["delete"]=n["delete"])}}])&&Pi(t.prototype,i),r&&Pi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(Mi);zi([function(n,t,i){var r=i.value;i.value=function(){for(var n=this,t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];var o=r.apply(this,i);return o instanceof Promise?o.then(function(){return ki(this,n),this.set(this)}.bind(this)):this.set(this),o}}],Wi.prototype,"setLayout",null);var qi=new Wi,Fi=undefined;var Gi=Ei(undefined);Gi.subscribe(function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,Fi),qi.setLayout({error:!!n})}.bind(undefined));var Hi={chatId:"",changeId:"",authorId:"",authorName:"",type:0,isPublic:0,isLimited:0,isClosed:0,lastUpdate:"",extraId:"",name:"",description:"",links:"",inviteLink:"",language:0,countAdmins:0,countModers:0,countInvited:0,countReaders:0,countMembers:0,avatarIsPresent:0,lastSeen:"",lastAccess:"",perms:0,isMuted:0,isSubscribed:0,date:new Date,dateText:""};function Vi(n){return function(n){if(Array.isArray(n))return Qi(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"==typeof n)return Qi(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Qi(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qi(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Yi(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function Ji(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var Ki=function(){function n(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;Yi(this,n),this.dataView=t,this.pos=i,this.posEnd=r!==undefined?i+r:t.byteLength}var t,i,r;return t=n,i=[{key:"Size",value:function(){return this.posEnd-this.pos}},{key:"advance",value:function(n){if(this.pos+n>this.posEnd)throw new Error("Buffer overflow");this.pos+=n}},{key:"isEnded",value:function(){return this.pos>=this.posEnd}},{key:"getInt32",value:function(){if(this.pos+4>this.posEnd)throw new Error("Buffer overflow");var n=this.dataView.getInt32(this.pos,!0);return this.pos+=4,n}},{key:"getUint32",value:function(){if(this.pos+4>this.posEnd)throw new Error("Buffer overflow");var n=this.dataView.getUint32(this.pos,!0);return this.pos+=4,n}},{key:"getInt16",value:function(){if(this.pos+2>this.posEnd)throw new Error("Buffer overflow");var n=this.dataView.getInt16(this.pos,!0);return this.pos+=2,n}},{key:"getUint16",value:function(){if(this.pos+2>this.posEnd)throw new Error("Buffer overflow");var n=this.dataView.getUint16(this.pos,!0);return this.pos+=2,n}},{key:"getInt8",value:function(){if(this.pos>=this.posEnd)throw new Error("Buffer overflow");return this.dataView.getInt8(this.pos++)}},{key:"getUint8",value:function(){if(this.pos>=this.posEnd)throw new Error("Buffer overflow");return this.dataView.getUint8(this.pos++)}},{key:"getString8",value:function(){var n=this.getUint8();return rn(this.getBinary(n))}},{key:"getString16",value:function(){var n=this.getUint16();return rn(this.getBinary(n))}},{key:"getString32",value:function(){var n=this.getUint32();return rn(this.getBinary(n))}},{key:"getInt64NumberLikeString",value:function(){var n=!(arguments.length>0&&arguments[0]!==undefined)||arguments[0],t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],i=8;if(this.pos+i>this.posEnd)throw new Error("Buffer overflow");var r=new Uint8Array(this.dataView.buffer,this.pos,i);n&&(this.pos+=i);for(var e=t&&r.length>0&&r[0]>=128,o=[],u=r.length-1;u>=0;u--){var c=r[u];e&&(c=256-(u===r.length-1?0:1)-c);for(var f=0,a=o.length;c>0||f<a;f++)c+=256*(o[f]||0),o[f]=c%10,c=(c-o[f])/10}return(e?"-":"")+o.reverse().join("")}},{key:"getBinary",value:function(n){if(0===n)return"";if(this.pos+n>this.posEnd)throw new Error("Buffer overflow");var t=new Uint8Array(this.dataView.buffer,this.pos,n),i=String.fromCharCode.apply(null,Vi(t));return this.pos+=n,i}},{key:"getBlob",value:function(n,t){if(0===n)return null;if(this.pos+n>this.posEnd)throw new Error("Buffer overflow");var i=[new Uint8Array(this.dataView.buffer,this.pos,n)],r=new Blob(i,{type:t});return this.pos+=n,r}},{key:"getReader32",value:function(){var t=this.getUint32();if(t>this.posEnd-this.pos)throw new Error("Buffer overflow");var i=new n(this.dataView,this.pos,t);return this.pos+=t,i}},{key:"getReader16",value:function(){var t=this.getUint16();if(t>this.posEnd-this.pos)throw new Error("Buffer overflow");var i=new n(this.dataView,this.pos,t);return this.pos+=t,i}}],i&&Ji(t.prototype,i),r&&Ji(t,r),Object.defineProperty(t,"prototype",{writable:!1}),n}();function Xi(n){if(n===undefined)return 0;if("string"==typeof n)return n.length;if(Array.isArray(n)){for(var t=0,i=0;i<n.length;++i)t+=Xi(n[i]);return t}return"String"in n&&n.String!==undefined?ln(n.String).length:"String8"in n&&n.String8!==undefined?ln(n.String8).length+1:"String16"in n&&n.String16!==undefined?ln(n.String16).length+2:"String32"in n&&n.String32!==undefined?ln(n.String32).length+4:"Uint8"in n||"Int8"in n?1:"Uint16"in n||"Int16"in n?2:"Uint32"in n||"Int32"in n?4:0}function Zi(n,t,i){if("string"==typeof i)for(var r=0;r<i.length;r++)n.setUint8(t++,i.charCodeAt(r));else if(Array.isArray(i))for(var e=0;e<i.length;++e)t=Zi(n,t,i[e]);else if("String"in i&&i.String!==undefined||"String8"in i&&i.String8!==undefined||"String16"in i&&i.String16!==undefined||"String32"in i&&i.String32!==undefined){var o="";"String8"in i&&i.String8!==undefined?(o=ln(i.String8),n.setUint8(t++,o.length)):"String16"in i&&i.String16!==undefined?(o=ln(i.String16),n.setUint16(t,o.length,!0),t+=2):"String32"in i&&i.String32!==undefined?(o=ln(i.String32),n.setUint32(t,o.length,!0),t+=4):i.String!==undefined&&(o=ln(i.String));for(var u=0;u<o.length;u++)n.setUint8(t++,o.charCodeAt(u))}else"Uint8"in i&&i.Uint8!==undefined?n.setUint8(t++,i.Uint8):"Int8"in i&&i.Int8!==undefined?n.setInt8(t++,i.Int8):"Uint16"in i&&i.Uint16!==undefined?(n.setUint16(t,i.Uint16,!0),t+=2):"Int16"in i&&i.Int16!==undefined?(n.setInt16(t,i.Int16,!0),t+=2):"Uint32"in i&&i.Uint32!==undefined?(n.setUint32(t,i.Uint32,!0),t+=4):"Int32"in i&&i.Int32!==undefined?(n.setInt32(t,i.Int32,!0),t+=4):"Uint64"in i&&i.Uint64!==undefined&&(n.setBigUint64(t,i.Uint64,!0),t+=8);return t}function nr(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function tr(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var ir=function(){function n(t,i){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.counterId=0,this.debug=!1,this.connecting=!1,this.requests=new Map,this.listeners=new Map,this.url=t,this.debug=i,this.connecting=!1,this.reconnectTimeout=2e3,this.init=this.init.bind(this)}var i,r,e;return i=n,r=[{key:"getReconnectInterval",value:function(){var n=this.reconnectTimeout;return this.reconnectTimeout=this.reconnectTimeout*((3+Math.random())/2),Math.min(n,3e4)}},{key:"close",value:function(){window.removeEventListener("beforeunload",this.handleBeforeunload),this.socket&&(this.socket.removeEventListener("open",this.handleOpen),this.socket.removeEventListener("error",this.handleError),this.socket.removeEventListener("message",this.handleMessage),this.socket.removeEventListener("close",this.handleClose),this.socket.close())}},{key:"reconnect",value:function(){var n=this;y.info(t.WebSocket,"reconnect"),setTimeout(function(){nr(this,n),this.close(),this.connect()}.bind(this),this.getReconnectInterval())}},{key:"reset",value:function(){this.requests=new Map}},{key:"handleOpen",value:function(){this.connecting=!1,y.info(t.WebSocket,"connected"),this.reconnectTimeout=2e3,this.onOpen&&this.onOpen()}},{key:"handleError",value:function(n){var i="Error";i=this.socket&&this.socket.readyState===this.socket.CLOSED?"WebSocket connection to '".concat(this.url,"' failed"):o(n),y.error(t.WebSocket,i),this.onError&&this.onError(i),this.connecting=!1,this.socket.close()}},{key:"commandAsText",value:function(n){return c[n]?c[n]:"[UNKNOWN_COMMAND]"}},{key:"resultAsText",value:function(n){return f[n]?f[n]:"[UNKNOWN_RESULT]"}},{key:"failResultToText",value:function(n){switch(n){case f._n:return"Generic fail";case f.gn:return"Access denied";case f.Sn:return"Invalid parameters";case f.jn:return"Invalid request";case f.On:return"Invalid version (of protocol or something)";case f.En:return"Failed call, we need disconnect";case f.Tn:return"Out of memory situation";case f.kn:return"Sql query error";case f.An:return"User banned to interact with other user";case f.xn:return"Network problems";case f.Cn:return"File/data too big";case f.Rn:return"Data didn't exist";case f.In:return"Duplicate";case f.Mn:return"User banned temporary for too many messages or assigning";case f.Un:return"Messaging disallowed with this user (due only-friends checkbox)";case f.Pn:return"Something interrupted request processing";default:return"[UNKNOWN_RESULT]"}}},{key:"outputDebug",value:function(n,t){if(this.debug){var i=new Date,r=("0"+i.getHours()).slice(-2),e=("0"+i.getMinutes()).slice(-2),o=("0"+i.getSeconds()).slice(-2),u=("00"+i.getMilliseconds()).slice(-3);y.debug(t,"".concat(r,":").concat(e,":").concat(o,":").concat(u," ").concat(n))}}},{key:"off",value:function(n,t){var i=this.listeners.get(n);i&&i.has(t)&&i["delete"](t)}},{key:"on",value:function(n,t){var i=this.listeners.get(n);i||(i=new Set,this.listeners.set(n,i)),i.add(t)}},{key:"setRequest",value:function(n,t){this.requests.set(n,t)}},{key:"deleteRequest",value:function(n){this.requests["delete"](n)}},{key:"trigger",value:function(n,t){var i=this,r=this.listeners.get(n);r&&r.forEach(function(n){nr(this,i),n(t)}.bind(this))}},{key:"handleMessage",value:function(n){if(this.messagePartial){var i=new Uint8Array(n.data),r=new Uint8Array(this.messagePartial.byteLength+i.byteLength);r.set(this.messagePartial,0),r.set(i,this.messagePartial.byteLength),this.messagePartial=r}else this.messagePartial=new Uint8Array(n.data);var e=new DataView(this.messagePartial.buffer);if(!(e.byteLength<13)){var o=e.getUint8(0),u=new Ki(e,1,8).getBinary(8),f=e.getUint32(9,!0);if(!(e.byteLength<f+13)){var a,s=new Ki(e,13),l=this.messagePartial.buffer.byteLength;switch(this.messagePartial.byteLength>f+13?this.messagePartial=this.messagePartial.slice(f+13):this.messagePartial=undefined,o){case c._:case c.I:case c.M:case c.U:case c.D:a=undefined;break;default:a=s.getInt8()}if(this.debug)try{var h=window.BigInt?en(u):fn(u),v="id: ".concat(h,", code: ").concat(o,", name: ").concat(this.commandAsText(o),",");v+=" length: ".concat(l," byte").concat(a?", result: ".concat(this.resultAsText(a)):""," "),this.outputDebug(v,t.Received)}catch(p){y.error(t.System,p)}var d=this.requests.get(u);d&&a!==undefined&&(this.requests["delete"](u),a>0?d.resolve({result:a,reader:s,id:u}):(y.error(t.WebSocket,"code ".concat(o,": ").concat(this.resultAsText(a)," ").concat(a)),d.reject({error:this.failResultToText(a),result:a}))),this.trigger(o,s)}}}},{key:"handleClose",value:function(n){n.wasClean?y.warning(t.WebSocket,"connection was closed by the server-side"):y.warning(t.WebSocket,"connection was suddenly closed"),this.reconnect()}},{key:"handleBeforeunload",value:function(){ME.setItem("mql5_chats_connect",(new Date).getTime()),this.close()}},{key:"sendData",value:function(n,i,r){var e=this,o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;if(this.socket.readyState!==this.socket.OPEN)return setTimeout(function(){nr(this,e),this.sendData(n,i,r,o)}.bind(this),1e3),void y.warning(t.WebSocket,"WebSocket not open, try resend after timeout");var u=13+(i?Xi(i):0),c=new ArrayBuffer(u),f=new DataView(c);f.setUint8(0,n),r?Zi(f,1,r):(f.setUint32(1,287454020,!1),f.setUint32(5,1432778632,!1)),f.setUint32(9,u+(o||0)-13,!0),i&&Zi(f,13,i);try{if(this.debug){var a=window.BigInt?en(r):fn(r),s="id: ".concat(a,", code: ").concat(n,", name: ").concat(this.commandAsText(n),",");s+=" length: ".concat(c.byteLength," byte"),this.outputDebug(s,t.Send)}return void this.socket.send(c)}catch(l){return y.error(t.WebSocket,l,"Send message"),void(this.socket&&this.socket.readyState===this.socket.OPEN||(y.warning(t.WebSocket,"WebSocket closed, try reconnect"),this.reconnect()))}}},{key:"send",value:function(n,i){var r=this,e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;return new Promise(function(o,u){if(nr(this,r),!this.socket)return y.warning(t.WebSocket,"WebSocket not created"),void u("WebSocket not created");this.counterId++;var c=on(this.counterId);this.requests.set(c,{resolve:o,reject:u}),this.sendData(n,i,c,e)}.bind(this))}},{key:"directSend",value:function(n){var i=this;if(this.socket.readyState!==this.socket.OPEN)return setTimeout(function(){nr(this,i),this.directSend(n)}.bind(this),1e3),void y.warning(t.WebSocket,"WebSocket not open, try resend after timeout");this.debug&&y.info(t.Send,"block length: ".concat(n.byteLength," byte")),this.socket.send(n)}},{key:"init",value:function(n,i){var r=this;this.onOpen=n,this.onError=i,Promise.resolve().then(function(){if(nr(this,r),!window.WebSocket)return y.warning(t.WebSocket,"WebSocket is not supported by this browser"),void i("WebSocket is not supported by this browser");this.connect()}.bind(this))}},{key:"connect",value:function(){var n=this;if(!this.connecting){if(this.connecting=!0,"visible"!==document.visibilityState){var i=function(){nr(this,n),"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",i),this.connecting=!1,this.connect())}.bind(this);return y.info(t.WebSocket,"сonnection postponed, document visibility is ".concat(document.visibilityState)),void document.addEventListener("visibilitychange",i)}y.info(t.WebSocket,"connecting"),this.socket=new WebSocket("wss://".concat(this.url)),this.socket.binaryType="arraybuffer",this.reset(),this.socket.addEventListener("open",this.handleOpen.bind(this)),this.socket.addEventListener("error",this.handleError.bind(this)),this.socket.addEventListener("message",this.handleMessage.bind(this)),this.socket.addEventListener("close",this.handleClose.bind(this)),window.addEventListener("beforeunload",this.handleBeforeunload.bind(this))}}}],r&&tr(i.prototype,r),e&&tr(i,e),Object.defineProperty(i,"prototype",{writable:!1}),n}();function rr(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var er={};function or(n,i){var r=this;return new Promise(function(e,o){var u=this;rr(this,r);var c=function(n){for(var t=Wn(br),i=null,r=0,e=t.length;r<e;r++)if(t[r].messageId===n){i=t[r];break}return i}(n);c?e({message:c,key:i}):Vj(n).then(function(n){rr(this,u);var t=Wn(iT);t&&t.chatId===n.chatId||o("Received a message from an inactive chat");var r=n.message;r?e({message:r,key:i}):o("Message is empty")}.bind(this))["catch"](function(n){var i=n.error;rr(this,u),y.error(t.System,i),o(i)}.bind(this))}.bind(this))}function ur(n){var i=this,r=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return new Promise(function(e,o){var u=this;if(rr(this,i),n.recType===_.Gn)if(er[n.messageId])e(er[n.messageId]);else{var c=[],f=n.collection;f&&(f.quote&&!r&&f.quote.forEach(function(n){rr(this,u),c.push(or(n,"quote"))}.bind(this)),f.text&&f.text.forEach(function(n){rr(this,u),wr(n),c.push(or(n,"text"))}.bind(this)),f.file&&f.file.forEach(function(n){rr(this,u),wr(n),c.push(or(n,"file"))}.bind(this)));var a=[];Promise.allSettled(c).then(function(i){var r=this;rr(this,u);var o={};i.forEach(function(n){var i=this;if(rr(this,r),"fulfilled"===n.status){var e=n.value,u=e.message,c=e.key;switch(u.recType){case _.Gn:"quote"===c&&a.push(new Promise(function(n,r){var e=this;rr(this,i),ur(u,!0).then(function(t){rr(this,e),o.quote=t,n()}.bind(this))["catch"](function(n){rr(this,e),y.error(t.System,n),r()}.bind(this))}.bind(this)));break;case _.Ln:"quote"===c?o.quote=u:o.text=u;break;case _.zn:u.data.preview&&u.data.preview.type?(o.media||(o.media=[]),o.media.push(u)):(o.files||(o.files=[]),o.files.push(u))}}else"rejected"===n.status&&y.warning(t.System,n.reason)}.bind(this)),a.length?Promise.allSettled(a).then(function(){rr(this,r),n.data=o,er[n.messageId]=n,e(n)}.bind(this)):(n.data=o,er[n.messageId]=n,e(n))}.bind(this))}else o("Message not type collection")}.bind(this))}function cr(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var fr={};function ar(n,i){var r=this;return new Promise(function(e,o){var u=this;cr(this,r);var c=function(n){for(var t=Wn(br),i=null,r=0,e=t.length;r<e;r++)if(t[r].messageId===n){i=t[r];break}return i}(n);c?e({message:c,key:i}):Vj(n).then(function(n){cr(this,u);var t=n.message;t?e({message:t,key:i}):o("Message is empty")}.bind(this))["catch"](function(n){var i=n.error;cr(this,u),y.error(t.System,i),o()}.bind(this))}.bind(this))}function sr(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var lr,hr,vr,dr,yr,pr=[],br=Ei([]),mr=Ei(m);function wr(n){var t=this;0!==parseInt(n,16)&&(pr.push(n),br.update(function(i){sr(this,t);for(var r=0,e=i.length;r<e;r++)(i[r].linkId&&i[r].linkId===n||i[r].messageId===n)&&(i.splice(r,1),r--,e--);return i}.bind(this)))}function _r(n){var t=this;return n.sort(function(n,i){return sr(this,t),n.sequence>i.sequence?1:n.sequence<i.sequence?-1:0}.bind(this)),n}function gr(n){var t=this;br.update(function(i){return sr(this,t),~pr.indexOf(n.messageId)||n.recType===_.Fn?i:(n.linkId&&parseInt(n.linkId,16)>0&&jr(n.linkId),i.push(n),_r(i))}.bind(this))}function Sr(n){var i=this;return new Promise(function(r){var e=this;sr(this,i),br.update(function(i){var o=this;sr(this,e);var u=0;return n.forEach(function(n){var r=this;sr(this,o),(!lr||hn(n.messageId,lr)<0)&&(lr=n.messageId),(!hr||hn(n.messageId,hr)>0)&&(hr=n.messageId),n.recType!==_.Wn&&n.recType!==_.Fn&&(n.recType===_.Gn?(u++,ur(n).then(function(n){sr(this,r),gr(n)}.bind(this))["catch"](function(n){sr(this,r),y.error(t.Store,n)}.bind(this))):~pr.indexOf(n.messageId)||(n.linkId&&parseInt(n.linkId,16)>0&&jr(n.linkId),n.tags&&(n.tags.quote||n.tags.files)?(u++,function(n){var i=this,r=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return new Promise(function(e,o){var u=this;if(cr(this,i),n.tags&&n.recType===_.Ln)if(fr[n.messageId])e(fr[n.messageId]);else{var c=[],f=n.tags;f&&(f.quote&&!r&&c.push(ar(f.quote.citedId,"quote")),f.files&&f.files.linkedIds.forEach(function(n){cr(this,u),wr(n),c.push(ar(n,"file"))}.bind(this)));var a=[];Promise.allSettled(c).then(function(i){var r=this;cr(this,u);var o={text:n.data.text||""};i.forEach(function(n){var i=this;if(cr(this,r),"fulfilled"===n.status){var e=n.value,u=e.message;"quote"===e.key?u.recType===_.Ln?o.quote=u:u.recType===_.Gn?a.push(new Promise(function(n,r){var e=this;cr(this,i),ur(u,!0).then(function(t){cr(this,e),o.quote=t,n()}.bind(this))["catch"](function(n){cr(this,e),y.error(t.System,n),r()}.bind(this))}.bind(this))):o.quote||(o.quote=u):u.recType===_.zn&&function(){cr(this,i),u.data.preview&&u.data.preview.type&&u.data.fileSize<nn?(o.media||(o.media=[]),o.media.push(u)):(o.files||(o.files=[]),o.files.push(u))}.bind(this)()}else"rejected"===n.status&&y.warning(t.System,n.reason)}.bind(this)),a.length?Promise.allSettled(a).then(function(){cr(this,r),n.data=o,fr[n.messageId]=n,e(n)}.bind(this)):(n.data=o,fr[n.messageId]=n,e(n))}.bind(this))}else o("Message does not contain tags")}.bind(this))}(n).then(function(n){sr(this,r),gr(n)}.bind(this))["catch"](function(n){sr(this,r),y.error(t.Store,n)}.bind(this))):(u++,i.push(n))))}.bind(this)),r(u),_r(i)}.bind(this))}.bind(this))}function jr(n){var t=this;pr.push(n),br.update(function(i){sr(this,t);for(var r=0,e=i.length;r<e;r++)if(i[r].messageId===n){i.splice(r,1);break}return i}.bind(this))}function Or(n,t){var i,r=arguments.length>2&&arguments[2]!==undefined&&arguments[2];return function(){for(var e=this,o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];var f=u,a=r&&!i;clearTimeout(i),i=setTimeout((function(){i=null,r||n.apply(e,f)}),t),a&&n.apply(e,f)}}var Er=undefined;function Tr(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var kr=Ei(0),Ar=Or((function(){var n=this;if(!vr||vr===w)return;(function(){var n=this;return new Promise(function(t,i){var r=this;RO(this,n),Uj.send(c.wn,null).then(function(n){n.result;var i=n.reader;RO(this,r);var e=function(n){return _e(n,xe).count}(i);t(e)}.bind(this))["catch"](function(n){RO(this,r),i(n)}.bind(this))}.bind(this))})().then(function(t){Tr(this,n),kr.set(t)}.bind(this))["catch"](function(i){var r=i.error;Tr(this,n),y.error(t.System,r,"Unread")}.bind(this))}),500,!1);function xr(n){return hn(n.lastUpdate||m,n.lastAccess||m)>0}function Cr(n,t){if(n){var i=n.querySelector(".notify-icon_messages");if(i){var r=i.querySelector(".notify-icon_count");r&&i.removeChild(r),t>0&&(i.innerHTML='<i class="notify-icon_count">'.concat(t,"</i>"))}}}function Rr(){var n=this;GE("mql5_chats_unread").then(function(t){Tr(this,n);var i=parseInt(t,10)||0;kr.set(i)}.bind(this))["catch"](function(i){Tr(this,n),y.error(t.System,i,"Unread")}.bind(this))}function Ir(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}kr.subscribe(function(n){Tr(this,Er),function(n){var t=document.getElementById("notifyMessages");t&&Cr(t,n);var i=document.getElementById("notifyMessagesMobile");i&&Cr(i,n);!function(n){var t=document.getElementById("counterMessagesMenu");if(!t)return;t.innerHTML=n>0?"<i>".concat(n,"</i>"):""}(n)}(n=Math.min(n,99)),function(n){HE("mql5_chats_unread",n+"")}(n)}.bind(undefined));var Mr=Ei(!1),Ur=Ei(!1);function Pr(n){var t=this,i=Wn(iT);i&&n.chatId===i.chatId&&(iT.update(function(i){return Ir(this,t),i&&i.lastAccess&&(i.lastAccess!==n.lastAccess&&Ar(),i.lastAccess=n.lastAccess),i}.bind(this)),Sr(n.messages))}function Dr(n){var t=this,i=Wn(iT);if(i&&n.chatId===i.chatId){iT.update(function(i){return Ir(this,t),i&&i.lastAccess&&(i.lastAccess!==n.lastAccess&&Ar(),i.lastAccess=n.lastAccess),i}.bind(this)),Ur.set(!1);var r=n.result===f.Bn,e=n.messages;Sr(e).then(function(n){Ir(this,t),n||Br()}.bind(this)),r&&e.length||Mr.set(!0)}}function Br(){Wn(Mr)||Wn(Ur)||function(n){var i=this,r=Wn(iT);r&&(Ur.set(!0),Gj(r.chatId,n).then(Dr)["catch"](function(n){var r=n.error;Ir(this,i),y.error(t.System,r)}.bind(this)))}(lr)}function Nr(){br.set([]),lr=undefined,hr=undefined,Mr.set(!1),Ur.set(!1);var n=Wn(iT);n&&mr.set(n.lastAccess)}function $r(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Lr(n){return Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Lr(n)}window.localizationList=window.localizationList||{},window.localizationInited=!1;window.mqGlobal?window.mqGlobal.Language:window.currentLanguage;var zr,Wr={};function qr(n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(window.localizationList[t]=n[t])}function Fr(n){if(window.localizationInited||Gr(),!n)return window.localizationList;var t,i=window.localizationList;if(n in Wr)t=Wr[n];else{for(var r=n.split("."),e=0,o=r.length;e<o&&r[e]in i;e++)i=i[r[e]];if("string"==typeof i&&(t=i),!t)return"["+n+"]";Wr[n]=t}for(var u=0,c=arguments.length<=1?0:arguments.length-1;u<c;u++)t=t.replace("{"+u+"}",u+1<1||arguments.length<=u+1?undefined:arguments[u+1]);return t}function Gr(){var n=document.body.querySelectorAll('script[type="application/json"]');window.localizationInited=!0;for(var t=0,i=n.length;t<i;t++){var r=n[t];if("translate"===r.getAttribute("data-type")){var e=r.innerHTML;if(e){try{e=JSON.parse(e)}catch(o){e=null,console.warn(o)}e&&"object"===Lr(e)&&qr(e)}}}}function Hr(n){return Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Hr(n)}var Vr={weekday:["Mo","Tu","We","Th","Fr","Sa","Su"],weekdayFull:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthFull:["January","February","March","April","May","June","July","August","September","October","November","December"]},Qr={date:undefined,dateTime:undefined};function Yr(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())}function Jr(n,t){return(Yr(n)-Yr(t))/864e5|0}function Kr(n){var t=n.dateTime;switch(n.type){case"datetime":case"datestandardtime":return Zr(t)+" "+ne(t);case"date":case"datestandard":return Zr(t);case"shortDate":return Qr.shortDate.format(t);case"shortDateTime":return Qr.shortDate.format(t)+" "+ne(t);case"time":return ne(t);case"shortMonth":return Qr.shortMonth?Qr.shortMonth.format(t):re(t);case"longMonth":return Qr.shortMonth?Qr.longMonth.format(t):re(t);default:throw new Error("Datetime type '"+n.type+"' is not supported")}}function Xr(n){var t="object"!==Hr(n.dateTime)?new Date(n.dateTime):n.dateTime;if(!zr)return n.type="datestandard",Kr(n);var i=new Date,r=Jr(t,i);switch(n.type){case"datetime":return 0===r?Qr.time.format(t):Qr.relative&&r>=-1?Qr.relative.format(r,"day")+", "+Qr.time.format(t):i.getFullYear()===t.getFullYear()?Qr.shortDate.format(t)+", "+Qr.time.format(t):Zr(t)+", "+ne(t);case"date":return Qr.relative&&r>=-2&&r<=0?Qr.relative.format(r,"day"):i.getFullYear()===t.getFullYear()?Qr.longDate.format(t):Qr.datestandard.format(t).replace(/-/g,".");default:return 0===r?Qr.time.format(t):Qr.relative&&r>=-1?Qr.relative.format(r,"day"):i.getFullYear()===t.getFullYear()?Qr.shortDate.format(t):Qr.datestandard.format(t).replace(/-/g,".")}}function Zr(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:".";return n.getFullYear()+t+te(n.getMonth()+1)+t+te(n.getDate())}function ne(n){return te(n.getHours())+":"+te(n.getMinutes())}function te(n){return("0"+n).slice(-2)}function ie(n){var t=n.date,i=n.dateLocal,r=void 0===i||i,e=r?t.getFullYear():t.getUTCFullYear(),o=(e=(e="0000"+e).substring(e.length-4))+".";return o+=((e=(r?t.getMonth():t.getUTCMonth())+1)<10?"0"+e:e)+".",o+=((e=r?t.getDate():t.getUTCDate())<10?"0"+e:e)+" ",o+=((e=r?t.getHours():t.getUTCHours())<10?"0"+e:e)+":",o+=(e=r?t.getMinutes():t.getUTCMinutes())<10?"0"+e:e}function re(n){return"".concat(Fr("monthsShort.".concat(n.getMonth())))}function ee(n){var t=this,i="<([a-zA-Z]+)>([0-9a-fA-F]+)</(?:[a-zA-Z]+)>",r=n.match(new RegExp(i,"g"));if(r){var e={};return r.forEach(function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,t);var r=n.match(new RegExp(i));if(r&&3===r.length){var o=r[1],u=r[2];e[o]||(e[o]=[]),e[o].push(u)}}.bind(this)),e}}!function(){if(zr=window.Intl!==undefined){var n={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1},t={year:"numeric",month:"long",day:"numeric"},i={year:"numeric",month:"2-digit",day:"2-digit"},r={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},e={day:"numeric",month:"short"},o={day:"numeric",month:"long"},u={hour:"numeric",minute:"numeric",hour12:!1},c={month:"short"},f={month:"long"},a={weekday:"short"},s={weekday:"long"},l={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1},h=document.documentElement.lang||"en-GB";switch(h){case"ru":h="ru-RU";break;case"zh":h="zh-CN";break;case"en":h="en-GB"}var v=[h,"en"];Qr.dateTime=new window.Intl.DateTimeFormat(v,n),Qr.date=new window.Intl.DateTimeFormat(v,t),Qr.datestandard=new window.Intl.DateTimeFormat(["lt-LT","ko-KR","en"],i),Qr.datestandardtime=new window.Intl.DateTimeFormat(["lt-LT","ko-KR","en"],r),Qr.shortDate=new window.Intl.DateTimeFormat(v,e),Qr.longDate=new window.Intl.DateTimeFormat(v,o),Qr.time=new window.Intl.DateTimeFormat(v,u),Qr.relative=window.Intl.RelativeTimeFormat?new window.Intl.RelativeTimeFormat(v,{numeric:"auto"}):null,Qr.shortMonth=new window.Intl.DateTimeFormat(v,c),Qr.longMonth=new window.Intl.DateTimeFormat(v,f),Qr.shortWeekday=new window.Intl.DateTimeFormat(v,a),Qr.longWeekday=new window.Intl.DateTimeFormat(v,s),Qr.humanreadabledate=new window.Intl.DateTimeFormat(v,l),function(){Vr={month:[],monthFull:[],weekday:[],weekdayFull:[]};for(var n=0;n<12;n++){var t=new Date(2020,n,10),i=Qr.shortMonth.format(t).replace(".","");i=i.charAt(0).toUpperCase()+i.slice(1,3);var r=Qr.longMonth.format(t);r=r.charAt(0).toUpperCase()+r.slice(1),Vr.month.push(i),Vr.monthFull.push(r)}for(var e=0;e<7;e++){var o=new Date(2020,9,5+e),u=Qr.shortWeekday.format(o);u=u.charAt(0).toUpperCase()+u.slice(1);var c=Qr.longWeekday.format(o);c=c.charAt(0).toUpperCase()+c.slice(1),Vr.weekday.push(u),Vr.weekdayFull.push(c)}}()}}();var oe,ue=["bytes","kb","mb","gb","tb"];function ce(n,t){var i=n.getBinary(32),r=n.getInt32(),e=function(n){if(0==n)return"0 Byte";var t=parseInt(Math.floor(Math.log(n)/Math.log(1024)),10);return Math.round(n/Math.pow(1024,t),2)+" "+ue[t]}(r),o=n.getString16(),u=n.getString16(),c=undefined,f=0,a=0,s=0,l=null;if(n.isEnded()||(n.getUint16(),f=n.getInt8(),a=n.getInt32(),s=n.getInt32(),(l=n.getBlob(n.Size(),"image/png"))&&(c=URL.createObjectURL(l))),f||a||s)return t.data={hash:i,fileSize:r,fileSizeString:e,mime:o,fileName:u,url:"https://"+RE+"/attach/0x"+t.messageIdLE,preview:{type:f,width:a,height:s,src:c}},void(l&&t.data&&t.data.preview&&(t.data.preview.blob=l));t.data={hash:i,fileSize:r,mime:o,fileName:u,url:"https://"+RE+"/attach/0x"+t.messageIdLE}}function fe(n,i){var r=n.getReader32();if(r.Size()<=0)return"";switch(i.recType){case _.Ln:!function(n,i){var r=n.getBinary(n.getUint32()),e=n.getReader32(),o=$r(rn(r));if(i.data={text:o},e)for(i.tags={};!e.isEnded();)try{var u=e.getUint8();e.getUint16(),e.getUint16();var c=e.getReader16();if(0===c.Size())return;if(u===T){var f=c.getString16(),a=c.getString16(),s=c.getString16(),l=c.getString16(),h=void 0;0!==c.Size()&&(h={width:c.getInt16(),height:c.getInt16(),hash:c.getUint8(),src:"https://"+RE+"/enrichment/0x"+i.messageIdLE}),i.tags.enrich={url:f,title:a,siteName:s,description:l,preview:h}}else if(u===k){var v=un(c.getBinary(8)),d=c.getUint8(),p=un(c.getBinary(8)),b=c.getString16(),m=$r(c.getString16());i.tags.quote={citedId:v,citedType:d,citedUser:p,citedAuthor:b,citedText:m}}else if(u===A){var w=c.getUint8();c.getUint8();for(var _=[];!c.isEnded();)_.push(un(c.getBinary(8)));i.tags.files={type:w,linkedIds:_}}}catch(g){y.error(t.Parse,g)}}(r,i);break;case _.Gn:i.collection=function(n){var t=n.getBinary(n.getUint32());return n.getReader32(),ee(rn(t))}(r);break;case _.qn:i.data=function(n){var t=n.getUint8(),i={type:t};switch(t){case E.Hn:case E.Vn:i.userId=un(n.getBinary(8)),i.userName=n.getString16();break;case E.Qn:case E.Yn:case E.Jn:i.changeValue=n.getUint8();break;case E.Kn:case E.Xn:i.name=n.getString16()}return i}(r);break;case _.zn:ce(r,i)}}function ae(n){try{var i=n.getReader32(),r=i.getBinary(8),e=i.getBinary(8),o=$r(i.getString16()),u=i.getUint32(),c=i.getUint8(),f=i.getBinary(8),a=vn(r),s={messageId:un(r),messageIdLE:fn(r),authorId:un(e),authorName:o,sequence:u,recType:c,date:a,dateText:ie({date:a}),linkId:un(f)};return fe(i,s),s}catch(l){y.error(t.Parse,l)}return null}function se(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;try{var r,e=n.getReader32();i&&(e=(r=e).getReader32());var o=e.getBinary(8),u=e.getBinary(8),c=e.getBinary(8),f=$r(e.getString16()),a=e.getUint8(),s=e.getUint8(),l=e.getUint8(),h=e.getUint8(),v=e.getBinary(8),d=e.getBinary(8),p=$r(e.getString16()),b=$r(e.getString16()),m=$r(e.getString16()),w=$r(e.getString16()),_=e.getInt32(),g=e.getInt32(),S=e.getInt32(),j=e.getInt32(),O=e.getInt32(),E=e.getUint8();e.getBinary(32);var T=e.getBinary(8),k=e.getBinary(8),A=e.getInt16(),x=0!==e.getInt8(),C=0;try{C=e.getInt8()}catch(N){y.error(t.Parse,N)}var R=vn(v),I=un(o),M=un(c),U=un(u),P="";E&&(P="https://"+RE+"/avatar/0x"+fn(o)+"?"+U);var D={chatId:I,changeId:U,authorId:M,authorName:f,type:a,isPublic:s,isLimited:l,isClosed:h,lastUpdate:un(v),extraId:un(d),name:p,description:b,links:m,inviteLink:w,language:_,countAdmins:g,countModers:S,countInvited:j,countReaders:O,countMembers:g+S+j+O,avatarIsPresent:E,avatar:P,lastSeen:un(T),lastAccess:un(k),perms:A,isMuted:x?1:0,isSubscribed:C,date:R,dateText:ie({date:R})};if(i&&!r.isEnded())try{var B=ae(r);B&&(D.topMessage=B)}catch(N){y.error(t.Parse,N)}return D}catch(N){return y.error(t.Parse,N),null}}function le(n){var t=n;if(delete t.changeId,delete t.authorId,delete t.authorName,delete t.isPublic,delete t.isLimited,delete t.isClosed,delete t.lastUpdate,delete t.extraId,delete t.links,delete t.countAdmins,delete t.countModers,delete t.countInvited,delete t.countReaders,delete t.countMembers,delete t.lastSeen,delete t.lastAccess,delete t.perms,delete t.isMuted,delete t.isSubscribed,t.topMessage){var i=t.topMessage;delete i.authorId,delete i.messageIdLE,delete i.sequence,delete i.linkId,i.recType===_.zn&&i.data&&i.data.hash&&delete i.data.hash}return Object.assign(t,{timestamp:(new Date).getTime()})}function he(n,i){var r=[];if(!n)return r;try{for(;!n.isEnded();){var e=se(n,i);e&&r.push(le(e))}}catch(o){y.error(t.Parse,o)}return r}function ve(n,i){for(var r=n.getUint8(),e=n.getBinary(8),o=n.getBinary(8),u=n.getInt16(),c={result:i,isAscending:r,chatId:un(e),lastAccess:un(o),perms:u,messages:[]};!n.isEnded();)try{var f=ae(n);if(!f)continue;c.messages.push(f)}catch(a){y.error(t.Parse,a)}return c}function de(n){var t=n.getBinary(8),i=ae(n);return i?{chatId:un(t),message:i}:{chatId:un(t)}}function ye(n,t){return{result:t,messageId:un(n.getBinary(8))}}function pe(n,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:W,e={chats:[],result:i};if(!n)return e;try{for(;!n.isEnded();){var o=se(n,r);o&&e.chats.push(o)}}catch(u){y.error(t.Parse,u)}return e}!function(n){n[n.INT_8=0]="INT_8",n[n.UINT_8=1]="UINT_8",n[n.STRING_8=2]="STRING_8",n[n.INT_16=3]="INT_16",n[n.UINT_16=4]="UINT_16",n[n.STRING_16=5]="STRING_16",n[n.INT_32=6]="INT_32",n[n.UINT_32=7]="UINT_32",n[n.STRING_32=8]="STRING_32",n[n.INT_64=9]="INT_64",n[n.INT_64_HEX=10]="INT_64_HEX",n[n.INT_64_HEX_BE=11]="INT_64_HEX_BE",n[n.UINT_8_32=12]="UINT_8_32",n[n.gt=13]="ARRAY",n[n.St=14]="BLOCK"}(oe||(oe={}));var be=[{name:"userId",type:oe.INT_64_HEX_BE},{name:"userName",type:oe.STRING_16},{name:"userLogin",type:oe.STRING_16},{name:"userAvatar",type:oe.STRING_16},{name:"isDeleted",type:oe.UINT_8}];function me(n){var t=n.getReader32();return{userId:un(t.getBinary(8)),userName:$r(t.getString16()),userLogin:t.getString16(),userAvatar:t.getString16(),isDeleted:t.getUint8()}}function we(n){for(var i=[];!n.isEnded();)try{i.push(me(n))}catch(r){y.error(t.Parse,r)}return i}function _e(n,t){var i=this,r={};return t.forEach(function(t){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,i);var e="";switch(t.type){case oe.INT_8:e=n.getInt8();break;case oe.UINT_8:e=n.getUint8();break;case oe.STRING_8:e=n.getString8();break;case oe.INT_16:e=n.getInt16();break;case oe.UINT_16:e=n.getUint16();break;case oe.STRING_16:e=n.getString16();break;case oe.INT_32:e=n.getInt32();break;case oe.UINT_32:e=n.getUint32();break;case oe.STRING_32:e=n.getString32();break;case oe.INT_64:e=n.getBinary(8);break;case oe.INT_64_HEX_BE:e=un(n.getBinary(8));break;case oe.INT_64_HEX:e=fn(n.getBinary(8));break;case oe.UINT_8_32:e=n.getBinary(32);break;case oe.gt:if(!("struct"in t)||!t.struct)throw new Error("Struct is empty");for(e=[];!n.isEnded();)try{var o=n.getReader32();e.push(_e(o,t.struct))}catch(u){new Error(u)}break;case oe.St:if(!("struct"in t)||!t.struct)throw new Error("Struct is empty");e=_e(n.getReader32(),t.struct);break;default:throw new Error("Unknown type")}r[t.name]=e}.bind(this)),r}var ge=[{name:"chatId",type:oe.INT_64_HEX_BE},{name:"userId",type:oe.INT_64_HEX_BE},{name:"isDelete",type:oe.UINT_8},{name:"perm",type:oe.UINT_16}];function Se(n){return _e(n,ge)}var je=[{name:"user",type:oe.St,struct:be},{name:"perms",type:oe.UINT_16}],Oe=[{name:"chatId",type:oe.INT_64_HEX_BE},{name:"users",type:oe.gt,struct:je}];function Ee(n){return _e(n,Oe)}var Te=[{name:"users",type:oe.gt,struct:be}];function ke(n){return _e(n,Te).users}var Ae=[{name:"chatId",type:oe.INT_64_HEX_BE},{name:"userId",type:oe.INT_64_HEX_BE},{name:"userName",type:oe.STRING_16},{name:"permission",type:oe.UINT_16},{name:"isDeleted",type:oe.UINT_8}];var xe=[{name:"count",type:oe.UINT_32}];var Ce=[{name:"chatId",type:oe.INT_64_HEX_BE}];function Re(n){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Re(n)}function Ie(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Me={width:400,height:354};function Ue(n,t){Me.width=n,Me.height=t,HE("chat",JSON.stringify(Me))}function Pe(n,t){var i="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!i){if(Array.isArray(n)||(i=function(n,t){if(!n)return;if("string"==typeof n)return De(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return De(n,t)}(n))||t&&n&&"number"==typeof n.length){i&&(n=i);var r=0,e=function(){};return{s:e,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){i=i.call(n)},n:function(){var n=i.next();return u=n.done,n},e:function(n){c=!0,o=n},f:function(){try{u||null==i["return"]||i["return"]()}finally{if(c)throw o}}}}function De(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}var Be=/^{([a-z]*)}$/i,Ne=new Set,$e=window.location.pathname,Le=!1;function ze(n){return n.replace(/(^\/+|\/+$)/g,"").split("/")}function We(){var n,t=window.location.pathname,i=undefined,r=ze(t),e={},o=Pe(Ne);try{for(o.s();!(n=o.n()).done;){var u=n.value,c=ze(u.path),f=Math.max(r.length,c.length);e={};for(var a=f-1;a>=0;a--){var s=r[a],l=c[a];if(s===undefined||l===undefined)break;if(Be.test(l)){var h=Be.exec(l);h&&(e[h[1]]=s),0===a&&(i=u)}else{if(s!==l)break;0===a&&(i=u)}}if(i)break}}catch(v){o.e(v)}finally{o.f()}i&&i.callback(e)}function qe(n){var t=window.location,i="";return n===t.pathname?i:i=t.origin?"".concat(t.origin).concat(n):"".concat(t.protocol,"//").concat(t.hostname).concat(n)}function Fe(n){var i=arguments.length>1&&arguments[1]!==undefined&&arguments[1],r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(Le){var e=qe(n);if(e){var o=Object.assign(Object.assign({},r),{key:"".concat(Date.now())});try{if(i)return void window.history.replaceState(o,document.title,e);window.history.pushState(o,document.title,e)}catch(u){window.location[i?"replace":"assign"](e),y.error(t.Router,u)}}}}function Ge(n){Ne.add(n)}function He(){Le&&Fe($e)}function Ve(n){window.history&&(Le=!0,$e=n,window.addEventListener("popstate",We))}function Qe(n){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Qe(n)}var Ye=undefined;function Je(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Ke(n,t){return Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Ke(n,t)}function Xe(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=to(n);if(t){var e=to(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Ze(this,i)}}function Ze(n,t){if(t&&("object"===Qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return no(n)}function no(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function to(n){return to=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},to(n)}function io(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return ro(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ro(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ro(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function eo(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var oo=function(n){return eo(this,Ye),{}}.bind(undefined),uo=function(n){return eo(this,Ye),{}}.bind(undefined);function co(n){var t,i,e,o,u,c,f,a,s,l,h,v,d=n[2].content,y=Fn(d,n,n[1],uo);return{c:function(){t=vt("div"),i=vt("div"),e=vt("div"),o=vt("i"),u=pt(),c=vt("div"),y&&y.c(),f=pt(),a=vt("div"),s=vt("i"),_t(o,"class","icons-chat icons-chat_chat-big"),_t(c,"class","chat-error-window__text"),_t(e,"class","chat-error-window__content"),_t(i,"class","chat-error-window ui"),_t(s,"class","icons-chat icons-chat_close-gray"),_t(a,"class","chat-error-window__close"),_t(a,"title",r("close")),_t(t,"class","chat-window"+(xE?" chat-window_widget":""))},m:function(r,d){st(r,t,d),ot(t,i),ot(i,e),ot(e,o),ot(e,u),ot(e,c),y&&y.m(c,null),ot(t,f),ot(t,a),ot(a,s),l=!0,h||(v=mt(a,"click",n[0]),h=!0)},p:function(n,t){var i=io(t,1)[0];y&&y.p&&(!l||2&i)&&Vn(y,d,n,n[1],l?Hn(d,n[1],i,oo):Qn(n[1]),uo)},i:function(n){l||(fi(y,n),l=!0)},o:function(n){ai(y,n),l=!1},d:function(n){n&&lt(t),y&&y.d(n),h=!1,v()}}}function fo(n,t,i){var r=this,e=t.$$slots,o=void 0===e?{}:e,u=t.$$scope,c=$t();return n.$$set=function(n){eo(this,r),"$$scope"in n&&i(1,u=n.$$scope)}.bind(this),[function(){He(),c("close")},u,o]}var ao,so=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Ke(n,t)}(o,n);var t,i,r,e=Xe(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(no(t=e.call(this)),n,fo,co,Nn,{}),t}return t=o,i&&Je(t.prototype,i),r&&Je(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i);var lo=Ei();function ho(n){var t=this;lo.set(yo(Wn(n))),qi.setLayout({edit:!0}),ao=n.subscribe(function(n){if(function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,t),n){var i=Wn(lo);if(i){var r=yo(n);r.avatarError=i.avatarError,r.errorDescription=i.errorDescription,r.errorCommon=i.errorCommon,r.errorInviteLink=i.errorInviteLink,r.errorName=i.errorName,r.avatarIsPresent=i.avatarIsPresent,r.avatarToUpload=i.avatarToUpload,lo.set(r)}}else vo()}.bind(this))}function vo(){qi.setLayout({edit:!1}),ao&&ao()}function yo(n){return{chatId:n.chatId,type:n.type,isPublic:n.isPublic,isLimited:!!n.isLimited,isClosed:!!n.isClosed,name:n.name,description:n.description,links:n.links,inviteLink:n.inviteLink,language:n.language,avatar:n.avatar,avatarToUpload:undefined,avatarIsPresent:!!n.avatarIsPresent,authorId:n.authorId,countMembers:n.countMembers,isSubscribed:n.isSubscribed,perms:n.perms,errorInviteLink:"",errorCommon:"",errorName:!1,errorDescription:!1,avatarError:undefined}}function po(n,t,i){var r,e,o,u=null,c=0;i||(i={});var f=function(){c=!1===i.leading?0:Date.now(),u=null,o=n.apply(r,e),u||(r=e=null)};return function(){var a=Date.now();c||!1!==i.leading||(c=a);var s=t-(a-c);r=this;for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return e=h,s<=0||s>t?(u&&(clearTimeout(u),u=null),c=a,o=n.apply(r,e),u||(r=e=null)):u||!1===i.trailing||(u=setTimeout(f,s)),o}}function bo(n){return bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bo(n)}var mo=undefined;function wo(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function _o(n,t){return _o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},_o(n,t)}function go(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Oo(n);if(t){var e=Oo(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return So(this,i)}}function So(n,t){if(t&&("object"===bo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jo(n)}function jo(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Oo(n){return Oo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Oo(n)}function Eo(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return To(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return To(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function To(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function ko(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Ao=function(n){return ko(this,mo),{}}.bind(undefined),xo=function(n){return ko(this,mo),{}}.bind(undefined),Co=function(n){return ko(this,mo),{}}.bind(undefined),Ro=function(n){return ko(this,mo),{}}.bind(undefined),Io=function(n){return ko(this,mo),{}}.bind(undefined),Mo=function(n){return ko(this,mo),{}}.bind(undefined);function Uo(n){var t,i,r=n[12].title,e=Fn(r,n,n[11],Mo);return{c:function(){t=vt("div"),e&&e.c(),_t(t,"class","chat-dialog__title")},m:function(n,r){st(n,t,r),e&&e.m(t,null),i=!0},p:function(n,t){e&&e.p&&(!i||2048&t)&&Vn(e,r,n,n[11],i?Hn(r,n[11],t,Io):Qn(n[11]),Mo)},i:function(n){i||(fi(e,n),i=!0)},o:function(n){ai(e,n),i=!1},d:function(n){n&&lt(t),e&&e.d(n)}}}function Po(n){var t,i,r=n[12].buttons,e=Fn(r,n,n[11],xo);return{c:function(){t=vt("div"),e&&e.c(),_t(t,"class","chat-dialog__buttons")},m:function(n,r){st(n,t,r),e&&e.m(t,null),i=!0},p:function(n,t){e&&e.p&&(!i||2048&t)&&Vn(e,r,n,n[11],i?Hn(r,n[11],t,Ao):Qn(n[11]),xo)},i:function(n){i||(fi(e,n),i=!0)},o:function(n){ai(e,n),i=!1},d:function(n){n&&lt(t),e&&e.d(n)}}}function Do(n){var t,i,r,e,o,u,c,f,a,s,l,h,v=n[0]&&Uo(n),d=n[12].content,y=Fn(d,n,n[11],Ro),p=n[1]&&Po(n);return{c:function(){var a=this;t=vt("div"),i=pt(),r=vt("div"),(e=vt("div")).innerHTML='<i class="icons-ux icons-ux_close-gray"></i>',o=pt(),v&&v.c(),u=pt(),c=vt("div"),y&&y.c(),f=pt(),p&&p.c(),_t(t,"class","chat-dialog__shadow"),_t(e,"class","chat-dialog__close qa-dialog-close"),_t(c,"class","chat-dialog__content"),_t(r,"class","chat-dialog__container ui"),Ot(r,"top",n[4]),Ot(r,"left",n[5]),Ot(r,"bottom",n[7]),Ot(r,"right",n[6]),Ot(r,"transform","translate3d("+n[8]+", "+n[9]+", 0)"),Yt(function(){return ko(this,a),n[13].call(r)}.bind(this))},m:function(d,b){st(d,t,b),st(d,i,b),st(d,r,b),ot(r,e),ot(r,o),v&&v.m(r,null),ot(r,u),ot(r,c),y&&y.m(c,null),ot(r,f),p&&p.m(r,null),a=function(n,t){var i=this;"static"===getComputedStyle(n).position&&(n.style.position="relative");var r=vt("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;var e,o=Tt();return o?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",e=mt(window,"message",function(n){Cn(this,i),n.source===r.contentWindow&&t()}.bind(this))):(r.src="about:blank",r.onload=function(){Cn(this,i),e=mt(r.contentWindow,"resize",t)}.bind(this)),ot(n,r),function(){Cn(this,i),(o||e&&r.contentWindow)&&e(),lt(r)}.bind(this)}(r,n[13].bind(r)),s=!0,l||(h=[mt(t,"click",n[10]),mt(e,"click",n[10])],l=!0)},p:function(n,t){var i=this,e=Eo(t,1)[0];n[0]?v?(v.p(n,e),1&e&&fi(v,1)):((v=Uo(n)).c(),fi(v,1),v.m(r,u)):v&&(ui(),ai(v,1,1,function(){ko(this,i),v=null}.bind(this)),ci()),y&&y.p&&(!s||2048&e)&&Vn(y,d,n,n[11],s?Hn(d,n[11],e,Co):Qn(n[11]),Ro),n[1]?p?(p.p(n,e),2&e&&fi(p,1)):((p=Po(n)).c(),fi(p,1),p.m(r,null)):p&&(ui(),ai(p,1,1,function(){ko(this,i),p=null}.bind(this)),ci()),(!s||16&e)&&Ot(r,"top",n[4]),(!s||32&e)&&Ot(r,"left",n[5]),(!s||128&e)&&Ot(r,"bottom",n[7]),(!s||64&e)&&Ot(r,"right",n[6]),(!s||768&e)&&Ot(r,"transform","translate3d("+n[8]+", "+n[9]+", 0)")},i:function(n){s||(fi(v),fi(y,n),fi(p),s=!0)},o:function(n){ai(v),ai(y,n),ai(p),s=!1},d:function(n){n&&lt(t),n&&lt(i),n&&lt(r),v&&v.d(),y&&y.d(n),p&&p.d(),a(),l=!1,Dn(h)}}}function Bo(n,t,i){var r,e,o=this,u=t.$$slots,c=void 0===u?{}:u,f=t.$$scope,a=t.withTitle,s=void 0===a||a,l=t.withButtons,h=void 0===l||l,v=$t(),d="50%",y="50%",p="auto",b="auto",m="0",w="0";var _,g=po((function(){var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;n-16<=r?(i(5,y="8px"),i(6,p="8px"),i(8,m=0)):(i(5,y="50%"),i(6,p="auto"),i(8,m=Math.round(-1*(r/2+8))+"px")),t-16<=e?(i(4,d="8px"),i(7,b="8px"),i(9,w=0)):(i(4,d="50%"),i(7,b="auto"),i(9,w=Math.round(-1*(e/2+8))+"px"))}),100,undefined);Nt(function(){var n=this;return ko(this,o),window.addEventListener("resize",g),function(){ko(this,n),window.removeEventListener("resize",g)}.bind(this)}.bind(this)),_=function(){ko(this,o),g()}.bind(this),Bt().$$.after_update.push(_);var S=function(){ko(this,o),v("close")}.bind(this);return n.$$set=function(n){ko(this,o),"withTitle"in n&&i(0,s=n.withTitle),"withButtons"in n&&i(1,h=n.withButtons),"$$scope"in n&&i(11,f=n.$$scope)}.bind(this),[s,h,r,e,d,y,p,b,m,w,S,f,c,function(){r=this.offsetWidth,e=this.offsetHeight,i(2,r),i(3,e)}]}var No=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&_o(n,t)}(o,n);var t,i,r,e=go(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(jo(t=e.call(this)),n,Bo,Do,Nn,{withTitle:0,withButtons:1}),t}return t=o,i&&wo(t.prototype,i),r&&wo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),$o=No;function Lo(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function zo(n){return zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zo(n)}function Wo(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function qo(n,t){return qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},qo(n,t)}function Fo(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Vo(n);if(t){var e=Vo(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Go(this,i)}}function Go(n,t){if(t&&("object"===zo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ho(n)}function Ho(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Vo(n){return Vo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vo(n)}function Qo(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Yo(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Jo(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Jo(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jo(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Ko(n){var t;return{c:function(){(t=vt("span")).textContent="".concat(r("deletion")),_t(t,"slot","title")},m:function(n,i){st(n,t,i)},p:Rn,d:function(n){n&&lt(t)}}}function Xo(n){var t,i;return{c:function(){t=vt("div"),_t(i=vt("div"),"class","chat-alert-text"),_t(t,"slot","content")},m:function(r,e){st(r,t,e),ot(t,i),i.innerHTML=n[1]},p:Rn,d:function(n){n&&lt(t)}}}function Zo(n){var t,i,e,o,u,c;return{c:function(){t=vt("span"),(i=vt("button")).textContent="".concat(r("cancel")),e=pt(),(o=vt("button")).textContent="".concat(r("deleteUpper")),_t(i,"class","button button_white qa-dialog-cancel"),_t(o,"class","button button_red qa-dialog-ok"),_t(t,"slot","buttons")},m:function(r,f){st(r,t,f),ot(t,i),ot(t,e),ot(t,o),u||(c=[mt(i,"click",n[2]),mt(o,"click",n[3])],u=!0)},p:Rn,d:function(n){n&&lt(t),u=!1,Dn(c)}}}function nu(n){var t,i;return(t=new $o({props:{$$slots:{buttons:[Zo],content:[Xo],title:[Ko]},$$scope:{ctx:n}}})).$on("close",n[2]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r=Yo(i,1)[0],e={};512&r&&(e.$$scope={dirty:r,ctx:n}),t.$set(e)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function tu(n,i,e){var o,u,f=this,a=Rn,s=function(){var n=this;return Qo(this,f),a(),a=zn(l,function(t){return Qo(this,n),e(5,o=t)}.bind(this)),l}.bind(this);qn(n,qi,function(n){return Qo(this,f),e(6,u=n)}.bind(this)),n.$$.on_destroy.push(function(){return Qo(this,f),a()}.bind(this));var l=i.chat;s();var h=$t(),v="deleteChatConfirm",d=o.type===S;switch(o.type){case j:v="deletionTextGroup";break;case O:v="deletionTextChannel"}var p=r(v,'<b>"'.concat(o.name,'"</b>'));function b(){Yn(qi,u["delete"]=!1,u),h("close")}return n.$$set=function(n){Qo(this,f),"chat"in n&&s(e(0,l=n.chat))}.bind(this),[l,p,b,function(){var n=this;yr?(!function(n){var t=this;new Promise(function(i,r){var e=this;if(Lo(this,t),n){var o=cn(n);Uj.send(c.dn,[o]).then(function(){Lo(this,e),i("Success")}.bind(this))["catch"](function(n){Lo(this,e),r(n)}.bind(this))}else r("Chat id is empty")}.bind(this))}(o.chatId),o.type===O?window.fz&&window.fz("event",{name:"MQL5+Chat+Channel+Delete",unit:"Type",value:o.isPublic?"public":"private"}):o.type===j?window.fz&&window.fz("event",{name:"MQL5+Chat+Group+Delete",unit:"Type",value:o.isPublic?"public":"private"}):window.fz&&window.fz("track","MQL5+Chat+Delete"),b()):d&&SO(o.chatId,vr,0,!0).then(function(t){Qo(this,n),pE(t),window.fz&&window.fz("track","MQL5+Chat+Delete"),Yn(l,o.isSubscribed=q,o)}.bind(this))["catch"](function(i){var r=i.error;Qo(this,n),y.error(t.User,r)}.bind(this))}]}var iu=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&qo(n,t)}(o,n);var t,i,r,e=Fo(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Ho(t=e.call(this)),n,tu,nu,Nn,{chat:0}),t}return t=o,i&&Wo(t.prototype,i),r&&Wo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),ru=iu;function eu(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var ou={};function uu(n){var i=this;return ou[n]||(ou[n]=Ei({userId:n}),lO([n]).then(function(n){var t=this;eu(this,i);var r=(new Date).getTime();n.forEach(function(n){eu(this,t),n.timestamp=r,ou[n.userId].set(n)}.bind(this)),BE()}.bind(this))["catch"](function(n){var r=n.error;eu(this,i),y.error(t.System,r)}.bind(this))),ou[n]}function cu(n){return R[n]?r(R[n]):"Unknown"}function fu(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function au(n){var t=this,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=i.delay,e=void 0===r?0:r,o=i.duration,u=void 0===o?400:o,c=i.easing,f=void 0===c?Mn:c,a=+getComputedStyle(n).opacity;return{delay:e,duration:u,easing:f,css:function(n){return fu(this,t),"opacity: ".concat(n*a)}.bind(this)}}function su(n){return su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},su(n)}function lu(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function hu(n,t){return hu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},hu(n,t)}function vu(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=pu(n);if(t){var e=pu(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return du(this,i)}}function du(n,t){if(t&&("object"===su(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yu(n)}function yu(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function pu(n){return pu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pu(n)}function bu(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function mu(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return wu(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return wu(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wu(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function _u(n,t,i){var r=n.slice();return r[3]=t[i],r}function gu(n){var t,i,r=n[3][0]+"";return{c:function(){t=vt("a"),i=yt(r),_t(t,"href",n[3][1]),_t(t,"target","_blank"),_t(t,"title",n[3][0])},m:function(n,r){st(n,t,r),ot(t,i)},p:Rn,d:function(n){n&&lt(t)}}}function Su(n){for(var t,i=n[0],r=[],e=0;e<i.length;e+=1)r[e]=gu(_u(n,i,e));return{c:function(){for(var n=0;n<r.length;n+=1)r[n].c();t=bt()},m:function(n,i){for(var e=0;e<r.length;e+=1)r[e].m(n,i);st(n,t,i)},p:function(n,e){var o=mu(e,1)[0];if(1&o){var u;for(i=n[0],u=0;u<i.length;u+=1){var c=_u(n,i,u);r[u]?r[u].p(c,o):(r[u]=gu(c),r[u].c(),r[u].m(t.parentNode,t))}for(;u<r.length;u+=1)r[u].d(1);r.length=i.length}},i:Rn,o:Rn,d:function(n){ht(r,n),n&&lt(t)}}}function ju(n,t,i){var r=this,e=t.links,o=e.split(","),u=[];return n.$$set=function(n){bu(this,r),"links"in n&&i(1,e=n.links)}.bind(this),o.forEach(function(n){bu(this,r),n=n.trim();for(var t="https://www.mql5.com/go?link=".concat(encodeURIComponent(n)),i=0,e=kE.length;i<e;i++)if(n.indexOf(kE[i])>-1){t=n;break}u.push([n,t])}.bind(this)),[u,e]}for(var Ou=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&hu(n,t)}(o,n);var t,i,r,e=vu(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(yu(t=e.call(this)),n,ju,Su,Nn,{links:1}),t}return t=o,i&&lu(t.prototype,i),r&&lu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Eu=Ou,Tu=navigator.userAgent,ku=navigator.appVersion,Au=Tu.match(/Android/i),xu=Tu.match(/BlackBerry/i),Cu=Tu.match(/iPhone|iPad|iPod/i),Ru=Tu.match(/Opera Mini/i),Iu=Tu.match(/IEMobile/i),Mu=(Tu.indexOf("MSIE"),Tu.indexOf("Gecko/"),!!document.documentMode),Uu=Au||xu||Cu||Ru||Iu,Pu="",Du=[{name:"Windows 10",regex:/(Windows 10.0|Windows NT 10.0)/},{name:"Windows 8.1",regex:/(Windows 8.1|Windows NT 6.3)/},{name:"Windows 8",regex:/(Windows 8|Windows NT 6.2)/},{name:"Windows 7",regex:/(Windows 7|Windows NT 6.1)/},{name:"Windows Vista",regex:/Windows NT 6.0/},{name:"Windows Server 2003",regex:/Windows NT 5.2/},{name:"Windows XP",regex:/(Windows NT 5.1|Windows XP)/},{name:"Windows 2000",regex:/(Windows NT 5.0|Windows 2000)/},{name:"Windows ME",regex:/(Win 9x 4.90|Windows ME)/},{name:"Windows 98",regex:/(Windows 98|Win98)/},{name:"Windows 95",regex:/(Windows 95|Win95|Windows_95)/},{name:"Windows NT 4.0",regex:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{name:"Windows CE",regex:/Windows CE/},{name:"Windows 3.11",regex:/Win16/},{name:"Android",regex:/Android/},{name:"Open BSD",regex:/OpenBSD/},{name:"Sun OS",regex:/SunOS/},{name:"Chrome OS",regex:/CrOS/},{name:"Linux",regex:/(Linux|X11(?!.*CrOS))/},{name:"iOS",regex:/(iPhone|iPad|iPod)/},{name:"Mac OS X",regex:/Mac OS X/},{name:"Mac OS",regex:/(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{name:"QNX",regex:/QNX/},{name:"UNIX",regex:/UNIX/},{name:"BeOS",regex:/BeOS/},{name:"OS/2",regex:/OS\/2/},{name:"Search Bot",regex:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],Bu=0,Nu=Du.length;Bu<Nu;Bu++){var $u=Du[Bu];if($u.regex.test(Tu)){Pu=$u.name;break}}var Lu="",zu=[];switch(/Windows/.test(Pu)&&((zu=/Windows (.*)/.exec(Pu))&&zu.length&&zu.length>1&&(Lu=zu[1]),Pu="Windows"),Pu){case"Mac OS":case"Mac OS X":case"Android":(zu=/(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([._\d]+)/.exec(Tu))&&zu.length&&zu.length>1&&(Lu=zu[1].replace(/_/g,"."));break;case"iOS":(zu=/OS (\d+)_(\d+)_?(\d+)?/.exec(ku))&&zu.length&&zu.length>2&&(Lu="".concat(zu[1],".").concat(zu[2],".").concat(zu.length>3?zu[3]:0))}function Wu(n){return Wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Wu(n)}function qu(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Fu(n,t){return Fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Fu(n,t)}function Gu(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Qu(n);if(t){var e=Qu(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Hu(this,i)}}function Hu(n,t){if(t&&("object"===Wu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vu(n)}function Vu(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Qu(n){return Qu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qu(n)}function Yu(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Ju(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ju(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ju(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Ku(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Xu(n){var t;return{c:function(){_t(t=vt("i"),"class","icons-chat icons-chat_no-image")},m:function(n,i){st(n,t,i)},p:Rn,d:function(n){n&&lt(t)}}}function Zu(n){var t,i;return{c:function(){$n((t=vt("img")).src,i=n[2].avatar)||_t(t,"src",i),_t(t,"alt",""),_t(t,"loading","lazy")},m:function(n,i){st(n,t,i)},p:function(n,r){4&r&&!$n(t.src,i=n[2].avatar)&&_t(t,"src",i)},d:function(n){n&&lt(t)}}}function nc(n){var t,i,r=n[2].description+"";return{c:function(){t=vt("div"),i=yt(r),_t(t,"class","chat-info__desc")},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,t){4&t&&r!==(r=n[2].description+"")&&St(i,r)},d:function(n){n&&lt(t)}}}function tc(n){var t,i,e,o,u,c;return u=new Eu({props:{links:n[2].links}}),{c:function(){t=vt("div"),(i=vt("div")).textContent="".concat(r("usefulLinks")),e=pt(),o=vt("div"),yi(u.$$.fragment),_t(i,"class","chat-info__label"),_t(o,"class","chat-info__links"),_t(t,"class","chat-info__item")},m:function(n,r){st(n,t,r),ot(t,i),ot(t,e),ot(t,o),pi(u,o,null),c=!0},p:function(n,t){var i={};4&t&&(i.links=n[2].links),u.$set(i)},i:function(n){c||(fi(u.$$.fragment,n),c=!0)},o:function(n){ai(u.$$.fragment,n),c=!1},d:function(n){n&&lt(t),bi(u)}}}function ic(n){var t,i,e,o,u,c,f,a,s,l,h,v,d=n[1]&&rc(n);return{c:function(){t=vt("div"),(i=vt("div")).textContent="".concat(r(n[10]?"urlGroup":"urlChannel")),e=pt(),o=vt("div"),d&&d.c(),u=pt(),c=vt("a"),f=yt(n[3]),a=pt(),(s=vt("span")).innerHTML='<i class="icons-chat icons-chat_copy"></i>',_t(i,"class","chat-info__label"),_t(c,"href",n[3]),_t(s,"class","chat-info__copy"),_t(o,"class","chat-info__invite-link"),_t(t,"class","chat-info__item")},m:function(r,y){st(r,t,y),ot(t,i),ot(t,e),ot(t,o),d&&d.m(o,null),ot(o,u),ot(o,c),ot(c,f),ot(o,a),ot(o,s),l=!0,h||(v=mt(s,"click",n[17]),h=!0)},p:function(n,t){var i=this;n[1]?d?(d.p(n,t),2&t&&fi(d,1)):((d=rc(n)).c(),fi(d,1),d.m(o,u)):d&&(ui(),ai(d,1,1,function(){Ku(this,i),d=null}.bind(this)),ci()),(!l||8&t)&&St(f,n[3]),(!l||8&t)&&_t(c,"href",n[3])},i:function(n){l||(fi(d),l=!0)},o:function(n){ai(d),l=!1},d:function(n){n&&lt(t),d&&d.d(),h=!1,v()}}}function rc(n){var t,i,e;return{c:function(){(t=vt("span")).textContent="".concat(r("copied")),_t(t,"class","chat-info__copied")},m:function(n,i){st(n,t,i),e=!0},p:Rn,i:function(n){var r=this;e||(Yt(function(){Ku(this,r),i||(i=li(t,au,{},!0)),i.run(1)}.bind(this)),e=!0)},o:function(n){i||(i=li(t,au,{},!1)),i.run(0),e=!1},d:function(n){n&&lt(t),n&&i&&i.end()}}}function ec(n){var t,i,e;return{c:function(){(t=vt("a")).textContent="".concat(r("membersList")),_t(t,"href","/")},m:function(r,o){st(r,t,o),i||(e=mt(t,"click",wt(n[18])),i=!0)},p:Rn,d:function(n){n&&lt(t),i=!1,e()}}}function oc(n){var t,i,e,o,u,c,f,a,s,l,h,v,d,y,p,b,m,w,_,g,S,j,O,E,T=r("membersCount",n[2].countMembers)+"";function k(n,t){return n[2].avatar?Zu:Xu}var A=k(n),x=A(n),C=n[2].description&&nc(n),R=n[2].links&&tc(n),I=n[2].inviteLink&&ic(n),M=(n[11]||n[2].isSubscribed&&(n[10]||n[9]&&n[2].perms&U.tt))&&ec(n),P=n[11]&&function(n){var t,i,e,o,u,c,f,a,s,l,h=n[2].authorName+"",v=cu(n[2].language)+"";return{c:function(){t=vt("div"),(i=vt("div")).textContent="".concat(r("owner")),e=pt(),o=vt("a"),u=yt(h),c=pt(),f=vt("div"),(a=vt("div")).textContent="".concat(r("chatLanguage")),s=pt(),l=yt(v),_t(i,"class","chat-info__label"),_t(o,"href",n[4]),_t(o,"target","_blank"),_t(t,"class","chat-info__item"),_t(a,"class","chat-info__label"),_t(f,"class","chat-info__item")},m:function(n,r){st(n,t,r),ot(t,i),ot(t,e),ot(t,o),ot(o,u),st(n,c,r),st(n,f,r),ot(f,a),ot(f,s),ot(f,l)},p:function(n,t){4&t&&h!==(h=n[2].authorName+"")&&St(u,h),16&t&&_t(o,"href",n[4]),4&t&&v!==(v=cu(n[2].language)+"")&&St(l,v)},d:function(n){n&&lt(t),n&&lt(c),n&&lt(f)}}}(n);return{c:function(){t=vt("div"),i=vt("div"),e=vt("div"),x.c(),o=pt(),u=vt("div"),c=vt("div"),f=yt(n[12]),a=pt(),C&&C.c(),s=pt(),l=vt("div"),h=vt("div"),v=vt("div"),d=yt(n[5]),y=pt(),p=yt(n[6]),b=pt(),R&&R.c(),m=pt(),I&&I.c(),w=pt(),_=vt("div"),g=vt("div"),S=yt(T),j=pt(),M&&M.c(),O=pt(),P&&P.c(),_t(e,"class","chat-info__avatar"),_t(c,"class","chat-info__title"),_t(c,"title",n[12]),_t(u,"class","chat-info__content"),_t(i,"class","chat-info"),_t(v,"class","chat-info__label"),_t(h,"class","chat-info__item"),_t(g,"class","chat-info__label"),_t(_,"class","chat-info__item"),_t(l,"class","chat-info-list"),_t(t,"slot","content")},m:function(n,r){st(n,t,r),ot(t,i),ot(i,e),x.m(e,null),ot(i,o),ot(i,u),ot(u,c),ot(c,f),ot(u,a),C&&C.m(u,null),ot(t,s),ot(t,l),ot(l,h),ot(h,v),ot(v,d),ot(h,y),ot(h,p),ot(l,b),R&&R.m(l,null),ot(l,m),I&&I.m(l,null),ot(l,w),ot(l,_),ot(_,g),ot(g,S),ot(_,j),M&&M.m(_,null),ot(l,O),P&&P.m(l,null),E=!0},p:function(n,t){var i=this;A===(A=k(n))&&x?x.p(n,t):(x.d(1),(x=A(n))&&(x.c(),x.m(e,null))),n[2].description?C?C.p(n,t):((C=nc(n)).c(),C.m(u,null)):C&&(C.d(1),C=null),(!E||32&t)&&St(d,n[5]),(!E||64&t)&&St(p,n[6]),n[2].links?R?(R.p(n,t),4&t&&fi(R,1)):((R=tc(n)).c(),fi(R,1),R.m(l,m)):R&&(ui(),ai(R,1,1,function(){Ku(this,i),R=null}.bind(this)),ci()),n[2].inviteLink?I?(I.p(n,t),4&t&&fi(I,1)):((I=ic(n)).c(),fi(I,1),I.m(l,w)):I&&(ui(),ai(I,1,1,function(){Ku(this,i),I=null}.bind(this)),ci()),(!E||4&t)&&T!==(T=r("membersCount",n[2].countMembers)+"")&&St(S,T),n[11]||n[2].isSubscribed&&(n[10]||n[9]&&n[2].perms&U.tt)?M?M.p(n,t):((M=ec(n)).c(),M.m(_,null)):M&&(M.d(1),M=null),n[11]&&P.p(n,t)},i:function(n){E||(fi(R),fi(I),E=!0)},o:function(n){ai(R),ai(I),E=!1},d:function(n){n&&lt(t),x.d(),C&&C.d(),R&&R.d(),I&&I.d(),M&&M.d(),P&&P.d()}}}function uc(n){var t,i,e,o,u=r("chatEdit")+"";return{c:function(){t=vt("button"),i=yt(u),_t(t,"class","button button_white"),_t(t,"title",r("chatEdit"))},m:function(r,u){st(r,t,u),ot(t,i),e||(o=mt(t,"click",wt(n[15])),e=!0)},p:Rn,d:function(n){n&&lt(t),e=!1,o()}}}function cc(n){var t,i,e=(n[11]||n[2].perms&U.rt)&&uc(n),o=n[11]&&function(n){var t,i,e,o,u=r("deleteUpper")+"";return{c:function(){t=vt("button"),i=yt(u),_t(t,"class","button button_white-and-red"),_t(t,"title",r("deleteUpper"))},m:function(r,u){st(r,t,u),ot(t,i),e||(o=mt(t,"click",wt(n[16])),e=!0)},p:Rn,d:function(n){n&&lt(t),e=!1,o()}}}(n);return{c:function(){t=vt("div"),e&&e.c(),i=pt(),o&&o.c(),_t(t,"slot","buttons"),_t(t,"class","chat-info__buttons")},m:function(n,r){st(n,t,r),e&&e.m(t,null),ot(t,i),o&&o.m(t,null)},p:function(n,r){n[11]||n[2].perms&U.rt?e?e.p(n,r):((e=uc(n)).c(),e.m(t,i)):e&&(e.d(1),e=null),n[11]&&o.p(n,r)},d:function(n){n&&lt(t),e&&e.d(),o&&o.d()}}}function fc(n){var t,i;return(t=new $o({props:{withButtons:n[11]||!!(n[2].perms&U.rt),withTitle:!1,$$slots:{buttons:[cc],content:[oc]},$$scope:{ctx:n}}})).$on("close",n[19]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r=Yu(i,1)[0],e={};4&r&&(e.withButtons=n[11]||!!(n[2].perms&U.rt)),2097535&r&&(e.$$scope={dirty:r,ctx:n}),t.$set(e)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function ac(n,t,i){var e,o,u,c=this,f=Rn,a=function(){var n=this;return Ku(this,c),f(),f=zn(v,function(t){return Ku(this,n),i(14,e=t)}.bind(this)),v}.bind(this),s=Rn,l=function(){var n=this;return Ku(this,c),s(),s=zn(h,function(t){return Ku(this,n),i(2,o=t)}.bind(this)),h}.bind(this);qn(n,qi,function(n){return Ku(this,c),i(8,u=n)}.bind(this)),n.$$.on_destroy.push(function(){return Ku(this,c),f()}.bind(this)),n.$$.on_destroy.push(function(){return Ku(this,c),s()}.bind(this));var h=t.chat;l();var v,d=o.type===O,y=o.type===j,p=yr,b=o.name,m=$t(),w=!1,_="",g="",S="",E="",T=function(){Ku(this,c),m("close")}.bind(this),k=function(){Ku(this,c),ho(h),T()}.bind(this),A=function(){Ku(this,c),Yn(qi,u["delete"]=!0,u),T()}.bind(this),x=function(){Ku(this,c),function(n){var t=document.createElement("textarea");if(t.value=n,t.style.position="fixed",t.style.left="9999px",document.body.appendChild(t),t.focus(),Cu){var i=document.createRange();i.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(i),t.setSelectionRange(0,999999)}else t.select();document.execCommand("copy"),t.blur(),document.body.removeChild(t)}(_),i(1,w=!0)}.bind(this),C=function(){Ku(this,c),Yn(qi,u.listMembers=!0,u),T()}.bind(this);return n.$$set=function(n){Ku(this,c),"chat"in n&&l(i(0,h=n.chat))}.bind(this),n.$$.update=function(){var t=this;if(Ku(this,c),4&n.$$.dirty){var u=o.isPublic;y?(i(5,S=r(u?"publicChat":"privateChat")),i(6,E=r(u?"publicChatDesc":"privateChatDesc"))):(i(5,S=r(u?"publicChannel":"privateChannel")),i(6,E=r(u?"publicChannelDesc":"privateChannelDesc")))}4&n.$$.dirty&&i(3,_="https://www.mql5.com/".concat(TE,"/").concat(d?"channels":"groups","/").concat(o.inviteLink)),16388&n.$$.dirty&&p&&!e&&a(i(7,v=uu(o.authorId))),16384&n.$$.dirty&&e&&i(4,g="/".concat(TE,"/users/").concat(e.userLogin)),2&n.$$.dirty&&w&&setTimeout(function(){Ku(this,t),i(1,w=!1)}.bind(this),2e3)}.bind(this),[h,w,o,_,g,S,E,v,u,d,y,p,b,T,e,k,A,x,C,function(t){Lt.call(this,n,t)}]}var sc=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Fu(n,t)}(o,n);var t,i,r,e=Gu(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Vu(t=e.call(this)),n,ac,fc,Nn,{chat:0}),t}return t=o,i&&qu(t.prototype,i),r&&qu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),lc=sc;function hc(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var vc=Ei([]);function dc(){var n=this;return(new Date).getTime()-0>3e5&&OO(G,500).then(function(t){hc(this,n),vc.set(t)}.bind(this))["catch"](function(i){var r=i.error;hc(this,n),y.error(t.Store,r)}.bind(this)),vc}function yc(n,t,i){for(var r=[],e=0,o=i.length;e<o&&!(r.length>t);e++){var u=i[e];("userName"in u&&u.userName&&~u.userName.toLowerCase().indexOf(n)||"userLogin"in u&&u.userLogin&&~u.userLogin.toLowerCase().indexOf(n))&&r.push(u)}return r}function pc(n){return pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},pc(n)}function bc(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function mc(n,t){return mc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},mc(n,t)}function wc(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Sc(n);if(t){var e=Sc(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return _c(this,i)}}function _c(n,t){if(t&&("object"===pc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gc(n)}function gc(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Sc(n){return Sc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sc(n)}function jc(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Oc(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Ec(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ec(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ec(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Tc(n){var t,i,r;return{c:function(){t=vt("span"),i=yt(n[2]),_t(t,"class",r="member-block__label"+n[3]),_t(t,"title",n[1])},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,e){4&e&&St(i,n[2]),8&e&&r!==(r="member-block__label"+n[3])&&_t(t,"class",r),2&e&&_t(t,"title",n[1])},d:function(n){n&&lt(t)}}}function kc(n){var t,i=n[0]>0&&Tc(n);return{c:function(){i&&i.c(),t=bt()},m:function(n,r){i&&i.m(n,r),st(n,t,r)},p:function(n,r){var e=Oc(r,1)[0];n[0]>0?i?i.p(n,e):((i=Tc(n)).c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:Rn,o:Rn,d:function(n){i&&i.d(n),n&&lt(t)}}}function Ac(n,t,i){var e=this,o=t.isAuthor,u=void 0!==o&&o,c=t.perms,f=void 0===c?0:c,a="",s="",l="";return n.$$set=function(n){jc(this,e),"isAuthor"in n&&i(4,u=n.isAuthor),"perms"in n&&i(0,f=n.perms)}.bind(this),n.$$.update=function(){if(jc(this,e),17&n.$$.dirty)if(u)i(2,s=r("owner")),i(3,l=" member-block__label_owner");else switch(f){case P:case U.nt:i(1,a=r("canWriteMessages")),i(2,s=r("writer")),i(3,l=" member-block__label_writer");break;case D:case U.tt:i(2,s=r("moderator")),i(3,l=" member-block__label_moderator");break;case B:case U.rt:i(2,s=r("admin")),i(3,l=" member-block__label_admin")}}.bind(this),[f,a,s,l,u]}var xc=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&mc(n,t)}(o,n);var t,i,r,e=wc(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(gc(t=e.call(this)),n,Ac,kc,Nn,{isAuthor:4,perms:0}),t}return t=o,i&&bc(t.prototype,i),r&&bc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Cc=xc;function Rc(n,t,i){return"rgba("+function(n,t,i){var r,e,o;isFinite(n)||(n=0),isFinite(t)||(t=0),isFinite(i)||(i=0),(n/=60)<0&&(n=6- -n%6),n%=6,t=Math.max(0,Math.min(1,t/100)),i=Math.max(0,Math.min(1,i/100));var u=(1-Math.abs(2*i-1))*t,c=u*(1-Math.abs(n%2-1));n<1?(r=u,e=c,o=0):n<2?(r=c,e=u,o=0):n<3?(r=0,e=u,o=c):n<4?(r=0,e=c,o=u):n<5?(r=c,e=0,o=u):(r=u,e=0,o=c);var f=i-u/2;return[r=Math.round(255*(r+f)),e=Math.round(255*(e+f)),o=Math.round(255*(o+f))]}(77*n%360,(t||58)+n%20,(i||69)+n%20).join(",")+",1)"}function Ic(n){return Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ic(n)}function Mc(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Uc(n,t){return Uc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Uc(n,t)}function Pc(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Nc(n);if(t){var e=Nc(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Dc(this,i)}}function Dc(n,t){if(t&&("object"===Ic(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bc(n)}function Bc(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Nc(n){return Nc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nc(n)}function $c(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Lc(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return zc(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return zc(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zc(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Wc(n){var t,i,r=n[2][0]+"";return{c:function(){t=vt("span"),i=yt(r),_t(t,"class","chat-avatar__text")},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,t){4&t&&r!==(r=n[2][0]+"")&&St(i,r)},d:function(n){n&&lt(t)}}}function qc(n){var t,i;return{c:function(){$n((t=vt("img")).src,i=n[0].userAvatar)||_t(t,"src",i),_t(t,"alt",""),_t(t,"title",n[2]),_t(t,"width",n[1]),_t(t,"height",n[1]),_t(t,"loading","lazy")},m:function(n,i){st(n,t,i)},p:function(n,r){1&r&&!$n(t.src,i=n[0].userAvatar)&&_t(t,"src",i),4&r&&_t(t,"title",n[2]),2&r&&_t(t,"width",n[1]),2&r&&_t(t,"height",n[1])},d:function(n){n&&lt(t)}}}function Fc(n){var t;function i(n,t){return n[0].userAvatar?qc:Wc}var r=i(n),e=r(n);return{c:function(){t=vt("span"),e.c(),_t(t,"class","chat-avatar"),Ot(t,"background",n[3])},m:function(n,i){st(n,t,i),e.m(t,null)},p:function(n,o){var u=Lc(o,1)[0];r===(r=i(n))&&e?e.p(n,u):(e.d(1),(e=r(n))&&(e.c(),e.m(t,null))),8&u&&Ot(t,"background",n[3])},i:Rn,o:Rn,d:function(n){n&&lt(t),e.d()}}}function Gc(n,t,i){var e=this,o=t.data,u=t.size,c=void 0===u?40:u,f="",a="#4a76b8";return n.$$set=function(n){$c(this,e),"data"in n&&i(0,o=n.data),"size"in n&&i(1,c=n.size)}.bind(this),n.$$.update=function(){$c(this,e),1&n.$$.dirty&&(i(2,f=o.userName||"x"),o.isDeleted&&i(2,f=r("deletedAccount")),i(3,a=Rc(an(o.userId),undefined,undefined)))}.bind(this),[o,c,f,a]}var Hc=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Uc(n,t)}(o,n);var t,i,r,e=Pc(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Bc(t=e.call(this)),n,Gc,Fc,Nn,{data:0,size:1}),t}return t=o,i&&Mc(t.prototype,i),r&&Mc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Vc=Hc;function Qc(n){return Qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Qc(n)}function Yc(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Jc(n,t){return Jc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Jc(n,t)}function Kc(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=nf(n);if(t){var e=nf(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Xc(this,i)}}function Xc(n,t){if(t&&("object"===Qc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Zc(n)}function Zc(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function nf(n){return nf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nf(n)}function tf(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function rf(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return ef(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ef(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ef(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function of(n){var t,i;return t=new Cc({props:{perms:n[2].perms,isAuthor:n[2].isAuthor}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};4&i&&(r.perms=n[2].perms),4&i&&(r.isAuthor=n[2].isAuthor),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function uf(n){var t,i,r=n[4]&&cf(n),e=n[3]&&ff(n);return{c:function(){t=vt("span"),r&&r.c(),i=pt(),e&&e.c(),_t(t,"class","member-block__tools")},m:function(n,o){st(n,t,o),r&&r.m(t,null),ot(t,i),e&&e.m(t,null)},p:function(n,o){n[4]?r?r.p(n,o):((r=cf(n)).c(),r.m(t,i)):r&&(r.d(1),r=null),n[3]?e?e.p(n,o):((e=ff(n)).c(),e.m(t,null)):e&&(e.d(1),e=null)},d:function(n){n&&lt(t),r&&r.d(),e&&e.d()}}}function cf(n){var t,i,e;return{c:function(){_t(t=vt("i"),"class","member-block__edit icons-chat icons-chat_edit"),_t(t,"title",r("edit"))},m:function(r,o){st(r,t,o),i||(e=mt(t,"click",wt(n[8])),i=!0)},p:Rn,d:function(n){n&&lt(t),i=!1,e()}}}function ff(n){var t,i,e;return{c:function(){_t(t=vt("i"),"class","member-block__close icons-chat icons-chat_close"),_t(t,"title",r("delete"))},m:function(r,o){st(r,t,o),i||(e=mt(t,"click",wt(n[9])),i=!0)},p:Rn,d:function(n){n&&lt(t),i=!1,e()}}}function af(n){var t,i,r,e,o,u,c,f,a,s,l,h,v=n[2].userName+"";r=new Vc({props:{data:n[2],size:sf}});var d="perms"in n[2]&&of(n),y=(!("isAuthor"in n[2])||!n[2].isAuthor)&&(n[3]||n[4])&&uf(n);return{c:function(){t=vt("div"),i=vt("a"),yi(r.$$.fragment),e=pt(),o=vt("a"),u=yt(v),c=pt(),d&&d.c(),f=pt(),y&&y.c(),_t(i,"target","_blank"),_t(i,"href",n[5]),_t(i,"class","member-block__avatar"),_t(o,"target","_blank"),_t(o,"href",n[5]),_t(o,"class","member-block__name"),_t(t,"class",a="member-block"+(n[3]?" member-block_width-delete":"")+(n[4]?" member-block_width-edit":""))},m:function(a,v){st(a,t,v),ot(t,i),pi(r,i,null),ot(t,e),ot(t,o),ot(o,u),ot(o,c),d&&d.m(o,null),ot(o,f),y&&y.m(o,null),s=!0,l||(h=[mt(i,"click",n[6]),mt(o,"click",n[6])],l=!0)},p:function(n,i){var e=this,c=rf(i,1)[0],l={};4&c&&(l.data=n[2]),r.$set(l),(!s||4&c)&&v!==(v=n[2].userName+"")&&St(u,v),"perms"in n[2]?d?(d.p(n,c),4&c&&fi(d,1)):((d=of(n)).c(),fi(d,1),d.m(o,f)):d&&(ui(),ai(d,1,1,function(){tf(this,e),d=null}.bind(this)),ci()),"isAuthor"in n[2]&&n[2].isAuthor||!n[3]&&!n[4]?y&&(y.d(1),y=null):y?y.p(n,c):((y=uf(n)).c(),y.m(o,null)),(!s||24&c&&a!==(a="member-block"+(n[3]?" member-block_width-delete":"")+(n[4]?" member-block_width-edit":"")))&&_t(t,"class",a)},i:function(n){s||(fi(r.$$.fragment,n),fi(d),s=!0)},o:function(n){ai(r.$$.fragment,n),ai(d),s=!1},d:function(n){n&&lt(t),bi(r),d&&d.d(),y&&y.d(),l=!1,Dn(h)}}}var sf=30;function lf(n,t,i){var r=this,e=t.member,o=t.canDelete,u=void 0!==o&&o,c=t.canEdit,f=void 0!==c&&c,a=t.toEdit,s=void 0===a?undefined:a,l=t.toDelete,h=void 0===l?undefined:l,v=t.linkPreventDefault,d=void 0!==v&&v,y=$t(),p="/".concat(TE,"/users/").concat(e.userLogin);var b=function(){tf(this,r),i(0,s=e)}.bind(this),m=function(){tf(this,r),i(1,h=e)}.bind(this);return n.$$set=function(n){tf(this,r),"member"in n&&i(2,e=n.member),"canDelete"in n&&i(3,u=n.canDelete),"canEdit"in n&&i(4,f=n.canEdit),"toEdit"in n&&i(0,s=n.toEdit),"toDelete"in n&&i(1,h=n.toDelete),"linkPreventDefault"in n&&i(7,d=n.linkPreventDefault)}.bind(this),[s,h,e,u,f,p,function(n){d&&n.preventDefault(),y("click")},d,b,m]}var hf=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Jc(n,t)}(o,n);var t,i,r,e=Kc(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Zc(t=e.call(this)),n,lf,af,Nn,{member:2,canDelete:3,canEdit:4,toEdit:0,toDelete:1,linkPreventDefault:7}),t}return t=o,i&&Yc(t.prototype,i),r&&Yc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),vf=hf;function df(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var yf={};function pf(n,i,r){var e=this,o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined,u=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1,c=arguments.length>5&&arguments[5]!==undefined?arguments[5]:[],f=20,a=2e3/f;n&&(u>a?r&&r(c):_O(n,o,f).then(function(t){var o=this;if(df(this,e),t&&t.users&&t.users.length){t.users.forEach(function(n){df(this,o);var t=n.user,r=t.userId,e=t.userName,u=t.userLogin,f=t.userAvatar,a=t.isDeleted,s=i===r;c.push({isAuthor:s,perms:n.perms,userId:r,userName:e,userLogin:u,userAvatar:f,isDeleted:a})}.bind(this));var f=t.users[t.users.length-1].user.userId;pf(n,i,r,f,++u,c)}else r&&r(c)}.bind(this))["catch"](function(n){var i=n.error;df(this,e),y.error(t.Store,i),r&&r(c)}.bind(this)))}function bf(n,t){var i=this;return yf[n]||(yf[n]=Ei([]),pf(n,t,function(r){df(this,i),yf[n].set(function(n,t){var i=this;return n.sort(function(n,r){df(this,i);var e=n.userName,o=r.userName;return e&&o?n.userId===t||n.perms>r.perms?-1:n.perms<r.perms?1:(e=e[0].toLowerCase())<(o=o[0].toLowerCase())?-1:e>o?1:0:0}.bind(this)),n}(r,t))}.bind(this))),yf[n]}function mf(n){return mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},mf(n)}var wf=undefined;function _f(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function gf(n,t){return gf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},gf(n,t)}function Sf(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Ef(n);if(t){var e=Ef(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return jf(this,i)}}function jf(n,t){if(t&&("object"===mf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Of(n)}function Of(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ef(n){return Ef=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ef(n)}function Tf(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function kf(n,t,i){var r=n.slice();return r[28]=t[i],r}function Af(n,t,i){var r=n.slice();return r[31]=t[i],r}function xf(n,t,i){var r=n.slice();return r[28]=t[i],r}var Cf=function(n){return Tf(this,wf),{}}.bind(undefined),Rf=function(n){return Tf(this,wf),{}}.bind(undefined);function If(n){var t;return{c:function(){(t=vt("div")).textContent="".concat(r("foundEmpty")),_t(t,"class","form-members-list__result-text")},m:function(n,i){st(n,t,i)},p:Rn,i:Rn,o:Rn,d:function(n){n&&lt(t)}}}function Mf(n){for(var t,i,e,o,u=this,c=[],f=new Map,a=n[3],s=function(n){return Tf(this,u),n[28].userId}.bind(this),l=0;l<a.length;l+=1){var h=xf(n,a,l),v=s(h);f.set(v,c[l]=Pf(v,h))}return{c:function(){(t=vt("div")).textContent="".concat(r("mql5Members")),i=pt();for(var n=0;n<c.length;n+=1)c[n].c();e=bt(),_t(t,"class","form-members-list__title")},m:function(n,r){st(n,t,r),st(n,i,r);for(var u=0;u<c.length;u+=1)c[u].m(n,r);st(n,e,r),o=!0},p:function(n,t){12&t[0]&&(a=n[3],ui(),c=vi(c,t,s,1,n,a,f,e.parentNode,hi,Pf,e,xf),ci())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)fi(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)ai(c[t]);o=!1},d:function(n){n&&lt(t),n&&lt(i);for(var r=0;r<c.length;r+=1)c[r].d(n);n&&lt(e)}}}function Uf(n){var t;return{c:function(){(t=vt("div")).textContent="".concat(r("emptyAddMember")),_t(t,"class","form-members-list__result-text")},m:function(n,i){st(n,t,i)},p:Rn,i:Rn,o:Rn,d:function(n){n&&lt(t)}}}function Pf(n,t){var i,r,e;return(r=new vf({props:{linkPreventDefault:!0,member:t[28]}})).$on("click",(function(){return t[20](t[28])})),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),e=!0},p:function(n,i){t=n;var e={};8&i[0]&&(e.member=t[28]),r.$set(e)},i:function(n){e||(fi(r.$$.fragment,n),e=!0)},o:function(n){ai(r.$$.fragment,n),e=!1},d:function(n){n&&lt(i),bi(r,n)}}}function Df(n){for(var t,i,e,o,u=this,c=[],f=new Map,a=n[5],s=function(n){return Tf(this,u),n[31].userId}.bind(this),l=0;l<a.length;l+=1){var h=Af(n,a,l),v=s(h);f.set(v,c[l]=Bf(v,h))}return{c:function(){(t=vt("div")).textContent="".concat(r("friends")),i=pt();for(var n=0;n<c.length;n+=1)c[n].c();e=bt(),_t(t,"class","form-members-list__title")},m:function(n,r){st(n,t,r),st(n,i,r);for(var u=0;u<c.length;u+=1)c[u].m(n,r);st(n,e,r),o=!0},p:function(n,t){36&t[0]&&(a=n[5],ui(),c=vi(c,t,s,1,n,a,f,e.parentNode,hi,Bf,e,Af),ci())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)fi(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)ai(c[t]);o=!1},d:function(n){n&&lt(t),n&&lt(i);for(var r=0;r<c.length;r+=1)c[r].d(n);n&&lt(e)}}}function Bf(n,t){var i,r,e;return(r=new vf({props:{linkPreventDefault:!0,member:t[31]}})).$on("click",(function(){return t[21](t[31])})),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),e=!0},p:function(n,i){t=n;var e={};32&i[0]&&(e.member=t[31]),r.$set(e)},i:function(n){e||(fi(r.$$.fragment,n),e=!0)},o:function(n){ai(r.$$.fragment,n),e=!1},d:function(n){n&&lt(i),bi(r,n)}}}function Nf(n,t){var i,r,e,o,u=this;function c(n){t[22](n)}var f={linkPreventDefault:!0,member:t[28],chat:t[0],canDelete:!0};return void 0!==t[4]&&(f.toDelete=t[4]),r=new vf({props:f}),Wt.push(function(){return Tf(this,u),di(r,"toDelete",c)}.bind(this)),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),o=!0},p:function(n,i){var o=this;t=n;var u={};4&i[0]&&(u.member=t[28]),1&i[0]&&(u.chat=t[0]),!e&&16&i[0]&&(e=!0,u.toDelete=t[4],Jt(function(){return Tf(this,o),e=!1}.bind(this))),r.$set(u)},i:function(n){o||(fi(r.$$.fragment,n),o=!0)},o:function(n){ai(r.$$.fragment,n),o=!1},d:function(n){n&&lt(i),bi(r,n)}}}function $f(n){var t,i,r;return{c:function(){t=vt("div"),i=vt("div"),r=yt(n[6]),_t(i,"class","alert alert_danger"),_t(t,"class","form-members-add__errors")},m:function(n,e){st(n,t,e),ot(t,i),ot(i,r)},p:function(n,t){64&t[0]&&St(r,n[6])},d:function(n){n&&lt(t)}}}function Lf(n){var t,i,e,o,u,c,f,a,s,l,h,v,d,y,p,b,m,w,_,g,S,j,O,E=this,T=r("selectedMembers",n[2].length)+"",k=[],A=new Map,x=n[18].header,C=Fn(x,n,n[24],Rf),R=[Uf,Mf,If],I=[];function M(n,t){return n[1]?n[3].length?1:2:0}h=M(n),v=I[h]=R[h](n);for(var U=!n[1]&&n[5].length&&Df(n),P=n[2],D=function(n){return Tf(this,E),n[28].userId}.bind(this),B=0;B<P.length;B+=1){var N=kf(n,P,B),$=D(N);A.set($,k[B]=Nf($,N))}var L=n[6]&&$f(n);return{c:function(){t=vt("div"),C&&C.c(),i=pt(),e=vt("div"),o=vt("div"),u=vt("div"),c=vt("i"),f=pt(),a=vt("input"),s=pt(),l=vt("div"),v.c(),d=pt(),U&&U.c(),y=pt(),p=vt("div"),b=vt("div"),m=yt(T),w=pt(),_=vt("div");for(var n=0;n<k.length;n+=1)k[n].c();g=pt(),L&&L.c(),_t(c,"class","icons-chat icons-chat_search-gray"),_t(a,"type","text"),_t(a,"class","input"),_t(a,"placeholder",r("searchMembers")),_t(u,"class","chat-members-search"),_t(l,"class","form-members-list"),_t(o,"class","form-members-add__left-part"),_t(b,"class","form-members-selected__title"),_t(_,"class","form-members-list"),_t(p,"class","form-members-add__right-part"),_t(e,"class","form-members-add__content"),_t(t,"slot","content"),_t(t,"class","form-members-add")},m:function(r,v){st(r,t,v),C&&C.m(t,null),ot(t,i),ot(t,e),ot(e,o),ot(o,u),ot(u,c),ot(u,f),ot(u,a),jt(a,n[1]),ot(o,s),ot(o,l),I[h].m(l,null),ot(l,d),U&&U.m(l,null),ot(e,y),ot(e,p),ot(p,b),ot(b,m),ot(p,w),ot(p,_);for(var E=0;E<k.length;E+=1)k[E].m(_,null);ot(e,g),L&&L.m(e,null),S=!0,j||(O=mt(a,"input",n[19]),j=!0)},p:function(n,t){var i=this;C&&C.p&&(!S||16777216&t[0])&&Vn(C,x,n,n[24],S?Hn(x,n[24],t,Cf):Qn(n[24]),Rf),2&t[0]&&a.value!==n[1]&&jt(a,n[1]);var o=h;(h=M(n))===o?I[h].p(n,t):(ui(),ai(I[o],1,1,function(){Tf(this,i),I[o]=null}.bind(this)),ci(),(v=I[h])?v.p(n,t):(v=I[h]=R[h](n)).c(),fi(v,1),v.m(l,d)),!n[1]&&n[5].length?U?(U.p(n,t),34&t[0]&&fi(U,1)):((U=Df(n)).c(),fi(U,1),U.m(l,null)):U&&(ui(),ai(U,1,1,function(){Tf(this,i),U=null}.bind(this)),ci()),(!S||4&t[0])&&T!==(T=r("selectedMembers",n[2].length)+"")&&St(m,T),21&t[0]&&(P=n[2],ui(),k=vi(k,t,D,1,n,P,A,_,hi,Nf,null,kf),ci()),n[6]?L?L.p(n,t):((L=$f(n)).c(),L.m(e,null)):L&&(L.d(1),L=null)},i:function(n){if(!S){fi(C,n),fi(v),fi(U);for(var t=0;t<P.length;t+=1)fi(k[t]);S=!0}},o:function(n){ai(C,n),ai(v),ai(U);for(var t=0;t<k.length;t+=1)ai(k[t]);S=!1},d:function(n){n&&lt(t),C&&C.d(n),I[h].d(),U&&U.d();for(var i=0;i<k.length;i+=1)k[i].d();L&&L.d(),j=!1,O()}}}function zf(n){var t,i,e,o,u,c,f,a,s=r("append")+"";return{c:function(){t=vt("span"),i=vt("button"),e=yt(s),u=pt(),(c=vt("button")).textContent="".concat(r("close")),_t(i,"class","button button_green qa-dialog-ok"),i.disabled=o=!n[2].length,_t(c,"class","button button_white qa-dialog-cancel"),_t(t,"slot","buttons")},m:function(r,o){st(r,t,o),ot(t,i),ot(i,e),ot(t,u),ot(t,c),f||(a=[mt(i,"click",n[10]),mt(c,"click",n[9])],f=!0)},p:function(n,t){4&t[0]&&o!==(o=!n[2].length)&&(i.disabled=o)},d:function(n){n&&lt(t),f=!1,Dn(a)}}}function Wf(n){var t,i;return(t=new $o({props:{withTitle:!1,$$slots:{buttons:[zf],content:[Lf]},$$scope:{ctx:n}}})).$on("close",n[23]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};16777343&i[0]&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function qf(n,i,e){var o,u,c=this,f=i.$$slots,a=void 0===f?{}:f,s=i.$$scope,l=i.chat,h=$t(),v={},d=bf(l.chatId,l.authorId);qn(n,d,function(n){return Tf(this,c),e(17,u=n)}.bind(this));var p=[],b="",m=[],w=dc();qn(n,w,function(n){return Tf(this,c),e(16,o=n)}.bind(this));var _,g,S,O=[],E=[],T=[],k="";function A(){if(o&&u){var n=0;e(5,O=[]);for(var t=0,i=o.length;t<i;t++){var r=o[t];if(!~p.indexOf(r.userId)&&(O.push(r),++n>=3))break}}}var x=Or(function(n){var i=this;Tf(this,c),TO(n,50).then(function(t){Tf(this,i),e(11,v[n]=t,v),e(13,E=t)}.bind(this))["catch"](function(n){var r=n.error;Tf(this,i),y.error(t.User,r)}.bind(this))}.bind(this),300),C=function(){Tf(this,c),h("close")}.bind(this),R=function(){var n=this;Tf(this,c);var i=l.type===j?U.nt:U.Zn,o="";e(6,k="");var u=[];m.forEach(function(r){var c=this;Tf(this,n),u.push(SO(l.chatId,r.userId,i).then(function(n){Tf(this,c),pE(n);var t=n.chatId,o=r;o.perms=i,e(0,l.countMembers++,l),function(n,t){var i=this;yf[n]&&yf[n].update(function(n){df(this,i);for(var r=-1,e=0,o=n.length;e<o;e++)if(n[e].userId==t.userId){r=e;break}return~r?n.splice(r,1,t):n.push(t),n}.bind(this))}(t,o)}.bind(this))["catch"](function(n){var i=n.error;Tf(this,c),o&&(o+=" ,"),o+=r.userName,y.error(t.User,i)}.bind(this)))}.bind(this)),Promise.allSettled(u).then(function(){var t=this;Tf(this,n),o?e(6,k=r("notAllowedAdd",o)):C(),e(2,m=[]),iT.update(function(n){return Tf(this,t),n?(l.chatId===(null==n?void 0:n.chatId)&&(n.countMembers=l.countMembers),n):n}.bind(this))}.bind(this))}.bind(this);var I=function(n){Tf(this,c),e(2,m=m.concat([n]))}.bind(this),M=function(n){Tf(this,c),e(2,m=m.concat([n]))}.bind(this);return n.$$set=function(n){Tf(this,c),"chat"in n&&e(0,l=n.chat),"$$scope"in n&&e(24,s=n.$$scope)}.bind(this),n.$$.update=function(){var t=this;if(Tf(this,c),20&n.$$.dirty[0]&&_){for(var i=m,r=0,f=i.length;r<f;r++)if(i[r].userId===_.userId){i.splice(r,1);break}e(2,m=i),e(4,_=undefined)}if(135172&n.$$.dirty[0]&&u&&(e(12,p=[]),u.forEach(function(n){Tf(this,t),p.push(n.userId)}.bind(this)),m&&m.forEach(function(n){Tf(this,t),p.push(n.userId)}.bind(this))),2050&n.$$.dirty[0]&&b&&(v[b]?e(13,E=v[b]):x(b)),12296&n.$$.dirty[0]&&E){e(3,T=[]);for(var a=0,s=E.length;a<s;a++){var l=E[a];~p.indexOf(l.userId)||T.push(l)}}147456&n.$$.dirty[0]&&!g&&u&&e(14,g=d.subscribe(A)),98304&n.$$.dirty[0]&&!S&&o&&e(15,S=w.subscribe(A)),4096&n.$$.dirty[0]&&p&&A()}.bind(this),[l,b,m,T,_,O,k,d,w,C,R,v,p,E,g,S,o,u,a,function(){b=this.value,e(1,b)},I,M,function(n){e(4,_=n),e(2,m)},function(t){Lt.call(this,n,t)},s]}var Ff=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&gf(n,t)}(o,n);var t,i,r,e=Sf(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Of(t=e.call(this)),n,qf,Wf,Nn,{chat:0},null,[-1,-1]),t}return t=o,i&&_f(t.prototype,i),r&&_f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Gf=Ff;function Hf(n){return Hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Hf(n)}function Vf(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Qf(n,t){return Qf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Qf(n,t)}function Yf(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Xf(n);if(t){var e=Xf(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Jf(this,i)}}function Jf(n,t){if(t&&("object"===Hf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Kf(n)}function Kf(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Xf(n){return Xf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xf(n)}function Zf(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function na(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return ta(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ta(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ta(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function ia(n){var t,i,r,e=(null===(t=n[0])||void 0===t?void 0:t.userName)+"";return{c:function(){i=vt("span"),r=yt(e),_t(i,"slot","title")},m:function(n,t){st(n,i,t),ot(i,r)},p:function(n,t){var i;1&t&&e!==(e=(null===(i=n[0])||void 0===i?void 0:i.userName)+"")&&St(r,e)},d:function(n){n&&lt(i)}}}function ra(n){var t,i;return{c:function(){t=vt("div"),i=yt(n[7]),_t(t,"class","alert alert_danger")},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,t){128&t&&St(i,n[7])},d:function(n){n&&lt(t)}}}function ea(n){var t,i,e,o,u,c,f,a,s,l,h,v,d,y,p,b,m,w,_,g,S,j=r("moderatorDesc")+"",O=r("adminDesc")+"",E=n[7]&&ra(n);return{c:function(){t=vt("div"),(i=vt("div")).textContent="".concat(r("permissions"),":"),e=pt(),o=vt("div"),u=vt("input"),(c=vt("label")).textContent="".concat(r("postMessages")),f=pt(),a=vt("div"),s=vt("input"),(l=vt("label")).textContent="".concat(r("moderator")),h=pt(),v=vt("div"),d=pt(),y=vt("div"),p=vt("input"),(b=vt("label")).textContent="".concat(r("admin")),m=pt(),w=vt("div"),_=pt(),E&&E.c(),_t(i,"class","member-edit-perms__title"),_t(u,"type","checkbox"),_t(u,"name","write"),_t(u,"id","checkboxWrite"),u.disabled=n[1],_t(c,"for","checkboxWrite"),_t(o,"class","toggle-btn"),_t(s,"type","checkbox"),_t(s,"name","moderate"),_t(s,"id","checkboxModerate"),s.disabled=n[3],_t(l,"for","checkboxModerate"),_t(a,"class","toggle-btn"),_t(v,"class","chat-prompt"),_t(p,"type","checkbox"),_t(p,"name","admin"),_t(p,"id","checkboxAdmin"),p.disabled=n[6],_t(b,"for","checkboxAdmin"),_t(y,"class","toggle-btn"),_t(w,"class","chat-prompt"),_t(t,"slot","content"),_t(t,"class","member-edit-perms")},m:function(r,T){st(r,t,T),ot(t,i),ot(t,e),ot(t,o),ot(o,u),u.checked=n[2],ot(o,c),ot(t,f),ot(t,a),ot(a,s),s.checked=n[4],ot(a,l),ot(t,h),ot(t,v),v.innerHTML=j,ot(t,d),ot(t,y),ot(y,p),p.checked=n[5],ot(y,b),ot(t,m),ot(t,w),w.innerHTML=O,ot(t,_),E&&E.m(t,null),g||(S=[mt(u,"change",n[11]),mt(u,"change",n[12]),mt(s,"change",n[13]),mt(s,"change",n[14]),mt(p,"change",n[15]),mt(p,"change",n[16])],g=!0)},p:function(n,i){2&i&&(u.disabled=n[1]),4&i&&(u.checked=n[2]),8&i&&(s.disabled=n[3]),16&i&&(s.checked=n[4]),64&i&&(p.disabled=n[6]),32&i&&(p.checked=n[5]),n[7]?E?E.p(n,i):((E=ra(n)).c(),E.m(t,null)):E&&(E.d(1),E=null)},d:function(n){n&&lt(t),E&&E.d(),g=!1,Dn(S)}}}function oa(n){var t,i,e,o,u,c,f,a,s=r("save")+"";return{c:function(){t=vt("span"),i=vt("button"),e=yt(s),u=pt(),(c=vt("button")).textContent="".concat(r("close")),_t(i,"class","button button_green qa-dialog-ok"),i.disabled=o=!!n[7],_t(c,"class","button button_white qa-dialog-cancel"),_t(t,"slot","buttons")},m:function(r,o){st(r,t,o),ot(t,i),ot(i,e),ot(t,u),ot(t,c),f||(a=[mt(i,"click",n[9]),mt(c,"click",n[8])],f=!0)},p:function(n,t){128&t&&o!==(o=!!n[7])&&(i.disabled=o)},d:function(n){n&&lt(t),f=!1,Dn(a)}}}function ua(n){var t,i;return(t=new $o({props:{$$slots:{buttons:[oa],content:[ea],title:[ia]},$$scope:{ctx:n}}})).$on("close",n[8]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r=na(i,1)[0],e={};262399&r&&(e.$$scope={dirty:r,ctx:n}),t.$set(e)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function ca(n,i,r){var e=this,o=i.chat,u=i.member,c=!1,f=!1,a=!1,s=!1,l=!1,h=!1,v="",d=o.perms&U.rt;for(var p in U)if(Object.prototype.hasOwnProperty.call(U,p)){if(!u)break;var b=U[p],m=!!(b&u.perms),w=u.perms>=o.perms&&!d;switch(b){case U.nt:c=w,f=m;break;case U.tt:a=!d,s=m;break;case U.rt:h=!d,l=m}}var _=function(){Zf(this,e),r(0,u=undefined)}.bind(this),g=function(){var n=this;if(Zf(this,e),u){var i=0;f&&(i|=U.nt),s&&(i|=U.tt),l&&(i|=U.rt),SO(o.chatId,u.userId,i).then(function(t){Zf(this,n),pE(t),function(n,t,i){var r=this;yf[n]&&yf[n].update(function(n){df(this,r);for(var e=0,o=n.length;e<o;e++)if(n[e].userId===t){n[e].perms=i;break}return n}.bind(this))}(t.chatId,t.userId,t.perm),_()}.bind(this))["catch"](function(i){var e=i.error;Zf(this,n),y.error(t.User,e),r(7,v=e)}.bind(this))}}.bind(this);var S=function(){Zf(this,e),f||(r(4,s=!1),r(5,l=!1))}.bind(this);var j=function(){Zf(this,e),s?r(2,f=!0):r(5,l=!1)}.bind(this);var O=function(){Zf(this,e),l&&(r(2,f=!0),r(4,s=!0))}.bind(this);return n.$$set=function(n){Zf(this,e),"chat"in n&&r(10,o=n.chat),"member"in n&&r(0,u=n.member)}.bind(this),[u,c,f,a,s,l,h,v,_,g,o,function(){f=this.checked,r(2,f)},S,function(){s=this.checked,r(4,s)},j,function(){l=this.checked,r(5,l)},O]}var fa=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Qf(n,t)}(o,n);var t,i,r,e=Yf(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Kf(t=e.call(this)),n,ca,ua,Nn,{chat:10,member:0}),t}return t=o,i&&Vf(t.prototype,i),r&&Vf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),aa=fa;function sa(n){return sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},sa(n)}function la(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function ha(n,t){return ha=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},ha(n,t)}function va(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=pa(n);if(t){var e=pa(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return da(this,i)}}function da(n,t){if(t&&("object"===sa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ya(n)}function ya(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function pa(n){return pa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pa(n)}function ba(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return ma(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ma(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ma(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function wa(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function _a(n){ut(n,"svelte-1p20pcl",".chat-members-list.svelte-1p20pcl{height:400px;max-height:100%;margin-left:16px}.chat-members-list__content.svelte-1p20pcl{padding-top:16px}.alert.svelte-1p20pcl{margin-right:16px}")}function ga(n,t,i){var r=n.slice();return r[22]=t[i],r}function Sa(n){for(var t,i,r=this,e=[],o=new Map,u=n[7],c=function(n){return wa(this,r),n[22].userId}.bind(this),f=0;f<u.length;f+=1){var a=ga(n,u,f),s=c(a);o.set(s,e[f]=Oa(s,a))}return{c:function(){for(var n=0;n<e.length;n+=1)e[n].c();t=bt()},m:function(n,r){for(var o=0;o<e.length;o+=1)e[o].m(n,r);st(n,t,r),i=!0},p:function(n,i){3468&i&&(u=n[7],ui(),e=vi(e,i,c,1,n,u,o,t.parentNode,hi,Oa,t,ga),ci())},i:function(n){if(!i){for(var t=0;t<u.length;t+=1)fi(e[t]);i=!0}},o:function(n){for(var t=0;t<e.length;t+=1)ai(e[t]);i=!1},d:function(n){for(var i=0;i<e.length;i+=1)e[i].d(n);n&&lt(t)}}}function ja(n){var t;return{c:function(){(t=vt("div")).textContent="".concat(r("errorUserNotFound")),_t(t,"class","alert alert_warning svelte-1p20pcl")},m:function(n,i){st(n,t,i)},p:Rn,i:Rn,o:Rn,d:function(n){n&&lt(t)}}}function Oa(n,t){var i,r,e,o,u,c=this;function f(n){t[16](n)}function a(n){t[17](n)}var s={member:t[22],canEdit:!(vr===t[22].userId||!t[10]||!(t[3].perms>t[22].perms||t[11])),canDelete:!(vr===t[22].userId||!t[10]||!(t[3].perms>t[22].perms||t[11]))};return void 0!==t[8]&&(s.toEdit=t[8]),void 0!==t[2]&&(s.toDelete=t[2]),r=new vf({props:s}),Wt.push(function(){return wa(this,c),di(r,"toEdit",f)}.bind(this)),Wt.push(function(){return wa(this,c),di(r,"toDelete",a)}.bind(this)),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),u=!0},p:function(n,i){var u=this;t=n;var c={};128&i&&(c.member=t[22]),136&i&&(c.canEdit=!(vr===t[22].userId||!t[10]||!(t[3].perms>t[22].perms||t[11]))),136&i&&(c.canDelete=!(vr===t[22].userId||!t[10]||!(t[3].perms>t[22].perms||t[11]))),!e&&256&i&&(e=!0,c.toEdit=t[8],Jt(function(){return wa(this,u),e=!1}.bind(this))),!o&&4&i&&(o=!0,c.toDelete=t[2],Jt(function(){return wa(this,u),o=!1}.bind(this))),r.$set(c)},i:function(n){u||(fi(r.$$.fragment,n),u=!0)},o:function(n){ai(r.$$.fragment,n),u=!1},d:function(n){n&&lt(i),bi(r,n)}}}function Ea(n){var t,i,r,e=this;function o(t){n[19](t)}var u={chat:n[3]};return void 0!==n[8]&&(u.member=n[8]),t=new aa({props:u}),Wt.push(function(){return wa(this,e),di(t,"member",o)}.bind(this)),{c:function(){yi(t.$$.fragment)},m:function(n,i){pi(t,n,i),r=!0},p:function(n,r){var e=this,o={};8&r&&(o.chat=n[3]),!i&&256&r&&(i=!0,o.member=n[8],Jt(function(){return wa(this,e),i=!1}.bind(this))),t.$set(o)},i:function(n){r||(fi(t.$$.fragment,n),r=!0)},o:function(n){ai(t.$$.fragment,n),r=!1},d:function(n){bi(t,n)}}}function Ta(n){var t,i,r,e,o,u,c,f,a,s,l,h=[ja,Sa],v=[];function d(n,t){return n[1]&&!n[7].length?0:1}o=d(n),u=v[o]=h[o](n);var y=n[8]&&Ea(n);return{c:function(){t=vt("div"),i=vt("div"),r=pt(),e=vt("div"),u.c(),c=pt(),y&&y.c(),f=bt(),Ot(i,"height",n[4]+"px"),_t(e,"class","chat-members-list__content svelte-1p20pcl"),Ot(e,"transform","translate3d(0,"+n[6]+"px,0)"),_t(t,"class","chat-members-list svelte-1p20pcl")},m:function(u,h){st(u,t,h),ot(t,i),ot(t,r),ot(t,e),v[o].m(e,null),n[18](t),st(u,c,h),y&&y.m(u,h),st(u,f,h),a=!0,s||(l=mt(t,"scroll",po(n[12],100,undefined)),s=!0)},p:function(n,t){var r=this,c=ba(t,1)[0];(!a||16&c)&&Ot(i,"height",n[4]+"px");var s=o;(o=d(n))===s?v[o].p(n,c):(ui(),ai(v[s],1,1,function(){wa(this,r),v[s]=null}.bind(this)),ci(),(u=v[o])?u.p(n,c):(u=v[o]=h[o](n)).c(),fi(u,1),u.m(e,null)),(!a||64&c)&&Ot(e,"transform","translate3d(0,"+n[6]+"px,0)"),n[8]?y?(y.p(n,c),256&c&&fi(y,1)):((y=Ea(n)).c(),fi(y,1),y.m(f.parentNode,f)):y&&(ui(),ai(y,1,1,function(){wa(this,r),y=null}.bind(this)),ci())},i:function(n){a||(fi(u),fi(y),a=!0)},o:function(n){ai(u),ai(y),a=!1},d:function(i){i&&lt(t),v[o].d(),n[18](null),i&&lt(c),y&&y.d(i),i&&lt(f),s=!1,l()}}}function ka(n,i,r){var e,o,u=this,c=Rn,f=function(){var n=this;return wa(this,u),c(),c=zn(a,function(t){return wa(this,n),r(3,e=t)}.bind(this)),a}.bind(this);n.$$.on_destroy.push(function(){return wa(this,u),c()}.bind(this));var a=i.chat;f();var s=i.searchText,l=void 0===s?"":s,h=bf(e.chatId,e.authorId);qn(n,h,function(n){return wa(this,u),r(15,o=n)}.bind(this));var v,d,p,b=0,m=0,w=0,_=[],g=_.length,S=[],j=e.perms&U.tt,O=e.perms&U.rt;function E(){var n=v.offsetHeight;m=Math.floor(n/42)}function T(){if(v){var n=v.scrollTop,t=Math.floor(n/42),i=t-m;i<0&&(i=0),r(6,w=Math.ceil(42*i));var e=t-m;e<0&&(e=0),r(7,_=S.slice(e,t+2*m))}}return Nt(function(){var n=this;return wa(this,u),window.addEventListener("resize",E),E(),T(),function(){wa(this,n),window.removeEventListener("resize",E)}.bind(this)}.bind(this)),n.$$set=function(n){wa(this,u),"chat"in n&&f(r(0,a=n.chat)),"searchText"in n&&r(1,l=n.searchText)}.bind(this),n.$$.update=function(){var i=this;if(wa(this,u),32770&n.$$.dirty)if(l){var c=l.toLowerCase();r(14,S=o.filter(function(n){return wa(this,i),!(!(null==n?void 0:n.userName)||!(null==n?void 0:n.userLogin))&&(~n.userName.toLowerCase().indexOf(c)||~n.userLogin.toLowerCase().indexOf(c))}.bind(this)))}else r(14,S=o);12&n.$$.dirty&&p&&(SO(e.chatId,p.userId,0,!0).then(function(n){wa(this,i),pE(n);var t=n.chatId,r=n.userId;n.isDelete&&(!function(n,t){var i=this;yf[n]&&yf[n].update(function(n){df(this,i);for(var r=0,e=n.length;r<e;r++)if(n[r].userId===t){n.splice(r,1);break}return n}.bind(this))}(t,r),Yn(a,e.countMembers--,e))}.bind(this))["catch"](function(n){var r=n.error;wa(this,i),y.error(t.User,r)}.bind(this)),r(2,p=undefined)),16384&n.$$.dirty&&S&&T(),24576&n.$$.dirty&&(r(13,g=S.length),r(4,b=42*g))}.bind(this),[a,l,p,e,b,v,w,_,d,h,j,O,T,g,S,o,function(n){r(8,d=n)},function(n){r(2,p=n),r(3,e)},function(n){var t=this;Wt[n?"unshift":"push"](function(){wa(this,t),r(5,v=n)}.bind(this))},function(n){r(8,d=n)}]}var Aa=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&ha(n,t)}(o,n);var t,i,r,e=va(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(ya(t=e.call(this)),n,ka,Ta,Nn,{chat:0,searchText:1},_a),t}return t=o,i&&la(t.prototype,i),r&&la(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),xa=Aa;function Ca(n){return Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ca(n)}function Ra(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Ia(n,t){return Ia=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Ia(n,t)}function Ma(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Da(n);if(t){var e=Da(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Ua(this,i)}}function Ua(n,t){if(t&&("object"===Ca(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pa(n)}function Pa(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Da(n){return Da=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Da(n)}function Ba(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Na(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Na(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Na(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function $a(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function La(n){ut(n,"svelte-x37lsg",".chat-members-window.svelte-x37lsg{width:600px;max-width:100%}.chat-members-window__add.svelte-x37lsg{float:left;margin-left:0}")}function za(n){var t,i;return(t=new $o({props:{withTitle:!1,$$slots:{buttons:[Fa],content:[Wa]},$$scope:{ctx:n}}})).$on("close",n[8]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};16399&i&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function Wa(n){var t,i,e,o,u,c,f,a,s,l;return f=new xa({props:{chat:n[1],searchText:n[2]}}),{c:function(){t=vt("div"),i=vt("div"),e=vt("i"),o=pt(),u=vt("input"),c=pt(),yi(f.$$.fragment),_t(e,"class","icons-chat icons-chat_search-gray"),_t(u,"type","text"),_t(u,"class","input"),_t(u,"placeholder",r("searchMembers")),_t(i,"class","chat-members-search"),_t(t,"slot","content"),_t(t,"class","chat-members-window svelte-x37lsg")},m:function(r,h){st(r,t,h),ot(t,i),ot(i,e),ot(i,o),ot(i,u),jt(u,n[2]),ot(t,c),pi(f,t,null),a=!0,s||(l=mt(u,"input",n[7]),s=!0)},p:function(n,t){4&t&&u.value!==n[2]&&jt(u,n[2]);var i={};2&t&&(i.chat=n[1]),4&t&&(i.searchText=n[2]),f.$set(i)},i:function(n){a||(fi(f.$$.fragment,n),a=!0)},o:function(n){ai(f.$$.fragment,n),a=!1},d:function(n){n&&lt(t),bi(f),s=!1,l()}}}function qa(n){var t,i,e;return{c:function(){(t=vt("button")).textContent="".concat(r("addMembers")),_t(t,"class","button button_blue-and-white chat-members-window__add qa-add-members svelte-x37lsg")},m:function(r,o){st(r,t,o),i||(e=mt(t,"click",n[6]),i=!0)},p:Rn,d:function(n){n&&lt(t),i=!1,e()}}}function Fa(n){var t,i,e,o,u,c=n[0]&&qa(n);return{c:function(){t=vt("span"),c&&c.c(),i=pt(),(e=vt("button")).textContent="".concat(r("close")),_t(e,"class","button button_white qa-dialog-cancel"),_t(t,"slot","buttons")},m:function(r,f){st(r,t,f),c&&c.m(t,null),ot(t,i),ot(t,e),o||(u=mt(e,"click",n[5]),o=!0)},p:function(n,r){n[0]?c?c.p(n,r):((c=qa(n)).c(),c.m(t,i)):c&&(c.d(1),c=null)},d:function(n){n&&lt(t),c&&c.d(),o=!1,u()}}}function Ga(n){var t,i,r,e=this;function o(t){n[10](t)}var u={$$slots:{header:[Ha]},$$scope:{ctx:n}};return void 0!==n[4]&&(u.chat=n[4]),t=new Gf({props:u}),Wt.push(function(){return $a(this,e),di(t,"chat",o)}.bind(this)),t.$on("close",n[11]),{c:function(){yi(t.$$.fragment)},m:function(n,i){pi(t,n,i),r=!0},p:function(n,r){var e=this,o={};16392&r&&(o.$$scope={dirty:r,ctx:n}),!i&&16&r&&(i=!0,o.chat=n[4],Jt(function(){return $a(this,e),i=!1}.bind(this))),t.$set(o)},i:function(n){r||(fi(t.$$.fragment,n),r=!0)},o:function(n){ai(t.$$.fragment,n),r=!1},d:function(n){bi(t,n)}}}function Ha(n){var t,i,e,o,u,c,f,a=r("addMembers")+"";return{c:function(){t=vt("div"),i=vt("button"),e=vt("i"),o=pt(),u=yt(a),_t(e,"class","icons-chat icons-chat_back-gray"),_t(i,"title",r("back")),_t(i,"class","form-members-add__header-button"),_t(t,"slot","header"),_t(t,"class","form-members-add__header")},m:function(r,a){st(r,t,a),ot(t,i),ot(i,e),ot(t,o),ot(t,u),c||(f=mt(i,"click",n[9]),c=!0)},p:Rn,d:function(n){n&&lt(t),c=!1,f()}}}function Va(n){var t,i,r,e=!n[3]&&za(n),o=n[3]&&Ga(n);return{c:function(){e&&e.c(),t=pt(),o&&o.c(),i=bt()},m:function(n,u){e&&e.m(n,u),st(n,t,u),o&&o.m(n,u),st(n,i,u),r=!0},p:function(n,r){var u=this,c=Ba(r,1)[0];n[3]?e&&(ui(),ai(e,1,1,function(){$a(this,u),e=null}.bind(this)),ci()):e?(e.p(n,c),8&c&&fi(e,1)):((e=za(n)).c(),fi(e,1),e.m(t.parentNode,t)),n[3]?o?(o.p(n,c),8&c&&fi(o,1)):((o=Ga(n)).c(),fi(o,1),o.m(i.parentNode,i)):o&&(ui(),ai(o,1,1,function(){$a(this,u),o=null}.bind(this)),ci())},i:function(n){r||(fi(e),fi(o),r=!0)},o:function(n){ai(e),ai(o),r=!1},d:function(n){e&&e.d(n),n&&lt(t),o&&o.d(n),n&&lt(i)}}}function Qa(n,t,i){var r,e=this,o=Rn,u=function(){var n=this;return $a(this,e),o(),o=zn(c,function(t){return $a(this,n),i(4,r=t)}.bind(this)),c}.bind(this);n.$$.on_destroy.push(function(){return $a(this,e),o()}.bind(this));var c=t.chat;u();var f=t.canAdd,a=void 0===f?d():f,s=$t(),l="",h=!1,v=function(){$a(this,e),s("close")}.bind(this);function d(){return r.type===j&&r.isSubscribed&&!r.isLimited||!!(r.perms&U.tt)}var y=function(){$a(this,e),i(3,h=!0)}.bind(this);var p=function(){$a(this,e),i(3,h=!1)}.bind(this);var b=function(){$a(this,e),i(3,h=!1)}.bind(this);return n.$$set=function(n){$a(this,e),"chat"in n&&u(i(1,c=n.chat)),"canAdd"in n&&i(0,a=n.canAdd)}.bind(this),i(0,a=d()),[a,c,l,h,r,v,y,function(){l=this.value,i(2,l)},function(t){Lt.call(this,n,t)},p,function(n){r=n,c.set(r)},b]}var Ya=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Ia(n,t)}(o,n);var t,i,r,e=Ma(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Pa(t=e.call(this)),n,Qa,Va,Nn,{chat:1,canAdd:0},La),t}return t=o,i&&Ra(t.prototype,i),r&&Ra(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Ja=Ya;var Ka,Xa,Za=undefined,ns=undefined,ts=undefined,is=null;function rs(){clearTimeout(Ka),Ka=setTimeout((function(){ns.removeAttribute("style"),is&&(ns.style.maxWidth=is);var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=ns.offsetWidth,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,r=ns.offsetHeight;n-16<t?(ns.style.left="8px",ns.style.right="8px",ns.style.marginLeft=0):(ns.style.left="50%",ns.style.right="auto",ns.style.marginLeft=t/2*-1+"px"),i-16<r?(ns.style.top="8px",ns.style.bottom="8px",ns.style.marginTop=0):(ns.style.top="50%",ns.style.bottom="auto",ns.style.marginTop=r/2*-1+"px"),ns.classList.remove("chat-dialog__container_hidden")}),50)}function es(n){if(n)switch(n.code||n.keyCode){case"Escape":case 27:n.preventDefault(),n.stopPropagation(),us()}}function os(n){var t=this,i=n.createCallback,r=void 0===i?null:i,e=n.okCallback,o=n.hideCallback,u=n.okColor,c=void 0===u?"green":u,f=n.appendCallback,a=n.title,s=n.okText,l=void 0===s?"Ok":s,h=n.cancelText,v=void 0===h?"Cancel":h,d=n.maxWidth,y=void 0===d?null:d,p=n.showCloseBtn,b=void 0===p||p,m=n.hideButtons;if(window.document.addEventListener("keydown",es),ts=o,is=y,(Za=document.createElement("div")).className="chat-dialog__shadow",document.body.appendChild(Za),Za.addEventListener("click",us),(ns=document.createElement("div")).className="chat-dialog__container chat-dialog__container_hidden ui",ns.addEventListener("click",function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,t),n.stopPropagation()}.bind(this)),b){var w=document.createElement("div");w.className="chat-dialog__close qa-dialog-close",w.innerHTML='<i class="icons-ux icons-ux_close-gray"></i>',w.addEventListener("click",us),ns.appendChild(w)}if(a){var _='<div class="chat-dialog__title">'.concat(a,"</div>");ns.insertAdjacentHTML("beforeend",_)}var g=document.createElement("div");if(g.className="chat-dialog__content",ns.appendChild(g),!m){var S=document.createElement("div");S.className="chat-dialog__buttons",ns.appendChild(S),(Xa=document.createElement("button")).className="button button_".concat(c," qa-dialog-ok"),Xa.innerText=l,S.appendChild(Xa),Xa.addEventListener("click",(function(n){e&&e(),us(n,!0)}));var j=document.createElement("button");j.className="button button_white qa-dialog-cancel",j.innerText=v,S.appendChild(j),j.addEventListener("click",us)}r&&r(g),document.body.appendChild(ns),rs(),f&&setTimeout((function(){f()}),60),window.addEventListener("resize",rs)}function us(n,t){window.document.removeEventListener("keydown",es),n&&n.stopPropagation(),ns&&Za&&(ts&&!t&&ts(),Za.parentNode.removeChild(Za),ns.parentNode.removeChild(ns),window.removeEventListener("resize",rs)),ns=undefined,Za=undefined,ts=undefined}function cs(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var fs,as,ss,ls,hs,vs=200,ds=0,ys=0,ps=0,bs=0,ms=!1,ws={x:0,y:0};function _s(){ms=!1}function gs(n){ms=!0,ws.x=n.clientX,ws.y=n.clientY}function Ss(n){if(ms){var t=n.clientX,i=n.clientY,r=t-ws.x,e=i-ws.y;ws.x=t,ws.y=i,Es(ds+r,ys+e)}}function js(){clearInterval(ls)}function Os(n){var t=ps/bs;(ps+=60*(n?1:-1))<vs&&(ps=vs),(bs=Math.round(ps/t))<vs&&(bs=vs,ps=Math.round(bs*t)),as.clearRect(0,0,vs,vs),as.drawImage(fs,ds,ys,ps,bs)}function Es(n,t){n>=0?n=0:n<-ps+vs&&(n=-ps+vs),t>=0?t=0:t<-bs+vs&&(t=-bs+vs),ds=n,ys=t,as.clearRect(0,0,vs,vs),as.drawImage(fs,n,t,ps,bs)}function Ts(n){var t=this,i=n.parentNode,r=n.direction,e=n.callback,o=n.icon,u=document.createElement("div");u.innerHTML='<i class="icons-ux icons-ux_'.concat(o,'"></i>'),u.className="avatar-editor__control avatar-editor__control_".concat(r),e&&(u.addEventListener("mousedown",function(n){cs(this,t),n.stopPropagation(),n.preventDefault(),js(),ls=setInterval(e,50)}.bind(this)),u.addEventListener("touchstart",function(n){cs(this,t),n.stopPropagation(),n.preventDefault(),js(),ls=setInterval(e,50)}.bind(this),{passive:!0}),u.addEventListener("mouseup",js),u.addEventListener("mouseout",js),u.addEventListener("touchend",function(){cs(this,t),js()}.bind(this),{passive:!0})),i.appendChild(u)}function ks(n){var t=this,i=n.parentNode,r=n.localization,e=document.createElement("div");e.className="avatar-editor",Ts({parentNode:e,direction:"top",callback:function(){cs(this,t),Es(ds,ys-10)}.bind(this),icon:"arrow-up"}),Ts({parentNode:e,direction:"right",callback:function(){cs(this,t),Es(ds+10,ys)}.bind(this),icon:"arrow-right"}),Ts({parentNode:e,direction:"bottom",callback:function(){cs(this,t),Es(ds,ys+10)}.bind(this),icon:"arrow-down"}),Ts({parentNode:e,direction:"left",callback:function(){cs(this,t),Es(ds-10,ys)}.bind(this),icon:"arrow-left"});var o=document.createElement("div");o.className="avatar-editor__draggable",e.appendChild(o),o.addEventListener("mousemove",Ss),o.addEventListener("mousedown",gs),o.addEventListener("mouseup",_s),o.addEventListener("mouseout",_s),o.addEventListener("dragstart",function(n){cs(this,t),n.preventDefault()}.bind(this)),function(n){var t=n.parentNode,i=new FileReader;i.onload=function(n){(fs=new Image).onload=function(){(ss=document.createElement("canvas")).className="avatar-editor__canvas",ss.width=vs,ss.height=vs,as=ss.getContext("2d"),ps=fs.width,bs=fs.height;var n=ps/bs;ps>bs?ps=(bs=vs)*n:bs=(ps=vs)/n,as.drawImage(fs,0,0,ps,bs),t.appendChild(ss)},fs.src=n.target.result},i.readAsDataURL(hs)}({parentNode:e}),i.appendChild(e);var u=document.createElement("div");u.className="avatar-editor__zoom";var c=document.createElement("div");c.className="avatar-editor__zoom-btn",c.innerHTML='<span class="avatar-editor__zoom-icon">+</span>'.concat(r.zoomIn||""),c.addEventListener("click",function(){cs(this,t),Os(!0)}.bind(this)),u.appendChild(c);var f=document.createElement("div");f.className="avatar-editor__zoom-btn",f.innerHTML='<span class="avatar-editor__zoom-icon">-</span>'.concat(r.zoomOut||""),f.addEventListener("click",function(){cs(this,t),Os()}.bind(this)),u.appendChild(f),i.appendChild(u)}function As(){ds=0,ys=0,ss=null,js()}function xs(n){return xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xs(n)}var Cs=undefined;function Rs(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Is(n,t){return Is=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Is(n,t)}function Ms(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Ds(n);if(t){var e=Ds(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Us(this,i)}}function Us(n,t){if(t&&("object"===xs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ps(n)}function Ps(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ds(n){return Ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ds(n)}function Bs(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Ns(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ns(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ns(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function $s(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Ls=function(n){return $s(this,Cs),{}}.bind(undefined),zs=function(n){return $s(this,Cs),{}}.bind(undefined),Ws=function(n){return $s(this,Cs),{}}.bind(undefined),qs=function(n){return $s(this,Cs),{}}.bind(undefined),Fs=function(n){return $s(this,Cs),{}}.bind(undefined),Gs=function(n){return $s(this,Cs),{}}.bind(undefined),Hs=function(n){return $s(this,Cs),{}}.bind(undefined),Vs=function(n){return $s(this,Cs),{}}.bind(undefined),Qs=function(n){return $s(this,Cs),{}}.bind(undefined),Ys=function(n){return $s(this,Cs),{}}.bind(undefined);function Js(n,t,i){var r=n.slice();return r[27]=t[i][0],r[28]=t[i][1],r}function Ks(n){var t,i,r,e=n[0].errorCommon+"";return{c:function(){t=vt("div"),i=vt("div"),r=yt(e),_t(i,"class","alert alert_danger"),_t(t,"class","chat-form__error")},m:function(n,e){st(n,t,e),ot(t,i),ot(i,r)},p:function(n,t){1&t&&e!==(e=n[0].errorCommon+"")&&St(r,e)},d:function(n){n&&lt(t)}}}function Xs(n){var t,i,e,o,u,c,f,a=r("upload")+"";return{c:function(){t=vt("div"),i=vt("i"),e=pt(),o=vt("div"),u=yt(a),c=vt("br"),f=yt("\n                JPG GIF PNG"),_t(i,"class","icons-chat icons-chat_upload"),_t(t,"class","chat-form__avatar-empty")},m:function(n,r){st(n,t,r),ot(t,i),ot(t,e),ot(t,o),ot(o,u),ot(o,c),ot(o,f)},p:Rn,d:function(n){n&&lt(t)}}}function Zs(n){var t,i;return{c:function(){$n((t=vt("img")).src,i=n[0].avatar)||_t(t,"src",i),_t(t,"alt","")},m:function(n,i){st(n,t,i)},p:function(n,r){1&r&&!$n(t.src,i=n[0].avatar)&&_t(t,"src",i)},d:function(n){n&&lt(t)}}}function nl(n){var t,i,e,o;return{c:function(){t=vt("button"),_t(i=vt("i"),"class","icons-chat icons-chat_close-active"),_t(t,"class","chat-form__delete-avatar"),_t(t,"title",r("delete"))},m:function(r,u){st(r,t,u),ot(t,i),e||(o=mt(t,"click",wt(n[10])),e=!0)},p:Rn,d:function(n){n&&lt(t),e=!1,o()}}}function tl(n){var t,i,r=n[0].avatarError+"";return{c:function(){t=vt("div"),i=yt(r),_t(t,"class","chat-form__avatar-error")},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,t){1&t&&r!==(r=n[0].avatarError+"")&&St(i,r)},d:function(n){n&&lt(t)}}}function il(n){var t,i,e,o,u,c,f=r("privateChannel")+"",a=r("publicChannel")+"";return{c:function(){t=vt("option"),i=yt(f),o=vt("option"),u=yt(a),t.__value="0",t.value=t.__value,t.selected=e=0===n[0].isPublic,o.__value="1",o.value=o.__value,o.selected=c=1===n[0].isPublic},m:function(n,r){st(n,t,r),ot(t,i),st(n,o,r),ot(o,u)},p:function(n,i){1&i&&e!==(e=0===n[0].isPublic)&&(t.selected=e),1&i&&c!==(c=1===n[0].isPublic)&&(o.selected=c)},d:function(n){n&&lt(t),n&&lt(o)}}}function rl(n){var t,i,e,o,u,c,f=r("privateChat")+"",a=r("publicChat")+"";return{c:function(){t=vt("option"),i=yt(f),o=vt("option"),u=yt(a),t.__value="0",t.value=t.__value,t.selected=e=0===n[0].isPublic,o.__value="1",o.value=o.__value,o.selected=c=1===n[0].isPublic},m:function(n,r){st(n,t,r),ot(t,i),st(n,o,r),ot(o,u)},p:function(n,i){1&i&&e!==(e=0===n[0].isPublic)&&(t.selected=e),1&i&&c!==(c=1===n[0].isPublic)&&(o.selected=c)},d:function(n){n&&lt(t),n&&lt(o)}}}function el(n){var t;function i(n,t){return n[3]?ul:ol}var r=i(n),e=r(n);return{c:function(){t=vt("div"),e.c(),_t(t,"class","chat-form__option")},m:function(n,i){st(n,t,i),e.m(t,null)},p:function(n,o){r===(r=i(n))&&e?e.p(n,o):(e.d(1),(e=r(n))&&(e.c(),e.m(t,null)))},d:function(n){n&&lt(t),e.d()}}}function ol(n){var t,i,e;return{c:function(){(t=vt("div")).textContent="".concat(r("privateChannel")),i=pt(),(e=vt("span")).textContent="".concat(r("privateChannelDesc")),_t(t,"class","chat-form__option-name"),_t(e,"class","chat-form__desc-label")},m:function(n,r){st(n,t,r),st(n,i,r),st(n,e,r)},p:Rn,d:function(n){n&&lt(t),n&&lt(i),n&&lt(e)}}}function ul(n){var t,i,e;return{c:function(){(t=vt("div")).textContent="".concat(r("privateChat")),i=pt(),(e=vt("span")).textContent="".concat(r("privateChatDesc")),_t(t,"class","chat-form__option-name"),_t(e,"class","chat-form__desc-label")},m:function(n,r){st(n,t,r),st(n,i,r),st(n,e,r)},p:Rn,d:function(n){n&&lt(t),n&&lt(i),n&&lt(e)}}}function cl(n){var t;function i(n,t){return n[3]?al:fl}var r=i(n),e=r(n);return{c:function(){t=vt("div"),e.c(),_t(t,"class","chat-form__option")},m:function(n,i){st(n,t,i),e.m(t,null)},p:function(n,o){r===(r=i(n))&&e?e.p(n,o):(e.d(1),(e=r(n))&&(e.c(),e.m(t,null)))},d:function(n){n&&lt(t),e.d()}}}function fl(n){var t,i,e;return{c:function(){(t=vt("div")).textContent="".concat(r("publicChannel")),i=pt(),(e=vt("span")).textContent="".concat(r("publicChannelDesc")),_t(t,"class","chat-form__option-name"),_t(e,"class","chat-form__desc-label")},m:function(n,r){st(n,t,r),st(n,i,r),st(n,e,r)},p:Rn,d:function(n){n&&lt(t),n&&lt(i),n&&lt(e)}}}function al(n){var t,i,e;return{c:function(){(t=vt("div")).textContent="".concat(r("publicChat")),i=pt(),(e=vt("span")).textContent="".concat(r("publicChatDesc")),_t(t,"class","chat-form__option-name"),_t(e,"class","chat-form__desc-label")},m:function(n,r){st(n,t,r),st(n,i,r),st(n,e,r)},p:Rn,d:function(n){n&&lt(t),n&&lt(i),n&&lt(e)}}}function sl(n){var t,i,e,o,u,c,f,a,s,l,h,v=n[0].errorInviteLink&&ll(n);return{c:function(){t=vt("div"),(i=vt("div")).textContent="".concat(r("urlChannel"),":"),e=pt(),o=vt("div"),(u=vt("span")).textContent="".concat(n[5]),c=pt(),f=vt("input"),s=pt(),v&&v.c(),_t(i,"class","chat-form__label"),_t(u,"class","chat-form__invite-link-label"),_t(f,"class",a="input-no-border"+(n[0].errorInviteLink?" input-no-border_error":"")),_t(f,"type","text"),f.disabled=n[1],_t(f,"name","invite_link"),_t(f,"placeholder","link"),_t(o,"class","chat-form__invite-link"+(YE?" chat-form__invite-link_mobile":"")),_t(t,"class","chat-form__item chat-form__item_input")},m:function(r,a){st(r,t,a),ot(t,i),ot(t,e),ot(t,o),ot(o,u),ot(o,c),ot(o,f),jt(f,n[0].inviteLink),ot(t,s),v&&v.m(t,null),l||(h=[mt(f,"input",n[20]),mt(f,"input",n[21])],l=!0)},p:function(n,i){1&i&&a!==(a="input-no-border"+(n[0].errorInviteLink?" input-no-border_error":""))&&_t(f,"class",a),2&i&&(f.disabled=n[1]),1&i&&f.value!==n[0].inviteLink&&jt(f,n[0].inviteLink),n[0].errorInviteLink?v?v.p(n,i):((v=ll(n)).c(),v.m(t,null)):v&&(v.d(1),v=null)},d:function(n){n&&lt(t),v&&v.d(),l=!1,Dn(h)}}}function ll(n){var t,i,r=n[0].errorInviteLink+"";return{c:function(){t=vt("span"),i=yt(r),_t(t,"class","field-validation-error")},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,t){1&t&&r!==(r=n[0].errorInviteLink+"")&&St(i,r)},d:function(n){n&&lt(t)}}}function hl(n){var t,i="number"==typeof n[28]&&function(n){var t,i,e=r("none"!==n[27]?n[27]:"other")+"";return{c:function(){t=vt("option"),i=yt(e),t.__value=n[28],t.value=t.__value},m:function(n,r){st(n,t,r),ot(t,i)},p:Rn,d:function(n){n&&lt(t)}}}(n);return{c:function(){i&&i.c(),t=bt()},m:function(n,r){i&&i.m(n,r),st(n,t,r)},p:function(n,t){"number"==typeof n[28]&&i.p(n,t)},d:function(n){i&&i.d(n),n&&lt(t)}}}function vl(n){var t,i,r,e,o,u,c=n[13]["users-title"],f=Fn(c,n,n[12],Ys),a=n[13].users,s=Fn(a,n,n[12],Vs),l=n[3]&&dl(n);return{c:function(){t=vt("div"),i=vt("div"),f&&f.c(),r=pt(),e=vt("div"),s&&s.c(),o=pt(),l&&l.c(),_t(i,"class","chat-form__label"),_t(e,"class","chat-form__users"),_t(t,"class","chat-form__item")},m:function(n,c){st(n,t,c),ot(t,i),f&&f.m(i,null),ot(t,r),ot(t,e),s&&s.m(e,null),ot(e,o),l&&l.m(e,null),u=!0},p:function(n,t){f&&f.p&&(!u||4096&t)&&Vn(f,c,n,n[12],u?Hn(c,n[12],t,Qs):Qn(n[12]),Ys),s&&s.p&&(!u||4096&t)&&Vn(s,a,n,n[12],u?Hn(a,n[12],t,Hs):Qn(n[12]),Vs),n[3]?l?l.p(n,t):((l=dl(n)).c(),l.m(e,null)):l&&(l.d(1),l=null)},i:function(n){u||(fi(f,n),fi(s,n),u=!0)},o:function(n){ai(f,n),ai(s,n),u=!1},d:function(n){n&&lt(t),f&&f.d(n),s&&s.d(n),l&&l.d()}}}function dl(n){var t,i,e,o,u,c,f,a=r("isLimitedShort")+"";return{c:function(){t=vt("div"),i=vt("input"),o=vt("label"),u=yt(a),_t(i,"type","checkbox"),_t(i,"name","isLimited"),_t(i,"class","checkbox"),_t(i,"id","chatIsLimited"),i.checked=e=!n[0].isLimited,_t(o,"for","chatIsLimited"),_t(o,"title",r("isLimited")),_t(t,"class","chat-form__is-limited")},m:function(r,e){st(r,t,e),ot(t,i),ot(t,o),ot(o,u),c||(f=mt(i,"change",n[23]),c=!0)},p:function(n,t){1&t&&e!==(e=!n[0].isLimited)&&(i.checked=e)},d:function(n){n&&lt(t),c=!1,f()}}}function yl(n){var t,i,e,o,u,c,f,a,s,l,h,v,d,y,p,b,m,w,_,g,S,j,O,E,T,k,A,x,C,I,M,U,P,D,B,N,$,L,z,W,q,F,G,H,V,Q,Y,J,K,X,Z,nn,tn,rn,en,on,un=r(n[3]?"chatLanguage":"channelLanguage")+"",cn=r(R[parseInt(n[0].language,10)])+"",fn=n[0].errorCommon&&Ks(n);function an(n,t){return n[0].avatar?Zs:Xs}var sn=an(n),ln=sn(n),hn=n[0].avatar&&nl(n),vn=n[0].avatarError&&tl(n);function dn(n,t){return n[3]?rl:il}for(var yn=dn(n),pn=yn(n),bn=0===n[0].isPublic&&el(n),mn=1===n[0].isPublic&&cl(n),wn=!n[3]&&1===n[0].isPublic&&sl(n),_n=Object.entries(R),gn=[],Sn=0;Sn<_n.length;Sn+=1)gn[Sn]=hl(Js(n,_n,Sn));var jn=(n[3]||n[2])&&vl(n),On=n[13].content,En=Fn(On,n,n[12],Gs),Tn=n[13]["button-name"],kn=Fn(Tn,n,n[12],qs),An=kn||function(n){var t,i=r(n[3]?"createGroup":"createChannel")+"";return{c:function(){t=yt(i)},m:function(n,i){st(n,t,i)},p:function(n,e){8&e&&i!==(i=r(n[3]?"createGroup":"createChannel")+"")&&St(t,i)},d:function(n){n&&lt(t)}}}(n),xn=n[13].buttons,Cn=Fn(xn,n,n[12],zs);return{c:function(){var R=this;t=vt("div"),i=vt("div"),fn&&fn.c(),e=pt(),o=vt("div"),u=vt("div"),c=vt("div"),f=vt("input"),a=pt(),ln.c(),s=pt(),hn&&hn.c(),l=pt(),h=vt("div"),v=vt("input"),y=pt(),p=vt("input"),m=pt(),vn&&vn.c(),_=pt(),g=vt("div"),S=vt("i"),j=pt(),O=vt("select"),pn.c(),E=pt(),bn&&bn.c(),T=pt(),mn&&mn.c(),A=pt(),x=vt("div"),(C=vt("div")).textContent="".concat(r("links"),":"),I=pt(),M=vt("input"),U=pt(),wn&&wn.c(),P=pt(),D=vt("div"),B=vt("i"),N=pt(),$=vt("select");for(var rn=0;rn<gn.length;rn+=1)gn[rn].c();L=pt(),z=vt("div"),W=vt("div"),q=yt(un),F=pt(),G=vt("span"),H=yt(cn),Q=pt(),jn&&jn.c(),Y=pt(),En&&En.c(),J=pt(),K=vt("div"),X=vt("button"),An&&An.c(),Z=pt(),(nn=vt("button")).textContent="".concat(r("cancel")),tn=pt(),Cn&&Cn.c(),f.disabled=n[1],_t(f,"type","file"),_t(f,"title",r("fileDesc")),_t(f,"accept",pl),_t(f,"name","avatar"),_t(c,"class","chat-form__avatar box-file"),v.disabled=n[1],_t(v,"type","text"),_t(v,"class",d="input-no-border chat-form__name"+(n[0].errorName?" input-no-border_error":"")),_t(v,"placeholder",r("nameNSymbols",60)),_t(v,"maxlength","60"),p.disabled=n[1],_t(p,"type","text"),_t(p,"class",b="input-no-border"+(n[0].errorDescription?" input-no-border_error":"")),_t(p,"placeholder",r("descNSymbols",90)),_t(p,"maxlength","90"),_t(h,"class","chat-form__avatar-form"),_t(u,"class",w="chat-form__avatar-block"+(n[0].avatarError?" chat-form__avatar-block_error":"")),_t(o,"class","chat-form__item"),_t(S,"class","icons-ux icons-ux_arrow-down-gray"),_t(O,"name","ispublic"),O.disabled=n[1],_t(g,"class",k="chat-form__options"+(n[1]?" chat-form__options_disabled":"")),_t(C,"class","chat-form__label"),_t(M,"autocomplete","off"),_t(M,"class","input-no-border"),_t(M,"placeholder",r("linksPlaceholder")),_t(M,"type","text"),M.disabled=n[1],_t(x,"class","chat-form__item chat-form__item_input"),_t(B,"class","icons-ux icons-ux_arrow-down-gray"),_t($,"name","language"),$.disabled=n[1],void 0===n[0].language&&Yt(function(){return $s(this,R),n[22].call($)}.bind(this)),_t(W,"class","chat-form__option-name"),_t(G,"class","chat-form__desc-label"),_t(z,"class","chat-form__option"),_t(D,"class",V="chat-form__options"+(n[1]?" chat-form__options_disabled":"")),_t(X,"class","button button_green"),X.disabled=n[1],_t(nn,"class","button button_white"),_t(K,"class","chat-form__buttons"),_t(i,"class","chat-form__content"),_t(t,"class","chat-form")},m:function(r,d){st(r,t,d),ot(t,i),fn&&fn.m(i,null),ot(i,e),ot(i,o),ot(o,u),ot(u,c),ot(c,f),n[14](f),ot(c,a),ln.m(c,null),ot(c,s),hn&&hn.m(c,null),ot(u,l),ot(u,h),ot(h,v),jt(v,n[0].name),ot(h,y),ot(h,p),jt(p,n[0].description),ot(h,m),vn&&vn.m(h,null),ot(i,_),ot(i,g),ot(g,S),ot(g,j),ot(g,O),pn.m(O,null),ot(g,E),bn&&bn.m(g,null),ot(g,T),mn&&mn.m(g,null),ot(i,A),ot(i,x),ot(x,C),ot(x,I),ot(x,M),jt(M,n[0].links),ot(i,U),wn&&wn.m(i,null),ot(i,P),ot(i,D),ot(D,B),ot(D,N),ot(D,$);for(var b=0;b<gn.length;b+=1)gn[b].m($,null);Et($,n[0].language),ot(D,L),ot(D,z),ot(z,W),ot(W,q),ot(z,F),ot(z,G),ot(G,H),ot(i,Q),jn&&jn.m(i,null),ot(i,Y),En&&En.m(i,null),ot(i,J),ot(i,K),ot(K,X),An&&An.m(X,null),ot(K,Z),ot(K,nn),ot(K,tn),Cn&&Cn.m(K,null),rn=!0,en||(on=[mt(f,"input",n[9]),mt(v,"input",n[15]),mt(v,"input",n[16]),mt(p,"input",n[17]),mt(p,"input",n[18]),mt(O,"change",n[7]),mt(M,"input",n[19]),mt($,"change",n[22]),mt(X,"click",wt(n[8])),mt(nn,"click",wt(n[6]))],en=!0)},p:function(n,t){var o=this,a=Bs(t,1)[0];if(n[0].errorCommon?fn?fn.p(n,a):((fn=Ks(n)).c(),fn.m(i,e)):fn&&(fn.d(1),fn=null),(!rn||2&a)&&(f.disabled=n[1]),sn===(sn=an(n))&&ln?ln.p(n,a):(ln.d(1),(ln=sn(n))&&(ln.c(),ln.m(c,s))),n[0].avatar?hn?hn.p(n,a):((hn=nl(n)).c(),hn.m(c,null)):hn&&(hn.d(1),hn=null),(!rn||2&a)&&(v.disabled=n[1]),(!rn||1&a&&d!==(d="input-no-border chat-form__name"+(n[0].errorName?" input-no-border_error":"")))&&_t(v,"class",d),1&a&&v.value!==n[0].name&&jt(v,n[0].name),(!rn||2&a)&&(p.disabled=n[1]),(!rn||1&a&&b!==(b="input-no-border"+(n[0].errorDescription?" input-no-border_error":"")))&&_t(p,"class",b),1&a&&p.value!==n[0].description&&jt(p,n[0].description),n[0].avatarError?vn?vn.p(n,a):((vn=tl(n)).c(),vn.m(h,null)):vn&&(vn.d(1),vn=null),(!rn||1&a&&w!==(w="chat-form__avatar-block"+(n[0].avatarError?" chat-form__avatar-block_error":"")))&&_t(u,"class",w),yn===(yn=dn(n))&&pn?pn.p(n,a):(pn.d(1),(pn=yn(n))&&(pn.c(),pn.m(O,null))),(!rn||2&a)&&(O.disabled=n[1]),0===n[0].isPublic?bn?bn.p(n,a):((bn=el(n)).c(),bn.m(g,T)):bn&&(bn.d(1),bn=null),1===n[0].isPublic?mn?mn.p(n,a):((mn=cl(n)).c(),mn.m(g,null)):mn&&(mn.d(1),mn=null),(!rn||2&a&&k!==(k="chat-form__options"+(n[1]?" chat-form__options_disabled":"")))&&_t(g,"class",k),(!rn||2&a)&&(M.disabled=n[1]),1&a&&M.value!==n[0].links&&jt(M,n[0].links),n[3]||1!==n[0].isPublic?wn&&(wn.d(1),wn=null):wn?wn.p(n,a):((wn=sl(n)).c(),wn.m(i,P)),0&a){var l;for(_n=Object.entries(R),l=0;l<_n.length;l+=1){var y=Js(n,_n,l);gn[l]?gn[l].p(y,a):(gn[l]=hl(y),gn[l].c(),gn[l].m($,null))}for(;l<gn.length;l+=1)gn[l].d(1);gn.length=_n.length}(!rn||2&a)&&($.disabled=n[1]),1&a&&Et($,n[0].language),(!rn||8&a)&&un!==(un=r(n[3]?"chatLanguage":"channelLanguage")+"")&&St(q,un),(!rn||1&a)&&cn!==(cn=r(R[parseInt(n[0].language,10)])+"")&&St(H,cn),(!rn||2&a&&V!==(V="chat-form__options"+(n[1]?" chat-form__options_disabled":"")))&&_t(D,"class",V),n[3]||n[2]?jn?(jn.p(n,a),12&a&&fi(jn,1)):((jn=vl(n)).c(),fi(jn,1),jn.m(i,Y)):jn&&(ui(),ai(jn,1,1,function(){$s(this,o),jn=null}.bind(this)),ci()),En&&En.p&&(!rn||4096&a)&&Vn(En,On,n,n[12],rn?Hn(On,n[12],a,Fs):Qn(n[12]),Gs),kn?kn.p&&(!rn||4096&a)&&Vn(kn,Tn,n,n[12],rn?Hn(Tn,n[12],a,Ws):Qn(n[12]),qs):An&&An.p&&(!rn||8&a)&&An.p(n,rn?a:-1),(!rn||2&a)&&(X.disabled=n[1]),Cn&&Cn.p&&(!rn||4096&a)&&Vn(Cn,xn,n,n[12],rn?Hn(xn,n[12],a,Ls):Qn(n[12]),zs)},i:function(n){rn||(fi(jn),fi(En,n),fi(An,n),fi(Cn,n),rn=!0)},o:function(n){ai(jn),ai(En,n),ai(An,n),ai(Cn,n),rn=!1},d:function(i){i&&lt(t),fn&&fn.d(),n[14](null),ln.d(),hn&&hn.d(),vn&&vn.d(),pn.d(),bn&&bn.d(),mn&&mn.d(),wn&&wn.d(),ht(gn,i),jn&&jn.d(),En&&En.d(i),An&&An.d(i),Cn&&Cn.d(i),en=!1,Dn(on)}}}var pl=".png, .jpg, .jpeg, .gif",bl=200;function ml(n,t,i){var e,o,u=this,c=t.$$slots,f=void 0===c?{}:c,a=t.$$scope,s=$t(),l=t.chat,h=t.disabled,v=void 0!==h&&h,d=t.withUsers,y=void 0!==d&&d,p=-1,b="".concat(YE?"":"https://www.mql5.com","/").concat(TE,"/channels/");function m(){o&&(i(4,o.type="",o),i(4,o.value="",o),i(4,o.type="file",o))}function w(n){var t=this;os({cancelText:r("close"),okText:r("save"),showCloseBtn:!1,createCallback:function(i){$s(this,t),function(n){var t=n.parentNode,i=n.file,r=n.localization,e=void 0===r?{}:r;As(),t&&i&&i.type.match(/image.*/)&&(hs=i,ks({parentNode:t,localization:e}))}({parentNode:i,file:n,localization:{zoomIn:r("zoomIn"),zoomOut:r("zoomOut")}})}.bind(this),okCallback:function(){var n=this;$s(this,t),function(n){if(!ss)return null;ss.toBlob?ss.toBlob(n):ss.msToBlob?n(ss.msToBlob()):n(hs)}(function(t){$s(this,n),i(0,l.avatarToUpload=Object.assign(t,{lastModified:(new Date).getTime(),name:"avatar",webkitRelativePath:""}),l);var r=URL.createObjectURL(t);i(0,l.avatar=r,l)}.bind(this)),As(),i(0,l.avatarError=undefined,l),m(),i(0,l.avatarIsPresent=!0,l)}.bind(this),hideCallback:function(){$s(this,t),As(),m()}.bind(this)})}var _=function(){$s(this,u),s("close")}.bind(this);var g=function(){$s(this,u);var n=!1;if((l.inviteLink.length&&l.inviteLink.length<5||!isNaN(parseInt(l.inviteLink[0],10)))&&i(0,l.errorInviteLink=r("urlChannelDesc"),l),l.name.length<3&&(i(0,l.errorName=!0,l),n=!0),l.isPublic&&l.description.length<3&&(i(0,l.errorDescription=!0,l),n=!0),l.isPublic&&!l.avatar){var t=e?"pleaseUploadAvatar":"pleaseUploadAvatarChannel";i(0,l.avatarError=r(t),l),n=!0}l.isPublic&&l.errorInviteLink&&(n=!0),n||s("submit")}.bind(this);var S=function(){$s(this,u),i(0,l.errorName=l.name.length<3,l)}.bind(this);var O=function(){$s(this,u),i(0,l.errorDescription=l.description.length<3,l)}.bind(this);var E=function(){var n=this;$s(this,u),setTimeout(function(){$s(this,n),l.errorInviteLink&&i(0,l.errorInviteLink=undefined,l)}.bind(this),0)}.bind(this);var T=function(n){var t;$s(this,u),i(0,l.isLimited=!(null!==(t=n.target)&&void 0!==t&&t.checked),l)}.bind(this);return n.$$set=function(n){$s(this,u),"chat"in n&&i(0,l=n.chat),"disabled"in n&&i(1,v=n.disabled),"withUsers"in n&&i(2,y=n.withUsers),"$$scope"in n&&i(12,a=n.$$scope)}.bind(this),n.$$.update=function(){$s(this,u),2049&n.$$.dirty&&(p===l.isPublic||l.isPublic||(l.avatarError&&i(0,l.avatarError=undefined,l),l.errorDescription&&i(0,l.errorDescription=!1,l)),i(11,p=l.isPublic)),1&n.$$.dirty&&i(3,e=l.type===j)}.bind(this),[l,v,y,e,o,b,_,function(n){var t=n.target;i(0,l.isPublic=parseInt(t.value,10)?1:0,l)},g,function(n){var t=n.target;if(t.files){var e=t.files[0];if(e){var o=new FileReader;o.onload=function(n){var t,o=new Image;o.onload=function(){var n=o.width,t=o.height;n>=bl&&t>=bl?w(e):i(0,l.avatarError=r("avatarErrorSize",bl,bl),l)},o.src=null===(t=n.target)||void 0===t?void 0:t.result},o.readAsDataURL(e)}else i(0,l.avatar=undefined,l)}},function(){i(0,l.avatar=undefined,l),i(0,l.avatarIsPresent=!1,l),i(0,l.avatarToUpload=undefined,l)},p,a,f,function(n){var t=this;Wt[n?"unshift":"push"](function(){$s(this,t),i(4,o=n)}.bind(this))},function(){l.name=this.value,i(0,l),i(11,p)},S,function(){l.description=this.value,i(0,l),i(11,p)},O,function(){l.links=this.value,i(0,l),i(11,p)},E,function(){l.inviteLink=this.value,i(0,l),i(11,p)},function(){var n,t;l.language=(t=(n=this).querySelector(":checked")||n.options[0])&&t.__value,i(0,l),i(11,p)},T]}var wl=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Is(n,t)}(o,n);var t,i,r,e=Ms(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Ps(t=e.call(this)),n,ml,yl,Nn,{chat:0,disabled:1,withUsers:2}),t}return t=o,i&&Rs(t.prototype,i),r&&Rs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),_l=wl;function gl(n){return gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},gl(n)}function Sl(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function jl(n,t){return jl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},jl(n,t)}function Ol(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=kl(n);if(t){var e=kl(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return El(this,i)}}function El(n,t){if(t&&("object"===gl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tl(n)}function Tl(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function kl(n){return kl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kl(n)}function Al(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function xl(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Cl(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Cl(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cl(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Rl(n){var t,i,e=r("membersCount",n[1].countMembers)+"";return{c:function(){t=vt("div"),i=yt(e),_t(t,"slot","users-title")},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,t){2&t&&e!==(e=r("membersCount",n[1].countMembers)+"")&&St(i,e)},d:function(n){n&&lt(t)}}}function Il(n){var t,i,e,o,u;return{c:function(){t=vt("div"),i=vt("div"),(e=vt("a")).textContent="".concat(r("editMembers")),_t(e,"href","/#"),_t(e,"class","chat-form__users-button qa-edit-members"),_t(t,"slot","users"),_t(t,"class","chat-form__users-block")},m:function(r,c){st(r,t,c),ot(t,i),ot(i,e),o||(u=mt(e,"click",wt(n[11])),o=!0)},p:Rn,d:function(n){n&&lt(t),o=!1,u()}}}function Ml(n){var t,i,e,o,u,c,f,a,s,l,h,v=(n[1].isClosed?r(n[1].type===O?"openChannel":"openGroup"):r(n[1].type===O?"closeChannel":"closeGroup"))+"",d=n[6]&&function(n){var t,i,e,o,u,c=n[2].userName+"";return{c:function(){t=vt("div"),(i=vt("div")).textContent="".concat(r("owner")),e=pt(),o=vt("a"),u=yt(c),_t(i,"class","chat-info__label"),_t(o,"href",n[3]),_t(o,"target","_blank"),_t(t,"class","chat-form__item")},m:function(n,r){st(n,t,r),ot(t,i),ot(t,e),ot(t,o),ot(o,u)},p:function(n,t){4&t&&c!==(c=n[2].userName+"")&&St(u,c),8&t&&_t(o,"href",n[3])},d:function(n){n&&lt(t)}}}(n),y=n[6]&&function(n){var t,i,e;return{c:function(){(t=vt("button")).textContent="".concat(r("deleteUpper")),_t(t,"class","button button_red")},m:function(r,o){st(r,t,o),i||(e=mt(t,"click",n[10]),i=!0)},p:Rn,d:function(n){n&&lt(t),i=!1,e()}}}(n);return{c:function(){t=vt("div"),d&&d.c(),i=pt(),e=vt("div"),(o=vt("div")).textContent="".concat(r("management")),u=pt(),c=vt("div"),f=vt("button"),a=yt(v),s=pt(),y&&y.c(),_t(o,"class","chat-form__label"),_t(f,"class","button button_white"),_t(c,"class","chat-form__buttons chat-form__buttons_without-margin"),_t(e,"class","chat-form__item"),_t(t,"slot","content")},m:function(r,v){st(r,t,v),d&&d.m(t,null),ot(t,i),ot(t,e),ot(e,o),ot(e,u),ot(e,c),ot(c,f),ot(f,a),ot(c,s),y&&y.m(c,null),l||(h=mt(f,"click",n[9]),l=!0)},p:function(n,t){n[6]&&d.p(n,t),2&t&&v!==(v=(n[1].isClosed?r(n[1].type===O?"openChannel":"openGroup"):r(n[1].type===O?"closeChannel":"closeGroup"))+"")&&St(a,v),n[6]&&y.p(n,t)},d:function(n){n&&lt(t),d&&d.d(),y&&y.d(),l=!1,h()}}}function Ul(n){var t;return{c:function(){(t=vt("span")).textContent="".concat(r("save")),_t(t,"slot","button-name")},m:function(n,i){st(n,t,i)},p:Rn,d:function(n){n&&lt(t)}}}function Pl(n){var t,i,r;return(i=new _l({props:{chat:n[1],withUsers:!0,disabled:n[1].isClosed,$$slots:{"button-name":[Ul],content:[Ml],users:[Il],"users-title":[Rl]},$$scope:{ctx:n}}})).$on("close",n[8]),i.$on("submit",n[7]),{c:function(){t=vt("div"),yi(i.$$.fragment),_t(t,"slot","content")},m:function(n,e){st(n,t,e),pi(i,t,null),r=!0},p:function(n,t){var r={};2&t&&(r.chat=n[1]),2&t&&(r.disabled=n[1].isClosed),8238&t&&(r.$$scope={dirty:t,ctx:n}),i.$set(r)},i:function(n){r||(fi(i.$$.fragment,n),r=!0)},o:function(n){ai(i.$$.fragment,n),r=!1},d:function(n){n&&lt(t),bi(i)}}}function Dl(n){var t,i;return(t=new $o({props:{withTitle:!1,withButtons:!1,$$slots:{content:[Pl]},$$scope:{ctx:n}}})).$on("close",n[8]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r=xl(i,1)[0],e={};8238&r&&(e.$$scope={dirty:r,ctx:n}),t.$set(e)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function Bl(n,i,e){var o,u,a,s=this,l=Rn,h=function(){var n=this;return Al(this,s),l(),l=zn(p,function(t){return Al(this,n),e(1,o=t)}.bind(this)),p}.bind(this),v=Rn,d=function(){var n=this;return Al(this,s),v(),v=zn(b,function(t){return Al(this,n),e(2,u=t)}.bind(this)),b}.bind(this);qn(n,qi,function(n){return Al(this,s),e(5,a=n)}.bind(this)),n.$$.on_destroy.push(function(){return Al(this,s),l()}.bind(this)),n.$$.on_destroy.push(function(){return Al(this,s),v()}.bind(this));var p=i.chat;h();var b,m=$t(),w=yr,_="";function g(){vo(),m("close")}var S=function(){Al(this,s),Yn(qi,a["delete"]=!0,a)}.bind(this),j=function(){Al(this,s),Yn(qi,a.listMembers=!0,a)}.bind(this);return n.$$set=function(n){Al(this,s),"chat"in n&&h(e(0,p=n.chat))}.bind(this),n.$$.update=function(){Al(this,s),6&n.$$.dirty&&w&&!u&&d(e(4,b=uu(o.authorId))),4&n.$$.dirty&&u&&e(3,_="/".concat(TE,"/users/").concat(u.userLogin))}.bind(this),[p,o,u,_,b,a,w,function(){var n=this;Yn(p,o.errorCommon="",o),mO(o).then(function(){var i=this;Al(this,n),o.avatarIsPresent&&o.avatarToUpload?yO(o.avatarToUpload,o.chatId).then(function(){Al(this,i),g()}.bind(this))["catch"](function(n){var r=n.error;Al(this,i),Yn(p,o.avatarError=r,o),y.error(t.User,r,"Upload avatar")}.bind(this)):o.avatarIsPresent?g():function(n){var t=this;return new Promise(function(i,r){var e=this;if(pO(this,t),n)if(0!==parseInt(n,16)){var o=[cn(n),{Uint8:0}];Uj.send(c.X,o).then(function(){pO(this,e),i()}.bind(this))["catch"](function(n){pO(this,e),r(n)}.bind(this))}else r("Chat id is zero");else r("Chat id is empty")}.bind(this))}(o.chatId).then(function(){Al(this,i),g()}.bind(this))["catch"](function(n){var r=n.error;Al(this,i),Yn(p,o.errorCommon=r,o),y.error(t.User,r,"Delete avatar")}.bind(this))}.bind(this))["catch"](function(i){var e=i.error;Al(this,n),y.error(t.User,e,"Edit chat"),e===f.In?Yn(p,o.errorInviteLink=r("inviteLinkExists"),o):Yn(p,o.errorCommon=e,o)}.bind(this))},g,function(){var n=this;Yn(p,o.isClosed=!o.isClosed,o),mO(o).then(function(){Al(this,n)}.bind(this))["catch"](function(i){var r=i.error;Al(this,n),y.error(t.User,r,"Close chat")}.bind(this))},S,j]}var Nl=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&jl(n,t)}(o,n);var t,i,r,e=Ol(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Tl(t=e.call(this)),n,Bl,Dl,Nn,{chat:0}),t}return t=o,i&&Sl(t.prototype,i),r&&Sl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),$l=Nl,Ll=undefined;function zl(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Wl=Ei(undefined),ql=Ei([]),Fl=Ei(""),Gl={};function Hl(n){Gl[n]||(Gl[n]={text:"",files:[],reply:undefined})}function Vl(n){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];if(!n)return null;var i=n.split(".").pop().toLowerCase();return t?i.toLowerCase():i}function Ql(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Yl(n){return function(n){if(Array.isArray(n))return Jl(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"==typeof n)return Jl(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Jl(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jl(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Kl(n){return Kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Kl(n)}function Xl(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Zl(n){var t=this,i=n.tag,r=void 0===i?"div":i,e=n.attributes,o=void 0===e?{}:e,u=n.classList,c=void 0===u?[]:u,f=n.listeners,a=void 0===f?{}:f,s=n.properties,l=void 0===s?{}:s,h=n.children,v=void 0===h?null:h,d=n.fzEvent,y=void 0===d?null:d,p=n.fzEventAction,b=void 0===p?"click":p,m=r instanceof Node?r:document.createElement(r);if(c&&c.forEach(function(n){Xl(this,t),n&&m.classList.add(n)}.bind(this)),Object.keys(o).forEach(function(n){Xl(this,t),m.setAttribute(n,o[n])}.bind(this)),Object.keys(l).forEach(function(n){Xl(this,t),m[n]=l[n]}.bind(this)),Object.keys(a).forEach(function(n){Xl(this,t),m.addEventListener(n,a[n])}.bind(this)),y&&m.addEventListener(b,function(){Xl(this,t),"object"===Kl(y)?window.fz("event",y):window.fz("track",y)}.bind(this)),!v)return m;if("string"==typeof v)m.innerHTML=v;else if(v instanceof Node)m.appendChild(v);else for(var w=0,_=v.length;w<_;w++){var g=v[w];g&&(g instanceof Node||(g=Zl(g)),m.appendChild(g))}return m}function nh(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function th(n){return function(n){if(Array.isArray(n))return ih(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"==typeof n)return ih(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ih(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ih(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function rh(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function eh(n,t,i){var e=this;return new Promise(function(o,u){if(rh(this,e),n&&n.length){var a=[],s=[];!function e(){var u=this;if(n&&n.length&&t){Array.isArray(n)||(n=Array.prototype.slice.call(n));var l=n[0];if(l){n.shift();var h=Vl(l.name);h&&~p.indexOf(h)?function(n,t){var i=this;return new Promise(function(r,e){var o=this;if(oO(this,i),0!==parseInt(n,16))if(n)if(t){var u=cn(n);eO(t).then(function(n){var t=this;oO(this,o);var i=n.cipherKey,a=n.hash,s=n.fileSize,l=n.mime,h=n.fileName,v=n.file,d=[u,{Uint8:_.zn},i,a,{Uint32:s},{String16:l},{String16:h}];Uj.send(c.T,d).then(function(n){var i=this,o=n.result,u=n.reader;oO(this,t);var c=ye(u,o),a=c.messageId;o!==f.Bn||0!==parseInt(a,16)?r(c):Zj(v).then(function(n){var t=n.reader,e=n.result;oO(this,i);var o=ye(t,e);r(o)}.bind(this))["catch"](function(n){oO(this,i),e(n)}.bind(this))}.bind(this))["catch"](function(n){oO(this,t),e(n)}.bind(this))}.bind(this))["catch"](function(n){oO(this,o),e(n)}.bind(this))}else e("File is empty");else e("Chat id is empty");else e("Chat id is zero")}.bind(this))}(t,l).then(function(n){rh(this,u),i&&i(n.messageId),a.push(n.messageId),e()}.bind(this))["catch"](function(n){var t=n.error;rh(this,u),s.push(t),e()}.bind(this)):(s.push("".concat(r("invalidType"),": ").concat(l.name)),e())}else o({uploaded:a,errors:s})}else o({uploaded:a,errors:s})}()}else u("File list is empty")}.bind(this))}function oh(n){var t="other";switch(n){case"txt":case"log":t="txt";break;case"mq4":case"mq5":case"set":case"tpl":case"mqh":case"ex4":case"ex5":t="mql";break;case"gif":case"jpg":case"png":case"jpeg":case"webp":t="media";break;case"zip":case"7z":case"rar":t="archive";break;default:t="other"}return t}function uh(n){return uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},uh(n)}function ch(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function fh(n,t){return fh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},fh(n,t)}function ah(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=hh(n);if(t){var e=hh(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return sh(this,i)}}function sh(n,t){if(t&&("object"===uh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lh(n)}function lh(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function hh(n){return hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hh(n)}function vh(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return dh(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return dh(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dh(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function yh(n){var t,i,r,e,o,u,c,f,a=n[0].fileName+"";return{c:function(){t=vt("div"),i=vt("a"),r=vt("i"),e=pt(),o=vt("span"),u=yt(a),_t(r,"class","icons-chat icons-chat_"+n[1]),_t(o,"class","chat-attach__name"),_t(i,"href",c=n[0].url),_t(i,"target","_blank"),_t(i,"title",f=n[0].fileName+" ("+n[0].fileSizeString+")"),_t(t,"class","chat-attach")},m:function(n,c){st(n,t,c),ot(t,i),ot(i,r),ot(i,e),ot(i,o),ot(o,u)},p:function(n,t){var r=vh(t,1)[0];1&r&&a!==(a=n[0].fileName+"")&&St(u,a),1&r&&c!==(c=n[0].url)&&_t(i,"href",c),1&r&&f!==(f=n[0].fileName+" ("+n[0].fileSizeString+")")&&_t(i,"title",f)},i:Rn,o:Rn,d:function(n){n&&lt(t)}}}function ph(n,t,i){var r=this,e=t.data,o=oh(Vl(e.fileName,!0)||"");return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,r),"data"in n&&i(0,e=n.data)}.bind(this),[e,o]}Wl.subscribe(function(n){zl(this,Ll);var t=Wn(iT);t&&(Hl(t.chatId),Gl[t.chatId].reply=n)}.bind(undefined)),ql.subscribe(function(n){zl(this,Ll);var t=Wn(iT);t&&(Hl(t.chatId),Gl[t.chatId].files=n)}.bind(undefined)),Fl.subscribe(function(n){zl(this,Ll);var t=Wn(iT);t&&(Hl(t.chatId),Gl[t.chatId].text=n)}.bind(undefined));var bh,mh,wh,_h=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&fh(n,t)}(o,n);var t,i,r,e=ah(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(lh(t=e.call(this)),n,ph,yh,Nn,{data:0}),t}return t=o,i&&ch(t.prototype,i),r&&ch(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),gh=_h,Sh=null,jh=document.createElement("span"),Oh={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var Eh in Oh)Object.prototype.hasOwnProperty.call(Oh,Eh)&&jh.style[Eh]!==undefined&&(Sh=Oh[Eh]);var Th,kh,Ah,xh,Ch,Rh,Ih,Mh,Uh,Ph,Dh,Bh,Nh,$h,Lh,zh,Wh,qh,Fh,Gh,Hh=!1,Vh={},Qh=null,Yh={},Jh=0,Kh=null,Xh=null,Zh=null,nv=null,tv=null,iv=null,rv=null,ev=null,ov=!1,uv=Sh;function cv(){Vh.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,Vh.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function fv(){cv(),bh=document.createElement("div"),document.body.appendChild(bh),bh.className="light-box",Uu&&bh.classList.add("light-box_mobile");var n=document.createElement("div");n.className="light-box__shadow",bh.appendChild(n),n.addEventListener("click",mv),n.addEventListener("touchstart",mv),(mh=document.createElement("div")).className="light-box__content",bh.appendChild(mh),(rv=document.createElement("div")).className="light-box__attachment-area",mh.appendChild(rv),(wh=document.createElement("div")).className="light-box__footer",mh.appendChild(wh);var t=document.createElement("div");t.className="light-box__close",t.addEventListener("click",mv),t.addEventListener("touchstart",mv),t.innerHTML='<i class="icons-lightbox icons-lightbox_close"></i>',t.setAttribute("title",Fr("lightBox.close")),wh.appendChild(t),(ev=document.createElement("div")).className="light-box__show-full",wh.appendChild(ev),ev.addEventListener("click",av),ev.addEventListener("touchstart",av),ev.innerHTML='<i class="icons-lightbox icons-lightbox_uncollapse"></i>',ev.setAttribute("title",Fr("lightBox.showOriginal")),(Xh=document.createElement("a")).className="light-box__save",Xh.setAttribute("target","_blank"),Xh.innerHTML='<i class="icons-lightbox icons-lightbox_save"></i>',Xh.setAttribute("title",Fr("lightBox.save")),wh.appendChild(Xh),iv&&((kh=document.createElement("div")).className="light-box__prev",kh.innerHTML='<i class="icons-lightbox icons-lightbox_prev"></i>',kh.addEventListener("click",bv),kh.addEventListener("touchstart",bv),kh.setAttribute("title",Fr("lightBox.previous")),mh.appendChild(kh),(Th=document.createElement("div")).className="light-box__next",Th.innerHTML='<i class="icons-lightbox icons-lightbox_next"></i>',Th.addEventListener("click",pv),Th.addEventListener("touchstart",pv),Th.setAttribute("title",Fr("lightBox.next")),mh.appendChild(Th)),Ah=window.pageYOffset||document.documentElement.scrollTop,document.body.classList.add("light-box-showed"),document.body.style.top="-"+Ah+"px",mh.style.transition="none",mh.style.width="300px",mh.style.height="300px",mh.style.marginTop="-150px",mh.style.marginLeft="-150px",mh.style.transition="all 0.3s ease-out",window.addEventListener("resize",yv),document.addEventListener("keydown",wv)}function av(n){function t(){iv&&(sv(kh,0===nv),sv(Th,nv===Jh-1)),ev.setAttribute("title",Fr("lightBox.showOriginal")),bh.classList.remove("light-box_full-size"),ev.firstChild.className="icons-lightbox icons-lightbox_uncollapse",document.addEventListener&&document.removeEventListener(uv,t)}var i,r;((n=n||window.event)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),Hh)?(yv(),document.addEventListener?document.addEventListener(uv,t):t()):(bh.classList.add("light-box_full-size"),ev.firstChild.className="icons-lightbox icons-lightbox_collapse",ev.setAttribute("title",Fr("lightBox.collapse")),iv&&(sv(kh,!0),sv(Th,!0)),i=Vh.width<=Yh.width+40?Vh.width-40:Yh.width+20,r=Vh.height<=Yh.height+80?Vh.height-80:Yh.height,mh.style.width=i+"px",mh.style.marginLeft="-"+i/2+"px",mh.style.height=r+"px",mh.style.marginTop="-"+(r/2+20)+"px");Hh=!Hh}function sv(n,t){n&&(t?n.classList.add("light-box__disabled"):n.classList.remove("light-box__disabled"))}function lv(){Zh.addEventListener("error",lv),rv.classList.add("light-box__on-error"),rv.innerHTML="",(Kh=document.createElement("div")).className="light-box__error-message",Kh.innerHTML=Fr("lightBox.errorLoading")+"<br>",rv.appendChild(Kh);var n=Fr("lightBox.linkToImg"),t=document.createElement("a");t.setAttribute("href",Qh),t.setAttribute("title",n),t.setAttribute("target","_blank"),t.innerText=n,Kh.appendChild(t)}function hv(){if(Zh){document.addEventListener&&mh.removeEventListener(uv,dv),Kh&&(Kh.parentNode&&Kh.parentNode.removeChild(Kh),Kh=null,rv.classList.remove("light-box__on-error"));var n=Yh.width,t=Yh.height;Yh.width=Zh.offsetWidth,Yh.height=Zh.offsetHeight,sv(ev,!(Yh.width>Vh.width||Yh.height>Vh.height)),tv&&(tv.removeEventListener("load",hv),tv.removeEventListener("error",lv),tv.parentNode&&tv.parentNode.removeChild(tv),tv=null),document.addEventListener?(n!==Yh.width&&t!==Yh.height?mh.addEventListener(uv,dv):dv(),yv()):(yv(),dv())}}function vv(n,t){Qh=n,tv=Zh,sv(ev,!0),tv&&(tv.removeEventListener("load",hv),tv.removeEventListener("error",lv),tv.parentNode===document.body&&(tv.parentNode.removeChild(tv),tv=null),Zh=null),(Zh=new Image).addEventListener("load",hv),Zh.addEventListener("error",lv),t&&Zh.setAttribute("srcset",t),Zh.setAttribute("src",n+(Mu?"?"+Math.random():"")),Zh.classList.add("light-box__attachment-loading"),document.body.appendChild(Zh),iv&&(sv(kh,0===nv),sv(Th,nv===Jh-1)),Xh.setAttribute("href",n)}function dv(){rv.innerHTML="",Zh.classList.remove("light-box__attachment-loading"),rv.appendChild(Zh),document.addEventListener&&mh.removeEventListener(uv,dv)}function yv(){cv();var n,t=Yh.width,i=Yh.height,r=t>i;if(!t||!i)return!1;r?(n=t/i,t>Vh.width-40&&(i=(t=Vh.width-40)/n),i>Vh.height-80&&(n=i/t,t=(i=Vh.height-80)/n)):(n=i/t,i>Vh.height-80&&(t=(i=Vh.height-80)/n),t>Vh.width-40&&(n=t/i,i=(t=Vh.width-40)/n)),t<200&&(t=200,i=r?t/n:t*n),mh.style.width=t+"px",mh.style.marginLeft="-"+t/2+"px",mh.style.height=i+"px",mh.style.marginTop="-"+(i/2+20)+"px"}function pv(n){iv&&((n=n||window.event)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),nv++,vv(iv[nv]))}function bv(n){iv&&((n=n||window.event)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),nv--,vv(iv[nv]))}function mv(n){ov=!1,(n=n||window.event)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),document.body.removeChild(bh),Zh&&(Zh.parentNode.removeChild(Zh),Zh.removeEventListener("load",hv)),document.body.classList.remove("light-box-showed"),window.scrollTo(0,Ah),window.removeEventListener("resize",yv),document.removeEventListener("keydown",wv),Zh=null,document.body.style.top=""}function wv(n){var t=(n=n||window.event).keyCode||n.which;27===t&&mv(n),39===t&&nv!==Jh-1&&pv(n),37===t&&0!==nv&&bv(n)}function _v(n){Yh=n}function gv(n){return new Promise((function(t){yv(),n.classList.remove("light-box__attachment-loading"),rv.appendChild(n),document.addEventListener&&mh.removeEventListener(uv,dv),t()}))}function Sv(){sv(ev,!0),sv(Xh,!0)}function jv(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined,r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;ov=!0,(Jh=(iv=t)&&iv.length||1)<=1?iv=null:nv=iv.indexOf(n),fv(),vv(n,i),r?Sv():(sv(ev,!1),sv(Xh,!1))}function Ov(){return ov}function Ev(n){var t=(n=Math.floor(n))%60;return parseInt(n/60,10)+":"+(n<10?"0"+t:t)}function Tv(){var n=Ch.currentTime/Ch.duration*100;qh.value=n,Fh.style.width=n+"%"}function kv(){var n=100*Ch.volume;zh.value=n,Wh.style.width=n+"%",0!==parseInt(n,10)?Uh.innerHTML='<i class="icons-player icons-player_sound"></i>':Uh.innerHTML='<i class="icons-player icons-player_mute"></i>'}function Av(){var n=document.createElement("div");n.className="light-box__time-line",n.innerHTML='<div class="light-box__time-line__bg"></div>',(Gh=document.createElement("div")).className="light-box__time-line__buffered",n.appendChild(Gh),(Fh=document.createElement("div")).className="light-box__time-line__value",n.appendChild(Fh),(qh=document.createElement("input")).className="light-box__time-line__range",qh.setAttribute("type","range"),qh.setAttribute("min",0),qh.setAttribute("max",100),qh.setAttribute("value",0);var t=!1;return qh.addEventListener("mousemove",(function(n){n.stopPropagation(),t&&(Ch.currentTime=Ch.duration*(qh.value/100))})),qh.addEventListener("mousedown",(function(n){n.stopPropagation(),t=!0})),qh.addEventListener("mouseup",(function(n){n.stopPropagation(),t=!1})),qh.addEventListener("change",(function(){Ch.currentTime=Ch.duration*(qh.value/100)})),n.appendChild(qh),function(){var n=Ch.duration;if(n>0)for(var t=0;t<Ch.buffered.length;t++)if(Ch.buffered.start(Ch.buffered.length-1-t)<=Ch.currentTime){Gh.style.width=Ch.buffered.end(Ch.buffered.length-1-t)/n*100+"%";break}}(),n}function xv(){document.fullscreenElement||(Lh=!0,Cv())}function Cv(n){n&&n.stopPropagation(),Lh?($h.innerHTML='<i class="icons-player icons-player_expand"></i>',Ih.removeEventListener(Bh[3],xv),document[Bh[1]]()):(Ih[Bh[0]](),$h.innerHTML='<i class="icons-player icons-player_collapsed"></i>',Ih.addEventListener(Bh[3],xv)),Lh=!Lh}function Rv(n){n&&n.stopPropagation(),Ch.paused||Ch.ended?Ch.play():Ch.pause()}function Iv(){var n;(Rh=document.createElement("div")).className="light-box__controls light-box__controls_active",(Mh=document.createElement("div")).className="light-box__play",Mh.innerHTML='<i class="icons-player icons-player_play"></i>',Mh.addEventListener("click",Rv),Rh.appendChild(Mh),(Uh=document.createElement("div")).className="light-box__sound",Uh.innerHTML='<i class="icons-player icons-player_sound"></i>',Uh.addEventListener("click",(function(n){n.stopPropagation(),Ch.muted?(Ch.muted=!1,Ch.volume=1):(Ch.muted=!0,Ch.volume=0)})),Rh.appendChild(Uh),Rh.appendChild(((n=document.createElement("div")).className="light-box__sound-line",n.innerHTML='<div class="light-box__sound-line__bg"></div>',(Wh=document.createElement("div")).className="light-box__sound-line__value",n.appendChild(Wh),(zh=document.createElement("input")).className="light-box__time-line__range",zh.setAttribute("type","range"),zh.setAttribute("min",0),zh.setAttribute("max",100),zh.setAttribute("value",0),zh.addEventListener("mousemove",(function(n){n.stopPropagation(),Ch.volume=zh.value/100})),zh.addEventListener("change",(function(){Ch.volume=zh.value/100})),kv(),n.appendChild(zh),n));var t=document.createElement("a");t.className="light-box__download",t.innerHTML='<i class="icons-player icons-player_download"></i>',t.setAttribute("href",Ch.currentSrc),t.setAttribute("target","_blank"),Rh.appendChild(t),Bh?(($h=document.createElement("div")).className="light-box__full-screen",$h.innerHTML='<i class="icons-player icons-player_expand"></i>',$h.addEventListener("click",Cv),Rh.appendChild($h)):Rh.classList.add("light-box__controls_no-full-screen");var i=document.createElement("div");return i.className="light-box__time",(Ph=document.createElement("span")).className="light-box__time__current",Ph.innerText="0:00",i.appendChild(Ph),i.insertAdjacentHTML("beforeend",' / <span class="light-box__time__full">'.concat(Ev(Ch.duration),"</span>")),Rh.appendChild(i),Rh.appendChild(Av()),Rh}function Mv(){Nh.innerHTML='<i class="icons-player icons-player_stop-big"></i>',Nh.classList.remove("light-box__disabled")}function Uv(){var n=this;Ch.removeEventListener("canplay",Uv);var t=Ch.videoWidth;t<330&&(t=330),_v({width:t,height:Ch.videoHeight}),xh&&xh.parentNode&&xh.parentNode.removeChild(xh),(Ih=document.createElement("div")).className="light-box__attachment-area",Ih.appendChild(Iv()),Ih.appendChild(Ch),Ih.appendChild(((Nh=document.createElement("div")).className="light-box__status light-box__status_animated light-box__disabled",Nh.innerHTML='<i class="icons-player icons-player_play-big"></i>',Nh.addEventListener("animationend",(function(){Nh.classList.add("light-box__disabled")})),Nh)),Ch.addEventListener("play",(function(){Nh.innerHTML='<i class="icons-player icons-player_play-big"></i>',Nh.classList.remove("light-box__disabled"),Mh.innerHTML='<i class="icons-player icons-player_stop"></i>',Rh.classList.remove("light-box__controls_active"),Ih.classList.add("light-box__hide-cursor")})),Ch.addEventListener("pause",(function(){Mv(),Mh.innerHTML='<i class="icons-player icons-player_play"></i>',Rh.classList.add("light-box__controls_active"),Ih.classList.remove("light-box__hide-cursor"),Tv()})),Ch.addEventListener("ended",(function(){Mv(),Mh.innerHTML='<i class="icons-player icons-player_play"></i>',Rh.classList.add("light-box__controls_active"),Ih.classList.remove("light-box__hide-cursor"),Tv()})),Ch.addEventListener("progress",(function(){Tv()})),Ch.addEventListener("timeupdate",(function(){Ph.innerText=Ev(Ch.currentTime),Tv()})),Ch.addEventListener("click",Rv),Ch.addEventListener("mousemove",(function(){Rh.classList.add("light-box__controls_active"),Ih.classList.remove("light-box__hide-cursor"),clearTimeout(Dh),Dh=setTimeout((function(){Ch.paused||Ch.ended||(Rh.classList.remove("light-box__controls_active"),Ih.classList.add("light-box__hide-cursor"))}),1e3)})),Ch.addEventListener("volumechange",kv),gv(Ih).then(function(){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,n),Ch.classList.remove("light-box__attachment-loading")}.bind(this))}function Pv(n){var t=n.src,i=n.type,r=n.preview;Bh=function(){for(var n=document.createElement("span"),t=[["requestFullScreen","cancelFullScreen","fullScreen","fullscreenchange"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitIsFullScreen","webkitfullscreenchange"],["mozRequestFullScreen","mozCancelFullScreen","mozfullScreen","mozfullscreenchange"]],i=0,r=t.length;i<r;i++)if(n[t[i][0]])return t[i]}(),fv(),function(n){var t=n.src,i=void 0===t?null:t;i&&((xh=document.createElement("img")).className="light-box__attachment-loading",document.body.appendChild(xh),xh.addEventListener("load",(function(){_v({width:xh.offsetWidth,height:xh.offsetHeight}),gv(xh)})),xh.setAttribute("src",i))}({src:r}),function(n){var t=n.src,i=void 0===t?null:t,r=n.preview,e=void 0===r?null:r,o=n.type;if(i){(Ch=document.createElement("video")).className="light-box__attachment-loading",e&&Ch.setAttribute("poster",e),document.body.appendChild(Ch);var u=document.createElement("source");u.setAttribute("type",o+';codecs="avc1.42E01E, mp4a.40.2"'),u.setAttribute("src",i),Ch.appendChild(u);var c=document.createElement("div");c.className="light-box__error-message",c.innerHTML=Fr("lightBox.notSupport")+'<a href="'.concat(i,'" target="_blank">').concat(Fr("lightBox.linkToVideo"),"</a>"),Ch.appendChild(c),Ch.addEventListener("canplay",Uv),u.addEventListener("error",(function(){_v({width:300,height:300}),c.innerHTML=Fr("lightBox.errorLoading")+'<br><a href="'.concat(i,'" target="_blank">').concat(Fr("lightBox.linkToVideo"),"</a>"),gv(c)}))}}({src:t,preview:r,type:i}),Sv()}function Dv(n){return Dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Dv(n)}function Bv(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Nv(n,t){return Nv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Nv(n,t)}function $v(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Wv(n);if(t){var e=Wv(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Lv(this,i)}}function Lv(n,t){if(t&&("object"===Dv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zv(n)}function zv(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Wv(n){return Wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wv(n)}function qv(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Fv(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Fv(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fv(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Gv(n){var t,i,r,e,o=n[0].fileSizeString+"";return{c:function(){(t=vt("span")).innerHTML='<i class="icons-chat icons-chat_play"></i>',i=pt(),r=vt("span"),e=yt(o),_t(t,"class","chat-media__play"),_t(r,"class","chat-media__size")},m:function(n,o){st(n,t,o),st(n,i,o),st(n,r,o),ot(r,e)},p:function(n,t){1&qv(t,1)[0]&&o!==(o=n[0].fileSizeString+"")&&St(e,o)},i:Rn,o:Rn,d:function(n){n&&lt(t),n&&lt(i),n&&lt(r)}}}function Hv(n,t,i){var r=this,e=t.data;return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,r),"data"in n&&i(0,e=n.data)}.bind(this),[e]}var Vv=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Nv(n,t)}(o,n);var t,i,r,e=$v(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(zv(t=e.call(this)),n,Hv,Gv,Nn,{data:0}),t}return t=o,i&&Bv(t.prototype,i),r&&Bv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Qv=Vv;function Yv(n){return Yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Yv(n)}function Jv(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Kv(n,t){return Kv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Kv(n,t)}function Xv(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=td(n);if(t){var e=td(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Zv(this,i)}}function Zv(n,t){if(t&&("object"===Yv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nd(n)}function nd(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function td(n){return td=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},td(n)}function id(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return rd(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return rd(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rd(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function ed(n){var t,i,r,e,o;return{c:function(){$n((t=vt("img")).src,i=n[0].url)||_t(t,"src",i),_t(t,"width",n[1]),_t(t,"height",n[2]),_t(t,"loading","lazy"),_t(t,"alt",r=n[0].fileName)},m:function(n,i){st(n,t,i),e||(o=[mt(t,"load",od),mt(t,"error",ud)],e=!0)},p:function(n,e){var o=id(e,1)[0];1&o&&!$n(t.src,i=n[0].url)&&_t(t,"src",i),2&o&&_t(t,"width",n[1]),4&o&&_t(t,"height",n[2]),1&o&&r!==(r=n[0].fileName)&&_t(t,"alt",r)},i:Rn,o:Rn,d:function(n){n&&lt(t),e=!1,Dn(o)}}}function od(n){var t=n.target.parentNode;t&&(t.style.backgroundImage="none")}function ud(n){var t=n.target,i=t.parentNode;i&&i.removeChild(t)}function cd(n,t,i){var r=this,e=t.data,o=t.width,u=void 0===o?0:o,c=t.height,f=void 0===c?0:c;return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,r),"data"in n&&i(0,e=n.data),"width"in n&&i(1,u=n.width),"height"in n&&i(2,f=n.height)}.bind(this),[e,u,f]}var fd=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Kv(n,t)}(o,n);var t,i,r,e=Xv(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(nd(t=e.call(this)),n,cd,ed,Nn,{data:0,width:1,height:2}),t}return t=o,i&&Jv(t.prototype,i),r&&Jv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),ad=fd;function sd(n){return sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},sd(n)}function ld(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function hd(n,t){return hd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},hd(n,t)}function vd(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=pd(n);if(t){var e=pd(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return dd(this,i)}}function dd(n,t){if(t&&("object"===sd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yd(n)}function yd(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function pd(n){return pd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pd(n)}function bd(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function md(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return wd(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return wd(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wd(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function _d(n){var t,i;return t=new gh({props:{data:n[0]}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function gd(n){var t,i,r,e,o,u,c,f,a=[jd,Sd],s=[];return r=function(n,t){return n[3]?0:1}(n),e=s[r]=a[r](n),{c:function(){t=vt("figure"),i=vt("a"),e.c(),_t(i,"href",o=n[0].url),_t(i,"title",n[2]),_t(i,"target","_blank"),_t(i,"class","chat-media__preview"),Ot(i,"width",n[1].width?"".concat(n[1].width,"px"):"auto"),Ot(i,"height",n[1].height?"".concat(n[1].height,"px"):"auto"),Ot(i,"background-image","url("+n[0].preview.src+")"),Ot(i,"background-size",(n[1].width?"".concat(n[1].width,"px"):"auto")+" auto"),_t(t,"class","chat-media")},m:function(e,o){st(e,t,o),ot(t,i),s[r].m(i,null),u=!0,c||(f=mt(i,"click",wt(n[4])),c=!0)},p:function(n,t){e.p(n,t),(!u||1&t&&o!==(o=n[0].url))&&_t(i,"href",o),(!u||1&t)&&Ot(i,"background-image","url("+n[0].preview.src+")")},i:function(n){u||(fi(e),u=!0)},o:function(n){ai(e),u=!1},d:function(n){n&&lt(t),s[r].d(),c=!1,f()}}}function Sd(n){var t,i;return t=new Qv({props:{data:n[0]}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function jd(n){var t,i;return t=new ad({props:{data:n[0],width:n[1].width,height:n[1].height}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function Od(n){var t,i,r,e,o=[gd,_d],u=[];function c(n,t){return n[0].preview&&n[0].fileSize<nn?0:1}return t=c(n),i=u[t]=o[t](n),{c:function(){i.c(),r=bt()},m:function(n,i){u[t].m(n,i),st(n,r,i),e=!0},p:function(n,e){var f=this,a=md(e,1)[0],s=t;(t=c(n))===s?u[t].p(n,a):(ui(),ai(u[s],1,1,function(){bd(this,f),u[s]=null}.bind(this)),ci(),(i=u[t])?i.p(n,a):(i=u[t]=o[t](n)).c(),fi(i,1),i.m(r.parentNode,r))},i:function(n){e||(fi(i),e=!0)},o:function(n){ai(i),e=!1},d:function(n){u[t].d(n),n&&lt(r)}}}function Ed(n,t,i){var r=this,e=t.data,o=function(n){if(!n.preview)return{width:0,height:0};var t=window.innerWidth,i=XE,r=t-32-JE-8,e=n.preview.width,o=n.preview.height;return r<i&&(i=r),e>i?o>n.preview.width?(o=i,e/=n.preview.height/i):(e=i,o/=n.preview.width/i):o>i&&(o=i,e/=n.preview.height/i),{width:e,height:o}}(e),u=e.fileName+" ("+e.fileSizeString+")",c=0===e.mime.toLowerCase().indexOf("image");return n.$$set=function(n){bd(this,r),"data"in n&&i(0,e=n.data)}.bind(this),[e,o,u,c,function(){var n;c?jv(e.url):Pv({src:e.url,type:e.mime,preview:null===(n=e.preview)||void 0===n?void 0:n.src})}]}var Td=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&hd(n,t)}(o,n);var t,i,r,e=vd(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(yd(t=e.call(this)),n,Ed,Od,Nn,{data:0}),t}return t=o,i&&ld(t.prototype,i),r&&ld(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),kd=Td;function Ad(n){return Ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ad(n)}function xd(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Cd(n,t){return Cd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Cd(n,t)}function Rd(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Ud(n);if(t){var e=Ud(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Id(this,i)}}function Id(n,t){if(t&&("object"===Ad(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Md(n)}function Md(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ud(n){return Ud=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ud(n)}function Pd(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Dd(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Bd(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Bd(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bd(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Nd(n){ut(n,"svelte-w0eut1",".chat-image-block.svelte-w0eut1.svelte-w0eut1{position:absolute;margin:0;overflow:hidden;padding:4px;box-sizing:border-box}.chat-image-link.svelte-w0eut1.svelte-w0eut1{width:100%;height:100%;display:block;background-size:cover;background-position:center}.chat-image-link.svelte-w0eut1 img.svelte-w0eut1{width:100%;height:100%;object-fit:cover}")}function $d(n){var t,i,r,e,o,u,c,f;return{c:function(){var c;t=vt("figure"),i=vt("a"),_t(r=vt("img"),"alt",""),_t(r,"title",e=n[0].fileName),$n(r.src,o=n[0].url)||_t(r,"src",o),_t(r,"loading","lazy"),_t(r,"class","svelte-w0eut1"),_t(i,"class","chat-image-link svelte-w0eut1"),_t(i,"href",u=n[0].url),Ot(i,"background-image","url("+(null===(c=n[0].preview)||void 0===c?void 0:c.src)+")"),_t(t,"class","chat-image-block svelte-w0eut1"),Ot(t,"width",n[0].width),Ot(t,"height",n[0].height),Ot(t,"top",n[0].top),Ot(t,"left",n[0].left)},m:function(e,o){st(e,t,o),ot(t,i),ot(i,r),n[3](t),c||(f=mt(i,"click",wt(n[2])),c=!0)},p:function(n,c){var f,a=Dd(c,1)[0];(1&a&&e!==(e=n[0].fileName)&&_t(r,"title",e),1&a&&!$n(r.src,o=n[0].url)&&_t(r,"src",o),1&a&&u!==(u=n[0].url)&&_t(i,"href",u),1&a)&&Ot(i,"background-image","url("+(null===(f=n[0].preview)||void 0===f?void 0:f.src)+")");1&a&&Ot(t,"width",n[0].width),1&a&&Ot(t,"height",n[0].height),1&a&&Ot(t,"top",n[0].top),1&a&&Ot(t,"left",n[0].left)},i:Rn,o:Rn,d:function(i){i&&lt(t),n[3](null),c=!1,f()}}}function Ld(n,t,i){var r,e=this,o=t.data;return n.$$set=function(n){Pd(this,e),"data"in n&&i(0,o=n.data)}.bind(this),[o,r,function(){for(var n=this,t=r.parentNode,i=[];t&&t.parentNode&&!t.classList.contains("chat-media-list");)t=t.parentNode;t&&t.classList.contains("chat-media-list")&&t.querySelectorAll("img").forEach(function(t){Pd(this,n);var r=t.getAttribute("src");r&&i.push(r)}.bind(this)),jv(o.url,i)},function(n){var t=this;Wt[n?"unshift":"push"](function(){Pd(this,t),i(1,r=n)}.bind(this))}]}var zd=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Cd(n,t)}(o,n);var t,i,r,e=Rd(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Md(t=e.call(this)),n,Ld,$d,Nn,{data:0},Nd),t}return t=o,i&&xd(t.prototype,i),r&&xd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Wd=zd,qd=Math.min(800,document.body.clientWidth-80);function Fd(n){return Fd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Fd(n)}function Gd(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Hd(n,t){return Hd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Hd(n,t)}function Vd(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Jd(n);if(t){var e=Jd(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Qd(this,i)}}function Qd(n,t){if(t&&("object"===Fd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Yd(n)}function Yd(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Jd(n){return Jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jd(n)}function Kd(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Xd(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Xd(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xd(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Zd(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ny(n){ut(n,"svelte-1idxkcg",".chat-gallery.svelte-1idxkcg{overflow:hidden;max-width:100%}.chat-gallery__row.svelte-1idxkcg{position:relative}")}function ty(n,t,i){var r=n.slice();return r[3]=t[i],r}function iy(n,t,i){var r=n.slice();return r[6]=t[i],r}function ry(n){var t,i,r,e,o=[oy,ey],u=[];function c(n,t){return n[0].length>1?0:1}return t=c(n),i=u[t]=o[t](n),{c:function(){i.c(),r=bt()},m:function(n,i){u[t].m(n,i),st(n,r,i),e=!0},p:function(n,e){var f=this,a=t;(t=c(n))===a?u[t].p(n,e):(ui(),ai(u[a],1,1,function(){Zd(this,f),u[a]=null}.bind(this)),ci(),(i=u[t])?i.p(n,e):(i=u[t]=o[t](n)).c(),fi(i,1),i.m(r.parentNode,r))},i:function(n){e||(fi(i),e=!0)},o:function(n){ai(i),e=!1},d:function(n){u[t].d(n),n&&lt(r)}}}function ey(n){var t,i;return t=new kd({props:{data:n[0][0].data}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0][0].data),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function oy(n){for(var t,i,r=this,e=n[1],o=[],u=0;u<e.length;u+=1)o[u]=cy(ty(n,e,u));var c=function(n){var t=this;return Zd(this,r),ai(o[n],1,1,function(){Zd(this,t),o[n]=null}.bind(this))}.bind(this);return{c:function(){t=vt("div");for(var i=0;i<o.length;i+=1)o[i].c();_t(t,"class","chat-gallery svelte-1idxkcg"),Ot(t,"width",qd+"px"),Ot(t,"height",n[2]+"px")},m:function(n,r){st(n,t,r);for(var e=0;e<o.length;e+=1)o[e].m(t,null);i=!0},p:function(n,r){if(2&r){var u;for(e=n[1],u=0;u<e.length;u+=1){var f=ty(n,e,u);o[u]?(o[u].p(f,r),fi(o[u],1)):(o[u]=cy(f),o[u].c(),fi(o[u],1),o[u].m(t,null))}for(ui(),u=e.length;u<o.length;u+=1)c(u);ci()}(!i||4&r)&&Ot(t,"height",n[2]+"px")},i:function(n){if(!i){for(var t=0;t<e.length;t+=1)fi(o[t]);i=!0}},o:function(n){o=o.filter(Boolean);for(var t=0;t<o.length;t+=1)ai(o[t]);i=!1},d:function(n){n&&lt(t),ht(o,n)}}}function uy(n){var t,i;return t=new Wd({props:{data:n[6]}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};2&i&&(r.data=n[6]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function cy(n){for(var t,i,r,e=this,o=n[3].items,u=[],c=0;c<o.length;c+=1)u[c]=uy(iy(n,o,c));var f=function(n){var t=this;return Zd(this,e),ai(u[n],1,1,function(){Zd(this,t),u[n]=null}.bind(this))}.bind(this);return{c:function(){t=vt("div");for(var r=0;r<u.length;r+=1)u[r].c();i=pt(),_t(t,"class","chat-gallery__row svelte-1idxkcg"),Ot(t,"height",n[3].height+"px")},m:function(n,e){st(n,t,e);for(var o=0;o<u.length;o+=1)u[o].m(t,null);ot(t,i),r=!0},p:function(n,e){if(2&e){var c;for(o=n[3].items,c=0;c<o.length;c+=1){var a=iy(n,o,c);u[c]?(u[c].p(a,e),fi(u[c],1)):(u[c]=uy(a),u[c].c(),fi(u[c],1),u[c].m(t,i))}for(ui(),c=o.length;c<u.length;c+=1)f(c);ci()}(!r||2&e)&&Ot(t,"height",n[3].height+"px")},i:function(n){if(!r){for(var t=0;t<o.length;t+=1)fi(u[t]);r=!0}},o:function(n){u=u.filter(Boolean);for(var t=0;t<u.length;t+=1)ai(u[t]);r=!1},d:function(n){n&&lt(t),ht(u,n)}}}function fy(n){var t,i,r=n[0].length&&ry(n);return{c:function(){r&&r.c(),t=bt()},m:function(n,e){r&&r.m(n,e),st(n,t,e),i=!0},p:function(n,i){var e=this,o=Kd(i,1)[0];n[0].length?r?(r.p(n,o),1&o&&fi(r,1)):((r=ry(n)).c(),fi(r,1),r.m(t.parentNode,t)):r&&(ui(),ai(r,1,1,function(){Zd(this,e),r=null}.bind(this)),ci())},i:function(n){i||(fi(r),i=!0)},o:function(n){ai(r),i=!1},d:function(n){r&&r.d(n),n&&lt(t)}}}function ay(n,t,i){var r=this,e=t.data,o=[],u=0;return n.$$set=function(n){Zd(this,r),"data"in n&&i(0,e=n.data)}.bind(this),n.$$.update=function(){if(Zd(this,r),1&n.$$.dirty&&e.length>1){var t=function(n){for(var t=[],i=n.length%2,r=0,e=0,o=0,u=0,c=0,f=0,a=0,s=n.length,l=0;l<s;l++){var h=n[l];if(h.recType===_.zn&&h.data.preview){var v=h.data.preview.width/h.data.preview.height,d=0,y=0,p=0,b=0,m=0;t[u]||(t[u]={height:540,items:[]}),!l&&s>2?v<.7?((d=100*v)<40&&(d=40),y=100,p=qd*(d/100)/v,f=0,e=d):i?(d=100,y=100,e=100,p=qd/v,f=1):(d=50,y=100,e=50,p=qd/v/2,f=1):0===a?(d=50,y=100,e=50,p=qd/v/2,f=1):(b=e,m=o,f?(y=100,e+=d=100-e,p=qd*(d/100)/v):(d=100-e,y=50,o+=50,p=Infinity)),c=Math.min(p,t[u].height),t[u].height=c,t[u].items.push(Object.assign(Object.assign({},h.data),{ratio:v,width:"".concat(d,"%"),height:"".concat(y,"%"),left:"".concat(b,"%"),top:"".concat(m,"%")})),a++,o>=100&&!f||e>=100&&f?(r+=Math.min(t[u].height,540),u++,a=0,e=0,o=0):l===s-1&&(r+=Math.min(t[u].height,540))}}return{list:t,contentHeight:r}}(e);i(1,o=t.list),i(2,u=t.contentHeight)}}.bind(this),[e,o,u]}var sy=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Hd(n,t)}(o,n);var t,i,r,e=Vd(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Yd(t=e.call(this)),n,ay,fy,Nn,{data:0},ny),t}return t=o,i&&Gd(t.prototype,i),r&&Gd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),ly=sy;function hy(n){return hy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hy(n)}function vy(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function dy(n,t){return dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},dy(n,t)}function yy(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=my(n);if(t){var e=my(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return py(this,i)}}function py(n,t){if(t&&("object"===hy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return by(n)}function by(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function my(n){return my=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},my(n)}function wy(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return _y(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _y(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _y(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function gy(n){var t;function i(n,t){return n[0].url?jy:Sy}var r=i(n),e=r(n);return{c:function(){e.c(),t=bt()},m:function(n,i){e.m(n,i),st(n,t,i)},p:function(n,o){r===(r=i(n))&&e?e.p(n,o):(e.d(1),(e=r(n))&&(e.c(),e.m(t.parentNode,t)))},d:function(n){e.d(n),n&&lt(t)}}}function Sy(n){var t,i,r,e;return{c:function(){$n((t=vt("img")).src,i=n[0].preview.src)||_t(t,"src",i),_t(t,"class","enrich-block__img"),_t(t,"loading","lazy"),_t(t,"width",r=n[0].preview.width),_t(t,"height",e=n[0].preview.height),_t(t,"alt","")},m:function(n,i){st(n,t,i)},p:function(n,o){1&o&&!$n(t.src,i=n[0].preview.src)&&_t(t,"src",i),1&o&&r!==(r=n[0].preview.width)&&_t(t,"width",r),1&o&&e!==(e=n[0].preview.height)&&_t(t,"height",e)},d:function(n){n&&lt(t)}}}function jy(n){var t,i,r,e,o,u;return{c:function(){t=vt("a"),$n((i=vt("img")).src,r=n[0].preview.src)||_t(i,"src",r),_t(i,"class","enrich-block__img"),_t(i,"loading","lazy"),_t(i,"width",e=n[0].preview.width),_t(i,"height",o=n[0].preview.height),_t(i,"alt",""),_t(t,"href",u=n[0].url),_t(t,"target","_blank")},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,c){1&c&&!$n(i.src,r=n[0].preview.src)&&_t(i,"src",r),1&c&&e!==(e=n[0].preview.width)&&_t(i,"width",e),1&c&&o!==(o=n[0].preview.height)&&_t(i,"height",o),1&c&&u!==(u=n[0].url)&&_t(t,"href",u)},d:function(n){n&&lt(t)}}}function Oy(n){var t,i,r,e,o=n[0].siteName+"";return{c:function(){t=vt("div"),i=vt("a"),r=yt(o),_t(i,"href",e=n[0].url),_t(i,"target","_blank"),_t(t,"class","enrich-block__site")},m:function(n,e){st(n,t,e),ot(t,i),ot(i,r)},p:function(n,t){1&t&&o!==(o=n[0].siteName+"")&&St(r,o),1&t&&e!==(e=n[0].url)&&_t(i,"href",e)},d:function(n){n&&lt(t)}}}function Ey(n){var t;function i(n,t){return n[0].url?ky:Ty}var r=i(n),e=r(n);return{c:function(){t=vt("div"),e.c(),_t(t,"class","enrich-block__title")},m:function(n,i){st(n,t,i),e.m(t,null)},p:function(n,o){r===(r=i(n))&&e?e.p(n,o):(e.d(1),(e=r(n))&&(e.c(),e.m(t,null)))},d:function(n){n&&lt(t),e.d()}}}function Ty(n){var t,i=n[0].title+"";return{c:function(){t=yt(i)},m:function(n,i){st(n,t,i)},p:function(n,r){1&r&&i!==(i=n[0].title+"")&&St(t,i)},d:function(n){n&&lt(t)}}}function ky(n){var t,i,r,e=n[0].title+"";return{c:function(){t=vt("a"),i=yt(e),_t(t,"href",r=n[0].url),_t(t,"target","_blank")},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,o){1&o&&e!==(e=n[0].title+"")&&St(i,e),1&o&&r!==(r=n[0].url)&&_t(t,"href",r)},d:function(n){n&&lt(t)}}}function Ay(n){var t,i,r=n[0].description+"";return{c:function(){t=vt("div"),i=yt(r),_t(t,"class","enrich-block__desc")},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,t){1&t&&r!==(r=n[0].description+"")&&St(i,r)},d:function(n){n&&lt(t)}}}function xy(n){var t,i,r,e,o=n[0].preview&&n[0].preview.src&&gy(n),u=n[0].siteName&&n[0].url&&Oy(n),c=n[0].title&&Ey(n),f=n[0].description&&Ay(n);return{c:function(){t=vt("div"),o&&o.c(),i=pt(),u&&u.c(),r=pt(),c&&c.c(),e=pt(),f&&f.c(),_t(t,"class","enrich-block")},m:function(n,a){st(n,t,a),o&&o.m(t,null),ot(t,i),u&&u.m(t,null),ot(t,r),c&&c.m(t,null),ot(t,e),f&&f.m(t,null)},p:function(n,a){var s=wy(a,1)[0];n[0].preview&&n[0].preview.src?o?o.p(n,s):((o=gy(n)).c(),o.m(t,i)):o&&(o.d(1),o=null),n[0].siteName&&n[0].url?u?u.p(n,s):((u=Oy(n)).c(),u.m(t,r)):u&&(u.d(1),u=null),n[0].title?c?c.p(n,s):((c=Ey(n)).c(),c.m(t,e)):c&&(c.d(1),c=null),n[0].description?f?f.p(n,s):((f=Ay(n)).c(),f.m(t,null)):f&&(f.d(1),f=null)},i:Rn,o:Rn,d:function(n){n&&lt(t),o&&o.d(),u&&u.d(),c&&c.d(),f&&f.d()}}}function Cy(n,t,i){var r=this,e=t.data;return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,r),"data"in n&&i(0,e=n.data)}.bind(this),[e]}var Ry=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&dy(n,t)}(o,n);var t,i,r,e=yy(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(by(t=e.call(this)),n,Cy,xy,Nn,{data:0}),t}return t=o,i&&vy(t.prototype,i),r&&vy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Iy=Ry;function My(n){return My="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},My(n)}function Uy(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Py(n,t){return Py=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Py(n,t)}function Dy(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=$y(n);if(t){var e=$y(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return By(this,i)}}function By(n,t){if(t&&("object"===My(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ny(n)}function Ny(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function $y(n){return $y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$y(n)}function Ly(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return zy(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return zy(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zy(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Wy(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function qy(n,t,i){var r=n.slice();return r[2]=t[i],r}function Fy(n,t,i){var r=n.slice();return r[5]=t[i],r}function Gy(n){var t,i;return t=new Tp({props:{message:n[0].data.quote}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.message=n[0].data.quote),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function Hy(n){var t,i,r,e,o=[Qy,Vy],u=[];return i=SE===N.wt?0:1,r=u[i]=o[i](n),{c:function(){t=vt("div"),r.c(),_t(t,"class","chat-media-list")},m:function(n,r){st(n,t,r),u[i].m(t,null),e=!0},p:function(n,t){r.p(n,t)},i:function(n){e||(fi(r),e=!0)},o:function(n){ai(r),e=!1},d:function(n){n&&lt(t),u[i].d()}}}function Vy(n){for(var t,i,r=this,e=[],o=new Map,u=n[0].data.media,c=function(n){return Wy(this,r),n[5].messageId}.bind(this),f=0;f<u.length;f+=1){var a=Fy(n,u,f),s=c(a);o.set(s,e[f]=Yy(s,a))}return{c:function(){for(var n=0;n<e.length;n+=1)e[n].c();t=bt()},m:function(n,r){for(var o=0;o<e.length;o+=1)e[o].m(n,r);st(n,t,r),i=!0},p:function(n,i){1&i&&(u=n[0].data.media,ui(),e=vi(e,i,c,1,n,u,o,t.parentNode,hi,Yy,t,Fy),ci())},i:function(n){if(!i){for(var t=0;t<u.length;t+=1)fi(e[t]);i=!0}},o:function(n){for(var t=0;t<e.length;t+=1)ai(e[t]);i=!1},d:function(n){for(var i=0;i<e.length;i+=1)e[i].d(n);n&&lt(t)}}}function Qy(n){var t,i;return t=new ly({props:{data:n[0].data.media}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0].data.media),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function Yy(n,t){var i,r,e;return r=new kd({props:{data:t[5].data}}),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),e=!0},p:function(n,i){t=n;var e={};1&i&&(e.data=t[5].data),r.$set(e)},i:function(n){e||(fi(r.$$.fragment,n),e=!0)},o:function(n){ai(r.$$.fragment,n),e=!1},d:function(n){n&&lt(i),bi(r,n)}}}function Jy(n){for(var t,i,r=this,e=[],o=new Map,u=n[0].data.files,c=function(n){return Wy(this,r),n[2].messageId}.bind(this),f=0;f<u.length;f+=1){var a=qy(n,u,f),s=c(a);o.set(s,e[f]=Ky(s,a))}return{c:function(){t=vt("div");for(var n=0;n<e.length;n+=1)e[n].c();_t(t,"class","chat-file-list")},m:function(n,r){st(n,t,r);for(var o=0;o<e.length;o+=1)e[o].m(t,null);i=!0},p:function(n,i){1&i&&(u=n[0].data.files,ui(),e=vi(e,i,c,1,n,u,o,t,hi,Ky,null,qy),ci())},i:function(n){if(!i){for(var t=0;t<u.length;t+=1)fi(e[t]);i=!0}},o:function(n){for(var t=0;t<e.length;t+=1)ai(e[t]);i=!1},d:function(n){n&&lt(t);for(var i=0;i<e.length;i+=1)e[i].d()}}}function Ky(n,t){var i,r,e;return r=new gh({props:{data:t[2].data}}),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),e=!0},p:function(n,i){t=n;var e={};1&i&&(e.data=t[2].data),r.$set(e)},i:function(n){e||(fi(r.$$.fragment,n),e=!0)},o:function(n){ai(r.$$.fragment,n),e=!1},d:function(n){n&&lt(i),bi(r,n)}}}function Xy(n){var t,i;return t=new Iy({props:{data:n[0].tags.enrich}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0].tags.enrich),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function Zy(n){var t,i,r,e,o,u,c=n[0].data.quote&&Gy(n),f=n[0].data.media&&Hy(n),a=n[1]&&function(n){var t;return{c:function(){_t(t=vt("div"),"class","chat-message__text")},m:function(i,r){st(i,t,r),t.innerHTML=n[1]},p:Rn,d:function(n){n&&lt(t)}}}(n),s=n[0].data.files&&Jy(n),l=n[0].tags&&n[0].tags.enrich&&Xy(n);return{c:function(){c&&c.c(),t=pt(),f&&f.c(),i=pt(),a&&a.c(),r=pt(),s&&s.c(),e=pt(),l&&l.c(),o=bt()},m:function(n,h){c&&c.m(n,h),st(n,t,h),f&&f.m(n,h),st(n,i,h),a&&a.m(n,h),st(n,r,h),s&&s.m(n,h),st(n,e,h),l&&l.m(n,h),st(n,o,h),u=!0},p:function(n,r){var u=this,h=Ly(r,1)[0];n[0].data.quote?c?(c.p(n,h),1&h&&fi(c,1)):((c=Gy(n)).c(),fi(c,1),c.m(t.parentNode,t)):c&&(ui(),ai(c,1,1,function(){Wy(this,u),c=null}.bind(this)),ci()),n[0].data.media?f?(f.p(n,h),1&h&&fi(f,1)):((f=Hy(n)).c(),fi(f,1),f.m(i.parentNode,i)):f&&(ui(),ai(f,1,1,function(){Wy(this,u),f=null}.bind(this)),ci()),n[1]&&a.p(n,h),n[0].data.files?s?(s.p(n,h),1&h&&fi(s,1)):((s=Jy(n)).c(),fi(s,1),s.m(e.parentNode,e)):s&&(ui(),ai(s,1,1,function(){Wy(this,u),s=null}.bind(this)),ci()),n[0].tags&&n[0].tags.enrich?l?(l.p(n,h),1&h&&fi(l,1)):((l=Xy(n)).c(),fi(l,1),l.m(o.parentNode,o)):l&&(ui(),ai(l,1,1,function(){Wy(this,u),l=null}.bind(this)),ci())},i:function(n){u||(fi(c),fi(f),fi(s),fi(l),u=!0)},o:function(n){ai(c),ai(f),ai(s),ai(l),u=!1},d:function(n){c&&c.d(n),n&&lt(t),f&&f.d(n),n&&lt(i),a&&a.d(n),n&&lt(r),s&&s.d(n),n&&lt(e),l&&l.d(n),n&&lt(o)}}}function np(n,t,i){var r=this,e=t.message,o=e.data.text?function(n,t){return n&&n.replace&&0!==n.length?n.replace(/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[-A-Z0-9+\u0026\u2019@#/%?=()~_|!:,.;]*[-A-Z0-9+\u0026@#/%=~()_|])/gi,(function(n,i,r){if(t&&t.length)for(var e=function(n){return(n.indexOf("://")>-1?n.split("/")[2]:n.split("/")[0]).split(":")[0].split("?")[0]}(r),o=0;o<t.length;o++){var u=e.indexOf(t[o]);if(u>=0&&u===e.length-t[o].length)return[i,'<a href="',r,'" target="_blank" title="',r,'">',r,"</a>"].join("")}return[i,'<a href="https://www.mql5.com/go?link=',encodeURIComponent(r),'" target="_blank" title="',r,'">',r,"</a>"].join("")})):n}(e.data.text,kE).replace(/\n/g,"<br>"):"";return n.$$set=function(n){Wy(this,r),"message"in n&&i(0,e=n.message)}.bind(this),[e,o]}var tp=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Py(n,t)}(o,n);var t,i,r,e=Dy(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Ny(t=e.call(this)),n,np,Zy,Nn,{message:0}),t}return t=o,i&&Uy(t.prototype,i),r&&Uy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),ip=tp;function rp(n){return rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},rp(n)}function ep(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function op(n,t){return op=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},op(n,t)}function up(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=ap(n);if(t){var e=ap(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return cp(this,i)}}function cp(n,t){if(t&&("object"===rp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fp(n)}function fp(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ap(n){return ap=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ap(n)}function sp(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return lp(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return lp(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lp(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function hp(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function vp(n,t,i){var r=n.slice();return r[1]=t[i],r}function dp(n){var t,i,r,e,o,u,c,f,a=n[0].authorName+"",s=[bp,pp,yp],l=[];function h(n,t){return n[0].recType===_.Gn?0:n[0].recType===_.Ln?1:n[0].recType===_.zn?2:-1}return~(u=h(n))&&(c=l[u]=s[u](n)),{c:function(){t=vt("div"),i=vt("div"),r=yt(a),e=pt(),o=vt("div"),c&&c.c(),_t(i,"class","chat-quote__author"),_t(o,"class","chat-quote__content"),_t(t,"class","chat-quote")},m:function(n,c){st(n,t,c),ot(t,i),ot(i,r),ot(t,e),ot(t,o),~u&&l[u].m(o,null),f=!0},p:function(n,t){var i=this;(!f||1&t)&&a!==(a=n[0].authorName+"")&&St(r,a);var e=u;(u=h(n))===e?~u&&l[u].p(n,t):(c&&(ui(),ai(l[e],1,1,function(){hp(this,i),l[e]=null}.bind(this)),ci()),~u?((c=l[u])?c.p(n,t):(c=l[u]=s[u](n)).c(),fi(c,1),c.m(o,null)):c=null)},i:function(n){f||(fi(c),f=!0)},o:function(n){ai(c),f=!1},d:function(n){n&&lt(t),~u&&l[u].d()}}}function yp(n){var t,i,r,e,o=[wp,mp],u=[];function c(n,t){return n[0].data.preview?0:1}return t=c(n),i=u[t]=o[t](n),{c:function(){i.c(),r=bt()},m:function(n,i){u[t].m(n,i),st(n,r,i),e=!0},p:function(n,e){var f=this,a=t;(t=c(n))===a?u[t].p(n,e):(ui(),ai(u[a],1,1,function(){hp(this,f),u[a]=null}.bind(this)),ci(),(i=u[t])?i.p(n,e):(i=u[t]=o[t](n)).c(),fi(i,1),i.m(r.parentNode,r))},i:function(n){e||(fi(i),e=!0)},o:function(n){ai(i),e=!1},d:function(n){u[t].d(n),n&&lt(r)}}}function pp(n){var t,i,r=n[0].data.text+"";return{c:function(){t=new At(!1),i=bt(),t.a=i},m:function(n,e){t.m(r,n,e),st(n,i,e)},p:function(n,i){1&i&&r!==(r=n[0].data.text+"")&&t.p(r)},i:Rn,o:Rn,d:function(n){n&&lt(i),n&&t.d()}}}function bp(n){var t,i,r,e,o=[gp,_p],u=[];function c(n,t){return n[0].data.text?0:n[0].data.media?1:-1}return~(t=c(n))&&(i=u[t]=o[t](n)),{c:function(){i&&i.c(),r=bt()},m:function(n,i){~t&&u[t].m(n,i),st(n,r,i),e=!0},p:function(n,e){var f=this,a=t;(t=c(n))===a?~t&&u[t].p(n,e):(i&&(ui(),ai(u[a],1,1,function(){hp(this,f),u[a]=null}.bind(this)),ci()),~t?((i=u[t])?i.p(n,e):(i=u[t]=o[t](n)).c(),fi(i,1),i.m(r.parentNode,r)):i=null)},i:function(n){e||(fi(i),e=!0)},o:function(n){ai(i),e=!1},d:function(n){~t&&u[t].d(n),n&&lt(r)}}}function mp(n){var t,i;return t=new gh({props:{data:n[0].data}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0].data),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function wp(n){var t,i;return t=new kd({props:{data:n[0].data}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0].data),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function _p(n){for(var t,i,r=this,e=[],o=new Map,u=n[0].data.media,c=function(n){return hp(this,r),n[1].messageId}.bind(this),f=0;f<u.length;f+=1){var a=vp(n,u,f),s=c(a);o.set(s,e[f]=Sp(s,a))}return{c:function(){t=vt("div");for(var n=0;n<e.length;n+=1)e[n].c();_t(t,"class","chat-media-list")},m:function(n,r){st(n,t,r);for(var o=0;o<e.length;o+=1)e[o].m(t,null);i=!0},p:function(n,i){1&i&&(u=n[0].data.media,ui(),e=vi(e,i,c,1,n,u,o,t,hi,Sp,null,vp),ci())},i:function(n){if(!i){for(var t=0;t<u.length;t+=1)fi(e[t]);i=!0}},o:function(n){for(var t=0;t<e.length;t+=1)ai(e[t]);i=!1},d:function(n){n&&lt(t);for(var i=0;i<e.length;i+=1)e[i].d()}}}function gp(n){var t,i;return t=new ip({props:{message:n[0].data.text}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.message=n[0].data.text),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function Sp(n,t){var i,r,e;return r=new kd({props:{data:t[1].data}}),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),e=!0},p:function(n,i){t=n;var e={};1&i&&(e.data=t[1].data),r.$set(e)},i:function(n){e||(fi(r.$$.fragment,n),e=!0)},o:function(n){ai(r.$$.fragment,n),e=!1},d:function(n){n&&lt(i),bi(r,n)}}}function jp(n){var t,i,r=n[0].data&&dp(n);return{c:function(){r&&r.c(),t=bt()},m:function(n,e){r&&r.m(n,e),st(n,t,e),i=!0},p:function(n,i){var e=this,o=sp(i,1)[0];n[0].data?r?(r.p(n,o),1&o&&fi(r,1)):((r=dp(n)).c(),fi(r,1),r.m(t.parentNode,t)):r&&(ui(),ai(r,1,1,function(){hp(this,e),r=null}.bind(this)),ci())},i:function(n){i||(fi(r),i=!0)},o:function(n){ai(r),i=!1},d:function(n){r&&r.d(n),n&&lt(t)}}}function Op(n,t,i){var r=this,e=t.message;return n.$$set=function(n){hp(this,r),"message"in n&&i(0,e=n.message)}.bind(this),[e]}var Ep=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&op(n,t)}(o,n);var t,i,r,e=up(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(fp(t=e.call(this)),n,Op,jp,Nn,{message:0}),t}return t=o,i&&ep(t.prototype,i),r&&ep(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Tp=Ep;function kp(n){return kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},kp(n)}function Ap(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function xp(n,t){return xp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},xp(n,t)}function Cp(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Mp(n);if(t){var e=Mp(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Rp(this,i)}}function Rp(n,t){if(t&&("object"===kp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ip(n)}function Ip(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Mp(n){return Mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mp(n)}function Up(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Pp(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Dp(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Dp(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dp(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Bp(n,t,i){var r=n.slice();return r[13]=t[i],r}function Np(n,t,i){var r=n.slice();return r[13]=t[i],r}function $p(n){var t,i,e,o,u,c,f;return o=new Tp({props:{message:n[6]}}),{c:function(){t=vt("div"),i=vt("i"),e=pt(),yi(o.$$.fragment),_t(i,"class","chat-attach-container__close icons-chat icons-chat_close-dark"),_t(i,"title",r("delete")),_t(t,"class","chat-quote-preview")},m:function(r,a){st(r,t,a),ot(t,i),ot(t,e),pi(o,t,null),u=!0,c||(f=mt(i,"click",n[8]),c=!0)},p:function(n,t){var i={};64&t&&(i.message=n[6]),o.$set(i)},i:function(n){u||(fi(o.$$.fragment,n),u=!0)},o:function(n){ai(o.$$.fragment,n),u=!1},d:function(n){n&&lt(t),bi(o),c=!1,f()}}}function Lp(n){var t,i,e,o,u,c,f,a=n[3].length&&zp(n),s=n[4].length&&qp(n);return{c:function(){t=vt("div"),i=vt("i"),e=pt(),o=vt("div"),a&&a.c(),u=pt(),s&&s.c(),_t(i,"class","chat-attach-container__close icons-chat icons-chat_close-dark"),_t(i,"title",r("delete")),_t(o,"class","chat-preview-list"),_t(t,"class","chat-attach-container")},m:function(r,l){st(r,t,l),ot(t,i),ot(t,e),ot(t,o),a&&a.m(o,null),ot(o,u),s&&s.m(o,null),c||(f=mt(i,"click",n[9]),c=!0)},p:function(n,t){n[3].length?a?a.p(n,t):((a=zp(n)).c(),a.m(o,u)):a&&(a.d(1),a=null),n[4].length?s?s.p(n,t):((s=qp(n)).c(),s.m(o,null)):s&&(s.d(1),s=null)},d:function(n){n&&lt(t),a&&a.d(),s&&s.d(),c=!1,f()}}}function zp(n){for(var t,i=n[3],r=[],e=0;e<i.length;e+=1)r[e]=Wp(Np(n,i,e));return{c:function(){t=vt("ul");for(var n=0;n<r.length;n+=1)r[n].c();_t(t,"class","chat-preview-list__block")},m:function(n,i){st(n,t,i);for(var e=0;e<r.length;e+=1)r[e].m(t,null)},p:function(n,e){if(136&e){var o;for(i=n[3],o=0;o<i.length;o+=1){var u=Np(n,i,o);r[o]?r[o].p(u,e):(r[o]=Wp(u),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},d:function(n){n&&lt(t),ht(r,n)}}}function Wp(n){var t,i,e,o,u,c,f,a,s,l,h,v,d,y,p,b=n[13].name+"";function m(){return n[10](n[13])}return{c:function(){t=vt("li"),i=vt("div"),e=vt("img"),u=pt(),c=vt("div"),f=vt("div"),a=yt(b),s=pt(),l=vt("button"),h=vt("i"),v=pt(),$n(e.src,o=URL.createObjectURL(n[13]))||_t(e,"src",o),_t(e,"alt",""),_t(e,"loading","lazy"),_t(i,"class","chat-preview-list__img"),_t(f,"class","chat-preview-list__name"),_t(h,"class","icons-chat icons-chat_close-dark"),_t(l,"class","chat-preview-list__button"),_t(l,"title",r("delete")),_t(c,"class","chat-preview-list__content"),_t(t,"class","chat-preview-list__item chat-preview-list__item_image"),_t(t,"title",d=n[13].name)},m:function(n,r){st(n,t,r),ot(t,i),ot(i,e),ot(t,u),ot(t,c),ot(c,f),ot(f,a),ot(c,s),ot(c,l),ot(l,h),ot(t,v),y||(p=mt(l,"click",wt(m)),y=!0)},p:function(i,r){n=i,8&r&&!$n(e.src,o=URL.createObjectURL(n[13]))&&_t(e,"src",o),8&r&&b!==(b=n[13].name+"")&&St(a,b),8&r&&d!==(d=n[13].name)&&_t(t,"title",d)},d:function(n){n&&lt(t),y=!1,p()}}}function qp(n){for(var t,i=n[4],r=[],e=0;e<i.length;e+=1)r[e]=Fp(Bp(n,i,e));return{c:function(){t=vt("ul");for(var n=0;n<r.length;n+=1)r[n].c();_t(t,"class","chat-preview-list__block")},m:function(n,i){st(n,t,i);for(var e=0;e<r.length;e+=1)r[e].m(t,null)},p:function(n,e){if(144&e){var o;for(i=n[4],o=0;o<i.length;o+=1){var u=Bp(n,i,o);r[o]?r[o].p(u,e):(r[o]=Fp(u),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},d:function(n){n&&lt(t),ht(r,n)}}}function Fp(n){var t,i,e,o,u,c,f,a,s,l,h,v,d,y,p=n[13].name+"";function b(){return n[11](n[13])}return{c:function(){t=vt("li"),i=vt("i"),o=pt(),u=vt("div"),c=vt("div"),f=yt(p),a=pt(),s=vt("button"),l=vt("i"),h=pt(),_t(i,"class",e="chat-preview-list__icon icons-chat icons-chat_"+oh(Vl(n[13].name,!0)||"")),_t(c,"class","chat-preview-list__name"),_t(l,"class","icons-chat icons-chat_close-dark"),_t(s,"class","chat-preview-list__button"),_t(s,"title",r("delete")),_t(u,"class","chat-preview-list__content"),_t(t,"class","chat-preview-list__item"),_t(t,"title",v=n[13].name)},m:function(n,r){st(n,t,r),ot(t,i),ot(t,o),ot(t,u),ot(u,c),ot(c,f),ot(u,a),ot(u,s),ot(s,l),ot(t,h),d||(y=mt(s,"click",wt(b)),d=!0)},p:function(r,o){n=r,16&o&&e!==(e="chat-preview-list__icon icons-chat icons-chat_"+oh(Vl(n[13].name,!0)||""))&&_t(i,"class",e),16&o&&p!==(p=n[13].name+"")&&St(f,p),16&o&&v!==(v=n[13].name)&&_t(t,"title",v)},d:function(n){n&&lt(t),d=!1,y()}}}function Gp(n){var t,i,r,e=n[6]&&$p(n),o=n[5].length&&Lp(n);return{c:function(){t=vt("div"),e&&e.c(),i=pt(),o&&o.c(),_t(t,"class","chat-preview-area")},m:function(u,c){st(u,t,c),e&&e.m(t,null),ot(t,i),o&&o.m(t,null),n[12](t),r=!0},p:function(n,r){var u=this,c=Pp(r,1)[0];n[6]?e?(e.p(n,c),64&c&&fi(e,1)):((e=$p(n)).c(),fi(e,1),e.m(t,i)):e&&(ui(),ai(e,1,1,function(){Up(this,u),e=null}.bind(this)),ci()),n[5].length?o?o.p(n,c):((o=Lp(n)).c(),o.m(t,null)):o&&(o.d(1),o=null)},i:function(n){r||(fi(e),r=!0)},o:function(n){ai(e),r=!1},d:function(i){i&&lt(t),e&&e.d(),o&&o.d(),n[12](null)}}}function Hp(n,t,i){var r,e,o=this,u=Rn,c=function(){var n=this;return Up(this,o),u(),u=zn(l,function(t){return Up(this,n),i(5,r=t)}.bind(this)),l}.bind(this),f=Rn,a=function(){var n=this;return Up(this,o),f(),f=zn(s,function(t){return Up(this,n),i(6,e=t)}.bind(this)),s}.bind(this);n.$$.on_destroy.push(function(){return Up(this,o),u()}.bind(this)),n.$$.on_destroy.push(function(){return Up(this,o),f()}.bind(this));var s=t.replyMessage;a();var l=t.fileList;c();var h=t.element,v=[],d=[];function y(n){var t=this;l.update(function(i){return Up(this,t),i.splice(i.indexOf(n),1),i}.bind(this))}var p=function(){Up(this,o),s.set(undefined)}.bind(this),b=function(){Up(this,o),l.set([])}.bind(this),m=function(n){Up(this,o),y(n)}.bind(this),w=function(n){Up(this,o),y(n)}.bind(this);return n.$$set=function(n){Up(this,o),"replyMessage"in n&&a(i(1,s=n.replyMessage)),"fileList"in n&&c(i(2,l=n.fileList)),"element"in n&&i(0,h=n.element)}.bind(this),n.$$.update=function(){var t=this;Up(this,o),56&n.$$.dirty&&(i(3,v=[]),i(4,d=[]),r.length&&r.forEach(function(n){Up(this,t),n.type.match(/image.*/)?v.push(n):d.push(n)}.bind(this)))}.bind(this),[h,s,l,v,d,r,e,y,p,b,m,w,function(n){var t=this;Wt[n?"unshift":"push"](function(){Up(this,t),i(0,h=n)}.bind(this))}]}var Vp=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&xp(n,t)}(o,n);var t,i,r,e=Cp(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Ip(t=e.call(this)),n,Hp,Gp,Nn,{replyMessage:1,fileList:2,element:0}),t}return t=o,i&&Ap(t.prototype,i),r&&Ap(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Qp=Vp;function Yp(n){return Yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Yp(n)}function Jp(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Kp(n,t){return Kp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Kp(n,t)}function Xp(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=tb(n);if(t){var e=tb(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Zp(this,i)}}function Zp(n,t){if(t&&("object"===Yp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nb(n)}function nb(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function tb(n){return tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tb(n)}function ib(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return rb(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return rb(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rb(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function eb(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ob(n){var t,i,r,e;return{c:function(){t=vt("div"),i=vt("div"),r=vt("div"),e=yt(n[2]),_t(r,"class","alert alert_danger"),_t(i,"class","chat-editor__errors-wrapper"),_t(t,"class","chat-editor__errors")},m:function(n,o){st(n,t,o),ot(t,i),ot(i,r),ot(r,e)},p:function(n,t){4&t&&St(e,n[2])},d:function(n){n&&lt(t)}}}function ub(n){var t,i,e,o,u,c,f,a,s,l,h,v,d,y,b,m,w,_,g,S,j,O=this,E=r("add")+"";function T(t){n[16](t)}var k={replyMessage:Wl,fileList:ql};return void 0!==n[4]&&(k.element=n[4]),u=new Qp({props:k}),Wt.push(function(){return eb(this,O),di(u,"element",T)}.bind(this)),{c:function(){t=vt("div"),i=vt("form"),e=vt("fieldset"),o=vt("div"),yi(u.$$.fragment),f=pt(),a=vt("div"),s=vt("input"),(l=vt("span")).innerHTML='<i class="icons-chat icons-chat_attach"></i>',h=pt(),v=vt("textarea"),d=pt(),y=vt("div"),b=vt("button"),m=vt("i"),w=yt(E),_t(s,"title",r("attachFileTitle")+": "+p.join(", ")),_t(s,"type","file"),s.multiple=!0,_t(s,"name","attachedFile"),_t(s,"accept","."+p.join(",.")),_t(l,"class","button"),_t(a,"class","chat-attach-form box-file"),_t(v,"class","chat-editor__textarea"),_t(v,"rows","1"),_t(v,"placeholder",r("message")),_t(m,"class","icons-chat icons-chat_send"),_t(b,"type","button"),_t(b,"title",r("add")),_t(b,"class","button button_green button_small"+(xE?" button_widget":"")),_t(y,"class","chat-editor__tools"),_t(o,"class","chat-editor__fieldset-wrapper"),_t(e,"class","chat-editor__fieldset"),e.disabled=n[6],_t(i,"class","chat-editor__form"),_t(i,"enctype","multipart/form-data"),_t(t,"class",_="chat-editor ui"+(n[6]?" chat-editor_disabled":""))},m:function(r,c){st(r,t,c),ot(t,i),ot(i,e),ot(e,o),pi(u,o,null),ot(o,f),ot(o,a),ot(a,s),ot(a,l),ot(o,h),ot(o,v),jt(v,n[7]),n[18](v),ot(o,d),ot(o,y),ot(y,b),ot(b,m),ot(b,w),n[19](t),g=!0,S||(j=[mt(s,"change",n[11]),mt(v,"input",n[17]),mt(v,"keydown",n[9]),mt(v,"keyup",n[10]),mt(b,"click",n[8]),mt(i,"submit",n[8])],S=!0)},p:function(n,i){var r=this,o={};!c&&16&i&&(c=!0,o.element=n[4],Jt(function(){return eb(this,r),c=!1}.bind(this))),u.$set(o),128&i&&jt(v,n[7]),(!g||64&i)&&(e.disabled=n[6]),(!g||64&i&&_!==(_="chat-editor ui"+(n[6]?" chat-editor_disabled":"")))&&_t(t,"class",_)},i:function(n){g||(fi(u.$$.fragment,n),g=!0)},o:function(n){ai(u.$$.fragment,n),g=!1},d:function(i){i&&lt(t),bi(u),n[18](null),n[19](null),S=!1,Dn(j)}}}function cb(n){var t,i,r,e=n[2]&&ob(n),o=n[5]&&ub(n);return{c:function(){e&&e.c(),t=pt(),o&&o.c(),i=bt()},m:function(n,u){e&&e.m(n,u),st(n,t,u),o&&o.m(n,u),st(n,i,u),r=!0},p:function(n,r){var u=this,c=ib(r,1)[0];n[2]?e?e.p(n,c):((e=ob(n)).c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null),n[5]?o?(o.p(n,c),32&c&&fi(o,1)):((o=ub(n)).c(),fi(o,1),o.m(i.parentNode,i)):o&&(ui(),ai(o,1,1,function(){eb(this,u),o=null}.bind(this)),ci())},i:function(n){r||(fi(o),r=!0)},o:function(n){ai(o),r=!1},d:function(n){e&&e.d(n),n&&lt(t),o&&o.d(n),n&&lt(i)}}}function fb(n){var t=this;n.length&&ql.update(function(i){eb(this,t);for(var r=0,e=n.length;r<e;r++)i.push(n[r]);return i}.bind(this))}function ab(n,i,e){var o,u,c,f,a=this,s=Rn,l=function(){var n=this;return eb(this,a),s(),s=zn(h,function(t){return eb(this,n),e(14,o=t)}.bind(this)),h}.bind(this);qn(n,ql,function(n){return eb(this,a),e(20,u=n)}.bind(this)),qn(n,Wl,function(n){return eb(this,a),e(15,c=n)}.bind(this)),qn(n,Fl,function(n){return eb(this,a),e(7,f=n)}.bind(this)),n.$$.on_destroy.push(function(){return eb(this,a),s()}.bind(this));var h=i.chat;l();var v,d,b,m,g=i.resizeList,E=!1,T="",C=!1;function R(){window.fz&&(o.type===S?window.fz("track","MQL5+Chat+Message+Sent"):o.type===O?window.fz("track","MQL5+Chat+Channel+Message+Sent"):o.type===j&&window.fz("track","MQL5+Chat+Group+Message+Sent"))}function I(){var n=this;Wl.set(undefined),Fl.set(""),ql.set([]),Qt().then(function(){eb(this,n),M(),g(),d&&d.focus()}.bind(this))}function M(){if(window.getComputedStyle){e(3,v.style.height=KE+"px",v),e(3,v.style.flexBasis=KE+"px",v);var n=Math.max(KE,Math.min(4+d.scrollHeight,200));e(4,b.style.bottom="".concat(n+1,"px"),b),e(3,v.style.height=n+"px",v),e(3,v.style.flexBasis=n+"px",v)}}function P(){var n=this;if(!C){var i=Wn(Fl).trim();if(!(i.length>4e3))return c||u.length?!c||i&&i.length?1!==u.length||i.length||c?i.length?void function(){var n=this;e(6,C=!0);var i=Wn(Fl).trim(),f=undefined;if(c){f=[];var a="";if(c.recType===_.Ln){var s=c.data.text.indexOf("\n");a=s>0?c.data.text.substring(0,Math.min(s,100)):c.data.text.substring(0,100)}f.push({tagType:k,citedId:c.messageId,citedType:c.recType,citedUser:c.authorId,citedAuthor:c.authorName,citedText:a})}u&&u.length?eh(u,o.chatId,function(t){eb(this,n),wr(t)}.bind(this)).then(function(r){var u=this;eb(this,n),f||(f=[]),e(2,T=r.errors.join(". ")),f.push({tagType:A,type:x,linkedIds:r.uploaded}),Jj(o.chatId,i,f).then(function(){eb(this,u),R(),e(6,C=!1),I()}.bind(this))["catch"](function(n){eb(this,u),e(2,T=n.error),e(6,C=!1),y.error(t.User,T,"Add message")}.bind(this))}.bind(this)):i?Jj(o.chatId,i,f).then(function(){eb(this,n),R(),e(6,C=!1),I()}.bind(this))["catch"](function(i){eb(this,n),e(2,T=i.error),e(6,C=!1),y.error(t.User,T,"Add message")}.bind(this)):(e(6,C=!1),e(2,T=r("emptyMessageError")))}():void e(2,T=r("emptyMessageError")):(e(6,C=!0),void eh(u,o.chatId,undefined).then(function(t){eb(this,n),e(2,T=t.errors.join(". ")),t.uploaded.length&&R(),e(6,C=!1),I()}.bind(this))["catch"](function(i){eb(this,n),e(2,T=i),e(6,C=!1),y.error(t.User,i,"Add message files")}.bind(this))):void e(2,T=r("emptyMessageError")):void(i&&i.length?(e(6,C=!0),Jj(o.chatId,i,undefined).then(function(){eb(this,n),R(),e(6,C=!1),I()}.bind(this))["catch"](function(i){eb(this,n),e(2,T=i.error),e(6,C=!1),y.error(t.User,T,"Add message")}.bind(this))):e(2,T=r("emptyMessageError")));e(2,T=r("longMessageError",4e3))}}return Nt(function(){eb(this,a),function(){var n=Wn(iT);n&&Gl[n.chatId]?(Wl.set(Gl[n.chatId].reply),ql.set(Gl[n.chatId].files),Fl.set(Gl[n.chatId].text)):(Wl.set(undefined),ql.set([]),Fl.set(""))}(),d&&(d.focus(),v&&(function(n,t,i){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:p;if(n){var e,o=Zl({classList:["drag-and-drop","hidden"],listeners:{dragover:f,dragenter:f,dragleave:a,drop:s},children:[Zl({classList:["drag-and-drop__title"],children:Fr("dragAndDrop")})]}),u=Zl({classList:["drag-and-drop__errors"]});n.appendChild(o),n.appendChild(u),n.addEventListener("dragover",f),n.addEventListener("dragenter",f)}function c(n){var t=this,e=[];return(n=th(n))&&n.length?(n.forEach(function(n){nh(this,t);var o=Vl(n.name);~r.indexOf(o)?e.push(n):i&&i("".concat(Fr("errorInvalidExtension"),": ").concat(n.name))}.bind(this)),e):e}function f(n){n&&(n.stopPropagation(),n.preventDefault(),n.dataTransfer&&n.dataTransfer.items&&n.dataTransfer.items.length?(clearTimeout(e),n.dataTransfer.dropEffect="copy",o.classList.remove("hidden")):a())}function a(){var n=this;clearTimeout(e),e=setTimeout(function(){nh(this,n),o.classList.add("hidden")}.bind(this),100)}function s(n){if(n){n.stopPropagation(),n.preventDefault();var i=n.dataTransfer;if(i&&i.files&&i.files.length){var r=i.files;t&&t(c(r)),a()}else a()}}}(v,fb,(function(n){e(2,T=n)}),p),function(n,t,i){var r=this,e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:p;function o(n){var t=this,r=[];return(n=Yl(n))&&n.length?(n.forEach(function(n){Ql(this,t);var o=Vl(n.name);~e.indexOf(o)?r.push(n):i&&i("".concat(Fr("errorInvalidExtension"),": ").concat(n.name))}.bind(this)),r):r}n&&n.addEventListener("paste",function(n){if(Ql(this,r),n){var i=n.clipboardData;if(i&&i.files&&i.files.length){var e=i.files;t&&t(o(e))}}}.bind(this))}(d,fb,(function(n){e(2,T=n)}),p)))}.bind(this)),n.$$set=function(n){eb(this,a),"chat"in n&&l(e(0,h=n.chat)),"resizeList"in n&&e(12,g=n.resizeList)}.bind(this),n.$$.update=function(){var t=this;if(eb(this,a),16384&n.$$.dirty){var i=o.authorId===w;e(5,E=!(i||o.isClosed||!(o.perms&U.nt)||AE))}8196&n.$$.dirty&&T&&(clearTimeout(m),e(13,m=setTimeout(function(){eb(this,t),e(2,T="")}.bind(this),5e3))),32770&n.$$.dirty&&c&&d&&d.focus()}.bind(this),[h,d,T,v,b,E,C,f,P,function(n){return"Enter"!==n.key||!n.ctrlKey||(P(),!1)},function(){M(),g()},function(n){var t=this,i=n.target;if(i&&i.files){var o=i.files;ql.update(function(n){eb(this,t);for(var i=0,u=o.length;i<u;i++)n.push(o[i]);return n.length>8&&(n.splice(8),e(2,T=r("maxNumberFiles",8))),n}.bind(this)),i.value="",i.type="",i.type="file"}},g,m,o,c,function(n){e(4,b=n)},function(){f=this.value,Fl.set(f)},function(n){var t=this;Wt[n?"unshift":"push"](function(){eb(this,t),e(1,d=n)}.bind(this))},function(n){var t=this;Wt[n?"unshift":"push"](function(){eb(this,t),e(3,v=n)}.bind(this))}]}var sb=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Kp(n,t)}(o,n);var t,i,r,e=Xp(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(nb(t=e.call(this)),n,ab,cb,Nn,{chat:0,resizeList:12}),t}return t=o,i&&Jp(t.prototype,i),r&&Jp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),lb=sb;function hb(n){return hb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hb(n)}function vb(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function db(n,t){return db=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},db(n,t)}function yb(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=mb(n);if(t){var e=mb(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return pb(this,i)}}function pb(n,t){if(t&&("object"===hb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bb(n)}function bb(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function mb(n){return mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mb(n)}function wb(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return _b(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _b(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _b(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function gb(n){var t,i,r,e,o,u,c,f,a=Kr({dateTime:n[0].date,type:"time"})+"";return{c:function(){t=vt("div"),i=vt("div"),r=yt(a),o=pt(),u=vt("div"),c=vt("div"),f=yt(n[1]),_t(i,"class","chat-message__date"),_t(i,"title",e=n[0].dateText),_t(c,"class","chat-message__buble"),_t(u,"class","chat-message__box"),_t(t,"class","chat-message chat-message_system")},m:function(n,e){st(n,t,e),ot(t,i),ot(i,r),ot(t,o),ot(t,u),ot(u,c),ot(c,f)},p:function(n,t){var o=wb(t,1)[0];1&o&&a!==(a=Kr({dateTime:n[0].date,type:"time"})+"")&&St(r,a),1&o&&e!==(e=n[0].dateText)&&_t(i,"title",e),2&o&&St(f,n[1])},i:Rn,o:Rn,d:function(n){n&&lt(t)}}}function Sb(n,t,i){var e=this,o=t.message,u=t.chat,c="",f=u.type===O;switch(o.data.type){case E.Hn:c=o.data.userId===vr?r("systemYouInvited",u.name):r("systemUserInvited",o.authorName,o.data.userName);break;case E.Vn:c=o.authorId===o.data.userId?r("systemChatUserLeft",o.data.userName):r(f?"systemChannelUserRemoved":"systemChatUserRemoved",o.authorName,o.data.userName);break;case E.Qn:c=f?o.data.changeValue?r("systemChannelPublic",o.authorName):r("systemChannelPrivate",o.authorName):o.data.changeValue?r("systemChatPublic",o.authorName):r("systemChatPrivate",o.authorName);break;case E.Yn:c=o.data.changeValue?r("systemChatLimited",o.authorName):r("systemChatUnlimited",o.authorName);break;case E.Jn:c=f?o.data.changeValue?r("systemChannelClosed"):r("systemChannelReopened"):o.data.changeValue?r("systemChatClosed",o.authorName):r("systemChatReopened",o.authorName);break;case E.Kn:c=f?r("systemChannelRename",'"'+o.data.name+'"'):r("systemChatRename",o.authorName,'"'+o.data.name+'"');break;case E.Xn:c=f?r("systemChannelCreate",'"'+o.data.name+'"'):r("systemChatCreate",o.authorName,'"'+o.data.name+'"');break;default:c=""}return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,e),"message"in n&&i(0,o=n.message),"chat"in n&&i(2,u=n.chat)}.bind(this),[o,c,u]}var jb=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&db(n,t)}(o,n);var t,i,r,e=yb(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(bb(t=e.call(this)),n,Sb,gb,Nn,{message:0,chat:2}),t}return t=o,i&&vb(t.prototype,i),r&&vb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Ob=jb;function Eb(n){return Eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Eb(n)}function Tb(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function kb(n,t){return kb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},kb(n,t)}function Ab(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Rb(n);if(t){var e=Rb(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return xb(this,i)}}function xb(n,t){if(t&&("object"===Eb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cb(n)}function Cb(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Rb(n){return Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rb(n)}function Ib(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Mb(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Ub(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ub(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ub(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Pb(n,t,i){var r=n.slice();return r[21]=t[i],r}function Db(n){var t,i;return(t=new $o({props:{$$slots:{buttons:[zb],content:[Lb],title:[Nb]},$$scope:{ctx:n}}})).$on("close",n[18]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};16777247&i&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function Bb(n){var t,i;return(t=new $o({props:{withButtons:!1,$$slots:{content:[qb],title:[Wb]},$$scope:{ctx:n}}})).$on("close",n[14]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};16777312&i&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function Nb(n){var t;return{c:function(){(t=vt("span")).textContent="".concat(r("complaintTitle")),_t(t,"slot","title")},m:function(n,i){st(n,t,i)},p:Rn,d:function(n){n&&lt(t)}}}function $b(n){var t,i,e,o,u,c,f=r(n[21].name)+"";return{c:function(){t=vt("input"),i=pt(),e=vt("label"),o=yt(f),_t(t,"name","complaintType"),t.__value=n[21].num,t.value=t.__value,_t(t,"class","radio"),_t(t,"type","radio"),_t(t,"id","complaintType"+n[21].num),n[16][0].push(t),_t(e,"for","complaintType"+n[21].num)},m:function(r,f){st(r,t,f),t.checked=t.__value===n[2],st(r,i,f),st(r,e,f),ot(e,o),u||(c=mt(t,"change",n[15]),u=!0)},p:function(n,i){4&i&&(t.checked=t.__value===n[2])},d:function(r){r&&lt(t),n[16][0].splice(n[16][0].indexOf(t),1),r&&lt(i),r&&lt(e),u=!1,c()}}}function Lb(n){for(var t,i,e,o,u,c,f,a,s,l,h,v,d,y,p,b,m,w,_,g,S,j,E,T,k,A,x=(n[1].type===O?n[1].name:n[0].authorName)+"",C=r("comment")+"",R=n[4].length+"",I=Hb,M=[],U=0;U<I.length;U+=1)M[U]=$b(Pb(n,I,U));return{c:function(){t=vt("div"),i=vt("form"),e=vt("div"),o=vt("i"),u=pt(),c=vt("b"),f=yt(x),a=yt(":"),s=pt(),l=yt(n[3]),h=pt(),v=vt("div");for(var r=0;r<M.length;r+=1)M[r].c();d=pt(),y=vt("div"),p=vt("div"),b=yt(C),m=pt(),w=vt("div"),_=yt(R),g=yt("/"),S=yt(Gb),j=pt(),E=vt("div"),T=vt("textarea"),_t(o,"class","icons-ux icons-ux_reply"),_t(e,"class","chat-complaint__message"),_t(v,"class","chat-complaint__type-list"),_t(w,"class","chat-complaint__count"),_t(w,"id","complaint_char_counter"),_t(p,"class","chat-complaint__title"),_t(T,"class","textarea"),_t(T,"name","complaint_text"),_t(T,"rows","3"),_t(E,"class","complaint-window__editor"),_t(y,"class","chat-complaint__item"),_t(i,"class","chat-complaint"),_t(t,"slot","content")},m:function(r,O){st(r,t,O),ot(t,i),ot(i,e),ot(e,o),ot(e,u),ot(e,c),ot(c,f),ot(c,a),ot(e,s),ot(e,l),ot(i,h),ot(i,v);for(var x=0;x<M.length;x+=1)M[x].m(v,null);ot(i,d),ot(i,y),ot(y,p),ot(p,b),ot(p,m),ot(p,w),ot(w,_),ot(w,g),ot(w,S),ot(y,j),ot(y,E),ot(E,T),jt(T,n[4]),k||(A=[mt(T,"input",n[17]),mt(T,"input",n[9])],k=!0)},p:function(n,t){if(3&t&&x!==(x=(n[1].type===O?n[1].name:n[0].authorName)+"")&&St(f,x),8&t&&St(l,n[3]),4&t){var i;for(I=Hb,i=0;i<I.length;i+=1){var r=Pb(n,I,i);M[i]?M[i].p(r,t):(M[i]=$b(r),M[i].c(),M[i].m(v,null))}for(;i<M.length;i+=1)M[i].d(1);M.length=I.length}16&t&&R!==(R=n[4].length+"")&&St(_,R),16&t&&jt(T,n[4])},d:function(n){n&&lt(t),ht(M,n),k=!1,Dn(A)}}}function zb(n){var t,i,e,o;return{c:function(){t=vt("span"),(i=vt("button")).textContent="".concat(r("add")),_t(i,"class","button button_green qa-dialog-ok"),_t(t,"slot","buttons")},m:function(r,u){st(r,t,u),ot(t,i),e||(o=mt(i,"click",n[10]),e=!0)},p:Rn,d:function(n){n&&lt(t),e=!1,o()}}}function Wb(n){var t,i;return{c:function(){t=vt("span"),i=yt(n[5]),_t(t,"slot","title")},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,t){32&t&&St(i,n[5])},d:function(n){n&&lt(t)}}}function qb(n){var t,i,r;return{c:function(){t=vt("div"),i=vt("div"),r=yt(n[6]),_t(i,"class","chat-alert-text"),_t(t,"slot","content")},m:function(n,e){st(n,t,e),ot(t,i),ot(i,r)},p:function(n,t){64&t&&St(r,n[6])},d:function(n){n&&lt(t)}}}function Fb(n){var t,i,r,e,o=[Bb,Db],u=[];function c(n,t){return n[5]?0:1}return t=c(n),i=u[t]=o[t](n),{c:function(){i.c(),r=bt()},m:function(n,i){u[t].m(n,i),st(n,r,i),e=!0},p:function(n,e){var f=this,a=Mb(e,1)[0],s=t;(t=c(n))===s?u[t].p(n,a):(ui(),ai(u[s],1,1,function(){Ib(this,f),u[s]=null}.bind(this)),ci(),(i=u[t])?i.p(n,a):(i=u[t]=o[t](n)).c(),fi(i,1),i.m(r.parentNode,r))},i:function(n){e||(fi(i),e=!0)},o:function(n){ai(i),e=!1},d:function(n){u[t].d(n),n&&lt(r)}}}var Gb=150,Hb=[{name:"spam",num:0},{name:"abuse",num:1},{name:"advert",num:2},{name:"complaintOther",num:500}];function Vb(n,t,i){var e,o,u=this,c=t.message,f=t.chat,a=0,s="",l="",h="",v="",d="",y="",p="",b=uu(f.authorId);qn(n,b,function(n){return Ib(this,u),i(13,o=n)}.bind(this));var m=uu(c.authorId);qn(n,m,function(n){return Ib(this,u),i(12,e=n)}.bind(this));return n.$$set=function(n){Ib(this,u),"message"in n&&i(0,c=n.message),"chat"in n&&i(1,f=n.chat)}.bind(this),n.$$.update=function(){if(Ib(this,u),1&n.$$.dirty)switch(c.recType){case _.Ln:i(3,s=c.data.text);break;case _.zn:i(3,s=c.data.fileName);break;case _.Gn:c.data.text&&i(3,s=c.data.text.data.text)}2&n.$$.dirty&&(f.type===O?p=f.inviteLink?"channels/".concat(f.inviteLink):"channels/".concat(f.chatId):f.type===j&&(p="messages/".concat(f.chatId))),8192&n.$$.dirty&&o.userLogin&&(y=o.userLogin),6146&n.$$.dirty&&e.userLogin&&(i(11,d=e.userLogin),f.type===S&&(p="users/".concat(d,"/messages")))}.bind(this),[c,f,a,s,l,h,v,b,m,function(n){l.length>Gb&&(n.preventDefault(),i(4,l=l.slice(0,Gb)))},function(){var n={complaintType:a,complaintText:l,chatId:f.chatId,chatLink:p,chatAuthorLogin:y,chatAuthorName:f.authorName,chatMessage:s,chatMessageAuthorLogin:d,chatMessageAuthorName:c.authorName,chatUsersCount:f.countMembers,chatType:f.type,__signature:jE};window.Ajax.post("/complaint/new/chat",n,!1,{onready:function(){i(5,h=r("complaintTitle")),i(6,v=r("complaintSuccess"))},onerror:function(){i(5,h=r("complaintTitle")),i(6,v=r("complaintError"))}},!1,!0)},d,e,o,function(t){Lt.call(this,n,t)},function(){a=this.__value,i(2,a)},[[]],function(){l=this.value,i(4,l)},function(t){Lt.call(this,n,t)}]}var Qb=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&kb(n,t)}(o,n);var t,i,r,e=Ab(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Cb(t=e.call(this)),n,Vb,Fb,Nn,{message:0,chat:1}),t}return t=o,i&&Tb(t.prototype,i),r&&Tb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Yb=Qb;function Jb(n){return Jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Jb(n)}function Kb(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Xb(n,t){return Xb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Xb(n,t)}function Zb(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=im(n);if(t){var e=im(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return nm(this,i)}}function nm(n,t){if(t&&("object"===Jb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tm(n)}function tm(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function im(n){return im=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},im(n)}function rm(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function em(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return om(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return om(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function om(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function um(n){var t,i,e,o=n[7]&&function(n){var t,i,e,o,u,c,f=r("replyMessage")+"";return{c:function(){t=vt("div"),i=vt("a"),e=vt("i"),o=yt(f),_t(e,"class","icons-chat icons-chat_reply"),_t(i,"href","#"),_t(t,"class","chat-window-menu__item")},m:function(r,f){st(r,t,f),ot(t,i),ot(i,e),ot(i,o),u||(c=mt(i,"click",wt(n[9])),u=!0)},p:Rn,d:function(n){n&&lt(t),u=!1,c()}}}(n),u=n[5]&&function(n){var t,i,e,o,u,c,f=r("delete")+"";return{c:function(){t=vt("div"),i=vt("a"),e=vt("i"),o=yt(f),_t(e,"class","icons-chat icons-chat_delete"),_t(i,"href","#"),_t(t,"class","chat-window-menu__item chat-window-menu__item_red")},m:function(r,f){st(r,t,f),ot(t,i),ot(i,e),ot(i,o),u||(c=mt(i,"click",wt(n[10])),u=!0)},p:Rn,d:function(n){n&&lt(t),u=!1,c()}}}(n),c=n[6]&&function(n){var t,i,e,o,u,c,f=r("complaint")+"";return{c:function(){t=vt("div"),i=vt("a"),e=vt("i"),o=yt(f),_t(e,"class","icons-chat icons-chat_attention"),_t(i,"href","#"),_t(t,"class","chat-window-menu__item")},m:function(r,f){st(r,t,f),ot(t,i),ot(i,e),ot(i,o),u||(c=mt(i,"click",wt(n[11])),u=!0)},p:Rn,d:function(n){n&&lt(t),u=!1,c()}}}(n);return{c:function(){o&&o.c(),t=pt(),u&&u.c(),i=pt(),c&&c.c(),e=bt()},m:function(n,r){o&&o.m(n,r),st(n,t,r),u&&u.m(n,r),st(n,i,r),c&&c.m(n,r),st(n,e,r)},p:function(n,t){n[7]&&o.p(n,t),n[5]&&u.p(n,t),n[6]&&c.p(n,t)},d:function(n){o&&o.d(n),n&&lt(t),u&&u.d(n),n&&lt(i),c&&c.d(n),n&&lt(e)}}}function cm(n){var t,i;return(t=new Yb({props:{message:n[1],chat:n[2]}})).$on("close",n[12]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};2&i&&(r.message=n[1]),4&i&&(r.chat=n[2]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function fm(n){var t,i,r,e=n[8]&&um(n),o=n[4]&&cm(n);return{c:function(){e&&e.c(),t=pt(),o&&o.c(),i=bt()},m:function(n,u){e&&e.m(n,u),st(n,t,u),o&&o.m(n,u),st(n,i,u),r=!0},p:function(n,t){var r=this,u=em(t,1)[0];n[8]&&e.p(n,u),n[4]?o?(o.p(n,u),16&u&&fi(o,1)):((o=cm(n)).c(),fi(o,1),o.m(i.parentNode,i)):o&&(ui(),ai(o,1,1,function(){rm(this,r),o=null}.bind(this)),ci())},i:function(n){r||(fi(o),r=!0)},o:function(n){ai(o),r=!1},d:function(n){e&&e.d(n),n&&lt(t),o&&o.d(n),n&&lt(i)}}}function am(n,i,r){var e=this,o=i.showedMenu,u=i.message,a=i.chat,s=u.authorId===w,l=a.type===S,h=u.authorId===OE,v=!1,d=!1,p=!!(a.perms&U.tt)||h&&!!(l||a.perms&U.nt),b=!s&&!h,m=!s&&a.type!==O&&(l||!!(a.perms&U.nt)),g=p||b||m,j=function(){rm(this,e),function(n){Wl.set(n)}(u),r(0,o=!1)}.bind(this),E=function(){rm(this,e),r(3,v=!0),r(0,o=!1)}.bind(this),T=function(){rm(this,e),r(4,d=!0)}.bind(this),k=function(){rm(this,e),r(4,d=!1),r(0,o=!1)}.bind(this);return n.$$set=function(n){rm(this,e),"showedMenu"in n&&r(0,o=n.showedMenu),"message"in n&&r(1,u=n.message),"chat"in n&&r(2,a=n.chat)}.bind(this),n.$$.update=function(){var i=this;if(rm(this,e),14&n.$$.dirty&&v){r(3,v=!1);var o=[];if(u.recType===_.Gn&&u.data){var s=u.data;s.media&&s.media.forEach(function(n){rm(this,i),"string"==typeof n?o.push(n):o.push(n.messageId)}.bind(this)),s.files&&s.files.forEach(function(n){rm(this,i),"string"==typeof n?o.push(n):o.push(n.messageId)}.bind(this)),s.file&&s.file.forEach(function(n){rm(this,i),"string"==typeof n?o.push(n):o.push(n.messageId)}.bind(this)),s.text&&o.push(s.text.messageId)}u.tags&&u.tags.files&&u.tags.files.linkedIds.forEach(function(n){rm(this,i),o.push(n)}.bind(this)),u.linkId&&0!==parseInt(u.linkId,16)&&o.push(u.linkId),o.push(u.messageId),o.forEach(function(n){var r=this;rm(this,i),function(n,t){var i=this;return new Promise(function(r,e){var o=this;if(Qj(this,i),0!==parseInt(n,16))if(0!==parseInt(t,16))if(t)if(n){var u=cn(n),f=cn(t);Uj.send(c.T,[u,{Uint8:_.Wn},f]).then(function(n){var t=n.reader,i=n.result;Qj(this,o);var e=ye(t,i);r(e)}.bind(this))["catch"](function(n){Qj(this,o),e(n)}.bind(this))}else e("Chat id is empty");else e("Message id is empty");else e("Message id is zero");else e("Chat id is zero")}.bind(this))}(a.chatId,n).then(function(t){rm(this,r),t.result===f.Dn&&jr(n)}.bind(this))["catch"](function(n){var i=n.error;rm(this,r),y.error(t.User,i)}.bind(this))}.bind(this))}}.bind(this),[o,u,a,v,d,p,b,m,g,j,E,T,k]}var sm=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Xb(n,t)}(o,n);var t,i,r,e=Zb(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(tm(t=e.call(this)),n,am,fm,Nn,{showedMenu:0,message:1,chat:2}),t}return t=o,i&&Kb(t.prototype,i),r&&Kb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),lm=sm;function hm(n){return hm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hm(n)}function vm(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function dm(n,t){return dm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},dm(n,t)}function ym(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=mm(n);if(t){var e=mm(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return pm(this,i)}}function pm(n,t){if(t&&("object"===hm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bm(n)}function bm(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function mm(n){return mm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mm(n)}function wm(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return _m(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _m(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _m(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function gm(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Sm(n){var t,i,r,e,o=this;function u(t){n[7](t)}var c={message:n[0],chat:n[1]};return void 0!==n[3]&&(c.showedMenu=n[3]),i=new lm({props:c}),Wt.push(function(){return gm(this,o),di(i,"showedMenu",u)}.bind(this)),{c:function(){t=vt("div"),yi(i.$$.fragment),_t(t,"class","chat-dropdown-menu__list")},m:function(n,r){st(n,t,r),pi(i,t,null),e=!0},p:function(n,t){var e=this,o={};1&t&&(o.message=n[0]),2&t&&(o.chat=n[1]),!r&&8&t&&(r=!0,o.showedMenu=n[3],Jt(function(){return gm(this,e),r=!1}.bind(this))),i.$set(o)},i:function(n){e||(fi(i.$$.fragment,n),e=!0)},o:function(n){ai(i.$$.fragment,n),e=!1},d:function(n){n&&lt(t),bi(i)}}}function jm(n){var t,i,r=n[5]&&function(n){var t,i,r,e,o,u,c,f=n[3]&&Sm(n);return{c:function(){t=vt("div"),(i=vt("div")).innerHTML="<i></i><i></i><i></i>",r=pt(),f&&f.c(),_t(i,"class","chat-dropdown-menu__btn"),_t(t,"class",e="chat-dropdown-menu"+(n[3]?" chat-dropdown-menu_show":"")+(n[4]?" chat-dropdown-menu_bottom":""))},m:function(e,a){st(e,t,a),ot(t,i),ot(t,r),f&&f.m(t,null),n[8](t),o=!0,u||(c=mt(i,"click",n[6]),u=!0)},p:function(n,i){var r=this;n[3]?f?(f.p(n,i),8&i&&fi(f,1)):((f=Sm(n)).c(),fi(f,1),f.m(t,null)):f&&(ui(),ai(f,1,1,function(){gm(this,r),f=null}.bind(this)),ci()),(!o||24&i&&e!==(e="chat-dropdown-menu"+(n[3]?" chat-dropdown-menu_show":"")+(n[4]?" chat-dropdown-menu_bottom":"")))&&_t(t,"class",e)},i:function(n){o||(fi(f),o=!0)},o:function(n){ai(f),o=!1},d:function(i){i&&lt(t),f&&f.d(),n[8](null),u=!1,c()}}}(n);return{c:function(){r&&r.c(),t=bt()},m:function(n,e){r&&r.m(n,e),st(n,t,e),i=!0},p:function(n,t){var i=wm(t,1)[0];n[5]&&r.p(n,i)},i:function(n){i||(fi(r),i=!0)},o:function(n){ai(r),i=!1},d:function(n){r&&r.d(n),n&&lt(t)}}}function Om(n,t,i){var r,e=this,o=t.message,u=t.chat,c=!1,f=o.authorId===w,a=u.type===S,s=o.authorId===vr,l=!1,h=!!(u.perms&U.tt)||s&&!!(a||u.perms&U.nt),v=!f&&!s,d=!f&&u.type!==O&&(a||!!(u.perms&U.nt)),y=h||v||d;function p(n){if(r){var t=n.target;t&&!r.contains(t)&&i(3,c=!1)}}Nt(function(){var n=this;return gm(this,e),document.addEventListener("click",p),function(){gm(this,n),document.removeEventListener("click",p)}.bind(this)}.bind(this));var b=function(){return gm(this,e),i(3,c=!c)}.bind(this);return n.$$set=function(n){gm(this,e),"message"in n&&i(0,o=n.message),"chat"in n&&i(1,u=n.chat)}.bind(this),n.$$.update=function(){if(gm(this,e),12&n.$$.dirty&&r&&c){var t=r.parentNode;if(t){var o=t.parentNode;if(o){var u=o.getBoundingClientRect(),f=t.getBoundingClientRect();i(4,l=u.bottom-f.top<150)}}}}.bind(this),[o,u,r,c,l,y,b,function(n){i(3,c=n)},function(n){var t=this;Wt[n?"unshift":"push"](function(){gm(this,t),i(2,r=n)}.bind(this))}]}var Em=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&dm(n,t)}(o,n);var t,i,r,e=ym(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(bm(t=e.call(this)),n,Om,jm,Nn,{message:0,chat:1}),t}return t=o,i&&vm(t.prototype,i),r&&vm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Tm=Em;function km(n){return km="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},km(n)}function Am(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function xm(n,t){return xm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},xm(n,t)}function Cm(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Mm(n);if(t){var e=Mm(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Rm(this,i)}}function Rm(n,t){if(t&&("object"===km(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Im(n)}function Im(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Mm(n){return Mm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mm(n)}function Um(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Pm(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Pm(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pm(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Dm(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Bm(n,t,i){var r=n.slice();return r[1]=t[i],r}function Nm(n,t,i){var r=n.slice();return r[4]=t[i],r}function $m(n){var t,i;return t=new Tp({props:{message:n[0].data.quote}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.message=n[0].data.quote),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function Lm(n){for(var t,i,r=this,e=[],o=new Map,u=n[0].data.media,c=function(n){return Dm(this,r),n[4].messageId}.bind(this),f=0;f<u.length;f+=1){var a=Nm(n,u,f),s=c(a);o.set(s,e[f]=zm(s,a))}return{c:function(){t=vt("div");for(var n=0;n<e.length;n+=1)e[n].c();_t(t,"class","chat-media-list")},m:function(n,r){st(n,t,r);for(var o=0;o<e.length;o+=1)e[o].m(t,null);i=!0},p:function(n,i){1&i&&(u=n[0].data.media,ui(),e=vi(e,i,c,1,n,u,o,t,hi,zm,null,Nm),ci())},i:function(n){if(!i){for(var t=0;t<u.length;t+=1)fi(e[t]);i=!0}},o:function(n){for(var t=0;t<e.length;t+=1)ai(e[t]);i=!1},d:function(n){n&&lt(t);for(var i=0;i<e.length;i+=1)e[i].d()}}}function zm(n,t){var i,r,e;return r=new kd({props:{data:t[4].data}}),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),e=!0},p:function(n,i){t=n;var e={};1&i&&(e.data=t[4].data),r.$set(e)},i:function(n){e||(fi(r.$$.fragment,n),e=!0)},o:function(n){ai(r.$$.fragment,n),e=!1},d:function(n){n&&lt(i),bi(r,n)}}}function Wm(n){var t,i;return t=new ip({props:{message:n[0].data.text}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.message=n[0].data.text),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function qm(n){for(var t,i,r=this,e=[],o=new Map,u=n[0].data.files,c=function(n){return Dm(this,r),n[1].messageId}.bind(this),f=0;f<u.length;f+=1){var a=Bm(n,u,f),s=c(a);o.set(s,e[f]=Fm(s,a))}return{c:function(){t=vt("div");for(var n=0;n<e.length;n+=1)e[n].c();_t(t,"class","chat-file-list")},m:function(n,r){st(n,t,r);for(var o=0;o<e.length;o+=1)e[o].m(t,null);i=!0},p:function(n,i){1&i&&(u=n[0].data.files,ui(),e=vi(e,i,c,1,n,u,o,t,hi,Fm,null,Bm),ci())},i:function(n){if(!i){for(var t=0;t<u.length;t+=1)fi(e[t]);i=!0}},o:function(n){for(var t=0;t<e.length;t+=1)ai(e[t]);i=!1},d:function(n){n&&lt(t);for(var i=0;i<e.length;i+=1)e[i].d()}}}function Fm(n,t){var i,r,e;return r=new gh({props:{data:t[1].data}}),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),e=!0},p:function(n,i){t=n;var e={};1&i&&(e.data=t[1].data),r.$set(e)},i:function(n){e||(fi(r.$$.fragment,n),e=!0)},o:function(n){ai(r.$$.fragment,n),e=!1},d:function(n){n&&lt(i),bi(r,n)}}}function Gm(n){var t,i,r,e,o,u=n[0].data.quote&&$m(n),c=n[0].data.media&&Lm(n),f=n[0].data.text&&Wm(n),a=n[0].data.files&&qm(n);return{c:function(){u&&u.c(),t=pt(),c&&c.c(),i=pt(),f&&f.c(),r=pt(),a&&a.c(),e=bt()},m:function(n,s){u&&u.m(n,s),st(n,t,s),c&&c.m(n,s),st(n,i,s),f&&f.m(n,s),st(n,r,s),a&&a.m(n,s),st(n,e,s),o=!0},p:function(n,o){var s=this,l=Um(o,1)[0];n[0].data.quote?u?(u.p(n,l),1&l&&fi(u,1)):((u=$m(n)).c(),fi(u,1),u.m(t.parentNode,t)):u&&(ui(),ai(u,1,1,function(){Dm(this,s),u=null}.bind(this)),ci()),n[0].data.media?c?(c.p(n,l),1&l&&fi(c,1)):((c=Lm(n)).c(),fi(c,1),c.m(i.parentNode,i)):c&&(ui(),ai(c,1,1,function(){Dm(this,s),c=null}.bind(this)),ci()),n[0].data.text?f?(f.p(n,l),1&l&&fi(f,1)):((f=Wm(n)).c(),fi(f,1),f.m(r.parentNode,r)):f&&(ui(),ai(f,1,1,function(){Dm(this,s),f=null}.bind(this)),ci()),n[0].data.files?a?(a.p(n,l),1&l&&fi(a,1)):((a=qm(n)).c(),fi(a,1),a.m(e.parentNode,e)):a&&(ui(),ai(a,1,1,function(){Dm(this,s),a=null}.bind(this)),ci())},i:function(n){o||(fi(u),fi(c),fi(f),fi(a),o=!0)},o:function(n){ai(u),ai(c),ai(f),ai(a),o=!1},d:function(n){u&&u.d(n),n&&lt(t),c&&c.d(n),n&&lt(i),f&&f.d(n),n&&lt(r),a&&a.d(n),n&&lt(e)}}}function Hm(n,t,i){var r=this,e=t.message;return n.$$set=function(n){Dm(this,r),"message"in n&&i(0,e=n.message)}.bind(this),[e]}var Vm=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&xm(n,t)}(o,n);var t,i,r,e=Cm(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Im(t=e.call(this)),n,Hm,Gm,Nn,{message:0}),t}return t=o,i&&Am(t.prototype,i),r&&Am(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Qm=Vm;function Ym(n){return Ym="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ym(n)}function Jm(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Km(n,t){return Km=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Km(n,t)}function Xm(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=tw(n);if(t){var e=tw(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Zm(this,i)}}function Zm(n,t){if(t&&("object"===Ym(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nw(n)}function nw(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function tw(n){return tw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tw(n)}function iw(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return rw(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return rw(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rw(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function ew(n){var t,i;return t=new gh({props:{data:n[0].data}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0].data),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function ow(n){var t,i;return t=new kd({props:{data:n[0].data}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.data=n[0].data),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function uw(n){var t,i,r,e,o=[ow,ew],u=[];return t=function(n,t){return(n[3]&&n[2]<nn||n[4])&&n[1].preview?0:1}(n),i=u[t]=o[t](n),{c:function(){i.c(),r=bt()},m:function(n,i){u[t].m(n,i),st(n,r,i),e=!0},p:function(n,t){var r=iw(t,1)[0];i.p(n,r)},i:function(n){e||(fi(i),e=!0)},o:function(n){ai(i),e=!1},d:function(n){u[t].d(n),n&&lt(r)}}}function cw(n,t,i){var r=this,e=t.message,o=e.data,u=o.fileSize,c=0===o.mime.toLowerCase().indexOf("image"),f=0===o.mime.toLowerCase().indexOf("video");return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,r),"message"in n&&i(0,e=n.message)}.bind(this),[e,o,u,c,f]}var fw=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Km(n,t)}(o,n);var t,i,r,e=Xm(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(nw(t=e.call(this)),n,cw,uw,Nn,{message:0}),t}return t=o,i&&Jm(t.prototype,i),r&&Jm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),aw=fw;function sw(n){return sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},sw(n)}function lw(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function hw(n,t){return hw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},hw(n,t)}function vw(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=pw(n);if(t){var e=pw(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return dw(this,i)}}function dw(n,t){if(t&&("object"===sw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yw(n)}function yw(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function pw(n){return pw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pw(n)}function bw(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function mw(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return ww(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ww(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ww(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function _w(n){var t,i;return{c:function(){t=vt("span"),i=yt(n[1]),Ot(t,"color",n[2])},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,r){2&r&&St(i,n[1]),4&r&&Ot(t,"color",n[2])},d:function(n){n&&lt(t)}}}function gw(n){var t,i;return{c:function(){t=vt("a"),i=yt(n[1]),_t(t,"href",n[3]),_t(t,"target","_blank"),Ot(t,"color",n[2])},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,r){2&r&&St(i,n[1]),8&r&&_t(t,"href",n[3]),4&r&&Ot(t,"color",n[2])},d:function(n){n&&lt(t)}}}function Sw(n){var t;function i(n,t){return n[3]?gw:_w}var r=i(n),e=r(n);return{c:function(){t=vt("div"),e.c(),_t(t,"class","chat-message__name")},m:function(n,i){st(n,t,i),e.m(t,null)},p:function(n,o){var u=mw(o,1)[0];r===(r=i(n))&&e?e.p(n,u):(e.d(1),(e=r(n))&&(e.c(),e.m(t,null)))},i:Rn,o:Rn,d:function(n){n&&lt(t),e.d()}}}function jw(n,t,i){var e,o=this,u=Rn,c=function(){var n=this;return bw(this,o),u(),u=zn(f,function(t){return bw(this,n),i(7,e=t)}.bind(this)),f}.bind(this);n.$$.on_destroy.push(function(){return bw(this,o),u()}.bind(this));var f=t.data;c();var a=t.chat,s="",l="#4a76b8",h=!1,v=!1,d="";return n.$$set=function(n){bw(this,o),"data"in n&&c(i(0,f=n.data)),"chat"in n&&i(4,a=n.chat)}.bind(this),n.$$.update=function(){bw(this,o),240&n.$$.dirty&&(i(5,h=e.userId===w),e.userLogin&&!h?i(3,d="/".concat(TE,"/users/").concat(e.userLogin)):i(3,d=""),i(1,s=e.userName||""),e.isDeleted&&i(1,s=r("deletedAccount")),i(6,v=e.userId===vr),h?i(2,l="#4A76B8"):a.type===S?i(2,l=v?"#007700":"#d38900"):i(2,l=Rc(an(e.userId),95,20)))}.bind(this),[f,s,l,d,a,h,v,e]}var Ow=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&hw(n,t)}(o,n);var t,i,r,e=vw(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(yw(t=e.call(this)),n,jw,Sw,Nn,{data:0,chat:4}),t}return t=o,i&&lw(t.prototype,i),r&&lw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Ew=Ow;function Tw(n){return Tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Tw(n)}function kw(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Aw(n,t){return Aw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Aw(n,t)}function xw(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Iw(n);if(t){var e=Iw(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Cw(this,i)}}function Cw(n,t){if(t&&("object"===Tw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Rw(n)}function Rw(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Iw(n){return Iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Iw(n)}function Mw(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Uw(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Pw(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Pw(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pw(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Dw(n){var t,i,r=n[1][0]+"";return{c:function(){t=vt("span"),i=yt(r),_t(t,"class","chat-avatar__text")},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,t){2&t&&r!==(r=n[1][0]+"")&&St(i,r)},d:function(n){n&&lt(t)}}}function Bw(n){var t,i;return{c:function(){$n((t=vt("img")).src,i=n[4])||_t(t,"src",i),_t(t,"alt",""),_t(t,"title",n[1]),_t(t,"width",n[0]),_t(t,"height",n[0]),_t(t,"loading","lazy")},m:function(n,i){st(n,t,i)},p:function(n,r){16&r&&!$n(t.src,i=n[4])&&_t(t,"src",i),2&r&&_t(t,"title",n[1]),1&r&&_t(t,"width",n[0]),1&r&&_t(t,"height",n[0])},d:function(n){n&&lt(t)}}}function Nw(n){var t;function i(n,t){return n[4]?Bw:Dw}var r=i(n),e=r(n);return{c:function(){t=vt("span"),e.c(),_t(t,"class","chat-avatar"),Ot(t,"background",n[2])},m:function(n,i){st(n,t,i),e.m(t,null)},p:function(n,o){var u=Uw(o,1)[0];r===(r=i(n))&&e?e.p(n,u):(e.d(1),(e=r(n))&&(e.c(),e.m(t,null))),4&u&&Ot(t,"background",n[2])},i:Rn,o:Rn,d:function(n){n&&lt(t),e.d()}}}function $w(n,t,i){var r,e=this,o=Rn,u=function(){var n=this;return Mw(this,e),o(),o=zn(c,function(t){return Mw(this,n),i(6,r=t)}.bind(this)),c}.bind(this);n.$$.on_destroy.push(function(){return Mw(this,e),o()}.bind(this));var c,f=t.data,a=t.size,s=void 0===a?40:a,l="",h="#4a76b8",v=f.avatar;return f.type===S&&u(c=uu(f.authorId===vr?f.extraId:f.authorId)),n.$$set=function(n){Mw(this,e),"data"in n&&i(5,f=n.data),"size"in n&&i(0,s=n.size)}.bind(this),n.$$.update=function(){Mw(this,e),32&n.$$.dirty&&f.type!==S&&i(4,v=f.avatar),96&n.$$.dirty&&(r?(i(2,h=Rc(an(r.userId),undefined,undefined)),i(1,l=r.userName||"x")):(i(2,h=Rc(an(f.chatId),undefined,undefined)),i(1,l=f.name||"x"))),64&n.$$.dirty&&r&&(i(2,h=Rc(an(r.userId),undefined,undefined)),i(4,v=r.userAvatar),i(1,l=r.userName||"x"))}.bind(this),[s,l,h,c,v,f,r]}var Lw=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Aw(n,t)}(o,n);var t,i,r,e=xw(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Rw(t=e.call(this)),n,$w,Nw,Nn,{data:5,size:0}),t}return t=o,i&&kw(t.prototype,i),r&&kw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),zw=Lw;function Ww(n){return Ww="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ww(n)}function qw(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Fw(n,t){return Fw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Fw(n,t)}function Gw(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Qw(n);if(t){var e=Qw(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Hw(this,i)}}function Hw(n,t){if(t&&("object"===Ww(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vw(n)}function Vw(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Qw(n){return Qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qw(n)}function Yw(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Jw(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Kw(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Kw(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kw(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Xw(n){var t,i;return t=new Vc({props:{data:n[2],size:n[3]}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};4&i&&(r.data=n[2]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function Zw(n){var t,i;return t=new zw({props:{data:n[1],size:n[3]}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};2&i&&(r.data=n[1]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function n_(n){var t,i,r,e,o=[Zw,Xw],u=[];function c(n,t){return n[1].type===O?0:1}return i=c(n),r=u[i]=o[i](n),{c:function(){t=vt("div"),r.c(),_t(t,"class","chat-message__avatar")},m:function(n,r){st(n,t,r),u[i].m(t,null),e=!0},p:function(n,e){var f=this,a=Jw(e,1)[0],s=i;(i=c(n))===s?u[i].p(n,a):(ui(),ai(u[s],1,1,function(){Yw(this,f),u[s]=null}.bind(this)),ci(),(r=u[i])?r.p(n,a):(r=u[i]=o[i](n)).c(),fi(r,1),r.m(t,null))},i:function(n){e||(fi(r),e=!0)},o:function(n){ai(r),e=!1},d:function(n){n&&lt(t),u[i].d()}}}function t_(n,t,i){var r,e=this,o=Rn,u=function(){var n=this;return Yw(this,e),o(),o=zn(c,function(t){return Yw(this,n),i(2,r=t)}.bind(this)),c}.bind(this);n.$$.on_destroy.push(function(){return Yw(this,e),o()}.bind(this));var c=t.data;u();var f=t.chat,a=xE?20:40;return n.$$set=function(n){Yw(this,e),"data"in n&&u(i(0,c=n.data)),"chat"in n&&i(1,f=n.chat)}.bind(this),[c,f,r,a]}var i_=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Fw(n,t)}(o,n);var t,i,r,e=Gw(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Vw(t=e.call(this)),n,t_,n_,Nn,{data:0,chat:1}),t}return t=o,i&&qw(t.prototype,i),r&&qw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),r_=i_;function e_(n){return e_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e_(n)}function o_(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function u_(n,t){return u_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},u_(n,t)}function c_(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=s_(n);if(t){var e=s_(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return f_(this,i)}}function f_(n,t){if(t&&("object"===e_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a_(n)}function a_(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function s_(n){return s_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},s_(n)}function l_(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return h_(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h_(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h_(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function v_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function d_(n){var t,i,r,e,o=this;function u(t){n[9](t)}var c={message:n[0],chat:n[1]};return void 0!==n[3]&&(c.showedMenu=n[3]),i=new lm({props:c}),Wt.push(function(){return v_(this,o),di(i,"showedMenu",u)}.bind(this)),{c:function(){t=vt("div"),yi(i.$$.fragment),_t(t,"class","chat-float-menu"),Ot(t,"top",n[5]+"px"),Ot(t,"left",n[6]+"px")},m:function(r,o){st(r,t,o),pi(i,t,null),n[10](t),e=!0},p:function(n,o){var u=this,c={};1&o&&(c.message=n[0]),2&o&&(c.chat=n[1]),!r&&8&o&&(r=!0,c.showedMenu=n[3],Jt(function(){return v_(this,u),r=!1}.bind(this))),i.$set(c),(!e||32&o)&&Ot(t,"top",n[5]+"px"),(!e||64&o)&&Ot(t,"left",n[6]+"px")},i:function(n){e||(fi(i.$$.fragment,n),e=!0)},o:function(n){ai(i.$$.fragment,n),e=!1},d:function(r){r&&lt(t),bi(i),n[10](null)}}}function y_(n){var t,i,r,e=n[1].name+"";return{c:function(){t=vt("div"),i=yt(e),_t(t,"class","chat-message__name"),_t(t,"title",r=yr?n[0].authorName:"")},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,o){2&o&&e!==(e=n[1].name+"")&&St(i,e),1&o&&r!==(r=yr?n[0].authorName:"")&&_t(t,"title",r)},i:Rn,o:Rn,d:function(n){n&&lt(t)}}}function p_(n){var t,i;return t=new Ew({props:{chat:n[1],data:n[7]}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};2&i&&(r.chat=n[1]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function b_(n){var t,i;return t=new Qm({props:{message:n[0]}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.message=n[0]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function m_(n){var t,i;return t=new aw({props:{message:n[0]}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.message=n[0]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function w_(n){var t,i;return t=new ip({props:{message:n[0]}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.message=n[0]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function __(n){var t,i,r,e,o,u,c,f,a,s,l,h,v,d,y,p,b,m,w,g,S,j=Kr({dateTime:n[0].date,type:"time"})+"",E=n[3]&&d_(n);c=new Tm({props:{message:n[0],chat:n[1]}}),s=new r_({props:{chat:n[1],data:n[7]}});var T=[p_,y_],k=[];function A(n,t){return n[1].type!==O?0:1}v=A(n),d=k[v]=T[v](n);var x=[w_,m_,b_],C=[];function R(n,t){return n[0].recType===_.Ln?0:n[0].recType===_.zn?1:n[0].recType===_.Gn?2:-1}return~(p=R(n))&&(b=C[p]=x[p](n)),{c:function(){E&&E.c(),t=pt(),i=vt("div"),r=vt("div"),e=yt(j),u=pt(),yi(c.$$.fragment),f=pt(),a=vt("div"),yi(s.$$.fragment),l=pt(),h=vt("div"),d.c(),y=pt(),b&&b.c(),_t(r,"class","chat-message__date"),_t(r,"title",o=n[0].dateText),_t(h,"class","chat-message__content"),_t(a,"class","chat-message__box"),_t(i,"class",m="chat-message"+(xE?" chat-message_widget":"")+(n[3]?" chat-message_selected":""))},m:function(o,d){E&&E.m(o,d),st(o,t,d),st(o,i,d),ot(i,r),ot(r,e),ot(i,u),pi(c,i,null),ot(i,f),ot(i,a),pi(s,a,null),ot(a,l),ot(a,h),k[v].m(h,null),ot(h,y),~p&&C[p].m(h,null),n[11](i),w=!0,g||(S=mt(i,"contextmenu",n[8]),g=!0)},p:function(n,u){var f=this,a=l_(u,1)[0];n[3]?E?(E.p(n,a),8&a&&fi(E,1)):((E=d_(n)).c(),fi(E,1),E.m(t.parentNode,t)):E&&(ui(),ai(E,1,1,function(){v_(this,f),E=null}.bind(this)),ci()),(!w||1&a)&&j!==(j=Kr({dateTime:n[0].date,type:"time"})+"")&&St(e,j),(!w||1&a&&o!==(o=n[0].dateText))&&_t(r,"title",o);var l={};1&a&&(l.message=n[0]),2&a&&(l.chat=n[1]),c.$set(l);var _={};2&a&&(_.chat=n[1]),s.$set(_);var g=v;(v=A(n))===g?k[v].p(n,a):(ui(),ai(k[g],1,1,function(){v_(this,f),k[g]=null}.bind(this)),ci(),(d=k[v])?d.p(n,a):(d=k[v]=T[v](n)).c(),fi(d,1),d.m(h,y));var S=p;(p=R(n))===S?~p&&C[p].p(n,a):(b&&(ui(),ai(C[S],1,1,function(){v_(this,f),C[S]=null}.bind(this)),ci()),~p?((b=C[p])?b.p(n,a):(b=C[p]=x[p](n)).c(),fi(b,1),b.m(h,null)):b=null),(!w||8&a&&m!==(m="chat-message"+(xE?" chat-message_widget":"")+(n[3]?" chat-message_selected":"")))&&_t(i,"class",m)},i:function(n){w||(fi(E),fi(c.$$.fragment,n),fi(s.$$.fragment,n),fi(d),fi(b),w=!0)},o:function(n){ai(E),ai(c.$$.fragment,n),ai(s.$$.fragment,n),ai(d),ai(b),w=!1},d:function(r){E&&E.d(r),r&&lt(t),r&&lt(i),bi(c),bi(s),k[v].d(),~p&&C[p].d(),n[11](null),g=!1,S()}}}function g_(n,t,i){var r,e,o=this,u=t.message,c=t.chat,f=uu(c.type!==O?u.authorId:""),a=!1,s=0,l=0;function h(n){if(r){var t=n.target;t&&!r.contains(t)&&i(3,a=!1)}}function v(n){if(e&&!n.ctrlKey&&2!=n.button){var t=n.target;t&&!e.contains(t)&&i(3,a=!1)}}return Nt(function(){var n=this;return v_(this,o),document.addEventListener("click",v),document.addEventListener("contextmenu",h),function(){v_(this,n),document.removeEventListener("click",v),document.removeEventListener("contextmenu",h)}.bind(this)}.bind(this)),n.$$set=function(n){v_(this,o),"message"in n&&i(0,u=n.message),"chat"in n&&i(1,c=n.chat)}.bind(this),[u,c,r,a,e,s,l,f,function(n){var t;if(!(null===(t=window.getSelection())||void 0===t?void 0:t.toString())){var r=n.target;"IMG"!==r.tagName&&"A"!==r.tagName&&(n.preventDefault(),i(5,s=n.pageY),i(6,l=n.pageX),i(3,a=!0))}},function(n){i(3,a=n)},function(n){var t=this;Wt[n?"unshift":"push"](function(){v_(this,t),i(4,e=n)}.bind(this))},function(n){var t=this;Wt[n?"unshift":"push"](function(){v_(this,t),i(2,r=n)}.bind(this))}]}var S_=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&u_(n,t)}(o,n);var t,i,r,e=c_(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(a_(t=e.call(this)),n,g_,__,Nn,{message:0,chat:1}),t}return t=o,i&&o_(t.prototype,i),r&&o_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),j_=S_;function O_(n){return O_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},O_(n)}function E_(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function T_(n,t){return T_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},T_(n,t)}function k_(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=C_(n);if(t){var e=C_(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return A_(this,i)}}function A_(n,t){if(t&&("object"===O_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x_(n)}function x_(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function C_(n){return C_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},C_(n)}function R_(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return I_(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return I_(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I_(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function M_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function U_(n,t,i){var r=n.slice();return r[18]=t[i],r}function P_(n){var t;return{c:function(){_t(t=vt("div"),"class","chat-loader-bar")},m:function(n,i){st(n,t,i)},d:function(n){n&&lt(t)}}}function D_(n){var t,i,e,o;return{c:function(){t=vt("div"),i=vt("i"),e=pt(),(o=vt("div")).textContent="".concat(r("noMessagesYet")),_t(i,"class","icons-chat icons-chat_add-message-big"),_t(t,"class","chat-comments-list__empty")},m:function(n,r){st(n,t,r),ot(t,i),ot(t,e),ot(t,o)},p:Rn,d:function(n){n&&lt(t)}}}function B_(n){var t,i;return t=new j_({props:{chat:n[3],message:n[18]}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};8&i&&(r.chat=n[3]),4&i&&(r.message=n[18]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function N_(n){var t,i;return t=new Ob({props:{chat:n[3],message:n[18]}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};8&i&&(r.chat=n[3]),4&i&&(r.message=n[18]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function $_(n){var t,i,r,e,o=Xr({dateTime:n[18].dateBar,type:"date"})+"";return{c:function(){t=vt("div"),i=vt("div"),r=yt(o),e=pt(),_t(i,"class","chat-date-bar__title"),_t(t,"class","chat-date-bar")},m:function(n,o){st(n,t,o),ot(t,i),ot(i,r),ot(t,e)},p:function(n,t){4&t&&o!==(o=Xr({dateTime:n[18].dateBar,type:"date"})+"")&&St(r,o)},i:Rn,o:Rn,d:function(n){n&&lt(t)}}}function L_(n){var t,i,e;return{c:function(){t=vt("div"),(i=vt("div")).textContent="".concat(r("unreadMessages")),e=pt(),_t(i,"class","chat-unread-indicator__content"),_t(t,"class","chat-unread-indicator")},m:function(n,r){st(n,t,r),ot(t,i),ot(t,e)},p:Rn,i:Rn,o:Rn,d:function(n){n&&lt(t)}}}function z_(n,t){var i,r,e,o,u,c=[L_,$_,N_,B_],f=[];function a(n,t){return"unread"in n[18]?0:"dateBar"in n[18]?1:n[18].recType===_.qn?2:3}return r=a(t),e=f[r]=c[r](t),{key:n,first:null,c:function(){i=bt(),e.c(),o=bt(),this.first=i},m:function(n,t){st(n,i,t),f[r].m(n,t),st(n,o,t),u=!0},p:function(n,i){var u=this,s=r;(r=a(t=n))===s?f[r].p(t,i):(ui(),ai(f[s],1,1,function(){M_(this,u),f[s]=null}.bind(this)),ci(),(e=f[r])?e.p(t,i):(e=f[r]=c[r](t)).c(),fi(e,1),e.m(o.parentNode,o))},i:function(n){u||(fi(e),u=!0)},o:function(n){ai(e),u=!1},d:function(n){n&&lt(i),f[r].d(n),n&&lt(o)}}}function W_(n){for(var t,i,r,e,o,u,c,f=this,a=[],s=new Map,l=n[6]&&P_(),h=!n[2].length&&n[5]&&D_(),v=n[2],d=function(n){return M_(this,f),n[18].messageId}.bind(this),y=0;y<v.length;y+=1){var p=U_(n,v,y),b=d(p);s.set(b,a[y]=z_(b,p))}return{c:function(){t=vt("div"),l&&l.c(),i=pt(),h&&h.c(),r=pt();for(var o=0;o<a.length;o+=1)a[o].c();_t(t,"class",e="chat-comments-list"+(n[2].length||n[5]?"":" chat-comments-list_loading"))},m:function(e,f){st(e,t,f),l&&l.m(t,null),ot(t,i),h&&h.m(t,null),ot(t,r);for(var s=0;s<a.length;s+=1)a[s].m(t,null);var v;n[14](t),o=!0,u||(c=mt(t,"scroll",(v=po(n[7],100,undefined),function(n){n.isTrusted&&v.call(this,n)})),u=!0)},p:function(n,u){var c=R_(u,1)[0];n[6]?l||((l=P_()).c(),l.m(t,i)):l&&(l.d(1),l=null),!n[2].length&&n[5]?h?h.p(n,c):((h=D_()).c(),h.m(t,r)):h&&(h.d(1),h=null),12&c&&(v=n[2],ui(),a=vi(a,c,d,1,n,v,s,t,hi,z_,null,U_),ci()),(!o||36&c&&e!==(e="chat-comments-list"+(n[2].length||n[5]?"":" chat-comments-list_loading")))&&_t(t,"class",e)},i:function(n){if(!o){for(var t=0;t<v.length;t+=1)fi(a[t]);o=!0}},o:function(n){for(var t=0;t<a.length;t+=1)ai(a[t]);o=!1},d:function(i){i&&lt(t),l&&l.d(),h&&h.d();for(var r=0;r<a.length;r+=1)a[r].d();n[14](null),u=!1,c()}}}function q_(n,t,i){var r,e,o,u,c,f,a=this,s=Rn,l=function(){var n=this;return M_(this,a),s(),s=zn(y,function(t){return M_(this,n),i(3,r=t)}.bind(this)),y}.bind(this),h=Rn,v=function(){var n=this;return M_(this,a),h(),h=zn(d,function(t){return M_(this,n),i(13,o=t)}.bind(this)),d}.bind(this);qn(n,mr,function(n){return M_(this,a),i(12,e=n)}.bind(this)),qn(n,Mr,function(n){return M_(this,a),i(5,u=n)}.bind(this)),qn(n,Ur,function(n){return M_(this,a),i(6,c=n)}.bind(this)),n.$$.on_destroy.push(function(){return M_(this,a),s()}.bind(this)),n.$$.on_destroy.push(function(){return M_(this,a),h()}.bind(this));var d=t.list;v();var y=t.chat;l();var p,b="",m=!1,w=0,_=0,g=o;function S(){var n=this;p&&Qt().then(function(){if(M_(this,n),p){var t=p.scrollHeight;w=Math.max(w,0)+(t-_),i(4,p.scrollTop=w,p),(_=t)-50<=p.clientHeight&&Br()}}.bind(this))}function j(){_=p.scrollHeight-40,Nr(),i(10,b=r.chatId),i(11,m=!0)}return d.subscribe(function(){M_(this,a),S()}.bind(this)),Nt(function(){M_(this,a),j()}.bind(this)),n.$$set=function(n){M_(this,a),"list"in n&&v(i(0,d=n.list)),"chat"in n&&l(i(1,y=n.chat))}.bind(this),n.$$.update=function(){if(M_(this,a),3080&n.$$.dirty&&m&&b!==r.chatId&&j(),12812&n.$$.dirty){var t;i(2,g=[]);var u=-1,c=0;if(o.length){for(var s=[],l=0,h=o.length;l<h;l++){var v=o[l],d=new Date(null===i(9,f=v.date)||void 0===f?void 0:f.getTime());d.setHours(0,0,0,0);var y=d.getTime();~s.indexOf(y)||(c++,g.push({dateBar:d,messageId:y}),s.push(y)),r.isSubscribed&&(v.authorId!==vr&&hn(v.messageId,e)>0&&(t?hn(v.messageId,t.messageId)<0&&(t=v,u=l+c):(t=v,u=l+c)),l+1===h&&v.authorId===vr&&(u=-1)),g.push(v)}~u&&g.splice(u,0,{unread:!0,messageId:-1})}}}.bind(this),[d,y,g,r,p,u,c,function(){var n=this;p&&(w=p.scrollTop,Qt().then(function(){M_(this,n),p&&w<50&&Br()}.bind(this)))},S,f,b,m,e,o,function(n){var t=this;Wt[n?"unshift":"push"](function(){M_(this,t),i(4,p=n)}.bind(this))}]}var F_=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&T_(n,t)}(o,n);var t,i,r,e=k_(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(x_(t=e.call(this)),n,q_,W_,Nn,{list:0,chat:1,handleChange:8}),t}return t=o,(i=[{key:"handleChange",get:function(){return this.$$.ctx[8]}}])&&E_(t.prototype,i),r&&E_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(_i),G_=F_;function H_(n){return H_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},H_(n)}function V_(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Q_(n,t){return Q_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Q_(n,t)}function Y_(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=X_(n);if(t){var e=X_(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return J_(this,i)}}function J_(n,t){if(t&&("object"===H_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return K_(n)}function K_(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function X_(n){return X_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},X_(n)}function Z_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ng(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return tg(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return tg(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tg(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function ig(n){var t,i;return{c:function(){t=vt("span"),i=yt(n[1]),_t(t,"class","chat-window-header__name")},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,t){2&t&&St(i,n[1])},d:function(n){n&&lt(t)}}}function rg(n){var t,i;return{c:function(){t=vt("a"),i=yt(n[1]),_t(t,"class","chat-window-header__name"),_t(t,"target","_blank"),_t(t,"href",n[7])},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,r){2&r&&St(i,n[1]),128&r&&_t(t,"href",n[7])},d:function(n){n&&lt(t)}}}function eg(n){var t,i;return{c:function(){t=vt("span"),i=yt(n[8]),_t(t,"class","chat-window-header__additional"),_t(t,"title",n[9])},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,r){256&r&&St(i,n[8]),512&r&&_t(t,"title",n[9])},d:function(n){n&&lt(t)}}}function og(n){var t;function i(n,t){return(n[15]||n[6].perms&U.rt)&&!n[3]?cg:ug}var r=i(n),e=r(n);return{c:function(){t=vt("div"),e.c(),_t(t,"class","chat-window-header__buttons")},m:function(n,i){st(n,t,i),e.m(t,null)},p:function(n,o){r===(r=i(n))&&e?e.p(n,o):(e.d(1),(e=r(n))&&(e.c(),e.m(t,null)))},d:function(n){n&&lt(t),e.d()}}}function ug(n){var t,i,e,o;return{c:function(){t=vt("button"),_t(i=vt("i"),"class","icons-chat icons-chat_info"),_t(t,"class","button chat-window-header__button-icon"),_t(t,"title",r("info"))},m:function(r,u){st(r,t,u),ot(t,i),e||(o=mt(t,"click",wt(n[19])),e=!0)},p:Rn,d:function(n){n&&lt(t),e=!1,o()}}}function cg(n){var t,i,e,o;return{c:function(){t=vt("button"),_t(i=vt("i"),"class","icons-chat icons-chat_edit-big"),_t(t,"class","button chat-window-header__button-icon"),_t(t,"title",r("edit"))},m:function(r,u){st(r,t,u),ot(t,i),e||(o=mt(t,"click",wt(n[18])),e=!0)},p:Rn,d:function(n){n&&lt(t),e=!1,o()}}}function fg(n){var t,i,e;return{c:function(){(t=vt("button")).textContent="".concat(r("delete")),_t(t,"class","button button_tiny chat-window-header__button button_red")},m:function(r,o){st(r,t,o),i||(e=mt(t,"click",wt(n[20])),i=!0)},p:Rn,d:function(n){n&&lt(t),i=!1,e()}}}function ag(n){var t;function i(n,t){return n[6].isSubscribed?lg:sg}var r=i(n),e=r(n);return{c:function(){e.c(),t=bt()},m:function(n,i){e.m(n,i),st(n,t,i)},p:function(n,o){r===(r=i(n))&&e?e.p(n,o):(e.d(1),(e=r(n))&&(e.c(),e.m(t.parentNode,t)))},d:function(n){e.d(n),n&&lt(t)}}}function sg(n){var t,i,e;return{c:function(){(t=vt("button")).textContent="".concat(r("subscribe")),_t(t,"class","button button_tiny chat-window-header__button button_green")},m:function(r,o){st(r,t,o),i||(e=mt(t,"click",wt(n[22])),i=!0)},p:Rn,d:function(n){n&&lt(t),i=!1,e()}}}function lg(n){var t,i,e;return{c:function(){(t=vt("button")).textContent="".concat(r("unsubscribe")),_t(t,"class","button button_tiny chat-window-header__button button_white")},m:function(r,o){st(r,t,o),i||(e=mt(t,"click",wt(n[21])),i=!0)},p:Rn,d:function(n){n&&lt(t),i=!1,e()}}}function hg(n){var t,i;return(t=new $o({props:{$$slots:{buttons:[bg],content:[pg],title:[vg]},$$scope:{ctx:n}}})).$on("close",n[24]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};67113040&i&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function vg(n){var t;return{c:function(){(t=vt("span")).textContent="".concat(r("unsubscribe")),_t(t,"slot","title")},m:function(n,i){st(n,t,i)},p:Rn,d:function(n){n&&lt(t)}}}function dg(n){var t,i,e=r("unsubscribeConfirmGroup","<b>".concat($r(n[6].name),"</b>"))+"";return{c:function(){t=new At(!1),i=bt(),t.a=i},m:function(n,r){t.m(e,n,r),st(n,i,r)},p:function(n,i){64&i&&e!==(e=r("unsubscribeConfirmGroup","<b>".concat($r(n[6].name),"</b>"))+"")&&t.p(e)},d:function(n){n&&lt(i),n&&t.d()}}}function yg(n){var t,i,e=r("unsubscribeConfirmChannel","<b>".concat($r(n[6].name),"</b>"))+"";return{c:function(){t=new At(!1),i=bt(),t.a=i},m:function(n,r){t.m(e,n,r),st(n,i,r)},p:function(n,i){64&i&&e!==(e=r("unsubscribeConfirmChannel","<b>".concat($r(n[6].name),"</b>"))+"")&&t.p(e)},d:function(n){n&&lt(i),n&&t.d()}}}function pg(n){var t,i;function r(n,t){return n[4]?yg:dg}var e=r(n),o=e(n);return{c:function(){t=vt("div"),i=vt("div"),o.c(),_t(i,"class","chat-alert-text"),_t(t,"slot","content")},m:function(n,r){st(n,t,r),ot(t,i),o.m(i,null)},p:function(n,t){e===(e=r(n))&&o?o.p(n,t):(o.d(1),(o=e(n))&&(o.c(),o.m(i,null)))},d:function(n){n&&lt(t),o.d()}}}function bg(n){var t,i,e,o,u,c;return{c:function(){t=vt("div"),(i=vt("button")).textContent="".concat(r("close")),e=pt(),(o=vt("button")).textContent="".concat(r("unsubscribe")),_t(i,"class","button button_white qa-dialog-cancel"),_t(o,"class","button button_green"),_t(t,"slot","buttons")},m:function(r,f){st(r,t,f),ot(t,i),ot(t,e),ot(t,o),u||(c=[mt(i,"click",wt(n[23])),mt(o,"click",wt(n[16]))],u=!0)},p:Rn,d:function(n){n&&lt(t),u=!1,Dn(c)}}}function mg(n){var t,i,e,o,u,c,f,a,s,l,h,v,d;function y(n,t){return n[7]?rg:ig}var p=y(n),b=p(n),m=!xE&&function(n){var t,i=n[8]&&eg(n);return{c:function(){i&&i.c(),t=bt()},m:function(n,r){i&&i.m(n,r),st(n,t,r)},p:function(n,r){n[8]?i?i.p(n,r):((i=eg(n)).c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d:function(n){i&&i.d(n),n&&lt(t)}}}(n),w=!n[3]&&og(n),_=n[3]&&!n[2]&&fg(n),g=(n[4]||n[11])&&!n[10]&&ag(n),S=!xE&&function(n){var t,i,e,o;return{c:function(){t=vt("span"),_t(i=vt("i"),"class","icons-chat icons-chat_close-gray"),_t(t,"class","chat-window-header__close"),_t(t,"title",r("back"))},m:function(n,r){st(n,t,r),ot(t,i),e||(o=mt(t,"click",wg),e=!0)},p:Rn,d:function(n){n&&lt(t),e=!1,o()}}}(),j=xE&&function(n){var t,i,e,o;return{c:function(){t=vt("span"),_t(i=vt("i"),"class","icons-chat icons-chat_back"),_t(t,"class","chat-window-header__close chat-window-header__close_widget"),_t(t,"title",r("back"))},m:function(n,r){st(n,t,r),ot(t,i),e||(o=mt(t,"click",wg),e=!0)},p:Rn,d:function(n){n&&lt(t),e=!1,o()}}}(),O=n[12]&&hg(n);return{c:function(){t=vt("div"),i=vt("div"),e=vt("div"),b.c(),o=pt(),m&&m.c(),u=pt(),w&&w.c(),c=pt(),f=vt("div"),_&&_.c(),a=pt(),g&&g.c(),s=pt(),S&&S.c(),l=pt(),j&&j.c(),h=pt(),O&&O.c(),v=bt(),_t(e,"class","chat-window-header__title"),_t(i,"class","chat-window-header__content"+(xE?" chat-window-header__content_widget":"")),_t(f,"class","chat-window-header__tools"+(xE?" chat-window-header__tools_widget":"")),_t(t,"class","chat-window-header ui")},m:function(n,r){st(n,t,r),ot(t,i),ot(i,e),b.m(e,null),ot(e,o),m&&m.m(e,null),ot(i,u),w&&w.m(i,null),ot(t,c),ot(t,f),_&&_.m(f,null),ot(f,a),g&&g.m(f,null),ot(f,s),S&&S.m(f,null),ot(t,l),j&&j.m(t,null),st(n,h,r),O&&O.m(n,r),st(n,v,r),d=!0},p:function(n,t){var r=this,u=ng(t,1)[0];p===(p=y(n))&&b?b.p(n,u):(b.d(1),(b=p(n))&&(b.c(),b.m(e,o))),xE||m.p(n,u),n[3]?w&&(w.d(1),w=null):w?w.p(n,u):((w=og(n)).c(),w.m(i,null)),n[3]&&!n[2]?_?_.p(n,u):((_=fg(n)).c(),_.m(f,a)):_&&(_.d(1),_=null),!n[4]&&!n[11]||n[10]?g&&(g.d(1),g=null):g?g.p(n,u):((g=ag(n)).c(),g.m(f,s)),xE||S.p(n,u),xE&&j.p(n,u),n[12]?O?(O.p(n,u),4096&u&&fi(O,1)):((O=hg(n)).c(),fi(O,1),O.m(v.parentNode,v)):O&&(ui(),ai(O,1,1,function(){Z_(this,r),O=null}.bind(this)),ci())},i:function(n){d||(fi(O),d=!0)},o:function(n){ai(O),d=!1},d:function(n){n&&lt(t),b.d(),m&&m.d(),w&&w.d(),_&&_.d(),g&&g.d(),S&&S.d(),j&&j.d(),n&&lt(h),O&&O.d(n),n&&lt(v)}}}function wg(){oT()}function _g(n,i,e){var o,u,c,f=this,a=Rn,s=function(){var n=this;return Z_(this,f),a(),a=zn(v,function(t){return Z_(this,n),e(6,o=t)}.bind(this)),v}.bind(this),l=Rn,h=function(){var n=this;return Z_(this,f),l(),l=zn(d,function(t){return Z_(this,n),e(17,u=t)}.bind(this)),d}.bind(this);qn(n,qi,function(n){return Z_(this,f),e(14,c=n)}.bind(this)),n.$$.on_destroy.push(function(){return Z_(this,f),a()}.bind(this)),n.$$.on_destroy.push(function(){return Z_(this,f),l()}.bind(this));var v=i.selectedChat;s();var d,p="",b="",m="",_="",g=!1,E=!1,T=!1,k=!1,A=!1,x=yr,C=!1,R=!1;var I=function(){Z_(this,f),ho(v)}.bind(this),M=function(){Z_(this,f),Yn(qi,c.info=!0,c)}.bind(this),P=function(){Z_(this,f),Yn(qi,c["delete"]=!0,c)}.bind(this),D=function(){Z_(this,f),e(12,R=!0)}.bind(this),B=function(){Z_(this,f),e(5,C=!0)}.bind(this),N=function(){Z_(this,f),e(12,R=!1)}.bind(this),$=function(){Z_(this,f),e(12,R=!1)}.bind(this);return n.$$set=function(n){Z_(this,f),"selectedChat"in n&&s(e(0,v=n.selectedChat))}.bind(this),n.$$.update=function(){if(Z_(this,f),32&n.$$.dirty&&C&&(!function(){var n=this,i=k?U.Zn:U.nt;SO(o.chatId,vr,i).then(function(t){Z_(this,n),pE(t),o.type===O?window.fz&&window.fz("track","MQL5+Chat+Channel+Join"):o.type===j&&window.fz&&window.fz("track","MQL5+Chat+Group+Join"),Yn(v,o.isSubscribed=W,o)}.bind(this))["catch"](function(i){var r=i.error;Z_(this,n),y.error(t.User,r)}.bind(this))}(),e(5,C=!1)),131166&n.$$.dirty)if(e(2,g=o.authorId===w),e(10,E=o.authorId===vr),e(3,T=o.type===S),e(4,k=o.type===O),e(11,A=o.type===j),e(1,p=""),e(7,b=""),e(8,m=""),T){var i;h(e(13,d=bf(o.chatId,o.authorId)));for(var c=0,a=u.length;c<a;c++){var s=u[c];if(s.userId!==vr){i=s;break}}i?i.isDeleted?e(1,p=r("deletedAccount")):(e(1,p=i.userName||p),i.userLogin&&!g&&e(7,b="/".concat(TE,"/users/").concat(i.userLogin.toLowerCase()))):e(1,p=parseInt(o.lastAccess,16)?"":o.name)}else T||(e(1,p=o.name),!xE&&o.countMembers&&(e(8,m=r("ofUsers",o.countMembers)),k&&e(9,_="".concat(r("owner"),": ").concat(o.authorName))))}.bind(this),[v,p,g,T,k,C,o,b,m,_,E,A,R,d,c,x,function(){var n=this;SO(o.chatId,vr,0,!0).then(function(t){Z_(this,n),pE(t),o.type===O?window.fz&&window.fz("track","MQL5+Chat+Channel+Leave"):o.type===j&&window.fz&&window.fz("track","MQL5+Chat+Group+Leave"),Yn(v,o.isSubscribed=q,o)}.bind(this))["catch"](function(i){var r=i.error;Z_(this,n),y.error(t.User,r)}.bind(this))},u,I,M,P,D,B,N,$]}var gg=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Q_(n,t)}(o,n);var t,i,r,e=Y_(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(K_(t=e.call(this)),n,_g,mg,Nn,{selectedChat:0}),t}return t=o,i&&V_(t.prototype,i),r&&V_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Sg=gg;function jg(n){return jg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},jg(n)}function Og(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Eg(n,t){return Eg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Eg(n,t)}function Tg(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=xg(n);if(t){var e=xg(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return kg(this,i)}}function kg(n,t){if(t&&("object"===jg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ag(n)}function Ag(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function xg(n){return xg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xg(n)}function Cg(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Rg(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Ig(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ig(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ig(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Mg(n){var t,i;return(t=new lc({props:{chat:n[0]}})).$on("close",n[7]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.chat=n[0]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function Ug(n){var t,i;return t=new $l({props:{chat:lo}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:Rn,i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function Pg(n){var t,i;return t=new ru({props:{chat:n[0]}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.chat=n[0]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function Dg(n){var t,i;return(t=new Ja({props:{chat:n[0]}})).$on("close",n[6]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.chat=n[0]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function Bg(n){var t,i;return(t=new Gf({props:{chat:n[4]}})).$on("close",n[5]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};16&i&&(r.chat=n[4]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function Ng(n){var t,i,r,e,o,u,c,f,a,s=[Bg,Dg,Pg,Ug,Mg],l=[];function h(n,t){return n[3].addMembers?0:n[3].listMembers?1:n[3]["delete"]?2:n[3].edit?3:n[3].info?4:-1}~(t=h(n))&&(i=l[t]=s[t](n)),o=new Sg({props:{selectedChat:n[0]}});var v={list:br,chat:n[0]};c=new G_({props:v}),n[8](c);var d=!AE&&function(n){var t,i;return t=new lb({props:{chat:n[0],resizeList:n[1]}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.chat=n[0]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}(n);return{c:function(){i&&i.c(),r=pt(),e=vt("div"),yi(o.$$.fragment),u=pt(),yi(c.$$.fragment),f=pt(),d&&d.c(),_t(e,"class","chat-window"+(xE?" chat-window_widget":""))},m:function(n,i){~t&&l[t].m(n,i),st(n,r,i),st(n,e,i),pi(o,e,null),ot(e,u),pi(c,e,null),ot(e,f),d&&d.m(e,null),a=!0},p:function(n,e){var u=this,f=Rg(e,1)[0],a=t;(t=h(n))===a?~t&&l[t].p(n,f):(i&&(ui(),ai(l[a],1,1,function(){Cg(this,u),l[a]=null}.bind(this)),ci()),~t?((i=l[t])?i.p(n,f):(i=l[t]=s[t](n)).c(),fi(i,1),i.m(r.parentNode,r)):i=null);var v={};1&f&&(v.selectedChat=n[0]),o.$set(v);var y={};1&f&&(y.chat=n[0]),c.$set(y),AE||d.p(n,f)},i:function(n){a||(fi(i),fi(o.$$.fragment,n),fi(c.$$.fragment,n),fi(d),a=!0)},o:function(n){ai(i),ai(o.$$.fragment,n),ai(c.$$.fragment,n),ai(d),a=!1},d:function(i){~t&&l[t].d(i),i&&lt(r),i&&lt(e),bi(o),n[8](null),bi(c),d&&d.d()}}}function $g(n,t,i){var r,e,o=this,u=Rn,c=function(){var n=this;return Cg(this,o),u(),u=zn(a,function(t){return Cg(this,n),i(4,e=t)}.bind(this)),a}.bind(this);qn(n,qi,function(n){return Cg(this,o),i(3,r=n)}.bind(this)),n.$$.on_destroy.push(function(){return Cg(this,o),u()}.bind(this));var f,a=t.chat;c(),Nt(function(){var n=this;return Cg(this,o),function(){Cg(this,n),Yn(qi,r.addMembers=!1,r),Yn(qi,r.listMembers=!1,r),Yn(qi,r["delete"]=!1,r),Yn(qi,r.edit=!1,r),Yn(qi,r.info=!1,r)}.bind(this)}.bind(this));var s=function(){Cg(this,o),Yn(qi,r.addMembers=!1,r)}.bind(this),l=function(){Cg(this,o),Yn(qi,r.listMembers=!1,r)}.bind(this),h=function(){Cg(this,o),Yn(qi,r.info=!1,r)}.bind(this);return n.$$set=function(n){Cg(this,o),"chat"in n&&c(i(0,a=n.chat))}.bind(this),[a,function(){f.handleChange()},f,r,e,s,l,h,function(n){var t=this;Wt[n?"unshift":"push"](function(){Cg(this,t),i(2,f=n)}.bind(this))}]}var Lg=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Eg(n,t)}(o,n);var t,i,r,e=Tg(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Ag(t=e.call(this)),n,$g,Ng,Nn,{chat:0,resizeList:1}),t}return t=o,(i=[{key:"resizeList",get:function(){return this.$$.ctx[1]}}])&&Og(t.prototype,i),r&&Og(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(_i),zg=Lg;function Wg(n){return Wg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Wg(n)}function qg(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Fg(n,t){return Fg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Fg(n,t)}function Gg(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Qg(n);if(t){var e=Qg(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Hg(this,i)}}function Hg(n,t){if(t&&("object"===Wg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vg(n)}function Vg(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Qg(n){return Qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qg(n)}function Yg(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Jg(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Kg(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Kg(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kg(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Xg(n){var t;return{c:function(){_t(t=vt("span"),"class","chat-line__read-mark")},m:function(i,r){st(i,t,r),t.innerHTML=n[7]},p:function(n,i){128&i&&(t.innerHTML=n[7])},d:function(n){n&&lt(t)}}}function Zg(n){var t;return{c:function(){_t(t=vt("span"),"class","chat-line__unread"),_t(t,"title",r("unreadMessages"))},m:function(n,i){st(n,t,i)},p:Rn,d:function(n){n&&lt(t)}}}function nS(n){var t,i,r,e,o,u,c,f,a,s,l,h,v,d,y,p,b,m,w,_,g=Xr({dateTime:n[0].topMessage?n[0].topMessage.date:n[0].date,type:"smart"})+"";function S(n,t){return n[1]?Zg:n[2]?Xg:void 0}r=new zw({props:{data:n[0],size:JE}});var j=S(n),O=j&&j(n);return{c:function(){t=vt("a"),i=vt("span"),yi(r.$$.fragment),e=pt(),o=vt("span"),u=vt("span"),c=vt("span"),f=yt(n[5]),a=pt(),s=vt("span"),l=yt(g),v=pt(),d=vt("span"),y=pt(),O&&O.c(),_t(i,"class","chat-line__avatar"),_t(c,"class","chat-line__name"),_t(s,"class","chat-line__date"),_t(s,"title",h=n[0].topMessage?n[0].topMessage.dateText:n[0].dateText),_t(u,"class","chat-line__header"),_t(d,"class","chat-line__desc"),_t(o,"class","chat-line__content"),_t(t,"href",p=nT(n[0])),_t(t,"class",b="chat-line"+(n[3]?" chat-line_active":"")+(n[1]||n[2]?" chat-line_marked":"")+(xE?" chat-line_min":""))},m:function(h,p){st(h,t,p),ot(t,i),pi(r,i,null),ot(t,e),ot(t,o),ot(o,u),ot(u,c),ot(c,f),ot(u,a),ot(u,s),ot(s,l),ot(o,v),ot(o,d),d.innerHTML=n[6],ot(t,y),O&&O.m(t,null),m=!0,w||(_=mt(t,"click",wt(n[11])),w=!0)},p:function(n,i){var e=Jg(i,1)[0],o={};1&e&&(o.data=n[0]),r.$set(o),(!m||32&e)&&St(f,n[5]),(!m||1&e)&&g!==(g=Xr({dateTime:n[0].topMessage?n[0].topMessage.date:n[0].date,type:"smart"})+"")&&St(l,g),(!m||1&e&&h!==(h=n[0].topMessage?n[0].topMessage.dateText:n[0].dateText))&&_t(s,"title",h),(!m||64&e)&&(d.innerHTML=n[6]),j===(j=S(n))&&O?O.p(n,e):(O&&O.d(1),(O=j&&j(n))&&(O.c(),O.m(t,null))),(!m||1&e&&p!==(p=nT(n[0])))&&_t(t,"href",p),(!m||14&e&&b!==(b="chat-line"+(n[3]?" chat-line_active":"")+(n[1]||n[2]?" chat-line_marked":"")+(xE?" chat-line_min":"")))&&_t(t,"class",b)},i:function(n){m||(fi(r.$$.fragment,n),m=!0)},o:function(n){ai(r.$$.fragment,n),m=!1},d:function(n){n&&lt(t),bi(r),O&&O.d(),w=!1,_()}}}function tS(n,t,i){var e,o,u,c=this,f=Rn,a=function(){var n=this;return Yg(this,c),f(),f=zn(s,function(t){return Yg(this,n),i(8,e=t)}.bind(this)),s}.bind(this);qn(n,qi,function(n){return Yg(this,c),i(9,o=n)}.bind(this)),qn(n,iT,function(n){return Yg(this,c),i(10,u=n)}.bind(this)),n.$$.on_destroy.push(function(){return Yg(this,c),f()}.bind(this));var s,l=t.chat,h=l.type!==O&&l.topMessage&&l.topMessage.authorId===vr,v=!!l.isSubscribed&&xr(l),d=u&&l.chatId===u.chatId,y=l.name,p=m(),b=w();function m(){var n="";return l.topMessage?(l.topMessage.recType===_.Ln?n=l.topMessage.data.text:l.topMessage.recType===_.zn&&(n=l.topMessage.data.fileName),l.type===j&&(n=l.topMessage.authorId===vr?"".concat(r("you"),": ").concat(n):"".concat(l.topMessage.authorName,": ").concat(n))):l.description&&(n=l.description),n}function w(){var n=hn(l.lastUpdate,l.lastSeen)>0?"sent":"delivered";return'<i class="icons-chat icons-chat_'.concat(n,'"></i>')}l.type===S&&(y="",a(s=uu(l.authorId===vr?l.extraId:l.authorId)));var g=function(){Yg(this,c),vT(l.chatId)}.bind(this);return n.$$set=function(n){Yg(this,c),"chat"in n&&i(0,l=n.chat)}.bind(this),n.$$.update=function(){Yg(this,c),1537&n.$$.dirty&&l&&(i(3,d=u&&l.chatId===u.chatId&&o.window),i(6,p=m()),i(7,b=w()),i(1,v=!!l.isSubscribed&&xr(l)),i(2,h=l.type!==O&&l.topMessage&&l.topMessage.authorId===vr)),259&n.$$.dirty&&(e?e.isDeleted?(dr||yr||(uE(l.changeId),v&&qj(l.chatId,l.lastUpdate)),i(5,y=r("deletedAccount"))):e.userName&&i(5,y=e.userName):i(5,y=l.name))}.bind(this),[l,v,h,d,s,y,p,b,e,o,u,g]}var iS=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Fg(n,t)}(o,n);var t,i,r,e=Gg(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Vg(t=e.call(this)),n,tS,nS,Nn,{chat:0}),t}return t=o,i&&qg(t.prototype,i),r&&qg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),rS=iS;function eS(n){return eS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},eS(n)}function oS(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function uS(n,t){return uS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},uS(n,t)}function cS(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=sS(n);if(t){var e=sS(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return fS(this,i)}}function fS(n,t){if(t&&("object"===eS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return aS(n)}function aS(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function sS(n){return sS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sS(n)}function lS(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return hS(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return hS(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hS(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function vS(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function dS(n,t,i){var r=n.slice();return r[11]=t[i],r}function yS(n){for(var t,i,r=this,e=[],o=new Map,u=n[0],c=function(n){return vS(this,r),n[11].chatId}.bind(this),f=0;f<u.length;f+=1){var a=dS(n,u,f),s=c(a);o.set(s,e[f]=bS(s,a))}return{c:function(){for(var n=0;n<e.length;n+=1)e[n].c();t=bt()},m:function(n,r){for(var o=0;o<e.length;o+=1)e[o].m(n,r);st(n,t,r),i=!0},p:function(n,i){1&i&&(u=n[0],ui(),e=vi(e,i,c,1,n,u,o,t.parentNode,hi,bS,t,dS),ci())},i:function(n){if(!i){for(var t=0;t<u.length;t+=1)fi(e[t]);i=!0}},o:function(n){for(var t=0;t<e.length;t+=1)ai(e[t]);i=!1},d:function(n){for(var i=0;i<e.length;i+=1)e[i].d(n);n&&lt(t)}}}function pS(n){var t,i,r;return{c:function(){t=vt("div"),i=vt("i"),r=new At(!1),_t(i,"class","icons-chat icons-chat_chat-big"),r.a=null,_t(t,"class","empty-chats-list")},m:function(e,o){st(e,t,o),ot(t,i),r.m(n[5],t)},p:function(n,t){32&t&&r.p(n[5])},i:Rn,o:Rn,d:function(n){n&&lt(t)}}}function bS(n,t){var i,r,e;return r=new rS({props:{chat:t[11]}}),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),e=!0},p:function(n,i){t=n;var e={};1&i&&(e.chat=t[11]),r.$set(e)},i:function(n){e||(fi(r.$$.fragment,n),e=!0)},o:function(n){ai(r.$$.fragment,n),e=!1},d:function(n){n&&lt(i),bi(r,n)}}}function mS(n){var t,i,r,e,o,u,c,f,a,s,l=[pS,yS],h=[];function v(n,t){return n[0].length?1:0}return o=v(n),u=h[o]=l[o](n),{c:function(){t=vt("div"),i=vt("div"),r=pt(),e=vt("div"),u.c(),_t(i,"class","chat-panel__expand"),Ot(i,"height",n[2]+"px"),_t(e,"class","chat-panel__list"),Ot(e,"transform","translate3d(0,"+n[4]+"px,0)"),_t(t,"class",c="chat-panel"+(xE?" chat-panel_widget":" chat-panel_standalone")+(n[6].length?" chat-panel_width-choice-type":""))},m:function(u,c){st(u,t,c),ot(t,i),ot(t,r),ot(t,e),h[o].m(e,null),n[10](t),f=!0,a||(s=mt(t,"scroll",po(n[7],100,undefined)),a=!0)},p:function(n,r){var a=this,s=lS(r,1)[0];(!f||4&s)&&Ot(i,"height",n[2]+"px");var d=o;(o=v(n))===d?h[o].p(n,s):(ui(),ai(h[d],1,1,function(){vS(this,a),h[d]=null}.bind(this)),ci(),(u=h[o])?u.p(n,s):(u=h[o]=l[o](n)).c(),fi(u,1),u.m(e,null)),(!f||16&s)&&Ot(e,"transform","translate3d(0,"+n[4]+"px,0)"),(!f||64&s&&c!==(c="chat-panel"+(xE?" chat-panel_widget":" chat-panel_standalone")+(n[6].length?" chat-panel_width-choice-type":"")))&&_t(t,"class",c)},i:function(n){f||(fi(u),f=!0)},o:function(n){ai(u),f=!1},d:function(i){i&&lt(t),h[o].d(),n[10](null),a=!1,s()}}}function wS(n,i,e){var o,u,c,a=this,s=Rn,l=function(){var n=this;return vS(this,a),s(),s=zn(h,function(t){return vS(this,n),e(8,o=t)}.bind(this)),h}.bind(this);qn(n,ZO,function(n){return vS(this,a),e(9,u=n)}.bind(this)),qn(n,XO,function(n){return vS(this,a),e(6,c=n)}.bind(this)),n.$$.on_destroy.push(function(){return vS(this,a),s()}.bind(this));var h,v,d=0,p=[],b=0,w="";function _(){if(v){var n=xE?42:72,i=o.length;e(2,d=i*n);for(var r=v.scrollTop,c=v.offsetHeight,a=0,s=0,l=0,h=0;a<i;){if(s+n>r){h=Math.max(a-7,0),l=Math.max(s-7*n,0);break}s+=n,a++}for(;a<i&&(a++,!((s+=n)>r+c)););var w=Math.min(a+7,i);i&&i-w<7&&function(n){var i=this;if(!function(n){var t=!1;switch(n){case S:t=VO;break;case j:t=QO;break;case O:t=YO;break;default:t=HO}return t}(n)||JO)return;JO=!0;var r=rE(n),e=Wn(r),o=undefined;e.length&&(o=function(n){var t=this,i=m,r=Wn(n);if(!r.length)return i;return r.forEach(function(n){zO(this,t),i===m&&(i=n.lastUpdate),hn(i,n.lastUpdate)>0&&(i=n.lastUpdate)}.bind(this)),i}(r));switch(n){case S:case j:case O:cO(n,o,q,H).then(function(t){zO(this,i),t.chats.length&&t.result===f.Bn||eE(n,!1),sE(t.chats,n),JO=!1}.bind(this))["catch"](function(n){var r=n.error;zO(this,i),y.error(t.Store,r),JO=!1}.bind(this));break;case g:aO(o,q,H).then(function(t){zO(this,i),t.chats.length&&t.result===f.Bn||eE(n,!1),sE(t.chats,n),JO=!1}.bind(this))["catch"](function(n){var r=n.error;zO(this,i),y.error(t.Store,r),JO=!1}.bind(this))}}(u),e(4,b=Math.ceil(l)),e(0,p=o.slice(h,w))}}return Nt(function(){var n=this;return vS(this,a),window.addEventListener("resize",_),_(),function(){vS(this,n),window.removeEventListener("resize",_)}.bind(this)}.bind(this)),n.$$.update=function(){if(vS(this,a),514&n.$$.dirty&&u!==undefined&&v&&e(1,v.scrollTop=0,v),512&n.$$.dirty)switch(u){case S:l(e(3,h=qO));break;case j:l(e(3,h=FO));break;case O:l(e(3,h=GO));break;default:l(e(3,h=WO))}256&n.$$.dirty&&o&&_(),1&n.$$.dirty&&(p.length||e(5,w=xE?r("emptyChatsList","/".concat(TE,"/users/").concat(EE,"/messages")):r("emptyChatsListShort")))}.bind(this),[p,v,d,h,b,w,c,_,o,u,function(n){var t=this;Wt[n?"unshift":"push"](function(){vS(this,t),e(1,v=n),e(9,u)}.bind(this))}]}var _S=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&uS(n,t)}(o,n);var t,i,r,e=cS(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(aS(t=e.call(this)),n,wS,mS,Nn,{}),t}return t=o,i&&oS(t.prototype,i),r&&oS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),gS=_S;function SS(n){return SS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},SS(n)}function jS(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function OS(n,t){return OS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},OS(n,t)}function ES(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=AS(n);if(t){var e=AS(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return TS(this,i)}}function TS(n,t){if(t&&("object"===SS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kS(n)}function kS(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function AS(n){return AS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},AS(n)}function xS(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function CS(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return RS(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return RS(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RS(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function IS(n,t,i){var r=n.slice();return r[7]=t[i],r}function MS(n){for(var t,i=n[2],r=[],e=0;e<i.length;e+=1)r[e]=PS(IS(n,i,e));return{c:function(){t=vt("div");for(var n=0;n<r.length;n+=1)r[n].c();_t(t,"class","chat-choice-type chat-choice-type_widget")},m:function(i,e){st(i,t,e);for(var o=0;o<r.length;o+=1)r[o].m(t,null);n[6](t)},p:function(n,e){if(30&e){var o;for(i=n[2],o=0;o<i.length;o+=1){var u=IS(n,i,o);r[o]?r[o].p(u,e):(r[o]=PS(u),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},d:function(i){i&&lt(t),ht(r,i),n[6](null)}}}function US(n){var t,i=n[4][n[7]].text+"";return{c:function(){t=yt(i)},m:function(n,i){st(n,t,i)},p:function(n,r){4&r&&i!==(i=n[4][n[7]].text+"")&&St(t,i)},d:function(n){n&&lt(t)}}}function PS(n){var t,i,r,e,o,u,c,f,a,s=!n[1]&&US(n);function l(){return n[5](n[7])}return{c:function(){t=vt("button"),i=vt("i"),e=pt(),s&&s.c(),o=pt(),_t(i,"class",r="icons-chat icons-chat_"+(n[3]===n[7]?n[4][n[7]].iconWidgetActive:n[4][n[7]].iconWidget)),_t(t,"class",u="chat-choice-type__item"+(n[3]===n[7]?" chat-choice-type__item_active":"")),_t(t,"title",c=n[4][n[7]].title)},m:function(n,r){st(n,t,r),ot(t,i),ot(t,e),s&&s.m(t,null),ot(t,o),f||(a=mt(t,"click",wt(l)),f=!0)},p:function(e,f){n=e,12&f&&r!==(r="icons-chat icons-chat_"+(n[3]===n[7]?n[4][n[7]].iconWidgetActive:n[4][n[7]].iconWidget))&&_t(i,"class",r),n[1]?s&&(s.d(1),s=null):s?s.p(n,f):((s=US(n)).c(),s.m(t,o)),12&f&&u!==(u="chat-choice-type__item"+(n[3]===n[7]?" chat-choice-type__item_active":""))&&_t(t,"class",u),4&f&&c!==(c=n[4][n[7]].title)&&_t(t,"title",c)},d:function(n){n&&lt(t),s&&s.d(),f=!1,a()}}}function DS(n){var t,i=n[2].length&&MS(n);return{c:function(){i&&i.c(),t=bt()},m:function(n,r){i&&i.m(n,r),st(n,t,r)},p:function(n,r){var e=CS(r,1)[0];n[2].length?i?i.p(n,e):((i=MS(n)).c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:Rn,o:Rn,d:function(n){i&&i.d(n),n&&lt(t)}}}function BS(n,t,i){var e,o,u,c=this;qn(n,XO,function(n){return xS(this,c),i(2,e=n)}.bind(this)),qn(n,ZO,function(n){return xS(this,c),i(3,o=n)}.bind(this));var f=[{icon:"flat-chats",iconWidget:"chats",iconWidgetActive:"chats-active",title:r("allChats"),text:r("allChatsShort")},{icon:"flat-personal-chats",iconWidget:"personal-chats",iconWidgetActive:"personal-chats-active",title:r("privateChats"),text:r("privateChatsShort")},{icon:"flat-group-chats",iconWidget:"group-chats",iconWidgetActive:"group-chats-active",title:r("groupChats"),text:r("groupChatsShort")},{icon:"flat-channels",iconWidget:"channels",iconWidgetActive:"channels-active",title:r("channels"),text:r("channels")}],a=!1;Nt(function(){var n=this;xS(this,c),u&&window.ResizeObserver&&new ResizeObserver(function(){xS(this,n),i(1,a=u.offsetWidth<330)}.bind(this)).observe(u)}.bind(this));var s=function(n){xS(this,c),Yn(ZO,o=n,o)}.bind(this);return[u,a,e,o,f,s,function(n){var t=this;Wt[n?"unshift":"push"](function(){xS(this,t),i(0,u=n)}.bind(this))}]}var NS=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&OS(n,t)}(o,n);var t,i,r,e=ES(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(kS(t=e.call(this)),n,BS,DS,Nn,{}),t}return t=o,i&&jS(t.prototype,i),r&&jS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),$S=NS;function LS(){var n=this;return new Promise(function(t,i){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,n),window.Ajax.post("https://"+RE+"/auth",{token:CE},!1,{onready:function(n){t(n)},onerror:function(n){i(n)}},!1,!0)}.bind(this))}function zS(n){return zS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zS(n)}function WS(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function qS(n,t){return qS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},qS(n,t)}function FS(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=VS(n);if(t){var e=VS(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return GS(this,i)}}function GS(n,t){if(t&&("object"===zS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return HS(n)}function HS(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function VS(n){return VS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},VS(n)}function QS(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return YS(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return YS(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YS(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function JS(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function KS(n){var t,i,r;return{c:function(){t=vt("div"),i=vt("div"),r=yt(n[3]),_t(i,"class","alert alert_danger"),_t(t,"class","chat-errors-block")},m:function(n,e){st(n,t,e),ot(t,i),ot(i,r)},p:function(n,t){8&t&&St(r,n[3])},d:function(n){n&&lt(t)}}}function XS(n){var t,i,r,e,o,u,c,f=[nj,ZS],a=[];function s(n,t){return n[8].error?0:n[8].window?1:-1}return~(t=s(n))&&(i=a[t]=f[t](n)),e=new gS({}),u=new $S({}),{c:function(){i&&i.c(),r=pt(),yi(e.$$.fragment),o=pt(),yi(u.$$.fragment)},m:function(n,i){~t&&a[t].m(n,i),st(n,r,i),pi(e,n,i),st(n,o,i),pi(u,n,i),c=!0},p:function(n,e){var o=this,u=t;(t=s(n))===u?~t&&a[t].p(n,e):(i&&(ui(),ai(a[u],1,1,function(){JS(this,o),a[u]=null}.bind(this)),ci()),~t?((i=a[t])?i.p(n,e):(i=a[t]=f[t](n)).c(),fi(i,1),i.m(r.parentNode,r)):i=null)},i:function(n){c||(fi(i),fi(e.$$.fragment,n),fi(u.$$.fragment,n),c=!0)},o:function(n){ai(i),ai(e.$$.fragment,n),ai(u.$$.fragment,n),c=!1},d:function(n){~t&&a[t].d(n),n&&lt(r),bi(e,n),n&&lt(o),bi(u,n)}}}function ZS(n){var t,i;return t=new zg({props:{chat:iT}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:Rn,i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function nj(n){var t,i;return(t=new so({props:{$$slots:{content:[tj]},$$scope:{ctx:n}}})).$on("close",n[12]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};131584&i&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function tj(n){var t;return{c:function(){_t(t=vt("div"),"slot","content")},m:function(i,r){st(i,t,r),t.innerHTML=n[9]},p:function(n,i){512&i&&(t.innerHTML=n[9])},d:function(n){n&&lt(t)}}}function ij(n){var t,i,e,o,u,c,f,a,s,l,h,v=n[3]&&KS(n),d=n[6]&&!n[3]&&XS(n);return{c:function(){t=vt("div"),v&&v.c(),i=pt(),d&&d.c(),e=pt(),o=vt("div"),u=vt("a"),c=vt("i"),f=pt(),(a=vt("div")).innerHTML="<div></div> \n    <div></div> \n    <div></div> \n    <div></div> \n    <div></div> \n    <div></div>",_t(c,"class","icons-chat icons-chat_expand"),_t(u,"href","/"+TE+"/users/"+EE+"/messages"),_t(u,"class","chat-widget__expand"),_t(u,"target","_blank"),_t(u,"title",r("expandWindow")),_t(o,"class","chat-widget__footer"),_t(a,"class","chat-widget__resize-grip"),_t(t,"class","chat-widget"),_t(t,"id","chatsWidget"),Ot(t,"width",n[0]+"px"),Ot(t,"height",n[1]+"px"),Ot(t,"top",n[2]+"px"),Ot(t,"display",n[7]?"block":"none")},m:function(r,y){st(r,t,y),v&&v.m(t,null),ot(t,i),d&&d.m(t,null),ot(t,e),ot(t,o),ot(o,u),ot(u,c),ot(t,f),ot(t,a),n[13](t),s=!0,l||(h=mt(a,"mousedown",n[10]),l=!0)},p:function(n,r){var o=this,u=QS(r,1)[0];n[3]?v?v.p(n,u):((v=KS(n)).c(),v.m(t,i)):v&&(v.d(1),v=null),n[6]&&!n[3]?d?(d.p(n,u),72&u&&fi(d,1)):((d=XS(n)).c(),fi(d,1),d.m(t,e)):d&&(ui(),ai(d,1,1,function(){JS(this,o),d=null}.bind(this)),ci()),(!s||1&u)&&Ot(t,"width",n[0]+"px"),(!s||2&u)&&Ot(t,"height",n[1]+"px"),(!s||4&u)&&Ot(t,"top",n[2]+"px"),(!s||128&u)&&Ot(t,"display",n[7]?"block":"none")},i:function(n){s||(fi(d),s=!0)},o:function(n){ai(d),s=!1},d:function(i){i&&lt(t),v&&v.d(),d&&d.d(),n[13](null),l=!1,h()}}}function rj(n,i,r){var e,o,u,c=this,f=Rn,a=function(){var n=this;return JS(this,c),f(),f=zn(p,function(t){return JS(this,n),r(7,e=t)}.bind(this)),p}.bind(this);qn(n,qi,function(n){return JS(this,c),r(8,o=n)}.bind(this)),qn(n,Gi,function(n){return JS(this,c),r(9,u=n)}.bind(this)),n.$$.on_destroy.push(function(){return JS(this,c),f()}.bind(this));var s,l=i.width,h=i.height,v=i.top,d=i.error,p=i.showed;a();var b=!1;function m(n){n.preventDefault&&n.preventDefault(),n.clientX>0&&r(0,l=Math.max(320,s.offsetLeft+s.offsetWidth-n.clientX)),n.clientY-document.body.offsetTop<window.innerHeight&&r(1,h=Math.max(400,n.clientY-s.offsetTop))}function w(n){n.preventDefault&&n.preventDefault(),window.removeEventListener("mousemove",m,!1),window.removeEventListener("mouseup",w,!1),0!==l&&0!==h&&Ue(l,h),window.setCursor("auto")}Nt(function(){var n=this;JS(this,c),LS()["catch"](function(i){JS(this,n),y.error(t.WebSocket,i)}.bind(this))["finally"](function(){JS(this,n),r(6,b=!0)}.bind(this))}.bind(this));var _=function(){JS(this,c),Gi.set(undefined)}.bind(this);return n.$$set=function(n){JS(this,c),"width"in n&&r(0,l=n.width),"height"in n&&r(1,h=n.height),"top"in n&&r(2,v=n.top),"error"in n&&r(3,d=n.error),"showed"in n&&a(r(4,p=n.showed))}.bind(this),[l,h,v,d,p,s,b,e,o,u,function(n){n.preventDefault&&n.preventDefault(),window.addEventListener("mousemove",m,!1),window.addEventListener("mouseup",w,!1),window.setCursor("ne-resize")},function(){var n=this;Qt().then(function(){JS(this,n),s.scrollIntoView(!1)}.bind(this))},_,function(n){var t=this;Wt[n?"unshift":"push"](function(){JS(this,t),r(5,s=n)}.bind(this))}]}var ej=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&qS(n,t)}(o,n);var t,i,r,e=FS(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(HS(t=e.call(this)),n,rj,ij,Nn,{width:0,height:1,top:2,error:3,showed:4,scrollIntoView:11}),t}return t=o,(i=[{key:"scrollIntoView",get:function(){return this.$$.ctx[11]}}])&&WS(t.prototype,i),r&&WS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(_i),oj=ej;function uj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var cj,fj,aj,sj,lj,hj,vj=6e4,dj=Ei(!1),yj=Ei(!1);function pj(){window.SearchBoxContainer&&window.SearchBoxContainer.Hide(undefined,!0),dj.set(!0),fj&&fj.classList.add("link-notify_opened"),aj&&(aj.addEventListener("click",wj),aj.classList.add("link-notify_opened-mobile"))}function bj(){Oj(),fj&&fj.classList.remove("link-notify_opened"),aj&&(aj.removeEventListener("click",wj),aj.classList.remove("link-notify_opened-mobile")),dj.set(!1)}function mj(){var n=this,t=arguments.length>0&&arguments[0]!==undefined&&arguments[0];return new Promise(function(i){var r=this;uj(this,n),_j().then(function(){uj(this,r),pj(),t&&sj.scrollIntoView(),i()}.bind(this))}.bind(this))}function wj(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;n&&n.preventDefault&&n.preventDefault(),Wn(dj)?bj():mj()}function _j(){var n=this;return hj||(hj=new Promise(function(i){var r=this;uj(this,n),fj&&(fj.onclick=wj,fj.classList.remove("link-notify_loading")),function(){var n=this;return new Promise(function(i){var r=this;Ie(this,n),GE("chat").then(function(n){Ie(this,r);try{var i=JSON.parse(n);return Me&&"object"===Re(Me)?i:void HE("chat","{}")}catch(e){y.error(t.System,e),HE("chat","{}")}}.bind(this)).then(function(n){if(Ie(this,r),Me.width=(null==n?void 0:n.width)||400,null==n?void 0:n.height)Me.height=n.height||354;else{var t=window.innerHeight;Me.height=Math.max(t/2-(t/2%54-30)|0,354)}i(Me)}.bind(this))["catch"](function(n){Ie(this,r),y.error(t.System,n),HE("chat","{}"),i(Me)}.bind(this))}.bind(this))}().then(function(n){uj(this,r);var t=n.height||0,e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=44,u=document.body.querySelector(".cover .head");u instanceof HTMLElement&&(e-=u.clientHeight,o+=window.scrollY+u.getBoundingClientRect().y),t>e&&(t=e),sj=new oj({target:document.body,props:{width:n.width,height:t,top:o,error:cj,showed:dj}}),i()}.bind(this))}.bind(this)),hj)}function gj(){var n=this;return new Promise(function(t,i){uj(this,n),function r(){var n=this;if("visible"!==document.visibilityState)return void(lj=setTimeout(r,vj));clearTimeout(lj),$j().then(function(){uj(this,n),Ar(),Cj(),t()}.bind(this))["catch"](function(t){uj(this,n),cj=t,i(t)}.bind(this))}()}.bind(this))}function Sj(){var n=this,t=arguments.length>0&&arguments[0]!==undefined&&arguments[0];return new Promise(function(i,r){var e=this;uj(this,n),fj=document.getElementById("notifyMessages"),aj=document.getElementById("notifyMessagesMobile"),Rr(),FE().then(function(n){var o=this;uj(this,e);var u=(new Date).getTime()-n;if(!n||u>vj||t||Wn(yj))gj().then(i)["catch"](r);else{lj=setTimeout(function(){uj(this,o),gj().then(i)["catch"](r)}.bind(this),vj-u);var c=yj.subscribe(function(n){uj(this,o),n&&(c(),gj().then(i)["catch"](r))}.bind(this));fj&&(fj.onclick=function(n){var t=this;n.preventDefault(),null==fj||fj.classList.add("link-notify_loading"),gj().then(function(){uj(this,t),i()}.bind(this))["catch"](function(n){uj(this,t),r(n)}.bind(this))["finally"](function(){uj(this,t),mj()}.bind(this))})}}.bind(this))}.bind(this))}function jj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Oj(){qi.setLayout({create:!1}),vo(),Gi.set(undefined)}function Ej(){window.HotKeys.Add(27,(function(){Ov()||Ov()||(Oj(),oT(),xE||qi.setLayout({search:!1}),xE&&bj())})),window.HotKeys.Add(113,(function(){xE&&wj()}))}function Tj(n){var i=this;CO(n.chatId).then(function(n){jj(this,i),n&&(rT(n),hE(n))}.bind(this))["catch"](function(n){var r=n.error;jj(this,i),y.error(t.System,r,"Main")}.bind(this))}function kj(n){var t,i;t=n.chatId,i=n.lastSeen,dE(t,i,WO),dE(t,i,qO),dE(t,i,FO),dE(t,i,GO)}function Aj(n){n.isDeleted&&uE(n.chatId),n.permission&U.tt||function(n){var t=Wn(iT);t&&n===t.chatId&&vo()}(n.chatId),n.isDeleted?function(n){uE(n.chatId);var t=eT();t&&t.chatId===n.chatId&&oT()}(n):Tj(n)}function xj(n){var i=this;n&&(!function(n,i){if(n)y.error(t.System,n);else{var r=Wn(iT);if(r&&i&&r.chatId===i.chatId){var e=i.message;e&&(e.recType===_.Wn?e.linkId&&jr(e.linkId):Sr([e]))}}}(undefined,n),CO(n.chatId).then(function(r){var e=this;if(jj(this,i),r){rT(r),hE(r);var o=eT();o&&o.chatId===n.chatId&&r.lastAccess!==r.lastUpdate&&(mr.set(r.lastAccess),qj(r.chatId,r.lastUpdate).then(function(){jj(this,e),function(n,t){yE(n.chatId,t,WO),yE(n.chatId,t,rE(n.type))}(o,r.lastUpdate)}.bind(this))["catch"](function(n){var i=n.error;jj(this,e),y.error(t.System,i,"Main")}.bind(this)))}}.bind(this))["catch"](function(n){var r=n.error;jj(this,i),y.error(t.System,r,"Main")}.bind(this)))}function Cj(){!function(){var n=this;ZO.subscribe(function(t){zO(this,n),UE&&function(n){ME.setItem("mql5_chats_type",n)}(t)}.bind(this)),FO.subscribe(function(t){var i;zO(this,n),BE(),i=iE(t),NO.set(i)}.bind(this)),GO.subscribe(function(t){var i;zO(this,n),BE(),i=iE(t),$O.set(i)}.bind(this));var t=Ti([WO,qO,FO,GO],function(t){zO(this,n);var i=[],r=function(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return LO(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return LO(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,4),e=r[0],o=r[1],u=r[2],c=r[3];return e.length&&i.push(g),o.length&&i.push(S),u.length&&i.push(j),c.length&&i.push(O),!~i.indexOf(Wn(ZO))&&UE&&KO&&ZO.set(g),Ar(),i}.bind(this));t.subscribe(function(t){zO(this,n),XO.set(t)}.bind(this))}(),function(n,t){if(UE)return;UE=!0,gE=n,DE=t,setInterval((function(){PE&&function(){if(!ME||!ME.supported)return;for(var n={group:[],channel:[],users:[]},t=Wn(FO),i=Wn(GO),r=0,e=0,o=t.length;e<o&&!(r>nE/2);e++)n.group.push(t[e]),r++;for(var u=0,c=i.length;u<c&&!(r>nE);u++)n.channel.push(i[u]),r++;n.users=function(){var n=0,t=[];for(var i in ou)if(Object.prototype.hasOwnProperty.call(ou,i)){if(n>100)break;t.push(Wn(ou[i])),n++}return t}();var f=JSON.stringify(n);ME.setItem("mql5_chats",function(n){var t,i,r,e,o,u,c,f="",a=0;n=function(n){n=n.replace(/\r\n/g,"\n");for(var t="",i=0;i<n.length;i++){var r=n.charCodeAt(i);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(n);for(;a<n.length;)e=(t=n.charCodeAt(a++))>>2,o=(3&t)<<4|(i=n.charCodeAt(a++))>>4,u=(15&i)<<2|(r=n.charCodeAt(a++))>>6,c=63&r,isNaN(i)?u=c=64:isNaN(r)&&(c=64),f=f+bE.charAt(e)+bE.charAt(o)+bE.charAt(u)+bE.charAt(c);return f}(f)),ME.setItem("mql5_chats_type",Wn(ZO)),PE=!1}()}),5e3),ME.getItem("mql5_chats_tok",qE)}(EE,IE),Ej()}function Rj(){return R[TE]}function Ij(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Mj(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var Uj,Pj=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.lastNotified=0,this.storeKey="mql5_chats_last-notified";try{window.Audio&&(this.soundNewMessage=new Audio("https://c.mql5.com/i/message/new_message_click2.mp3"))}catch(i){y.error(t.System,i,"Sound")}}var i,r,e;return i=n,r=[{key:"getLastNotified",value:function(){var n=this;return new Promise(function(t){var i=this;Ij(this,n),GE(this.storeKey).then(function(n){if(Ij(this,i),n!==undefined){var r=0;null!==n&&(r=parseInt(n,10)),r>this.lastNotified&&(this.lastNotified=r),t(this.lastNotified)}else t(this.lastNotified)}.bind(this))}.bind(this))}},{key:"setLastNotified",value:function(n){HE(this.storeKey,n+""),this.lastNotified=n}},{key:"newMessage",value:function(n){var i=this;this.soundNewMessage&&this.getLastNotified().then(function(r){var e,o=this;if(Ij(this,i),(!0===window.isWindowActive||window.isLastActiveWindow())&&r<n){try{var u=null===(e=this.soundNewMessage)||void 0===e?void 0:e.play();u!==undefined&&u.then(function(){Ij(this,o)}.bind(this))["catch"](function(n){Ij(this,o),y.error(t.System,n,"Sound")}.bind(this))}catch(c){y.error(t.System,c,"Sound")}this.setLastNotified(n)}}.bind(this))}}],r&&Mj(i.prototype,r),e&&Mj(i,e),Object.defineProperty(i,"prototype",{writable:!1}),n}();function Dj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Bj,Nj=!1;function $j(){var n=this;return Bj||(Bj=new Promise(function(i,r){var e=this;Dj(this,n),Uj||(Uj=new ir(RE,ZE));var o=new Pj;Uj.on(c.I,function(n){Dj(this,e);var t=se(n);t&&Tj(t)}.bind(this)),Uj.on(c.D,function(n){Dj(this,e);var t=function(n){var t=n.getBinary(8),i=n.getBinary(8);return{chatId:un(t),lastSeen:un(i)}}(n);kj(t)}.bind(this)),Uj.on(c.U,function(n){Dj(this,e);var t=function(n){return _e(n,Ae)}(n);Aj(t)}.bind(this)),Uj.on(c.M,function(n){Dj(this,e);var t=de(n);xj(t);var i=t.message;i&&i.authorId!==OE&&o.newMessage(i.date.getTime())}.bind(this)),Uj.init(function(){var n=this;Dj(this,e),y.info(t.WebSocket,"authorization"),function(){var n=0,t=0,i=0;if(Lu){var r=(Lu+"").split(".");t=parseInt(r[0],10),r.length>1&&(i=parseInt(r[1],10))}var e=100*t+i,o=0,u=2,f=0,a=cn(OE),s=function(n){if(n.length%2)return"";for(var t="",i=n.length-2;i>=0;i-=2){var r=tn(n.charCodeAt(i+0)),e=tn(n.charCodeAt(i+1));t+=String.fromCharCode(16*r+e)}return t}(QE),l=[{Uint8:8},{Uint8:4},{Uint32:1},{Uint32:f},a,{Uint32:e},{Uint32:o},{Uint8:u},s,{Uint8:n},{Uint32:0}];Uj.send(c.v,l,undefined)}(),function(n){var t=this;return new Promise(function(i,r){var e=this;MO(this,t);var o=[{Uint8:8},{Uint8:4},{Uint32:1},cn(n)];Uj.send(c.C,o).then(function(n){n.result;var t=n.reader;MO(this,e);var r=function(n){var t=n.getBinary(8),i=n.getString16(),r=n.getInt32();return{userId:un(t),userName:i,userFlags:r,jt:!!(r&M),Ot:!!(r&I)}}(t);i(r)}.bind(this))["catch"](function(n){MO(this,e),r(n)}.bind(this))}.bind(this))}(CE).then(function(r){var e;Dj(this,n),y.info(t.WebSocket,"authorized"),vr=(e=r).userId,e.userName,e.userFlags,dr=e.jt,yr=e.Ot,function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;Uj.send(c.q,[{Uint8:n?1:0}])}(W),Nj?(function(){var n=this;y.info(t.Store,"get chat updates"),aO(oE(WO),W,H).then(function(t){zO(this,n),sE(t.chats,g)}.bind(this))["catch"](function(i){var r=i.error;zO(this,n),y.error(t.Store,r)}.bind(this)),cO(S,oE(qO),W,H).then(function(t){zO(this,n),sE(t.chats,S)}.bind(this))["catch"](function(i){var r=i.error;zO(this,n),y.error(t.Store,r)}.bind(this)),cO(j,oE(FO),W,H).then(function(t){zO(this,n),sE(t.chats,j)}.bind(this))["catch"](function(i){var r=i.error;zO(this,n),y.error(t.Store,r)}.bind(this)),cO(O,oE(GO),W,H).then(function(t){zO(this,n),sE(t.chats,O)}.bind(this))["catch"](function(i){var r=i.error;zO(this,n),y.error(t.Store,r)}.bind(this))}(),function(){var n=this,i=Wn(iT);i&&(y.info(t.System,"get message updates"),Gj(i.chatId,hr,W).then(Pr)["catch"](function(i){var r=i.error;Ir(this,n),y.error(t.System,r)}.bind(this)))}()):i(),Nj=!0}.bind(this))["catch"](function(i){var e=i.error;Dj(this,n),y.error(t.WebSocket,"auth failed: ".concat(e)),r(e)}.bind(this))}.bind(this),function(n){Dj(this,e),r(n)}.bind(this))}.bind(this)),Bj)}function Lj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function zj(n){var t=this,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:q,e=q;return new Promise(function(o,u){var f=this;if(Lj(this,t),n){var a=[{Uint8:r},{String16:n},{Uint8:e},{Uint32:i}];Uj.send(c.H,a).then(function(n){var t=n.reader,i=n.result;Lj(this,f);var r=pe(t,i,e);o(r)}.bind(this))["catch"](function(n){Lj(this,f),u(n)}.bind(this))}else u("Keyword is empty")}.bind(this))}function Wj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function qj(n,t){var i=this;return new Promise(function(r,e){var o=this;if(Wj(this,i),n)if(t){var u=cn(n),f=cn(t);Uj.send(c.rn,[u,f]).then(function(n){var t=n.result;Wj(this,o),r(t)}.bind(this))["catch"](function(n){Wj(this,o),e(n)}.bind(this))}else e("Last access is empty");else e("Chat id is empty")}.bind(this))}function Fj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Gj(n,t){var i=this,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return new Promise(function(e,o){var u=this;if(Fj(this,i),0!==parseInt(n,16))if(n){var f=cn(n),a=t?cn(t):b,s=[f,{Uint8:r},a,{Uint32:4096}];Uj.send(c.A,s).then(function(n){var t=n.result,i=n.reader;Fj(this,u);var r=ve(i,t);e(r)}.bind(this))["catch"](function(n){Fj(this,u),o(n)}.bind(this))}else o("Chat id is empty");else o("Chat id is zero")}.bind(this))}function Hj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Vj(n){var t=this;return new Promise(function(i,r){var e=this;if(Hj(this,t),0!==parseInt(n,16))if(n){var o=cn(n);Uj.send(c.fn,[o]).then(function(n){var t=n.reader;Hj(this,e),i(de(t))}.bind(this))["catch"](function(n){Hj(this,e),r(n)}.bind(this))}else r("Message id is empty");else r("Message id is zero")}.bind(this))}function Qj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Yj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Jj(n,t,i){var r=this;return new Promise(function(e,o){var u=this;if(Yj(this,r),0!==parseInt(n,16))if(n){var f=cn(n),a=[];if(i&&i.length){var s=[];i.forEach(function(n){var t=this;if(Yj(this,u),n.tagType===k&&"citedId"in n){var i=[{Uint8:n.tagType},{Uint16:0},{Uint16:0}],r=[cn(n.citedId),{Uint8:n.citedType},cn(n.citedUser),{String16:n.citedAuthor},{String16:n.citedText}],e=[].concat(i,[{Uint16:Xi(r)}],r);s.push(e)}else if(n.tagType===A&&"linkedIds"in n){var o=[{Uint8:n.tagType},{Uint16:0},{Uint16:0}],c=[];n.linkedIds.forEach(function(n){Yj(this,t),c.push(cn(n))}.bind(this));var f=[{Uint8:n.type},{Uint8:n.linkedIds.length},c],a=[].concat(o,[{Uint16:Xi(f)}],f);s.push(a)}}.bind(this)),a=[f,{Uint8:_.Ln},{String32:t},{Uint32:Xi(s)},s]}else a=[f,{Uint8:_.Ln},{String32:t},{Uint32:0}];Uj.send(c.T,a).then(function(n){var t=n.reader,i=n.result;Yj(this,u);var r=ye(t,i);e(r)}.bind(this))["catch"](function(n){Yj(this,u),o(n)}.bind(this))}else o("Chat id is empty");else o("Chat id is zero")}.bind(this))}function Kj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Xj(n,t,i,r){var e,o,u,a=this;if(n<t.byteLength){var s=Math.min(131072,t.byteLength-n);if(function(n,t){var i=this;return new Promise(function(r,e){var o=this;UO(this,i),Uj.send(c.sn,[{Uint32:t}],n).then(function(n){var t=n.reader,i=n.result,e=n.id;UO(this,o);var u=function(n,t){return{result:t,sizeUploaded:n.getInt32()}}(t,i);r(Object.assign(u,{id:e}))}.bind(this))["catch"](function(n){UO(this,o),e(n)}.bind(this))}.bind(this))}(s,n).then(function(e){var o=e.result,u=e.id;Kj(this,a),o!==f.Bn?o===f.Dn&&Uj.setRequest(u,{resolve:i,reject:r}):Xj(n,t,i,r)}.bind(this))["catch"](function(n){var t=n.error;Kj(this,a),r(t)}.bind(this)),s>1e3)for(var l=0,h=1;h<=10;h++){var v=Math.floor(h*s/10);e=n+l,o=n+v,u=void 0,u=t.slice(e,o),Uj.directSend(u),l=v}else{var d=t.slice(n);Uj.directSend(d)}n+=s}else r("Offset => byteLength")}function Zj(n){var i=this;return new Promise(function(r,e){if(Kj(this,i),n){var o=new FileReader;o.onloadend=function(){if(o.readyState!==FileReader.DONE)return y.error(t.System,"read file error","Prepare file"),void e("read file error");Xj(0,o.result,r,e)},o.readAsArrayBuffer(n)}else e("File is undefined")}.bind(this))}function nO(n){return function(n){if(Array.isArray(n))return tO(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"==typeof n)return tO(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return tO(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tO(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function iO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var rO=window.Uint8Array?new Uint8Array([139,22,96,224,115,20,103,83,95,225,254,248,9,43,105,26,39,200,253,236,146,105,43,153,4,74,142,140,44,204,239,233,137,90,166,229,193,243,253,164,31,83,99,67,154,127,243,184,19,54,180,200,198,59,213,81,215,22,74,96,224,79,170,166]):undefined;function eO(n){var i=this;return new Promise(function(r,e){if(iO(this,i),n)if(rO){var o=new FileReader,u=n.slice(0,n.size);o.onloadend=function(){var i=this;if(o.readyState!==FileReader.DONE)return y.error(t.System,"read file error","Prepare file"),void e("read file error");var u=o.result,c=new Uint8Array(u.byteLength+rO.byteLength);if(c.set(new Uint8Array(u)),c.set(rO,u.byteLength),window.crypto)window.crypto.subtle.digest("SHA-256",u).then(function(e){var o=this;iO(this,i);var u=String.fromCharCode.apply(null,nO(new Uint8Array(e)));window.crypto.subtle.digest("SHA-256",c).then(function(t){iO(this,o);var i=String.fromCharCode.apply(null,nO(new Uint8Array(t)));r({cipherKey:i,hash:u,fileSize:n.size,mime:n.type,fileName:n.name,file:n})}.bind(this))["catch"](function(n){iO(this,o),y.error(t.System,n)}.bind(this))}.bind(this))["catch"](function(n){iO(this,i),y.error(t.System,n)}.bind(this));else{if(!window.msCrypto)return void e("The browser doesn't support crypto");var f=window.msCrypto.subtle.digest("SHA-256",u);f.oncomplete=function(){var t=String.fromCharCode.apply(null,nO(new Uint8Array(f.result))),i=window.msCrypto.subtle.digest("SHA-256",c);i.oncomplete=function(){var e=String.fromCharCode.apply(null,nO(new Uint8Array(i.result)));r({cipherKey:e,hash:t,fileSize:n.size,mime:n.type,fileName:n.name,file:n})}}}},o.readAsArrayBuffer(u)}else e("The browser doesn't support Uint8Array");else e("File is undefined")}.bind(this))}function oO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function uO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function cO(){var n=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:S,i=arguments.length>1?arguments[1]:undefined,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:100,o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;return new Promise(function(u,f){var a=this;uO(this,n);var s=i?cn(i):b,l=[{Uint8:r},s,{Uint8:o},{Uint32:e},{Uint8:t}];Uj.send(c.mn,l).then(function(n){var t=n.result,i=n.reader;uO(this,a);var r=pe(i,t);u(r)}.bind(this))["catch"](function(n){uO(this,a),f(n)}.bind(this))}.bind(this))}function fO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function aO(n){var t=this,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:100,e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;return new Promise(function(o,u){var f=this;fO(this,t);var a=n?cn(n):b,s=[{Uint8:i},a,{Uint8:e},{Uint32:r}];Uj.send(c.k,s).then(function(n){var t=n.result,i=n.reader;fO(this,f);var r=pe(i,t);o(r)}.bind(this))["catch"](function(n){fO(this,f),u(n)}.bind(this))}.bind(this))}function sO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function lO(n){var t=this;return new Promise(function(i,r){var e=this;if(sO(this,t),n&&n.length){var o=[];n.forEach(function(n){sO(this,e),o.push(cn(n))}.bind(this)),Uj.send(c.L,o).then(function(n){var t=n.reader;sO(this,e);var r=we(t);i(r)}.bind(this))["catch"](function(n){sO(this,e),r(n)}.bind(this))}else r("Users id is empty")}.bind(this))}function hO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function vO(n){var t=this;return new Promise(function(i,r){var e=this;if(hO(this,t),n){var o=[],u=n.isPublic?n.inviteLink:"";if(n.type===j)o=[{Uint8:j},{Uint8:n.isPublic},{Uint8:n.isLimited?1:0},{String16:n.name},{String16:n.description},{String16:n.links},{String16:u},{Uint32:n.language}];else if(n.type===O)o=[{Uint8:O},{Uint8:n.isPublic},{String16:n.name},{String16:n.description},{String16:n.links},{String16:u},{Uint32:n.language}];else{var f=n.userId?cn(n.userId):b;o=[{Uint8:S},f]}Uj.send(c.j,o).then(function(n){var t=n.reader;hO(this,e),i(function(n){return _e(n,Ce).chatId}(t))}.bind(this))["catch"](function(n){hO(this,e),r(n)}.bind(this))}else r("Chat object is empty")}.bind(this))}function dO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function yO(n,t){var i=this;return new Promise(function(r,e){var o=this;if(dO(this,i),t)if(0!==parseInt(t,16))if(function(n){return!!n&&(!!n.size&&!(["image/gif","image/jpeg","image/png"].indexOf(n.type)<0))}(n)){var u=cn(t);eO(n).then(function(n){var t=this;dO(this,o);var i=n.cipherKey,a=n.hash,s=n.fileSize,l=n.mime,h=n.fileName,v=n.file,d=[u,{Uint8:1},i,a,{Uint32:s},{String16:l},{String16:h}];Uj.send(c.X,d).then(function(n){var i=this,o=n.result;dO(this,t),o!==f.Bn?r():Zj(v).then(function(){dO(this,i),r()}.bind(this))["catch"](function(n){dO(this,i),e(n)}.bind(this))}.bind(this))["catch"](function(n){dO(this,t),e(n)}.bind(this))}.bind(this))["catch"](function(n){dO(this,o),e(n)}.bind(this))}else e("File is not valid");else e("Chat id is zero");else e("Chat id is empty")}.bind(this))}function pO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function bO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function mO(n){var t=this;return new Promise(function(i,r){var e=this;if(bO(this,t),n)if(0!==parseInt(n.chatId,16)){var o=cn(n.chatId),u=n.isPublic?n.inviteLink:"",f=[o,{Uint8:n.isPublic},{Uint8:n.isLimited?1:0},{Uint8:n.isClosed?1:0},{String16:n.name},{String16:n.description},{String16:n.links},{String16:u},{Uint32:n.language}];Uj.send(c.S,f).then(function(n){var t=n.result;bO(this,e),i(t)}.bind(this))["catch"](function(n){bO(this,e),r(n)}.bind(this))}else r("Chat id is zero");else r("Chat object is empty")}.bind(this))}function wO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function _O(n,t){var i=this,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:100;return new Promise(function(e,o){var u=this;if(wO(this,i),n)if(0!==parseInt(n,16)){var f=[cn(n),t=t?cn(t):b,{Uint32:r}];Uj.send(c.W,f).then(function(n){var t=n.reader;wO(this,u);var i=Ee(t);e(i)}.bind(this))["catch"](function(n){wO(this,u),o(n)}.bind(this))}else o("Chat id is zero");else o("Chat id is empty")}.bind(this))}function gO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function SO(n,t){var i=this,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,e=arguments.length>3&&arguments[3]!==undefined&&arguments[3];return new Promise(function(o,u){var f=this;if(gO(this,i),0!==parseInt(n,16))if(0!==parseInt(t,16))if(n)if(t){var a=[cn(n),cn(t),{Uint8:e?1:0},{Uint16:r}];Uj.send(c.g,a).then(function(n){var t=n.reader;gO(this,f),o(Se(t))}.bind(this))["catch"](function(n){gO(this,f),u(n)}.bind(this))}else u("User id is empty");else u("Chat id is empty");else u("User id is zero");else u("Chat id is zero")}.bind(this))}function jO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function OO(){var n=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:G,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;return new Promise(function(e,o){var u=this;jO(this,n);var f=b;r&&(f=cn(r));var a=[{Uint8:t},f,{Uint32:i}];Uj.send(c.V,a).then(function(n){var t=n.reader;jO(this,u),e(ke(t))}.bind(this))["catch"](function(n){jO(this,u),o(n)}.bind(this))}.bind(this))}function EO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function TO(n){var t=this,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;return new Promise(function(r,e){var o=this;if(EO(this,t),n){var u=[{String16:n},{Uint32:i}];Uj.send(c.$,u).then(function(n){var t=n.reader;EO(this,o);var i=we(t);r(i)}.bind(this))["catch"](function(n){EO(this,o),e(n)}.bind(this))}else e("Keyword is empty")}.bind(this))}function kO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function AO(){var n=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:$,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:R.none,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1,e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:10,o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;return new Promise(function(u,f){var a=this;kO(this,n);var s=[{Uint8:o},{Uint8:t},{Uint32:i},{Uint8:r},{Uint32:e}];Uj.send(c.ln,s).then(function(n){n.result;var t=n.reader;kO(this,a);var i=he(t,r);u(i)}.bind(this))["catch"](function(n){kO(this,a),f(n)}.bind(this))}.bind(this))}function xO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function CO(n){var t=this,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return new Promise(function(r,e){var o=this;xO(this,t),0!==parseInt(n,16)?Uj.send(c.cn,[cn(n),{Uint8:i}]).then(function(n){n.result;var t=n.reader;xO(this,o);var u=se(t,i);u?r(u):e("Chat parse error")}.bind(this))["catch"](function(n){xO(this,o),e(n)}.bind(this)):e("Chat id is zero")}.bind(this))}function RO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function IO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function MO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function UO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function PO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var DO=nE/20;function BO(){var n=this,i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:j,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined,e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:20;return new Promise(function(u,c){PO(this,n);var a=1,s=[];o<=0?c("Count is zero"):function l(){var n=this;a>DO&&u(s),cO(i,r,e,o).then(function(t){PO(this,n),s=s.concat(t.chats),t.result===f.Bn&&t.chats.length?(a++,r=e===q?t.chats[t.chats.length-1].lastUpdate:t.chats[0].lastUpdate,l()):u(s)}.bind(this))["catch"](function(i){var r=i.error;PO(this,n),y.error(t.System,r),u(s)}.bind(this))}()}.bind(this))}var NO=Ei([]),$O=Ei([]);function LO(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function zO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var WO=Ei([]),qO=Ei([]),FO=Ei([]),GO=Ei([]),HO=!0,VO=!0,QO=!0,YO=!0,JO=!1,KO=!1,XO=Ei([]),ZO=Ei(0),nE=1e3;function tE(n,t){var i=n.topMessage?n.topMessage.messageId:n.lastUpdate;return hn(t.topMessage?t.topMessage.messageId:t.lastUpdate,i)}function iE(n){var t=this;return n.filter(function(n){return zO(this,t),n.authorId===vr}.bind(this))}function rE(n){var t=WO;switch(n){case g:t=WO;break;case S:t=qO;break;case j:t=FO;break;case O:t=GO}return t}function eE(n,t){switch(n){case S:VO=t;break;case j:QO=t;break;case O:YO=t;break;default:HO=t}}function oE(n){var t=this,i=m,r=Wn(n);return r.length?(r.forEach(function(n){zO(this,t),hn(n.lastUpdate,i)>0&&(i=n.lastUpdate)}.bind(this)),i):i}function uE(n){var t=this;WO.update(function(i){var r=this;return zO(this,t),i.filter(function(t){return zO(this,r),t.chatId!==n}.bind(this))}.bind(this)),qO.update(function(i){var r=this;return zO(this,t),i.filter(function(t){return zO(this,r),t.chatId!==n}.bind(this))}.bind(this)),FO.update(function(i){var r=this;return zO(this,t),i.filter(function(t){return zO(this,r),t.chatId!==n}.bind(this))}.bind(this)),GO.update(function(i){var r=this;return zO(this,t),i.filter(function(t){return zO(this,r),t.chatId!==n}.bind(this))}.bind(this))}function cE(n,t){n=n.sort(tE),rE(t).set(n)}function fE(){var n=this,i=[];i.push(aO(undefined,q,H).then(function(t){zO(this,n),sE(t.chats,g)}.bind(this))["catch"](function(i){var r=i.error;zO(this,n),y.error(t.Store,r)}.bind(this))),i.push(cO(S,undefined,q,H).then(function(t){zO(this,n),sE(t.chats,S)}.bind(this))["catch"](function(i){var r=i.error;zO(this,n),y.error(t.Store,r)}.bind(this))),i.push(BO(j).then(function(t){zO(this,n),sE(t,j)}.bind(this))),i.push(BO(O).then(function(t){zO(this,n),sE(t,O)}.bind(this))),Promise.allSettled(i).then(function(){zO(this,n),KO=!0}.bind(this))}function aE(n,t){var i=this;t.update(function(t){var r=this;return zO(this,i),t.length?(n.forEach(function(n){zO(this,r);for(var i=!1,e=0,o=t.length;e<o;e++){if(t[e].chatId===n.chatId){n.isSubscribed?t.splice(e,1,n):t.splice(e,1),i=!0;break}}!i&&n.isSubscribed&&t.push(n)}.bind(this)),t.sort(tE),t):(n.sort(tE),n)}.bind(this))}function sE(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:g;n&&n.length&&aE(n,rE(t))}function lE(n,t){var i=this;t.update(function(t){if(zO(this,i),!t.length)return n.isSubscribed&&t.push(n),t;for(var r=!1,e=0,o=t.length;e<o;e++){if(t[e].chatId===n.chatId){n.isSubscribed?t.splice(e,1,n):t.splice(e,1),r=!0;break}}return r&&(t=t.sort(tE)),!r&&n.isSubscribed&&(hn(n.lastUpdate,t[0].lastUpdate)?t.unshift(n):t.push(n)),t}.bind(this))}function hE(n){lE(n,WO),lE(n,rE(n.type))}function vE(n){for(var t=Wn(WO),i=undefined,r=0,e=t.length;r<e;r++){var o=t[r];if(o.chatId===n){i=o;break}}return i}function dE(n,t,i){var r=this;i.update(function(i){zO(this,r);for(var e=0,o=i.length;e<o;e++){var u=i[e];if(u.chatId===n){u.lastSeen=t;break}}return i}.bind(this))}function yE(n,t,i){var r=this;i.update(function(i){zO(this,r);for(var e=0,o=i.length;e<o;e++){var u=i[e];if(u.chatId===n){u.lastAccess=t;break}}return i}.bind(this))}function pE(n){var i=this,r=n.chatId,e=n.isDelete;n.userId===vr&&(e?uE(r):CO(r).then(function(n){zO(this,i),n&&(rT(n),hE(n))}.bind(this))["catch"](function(n){var r=n.error;zO(this,i),y.error(t.System,r)}.bind(this)))}var bE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function mE(n){if(!n)return"";var t,i,r,e,o,u,c="",f=0;for(n=n.replace(/[^A-Za-z0-9+/=]/g,"");f<n.length;)t=bE.indexOf(n.charAt(f++))<<2|(e=bE.indexOf(n.charAt(f++)))>>4,i=(15&e)<<4|(o=bE.indexOf(n.charAt(f++)))>>2,r=(3&o)<<6|(u=bE.indexOf(n.charAt(f++))),c+=String.fromCharCode(t),64!==o&&(c+=String.fromCharCode(i)),64!==u&&(c+=String.fromCharCode(r));return c=function(n){var t="",i=0,r=0,e=0,o=0;for(;i<n.length;)(r=n.charCodeAt(i))<128?(t+=String.fromCharCode(r),i++):r>191&&r<224?(e=n.charCodeAt(i+1),t+=String.fromCharCode((31&r)<<6|63&e),i+=2):(e=n.charCodeAt(i+1),o=n.charCodeAt(i+2),t+=String.fromCharCode((15&r)<<12|(63&e)<<6|63&o),i+=3);return t}(c),c}function wE(n){return wE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},wE(n)}function _E(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var gE,SE,jE,OE,EE,TE,kE,AE,xE,CE,RE,IE,ME=window.globalStorage(),UE=!1,PE=!1,DE=0;function BE(){PE=!0}function NE(){ME.removeItem("mql5_chats_tok"),ME.removeItem("mql5_chats"),ME.removeItem("mql5_chats_verify"),ME.removeItem("mql5_chats_connect"),ME.removeItem("mql5_chats_unread"),ME.setItem("mql5_chats_tok",gE+";"+DE),WO.set([]),qO.set([]),FO.set([]),GO.set([]),fE(),$E()}function $E(){ME.setItem("mql5_chats_verify",(new Date).getTime())}function LE(n,t){if("mql5_chats_type"===n)if(t&&t.length){var i=parseInt(t,10);isNaN(i)?ZO.set(0):ZO.set(i)}else ZO.set(0);else ZO.set(0)}function zE(n){var t=this,i=new RegExp("msg[0-9].mql5.(dev|com)");return n.forEach(function(n){_E(this,t);var r=n.avatar;r&&(n.avatar=r.replace(i,RE)),n.date=new Date(n.date),n.topMessage&&(n.topMessage.date=new Date(n.topMessage.date))}.bind(this)),n}function WE(n,i){if("mql5_chats"===n){if(!i||!i.length)return fE(),void $E();var r=undefined;try{(i=mE(i))&&(r=window.JSON.parse(i))}catch(e){y.error(t.Store,e)}if(!r||"object"!==wE(r))return fE(),void $E();r.group=r.group||[],r.channel=r.channel||[],r.users=r.users||[],Array.isArray(r.group)||(r.group=[]),Array.isArray(r.channel)||(r.channel=[]),y.info(t.Store,"received group: ".concat(r.group.length)),y.info(t.Store,"received channel: ".concat(r.channel.length)),r.group=zE(r.group),r.channel=zE(r.channel),r.users=function(n){var t=this,i=new RegExp("msg[0-9].mql5.(dev|com)");return n.forEach(function(n){_E(this,t);var r=n.userAvatar;r&&(n.userAvatar=r.replace(i,RE))}.bind(this)),n}(r.users),FO.set(r.group),GO.set(r.channel),function(n){var t=this,i=(new Date).getTime();n.forEach(function(n){eu(this,t),n.timestamp&&i-n.timestamp<36e5&&(ou[n.userId]||(ou[n.userId]=Ei(n)))}.bind(this))}(r.users),function(){var n=this,i=[];i.push(aO(undefined,q,H).then(function(t){zO(this,n),sE(t.chats,g)}.bind(this))["catch"](function(i){var r=i.error;zO(this,n),y.error(t.Store,r)}.bind(this))),i.push(cO(S,undefined,q,H).then(function(t){zO(this,n),sE(t.chats,S)}.bind(this))["catch"](function(i){var r=i.error;zO(this,n),y.error(t.Store,r)}.bind(this))),i.push(cO(j,oE(FO),W,H).then(function(t){zO(this,n),sE(t.chats,j)}.bind(this))["catch"](function(i){var r=i.error;zO(this,n),y.error(t.Store,r)}.bind(this))),i.push(cO(O,oE(GO),W,H).then(function(t){zO(this,n),sE(t.chats,O)}.bind(this))["catch"](function(i){var r=i.error;zO(this,n),y.error(t.Store,r)}.bind(this))),Promise.allSettled(i).then(function(){zO(this,n),KO=!0}.bind(this))}(),function(){var n=this;ME.getItem("mql5_chats_verify",function(i,r){var e=this;if(_E(this,n),"mql5_chats_verify"===i)if(r&&r.length){var o=parseInt(r,10);isNaN(o)?$E():(new Date).getTime()-o>36e5&&(y.info(t.Store,"Verify chats"),BO(j).then(function(n){_E(this,e),cE(n,j)}.bind(this)),BO(O).then(function(n){_E(this,e),cE(n,O)}.bind(this)),$E())}else $E()}.bind(this))}()}}function qE(n,t){if("mql5_chats_tok"===n)if(t&&t.length){var i=t.split(";");if(2===i.length){var r=i[0],e=parseInt(i[1],10);r===gE&&e===DE?(ME.getItem("mql5_chats_type",LE),ME.getItem("mql5_chats",WE)):NE()}else NE()}else NE()}function FE(){var n=this;return new Promise(function(t){var i=this;_E(this,n),ME.getItem("mql5_chats_connect",function(n,r){_E(this,i),"mql5_chats_connect"===n&&t(parseInt(r,10)||0)}.bind(this))}.bind(this))}function GE(n){var t=this;return new Promise(function(i,r){_E(this,t),ME&&ME.supported?ME.getItem(n,(function(t,r){i(t===n?r:"")})):r("Local storage is not supported")}.bind(this))}function HE(n,t){ME&&ME.supported&&ME.setItem(n,t)}function VE(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var QE,YE=!1,JE=48,KE=54,XE=512,ZE=!1;function nT(n){var t="";return n.type===O?n.inviteLink?t="/".concat(TE,"/channels/").concat(n.inviteLink):n.chatId&&(t="/".concat(TE,"/channels/").concat(n.chatId)):n.chatId&&(t="/".concat(TE,"/messages/").concat(n.chatId)),t}var tT=undefined;var iT=Ei(Hi);function rT(n){var t=Wn(iT);t&&n.chatId===t.chatId&&(iT.set(n),Fe(nT(n),!0))}function eT(){return Wn(iT)}function oT(){if(Wn(qi).window){var n=Wn(iT);n&&!n.isSubscribed&&uE(n.chatId),qi.setLayout({window:!1}),iT.set(Hi),He()}}function uT(){oT(),Gi.set(r("chatNotFound","javascript:void(false);","window.closeAllPopupsChat();","button button_small button_blue"))}function cT(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function fT(n){var i=this,e=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1],o=arguments.length>2?arguments[2]:undefined,u=arguments.length>3?arguments[3]:undefined;oT(),lO([n]).then(function(n){if(cT(this,i),n&&n.length){var t=n[0],o=$r(t.userName||t.userLogin||""),c='<a href="/'.concat(TE,"/users/").concat(t.userLogin||"",'" target="_blank">').concat(o,"</a>"),f='<div class="chat-error-window__text">'.concat(r(u,c),"</div>");e&&(f+='<a href="/'.concat(TE,"/users/").concat(t.userLogin||"",'" target="_blank" class="button button_small button_blue">\n                ').concat(r("friendAddToChat"),"\n                </a>")),Gi.set(f)}}.bind(this))["catch"](function(n){var e=n.error;cT(this,i);var u='<div class="chat-error-window__text">'.concat(r(o),"</div>");Gi.set(u),y.error(t.System,e)}.bind(this))}function aT(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function sT(n){var i=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;"number"==typeof n&&(n=sn(n)),Oj();var e={type:S,isPublic:0,name:"",description:"",links:"",inviteLink:"",language:0,userId:n};vO(e).then(function(n){var e=this;aT(this,i),CO(n).then(function(n){aT(this,e),n&&(parseInt(n.lastAccess,16)||window.fz&&window.fz("track","MQL5+Chat+New"),rT(n),hE(n),dT(n),r&&r())}.bind(this))["catch"](function(i){var r=i.error;aT(this,e),y.error(t.User,r,"Open"),uE(n),uT()}.bind(this))}.bind(this))["catch"](function(r){var e=this,o=r.error,u=r.result;if(aT(this,i),u===f.Un){var c=an(n)-1;OO(G,1,sn(c)).then(function(t){aT(this,e),!o&&t&&t.length&&t[0].userId===n?fT(n,!1,"friendWaitingPair","friendWaitingPairWithName"):fT(n,!0,"errorUserNonChatablePrivacyFriends","privacyOnlyFriendsWithName")}.bind(this))["catch"](function(n){var i=n.error;aT(this,e),y.error(t.User,i,"Open")}.bind(this))}else y.error(t.User,o,"Open")}.bind(this))}function lT(n,t){var i=this;if(YE&&xE)window.doPost(null,"/".concat(TE,"/users/").concat(EE,"/messages"),null,{user:n});else if(xE?mj(!0).then(function(){aT(this,i),sT(t)}.bind(this)):sT(t),window.history){var r=window.location,e=r.origin+r.pathname;window.history.pushState({},document.title,e)}}function hT(n){var i=this;n&&(Oj(),/^[0-9a-fA-F]{16}$/.test(n)?vT(n):function(n){var t=this,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return new Promise(function(r,e){var o=this;IO(this,t),n?Uj.send(c.O,[{String16:n},{Uint8:i}]).then(function(n){var t=n.reader;IO(this,o);var i=se(t,W);i?r(i):e("Parse error")}.bind(this))["catch"](function(n){IO(this,o),e(n)}.bind(this)):e("Chat invite link is empty")}.bind(this))}(n).then(function(n){aT(this,i),dT(n)}.bind(this))["catch"](function(n){var r=n.error;aT(this,i),uT(),y.error(t.User,r,"Open")}.bind(this)))}function vT(n){var i=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;Oj();var e=vE(n);if(e)return dT(e),void(r&&r(e));CO(n).then(function(n){aT(this,i),n&&(rT(n),hE(n),dT(n),r&&r(n))}.bind(this))["catch"](function(r){var e=r.error;aT(this,i),y.error(t.User,e,"Open"),uE(n),uT()}.bind(this))}function dT(n){var t;n&&(Fe(nT(t=n)),qi.setLayout({window:!0}),iT.set(t))}function yT(n){return yT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},yT(n)}function pT(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function bT(n,t){return bT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},bT(n,t)}function mT(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=gT(n);if(t){var e=gT(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return wT(this,i)}}function wT(n,t){if(t&&("object"===yT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _T(n)}function _T(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function gT(n){return gT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gT(n)}function ST(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function jT(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return OT(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return OT(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OT(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function ET(n){var t,i,r,e,o,u,c,f,a,s=n[0].name+"";return r=new zw({props:{data:n[0],size:TT}}),{c:function(){t=vt("a"),i=vt("span"),yi(r.$$.fragment),e=pt(),o=vt("span"),u=yt(s),_t(i,"class","chat-search-result__avatar"),_t(o,"class","chat-search-result__name"),_t(t,"class","chat-search-result"),_t(t,"href",n[1])},m:function(s,l){st(s,t,l),ot(t,i),pi(r,i,null),ot(t,e),ot(t,o),ot(o,u),c=!0,f||(a=[mt(t,"click",wt(n[2])),mt(t,"click",n[3])],f=!0)},p:function(n,i){var e=jT(i,1)[0],o={};1&e&&(o.data=n[0]),r.$set(o),(!c||1&e)&&s!==(s=n[0].name+"")&&St(u,s),(!c||2&e)&&_t(t,"href",n[1])},i:function(n){c||(fi(r.$$.fragment,n),c=!0)},o:function(n){ai(r.$$.fragment,n),c=!1},d:function(n){n&&lt(t),bi(r),f=!1,Dn(a)}}}iT.subscribe(function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,tT),!!n&&n.type===S}.bind(undefined));var TT=25;function kT(n,t,i){var r,e=this,o=t.chat;return n.$$set=function(n){ST(this,e),"chat"in n&&i(0,o=n.chat)}.bind(this),n.$$.update=function(){ST(this,e),1&n.$$.dirty&&i(1,r=nT(o))}.bind(this),[o,r,function(){vT(o.chatId)},function(t){Lt.call(this,n,t)}]}var AT=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&bT(n,t)}(o,n);var t,i,r,e=mT(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(_T(t=e.call(this)),n,kT,ET,Nn,{chat:0}),t}return t=o,i&&pT(t.prototype,i),r&&pT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),xT=AT;function CT(n){return CT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},CT(n)}function RT(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function IT(n,t){return IT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},IT(n,t)}function MT(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=DT(n);if(t){var e=DT(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return UT(this,i)}}function UT(n,t){if(t&&("object"===CT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return PT(n)}function PT(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function DT(n){return DT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},DT(n)}function BT(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function NT(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return $T(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $T(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $T(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function LT(n){var t,i,r,e,o,u,c,f,a,s=n[0].userName+"";return r=new Vc({props:{data:n[0],size:zT}}),{c:function(){t=vt("a"),i=vt("span"),yi(r.$$.fragment),e=pt(),o=vt("span"),u=yt(s),_t(i,"class","chat-search-result__avatar"),_t(o,"class","chat-search-result__name"),_t(t,"class","chat-search-result"),_t(t,"href",n[1])},m:function(s,l){st(s,t,l),ot(t,i),pi(r,i,null),ot(t,e),ot(t,o),ot(o,u),c=!0,f||(a=[mt(t,"click",wt(n[2])),mt(t,"click",n[4])],f=!0)},p:function(n,i){var e=NT(i,1)[0],o={};1&e&&(o.data=n[0]),r.$set(o),(!c||1&e)&&s!==(s=n[0].userName+"")&&St(u,s),(!c||2&e)&&_t(t,"href",n[1])},i:function(n){c||(fi(r.$$.fragment,n),c=!0)},o:function(n){ai(r.$$.fragment,n),c=!1},d:function(n){n&&lt(t),bi(r),f=!1,Dn(a)}}}var zT=25;function WT(n,t,i){var r,e,o=this,u=t.user;return n.$$set=function(n){BT(this,o),"user"in n&&i(0,u=n.user)}.bind(this),n.$$.update=function(){BT(this,o),9&n.$$.dirty&&i(1,e="/".concat(TE,"/users/").concat(null===i(3,r=u.userLogin)||void 0===r?void 0:r.toLowerCase()))}.bind(this),[u,e,function(){u.userId&&sT(u.userId,undefined)},r,function(t){Lt.call(this,n,t)}]}var qT=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&IT(n,t)}(o,n);var t,i,r,e=MT(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(PT(t=e.call(this)),n,WT,LT,Nn,{user:0}),t}return t=o,i&&RT(t.prototype,i),r&&RT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),FT=qT;function GT(n){return GT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},GT(n)}function HT(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function VT(n,t){return VT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},VT(n,t)}function QT(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=KT(n);if(t){var e=KT(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return YT(this,i)}}function YT(n,t){if(t&&("object"===GT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return JT(n)}function JT(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function KT(n){return KT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},KT(n)}function XT(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ZT(n,t,i){var r=n.slice();return r[30]=t[i],r}function nk(n,t,i){var r=n.slice();return r[30]=t[i],r}function tk(n,t,i){var r=n.slice();return r[30]=t[i],r}function ik(n,t,i){var r=n.slice();return r[25]=t[i],r}function rk(n,t,i){var r=n.slice();return r[25]=t[i],r}function ek(n,t,i){var r=n.slice();return r[30]=t[i],r}function ok(n){var t,i,r,e,o=[ck,uk],u=[];function c(n,t){return n[16]?0:1}return i=c(n),r=u[i]=o[i](n),{c:function(){t=vt("div"),r.c(),_t(t,"class","chat-search-panel__result")},m:function(n,r){st(n,t,r),u[i].m(t,null),e=!0},p:function(n,e){var f=this,a=i;(i=c(n))===a?u[i].p(n,e):(ui(),ai(u[a],1,1,function(){XT(this,f),u[a]=null}.bind(this)),ci(),(r=u[i])?r.p(n,e):(r=u[i]=o[i](n)).c(),fi(r,1),r.m(t,null))},i:function(n){e||(fi(r),e=!0)},o:function(n){ai(r),e=!1},d:function(n){n&&lt(t),u[i].d()}}}function uk(n){var t,i,r,e,o,u,c,f=(n[10]||n[11])&&fk(n),a=n[15]&&ak(n),s=[lk,sk],l=[];function h(n,t){return"users"===n[8]?0:1}return e=h(n),o=l[e]=s[e](n),{c:function(){t=vt("div"),f&&f.c(),i=pt(),a&&a.c(),r=pt(),o.c(),u=bt(),_t(t,"class","chat-search-panel__tabs")},m:function(n,o){st(n,t,o),f&&f.m(t,null),ot(t,i),a&&a.m(t,null),st(n,r,o),l[e].m(n,o),st(n,u,o),c=!0},p:function(n,r){var c=this;n[10]||n[11]?f?f.p(n,r):((f=fk(n)).c(),f.m(t,i)):f&&(f.d(1),f=null),n[15]?a?a.p(n,r):((a=ak(n)).c(),a.m(t,null)):a&&(a.d(1),a=null);var v=e;(e=h(n))===v?l[e].p(n,r):(ui(),ai(l[v],1,1,function(){XT(this,c),l[v]=null}.bind(this)),ci(),(o=l[e])?o.p(n,r):(o=l[e]=s[e](n)).c(),fi(o,1),o.m(u.parentNode,u))},i:function(n){c||(fi(o),c=!0)},o:function(n){ai(o),c=!1},d:function(n){n&&lt(t),f&&f.d(),a&&a.d(),n&&lt(r),l[e].d(n),n&&lt(u)}}}function ck(n){var t,i;return{c:function(){t=vt("div"),(i=vt("div")).textContent="".concat(r("foundEmpty")),_t(i,"class","chat-search-panel__empty-result"),_t(t,"class","chat-search-panel__errors")},m:function(n,r){st(n,t,r),ot(t,i)},p:Rn,i:Rn,o:Rn,d:function(n){n&&lt(t)}}}function fk(n){var t,i,e,o,u,c=r("users")+"";return{c:function(){t=vt("div"),i=yt(c),_t(t,"class",e="chat-search-panel__tab"+("users"===n[8]?" chat-search-panel__tab_active":""))},m:function(r,e){st(r,t,e),ot(t,i),o||(u=mt(t,"click",n[22]),o=!0)},p:function(n,i){256&i[0]&&e!==(e="chat-search-panel__tab"+("users"===n[8]?" chat-search-panel__tab_active":""))&&_t(t,"class",e)},d:function(n){n&&lt(t),o=!1,u()}}}function ak(n){var t,i,e,o,u,c=r("chats")+"";return{c:function(){t=vt("div"),i=yt(c),_t(t,"class",e="chat-search-panel__tab"+("chats"===n[8]?" chat-search-panel__tab_active":""))},m:function(r,e){st(r,t,e),ot(t,i),o||(u=mt(t,"click",n[23]),o=!0)},p:function(n,i){256&i[0]&&e!==(e="chat-search-panel__tab"+("chats"===n[8]?" chat-search-panel__tab_active":""))&&_t(t,"class",e)},d:function(n){n&&lt(t),o=!1,u()}}}function sk(n){var t,i,r,e,o=n[14]&&hk(n),u=n[12]&&dk(n),c=n[13]&&pk(n);return{c:function(){t=vt("div"),o&&o.c(),i=pt(),u&&u.c(),r=pt(),c&&c.c(),_t(t,"class","chat-search-panel__tab-content")},m:function(n,f){st(n,t,f),o&&o.m(t,null),ot(t,i),u&&u.m(t,null),ot(t,r),c&&c.m(t,null),e=!0},p:function(n,e){var f=this;n[14]?o?(o.p(n,e),16384&e[0]&&fi(o,1)):((o=hk(n)).c(),fi(o,1),o.m(t,i)):o&&(ui(),ai(o,1,1,function(){XT(this,f),o=null}.bind(this)),ci()),n[12]?u?(u.p(n,e),4096&e[0]&&fi(u,1)):((u=dk(n)).c(),fi(u,1),u.m(t,r)):u&&(ui(),ai(u,1,1,function(){XT(this,f),u=null}.bind(this)),ci()),n[13]?c?(c.p(n,e),8192&e[0]&&fi(c,1)):((c=pk(n)).c(),fi(c,1),c.m(t,null)):c&&(ui(),ai(c,1,1,function(){XT(this,f),c=null}.bind(this)),ci())},i:function(n){e||(fi(o),fi(u),fi(c),e=!0)},o:function(n){ai(o),ai(u),ai(c),e=!1},d:function(n){n&&lt(t),o&&o.d(),u&&u.d(),c&&c.d()}}}function lk(n){var t,i,r,e,o=n[11]&&mk(n),u=n[9]&&_k(n),c=n[10]&&Sk(n);return{c:function(){t=vt("div"),o&&o.c(),i=pt(),u&&u.c(),r=pt(),c&&c.c(),_t(t,"class","chat-search-panel__tab-content")},m:function(n,f){st(n,t,f),o&&o.m(t,null),ot(t,i),u&&u.m(t,null),ot(t,r),c&&c.m(t,null),e=!0},p:function(n,e){var f=this;n[11]?o?(o.p(n,e),2048&e[0]&&fi(o,1)):((o=mk(n)).c(),fi(o,1),o.m(t,i)):o&&(ui(),ai(o,1,1,function(){XT(this,f),o=null}.bind(this)),ci()),n[9]?u?(u.p(n,e),512&e[0]&&fi(u,1)):((u=_k(n)).c(),fi(u,1),u.m(t,r)):u&&(ui(),ai(u,1,1,function(){XT(this,f),u=null}.bind(this)),ci()),n[10]?c?(c.p(n,e),1024&e[0]&&fi(c,1)):((c=Sk(n)).c(),fi(c,1),c.m(t,null)):c&&(ui(),ai(c,1,1,function(){XT(this,f),c=null}.bind(this)),ci())},i:function(n){e||(fi(o),fi(u),fi(c),e=!0)},o:function(n){ai(o),ai(u),ai(c),e=!1},d:function(n){n&&lt(t),o&&o.d(),u&&u.d(),c&&c.d()}}}function hk(n){for(var t,i,e,o,u=this,c=[],f=new Map,a=n[7],s=function(n){return XT(this,u),n[30].chatId}.bind(this),l=0;l<a.length;l+=1){var h=tk(n,a,l),v=s(h);f.set(v,c[l]=vk(v,h))}return{c:function(){t=vt("div"),(i=vt("div")).textContent="".concat(r("subscribed"),":"),e=pt();for(var n=0;n<c.length;n+=1)c[n].c();_t(i,"class","chat-search-panel__title"),_t(t,"class","chat-search-panel__subscribed")},m:function(n,r){st(n,t,r),ot(t,i),ot(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,i){131200&i[0]&&(a=n[7],ui(),c=vi(c,i,s,1,n,a,f,t,hi,vk,null,tk),ci())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)fi(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)ai(c[t]);o=!1},d:function(n){n&&lt(t);for(var i=0;i<c.length;i+=1)c[i].d()}}}function vk(n,t){var i,r,e;return(r=new xT({props:{chat:t[30]}})).$on("click",t[17]),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),e=!0},p:function(n,i){t=n;var e={};128&i[0]&&(e.chat=t[30]),r.$set(e)},i:function(n){e||(fi(r.$$.fragment,n),e=!0)},o:function(n){ai(r.$$.fragment,n),e=!1},d:function(n){n&&lt(i),bi(r,n)}}}function dk(n){for(var t,i,e,o,u=this,c=[],f=new Map,a=n[4],s=function(n){return XT(this,u),n[30].chatId}.bind(this),l=0;l<a.length;l+=1){var h=nk(n,a,l),v=s(h);f.set(v,c[l]=yk(v,h))}return{c:function(){t=vt("div"),(i=vt("div")).textContent="".concat(r("channels"),":"),e=pt();for(var n=0;n<c.length;n+=1)c[n].c();_t(i,"class","chat-search-panel__title"),_t(t,"class","chat-search-panel__channels")},m:function(n,r){st(n,t,r),ot(t,i),ot(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,i){131088&i[0]&&(a=n[4],ui(),c=vi(c,i,s,1,n,a,f,t,hi,yk,null,nk),ci())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)fi(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)ai(c[t]);o=!1},d:function(n){n&&lt(t);for(var i=0;i<c.length;i+=1)c[i].d()}}}function yk(n,t){var i,r,e;return(r=new xT({props:{chat:t[30]}})).$on("click",t[17]),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),e=!0},p:function(n,i){t=n;var e={};16&i[0]&&(e.chat=t[30]),r.$set(e)},i:function(n){e||(fi(r.$$.fragment,n),e=!0)},o:function(n){ai(r.$$.fragment,n),e=!1},d:function(n){n&&lt(i),bi(r,n)}}}function pk(n){for(var t,i,e,o,u=this,c=[],f=new Map,a=n[5],s=function(n){return XT(this,u),n[30].chatId}.bind(this),l=0;l<a.length;l+=1){var h=ZT(n,a,l),v=s(h);f.set(v,c[l]=bk(v,h))}return{c:function(){t=vt("div"),(i=vt("div")).textContent="".concat(r("groupChats"),":"),e=pt();for(var n=0;n<c.length;n+=1)c[n].c();_t(i,"class","chat-search-panel__title"),_t(t,"class","chat-search-panel__group")},m:function(n,r){st(n,t,r),ot(t,i),ot(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,i){131104&i[0]&&(a=n[5],ui(),c=vi(c,i,s,1,n,a,f,t,hi,bk,null,ZT),ci())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)fi(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)ai(c[t]);o=!1},d:function(n){n&&lt(t);for(var i=0;i<c.length;i+=1)c[i].d()}}}function bk(n,t){var i,r,e;return(r=new xT({props:{chat:t[30]}})).$on("click",t[17]),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),e=!0},p:function(n,i){t=n;var e={};32&i[0]&&(e.chat=t[30]),r.$set(e)},i:function(n){e||(fi(r.$$.fragment,n),e=!0)},o:function(n){ai(r.$$.fragment,n),e=!1},d:function(n){n&&lt(i),bi(r,n)}}}function mk(n){for(var t,i,e,o,u=this,c=[],f=new Map,a=n[6],s=function(n){return XT(this,u),n[30].chatId}.bind(this),l=0;l<a.length;l+=1){var h=ek(n,a,l),v=s(h);f.set(v,c[l]=wk(v,h))}return{c:function(){t=vt("div"),(i=vt("div")).textContent="".concat(r("privateChats"),":"),e=pt();for(var n=0;n<c.length;n+=1)c[n].c();_t(i,"class","chat-search-panel__title"),_t(t,"class","chat-search-panel__private")},m:function(n,r){st(n,t,r),ot(t,i),ot(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,i){131136&i[0]&&(a=n[6],ui(),c=vi(c,i,s,1,n,a,f,t,hi,wk,null,ek),ci())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)fi(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)ai(c[t]);o=!1},d:function(n){n&&lt(t);for(var i=0;i<c.length;i+=1)c[i].d()}}}function wk(n,t){var i,r,e;return(r=new xT({props:{chat:t[30]}})).$on("click",t[17]),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),e=!0},p:function(n,i){t=n;var e={};64&i[0]&&(e.chat=t[30]),r.$set(e)},i:function(n){e||(fi(r.$$.fragment,n),e=!0)},o:function(n){ai(r.$$.fragment,n),e=!1},d:function(n){n&&lt(i),bi(r,n)}}}function _k(n){for(var t,i,e,o,u=this,c=[],f=new Map,a=n[2],s=function(n){return XT(this,u),n[25].userId}.bind(this),l=0;l<a.length;l+=1){var h=rk(n,a,l),v=s(h);f.set(v,c[l]=gk(v,h))}return{c:function(){t=vt("div"),(i=vt("div")).textContent="".concat(r("friends"),":"),e=pt();for(var n=0;n<c.length;n+=1)c[n].c();_t(i,"class","chat-search-panel__title"),_t(t,"class","chat-search-panel__friends")},m:function(n,r){st(n,t,r),ot(t,i),ot(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,i){131076&i[0]&&(a=n[2],ui(),c=vi(c,i,s,1,n,a,f,t,hi,gk,null,rk),ci())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)fi(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)ai(c[t]);o=!1},d:function(n){n&&lt(t);for(var i=0;i<c.length;i+=1)c[i].d()}}}function gk(n,t){var i,r,e;return(r=new FT({props:{user:t[25]}})).$on("click",t[17]),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),e=!0},p:function(n,i){t=n;var e={};4&i[0]&&(e.user=t[25]),r.$set(e)},i:function(n){e||(fi(r.$$.fragment,n),e=!0)},o:function(n){ai(r.$$.fragment,n),e=!1},d:function(n){n&&lt(i),bi(r,n)}}}function Sk(n){for(var t,i,e,o,u=this,c=[],f=new Map,a=n[3],s=function(n){return XT(this,u),n[25].userId}.bind(this),l=0;l<a.length;l+=1){var h=ik(n,a,l),v=s(h);f.set(v,c[l]=jk(v,h))}return{c:function(){t=vt("div"),(i=vt("div")).textContent="".concat(r("mql5Members"),":"),e=pt();for(var n=0;n<c.length;n+=1)c[n].c();_t(i,"class","chat-search-panel__title"),_t(t,"class","chat-search-panel__users")},m:function(n,r){st(n,t,r),ot(t,i),ot(t,e);for(var u=0;u<c.length;u+=1)c[u].m(t,null);o=!0},p:function(n,i){131080&i[0]&&(a=n[3],ui(),c=vi(c,i,s,1,n,a,f,t,hi,jk,null,ik),ci())},i:function(n){if(!o){for(var t=0;t<a.length;t+=1)fi(c[t]);o=!0}},o:function(n){for(var t=0;t<c.length;t+=1)ai(c[t]);o=!1},d:function(n){n&&lt(t);for(var i=0;i<c.length;i+=1)c[i].d()}}}function jk(n,t){var i,r,e;return(r=new FT({props:{user:t[25]}})).$on("click",t[17]),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),e=!0},p:function(n,i){t=n;var e={};8&i[0]&&(e.user=t[25]),r.$set(e)},i:function(n){e||(fi(r.$$.fragment,n),e=!0)},o:function(n){ai(r.$$.fragment,n),e=!1},d:function(n){n&&lt(i),bi(r,n)}}}function Ok(n){var t,i,e,o,u,c,f,a,s,l,h,v,d=n[1]&&ok(n);return{c:function(){t=vt("div"),i=vt("div"),e=vt("input"),o=vt("i"),u=pt(),c=vt("div"),f=vt("i"),a=vt("i"),s=pt(),d&&d.c(),_t(e,"class","input"),_t(e,"type","text"),_t(e,"placeholder",r("searchUserPlaceholder")),_t(o,"class","icons-chat icons-chat_search"),_t(f,"class","icons-chat icons-chat_close"),_t(a,"class","icons-chat icons-chat_close-active"),_t(c,"title",r("close")),_t(c,"class","chat-search-panel__close"),_t(i,"class","chat-search-panel ui"),_t(t,"class","chat-search-panel__container")},m:function(r,y){st(r,t,y),ot(t,i),ot(i,e),n[19](e),jt(e,n[1]),ot(i,o),ot(i,u),ot(i,c),ot(c,f),ot(c,a),ot(t,s),d&&d.m(t,null),l=!0,h||(v=[mt(e,"input",n[20]),mt(e,"blur",n[21]),mt(c,"click",n[17])],h=!0)},p:function(n,i){var r=this;2&i[0]&&e.value!==n[1]&&jt(e,n[1]),n[1]?d?(d.p(n,i),2&i[0]&&fi(d,1)):((d=ok(n)).c(),fi(d,1),d.m(t,null)):d&&(ui(),ai(d,1,1,function(){XT(this,r),d=null}.bind(this)),ci())},i:function(n){l||(fi(d),l=!0)},o:function(n){ai(d),l=!1},d:function(i){i&&lt(t),n[19](null),d&&d.d(),h=!1,Dn(v)}}}function Ek(n,i,r){var e,o,u=this;qn(n,qi,function(n){return XT(this,u),r(18,e=n)}.bind(this));var c="",f=[],a=[],s=[],l=[],h=[],v=[],d="users",p=!1,b=!1,m=!1,w=!1,_=!1,g=!1,S=!1,j=!1,O=Or(function(n){var i=this;XT(this,u),TO(n,20).then(function(n){XT(this,i),r(3,a=n)}.bind(this))["catch"](function(n){var e=n.error;XT(this,i),r(3,a=[]),y.error(t.User,e)}.bind(this)),zj(n,20).then(function(n){XT(this,i),r(4,s=n.chats?n.chats:[])}.bind(this))["catch"](function(n){var e=n.error;XT(this,i),r(4,s=[]),y.error(t.User,e)}.bind(this)),zj(n,20,W).then(function(n){XT(this,i),r(5,l=n.chats?n.chats:[])}.bind(this))["catch"](function(n){var e=n.error;XT(this,i),r(5,l=[]),y.error(t.User,e)}.bind(this)),function(n,t){var i=this;return new Promise(function(r){var e=this;hc(this,i),n=n.toLowerCase();var o,u=[],c=dc(),f=Wn(c);if(f.length)u=yc(n,t,f),r(u);else var a=c.subscribe(function(i){var c=this;hc(this,e),clearTimeout(o),i.length>0?(u=yc(n,t,i),r(u),a&&a()):o=setTimeout(function(){hc(this,c),r(u),a&&a()}.bind(this),5e3)}.bind(this))}.bind(this))}(n,20).then(function(n){XT(this,i),r(2,f=n)}.bind(this))}.bind(this),300);function E(){Yn(qi,e.search=!1,e)}var T=function(){XT(this,u),c||E()}.bind(this),k=function(){XT(this,u),r(8,d="users")}.bind(this),A=function(){XT(this,u),r(8,d="chats")}.bind(this);return n.$$.update=function(){XT(this,u),2&n.$$.dirty[0]&&(c.length>2?O(c):(r(2,f=[]),r(3,a=[]),r(4,s=[]),r(5,l=[]),r(6,h=[]),r(7,v=[]))),65276&n.$$.dirty[0]&&(r(9,p=!!f.length),r(10,b=!!a.length),r(11,m=!!h.length),r(12,w=!!s.length),r(13,_=!!l.length),r(14,g=!!v.length),r(15,S=w||_||g),r(16,j=!(p||b||m||S))),36608&n.$$.dirty[0]&&(p||b||m||"users"!==d?S||"chats"!==d||r(8,d="users"):r(8,d="chats")),262145&n.$$.dirty[0]&&e.search&&o&&o.focus()}.bind(this),[o,c,f,a,s,l,h,v,d,p,b,m,w,_,g,S,j,E,e,function(n){var t=this;Wt[n?"unshift":"push"](function(){XT(this,t),r(0,o=n)}.bind(this))},function(){c=this.value,r(1,c)},T,k,A]}var Tk=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&VT(n,t)}(o,n);var t,i,r,e=QT(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(JT(t=e.call(this)),n,Ek,Ok,Nn,{},null,[-1,-1]),t}return t=o,i&&HT(t.prototype,i),r&&HT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),kk=Tk;function Ak(n){return Ak="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ak(n)}function xk(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Ck(n,t){return Ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Ck(n,t)}function Rk(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Uk(n);if(t){var e=Uk(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Ik(this,i)}}function Ik(n,t){if(t&&("object"===Ak(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Mk(n)}function Mk(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Uk(n){return Uk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uk(n)}function Pk(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Dk(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Bk(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Bk(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bk(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Nk(n,t,i){var r=n.slice();return r[7]=t[i],r}function $k(n){var t,i,e,o,u,c,f,a,s=r(n[7].key)+"";function l(){return n[3](n[7])}return{c:function(){t=vt("div"),i=vt("i"),e=pt(),o=yt(s),u=pt(),_t(i,"class","icons-chat icons-chat_"+n[7].icon),_t(t,"class",c="chat-tabs__item"+(n[0].type===n[7].type?" chat-tabs__item_active":""))},m:function(n,r){st(n,t,r),ot(t,i),ot(t,e),ot(t,o),ot(t,u),f||(a=mt(t,"click",l),f=!0)},p:function(i,r){n=i,1&r&&c!==(c="chat-tabs__item"+(n[0].type===n[7].type?" chat-tabs__item_active":""))&&_t(t,"class",c)},d:function(n){n&&lt(t),f=!1,a()}}}function Lk(n){for(var t,i,r,e,o,u,c=n[1],f=[],a=0;a<c.length;a+=1)f[a]=$k(Nk(n,c,a));return(o=new _l({props:{chat:n[0]}})).$on("close",n[4]),o.$on("submit",n[5]),{c:function(){t=vt("div"),i=vt("div");for(var n=0;n<f.length;n+=1)f[n].c();r=pt(),e=vt("div"),yi(o.$$.fragment),_t(i,"class","chat-tabs__list"),_t(e,"class","chat-tabs__content"),_t(t,"class","chat-tabs chat-tabs_create")},m:function(n,c){st(n,t,c),ot(t,i);for(var a=0;a<f.length;a+=1)f[a].m(i,null);ot(t,r),ot(t,e),pi(o,e,null),u=!0},p:function(n,t){var r=Dk(t,1)[0];if(7&r){var e;for(c=n[1],e=0;e<c.length;e+=1){var u=Nk(n,c,e);f[e]?f[e].p(u,r):(f[e]=$k(u),f[e].c(),f[e].m(i,null))}for(;e<f.length;e+=1)f[e].d(1);f.length=c.length}var a={};1&r&&(a.chat=n[0]),o.$set(a)},i:function(n){u||(fi(o.$$.fragment,n),u=!0)},o:function(n){ai(o.$$.fragment,n),u=!1},d:function(n){n&&lt(t),ht(f,n),bi(o)}}}function zk(n,t,i){var r=this,e=t.chat,o=Object.assign({},e);o.type=e.type===j?O:j;var u=[{type:j,key:"createGroup",icon:"flat-group-chats"},{type:O,key:"createChannel",icon:"flat-channels"}];function c(n){if(n!==e.type){var t=Object.assign({},e);for(var r in o)o.hasOwnProperty(r)&&i(0,e[r]=o[r],e);o=t}}var f=function(n){Pk(this,r),c(n.type)}.bind(this);return n.$$set=function(n){Pk(this,r),"chat"in n&&i(0,e=n.chat)}.bind(this),[e,u,c,f,function(t){Lt.call(this,n,t)},function(t){Lt.call(this,n,t)}]}var Wk=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Ck(n,t)}(o,n);var t,i,r,e=Rk(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Mk(t=e.call(this)),n,zk,Lk,Nn,{chat:0}),t}return t=o,i&&xk(t.prototype,i),r&&xk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),qk=Wk;function Fk(n){return Fk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Fk(n)}function Gk(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Hk(n,t){return Hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Hk(n,t)}function Vk(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Jk(n);if(t){var e=Jk(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Qk(this,i)}}function Qk(n,t){if(t&&("object"===Fk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Yk(n)}function Yk(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Jk(n){return Jk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jk(n)}function Kk(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Xk(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Zk(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Zk(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zk(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function nA(n){var t,i,r;return(i=new qk({props:{chat:n[0]}})).$on("close",n[1]),i.$on("submit",n[2]),{c:function(){t=vt("div"),yi(i.$$.fragment),_t(t,"slot","content")},m:function(n,e){st(n,t,e),pi(i,t,null),r=!0},p:function(n,t){var r={};1&t&&(r.chat=n[0]),i.$set(r)},i:function(n){r||(fi(i.$$.fragment,n),r=!0)},o:function(n){ai(i.$$.fragment,n),r=!1},d:function(n){n&&lt(t),bi(i)}}}function tA(n){var t,i;return(t=new $o({props:{withTitle:!1,withButtons:!1,$$slots:{content:[nA]},$$scope:{ctx:n}}})).$on("close",n[1]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r=Xk(i,1)[0],e={};129&r&&(e.$$scope={dirty:r,ctx:n}),t.$set(e)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function iA(n,i,e){var o,u=this;qn(n,qi,function(n){return Kk(this,u),e(4,o=n)}.bind(this));var c=$t(),a=i.selectedType,s=i.chat,l=void 0===s?{type:a,isPublic:0,isLimited:!1,name:"",description:"",links:"",inviteLink:"",language:R[TE],avatar:"",avatarToUpload:undefined,avatarIsPresent:!1,errorInviteLink:undefined,errorName:!1,errorDescription:!1,errorCommon:"",avatarError:undefined}:s,h=function(){Kk(this,u),c("close")}.bind(this);function v(n){var t=this;l.type===O?window.fz&&window.fz("event",{name:"MQL5+Chat+Channel+New",unit:"Type",value:l.isPublic?"public":"private"}):l.type===j&&window.fz&&window.fz("event",{name:"MQL5+Chat+Group+New",unit:"Type",value:l.isPublic?"public":"private"}),h(),vT(n,function(){Kk(this,t),Yn(qi,o.addMembers=!0,o)}.bind(this))}return n.$$set=function(n){Kk(this,u),"selectedType"in n&&e(3,a=n.selectedType),"chat"in n&&e(0,l=n.chat)}.bind(this),[l,h,function(){var n=this;e(0,l.errorCommon="",l),vO(l).then(function(i){var r=this;Kk(this,n),l.avatarIsPresent&&l.avatarToUpload?yO(l.avatarToUpload,i).then(function(){Kk(this,r),v(i)}.bind(this))["catch"](function(n){var i=n.error;Kk(this,r),e(0,l.avatarError=i,l),y.error(t.User,i,"Upload avatar")}.bind(this)):v(i)}.bind(this))["catch"](function(i){var o=i.error;Kk(this,n),y.error(t.User,o,"Create chat"),o===f.In?e(0,l.errorInviteLink=r("inviteLinkExists"),l):e(0,l.errorCommon=o,l)}.bind(this))},a]}var rA=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Hk(n,t)}(o,n);var t,i,r,e=Vk(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(Yk(t=e.call(this)),n,iA,tA,Nn,{selectedType:3,chat:0}),t}return t=o,i&&Gk(t.prototype,i),r&&Gk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),eA=rA;function oA(n){return oA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},oA(n)}function uA(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function cA(n,t){return cA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},cA(n,t)}function fA(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=lA(n);if(t){var e=lA(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return aA(this,i)}}function aA(n,t){if(t&&("object"===oA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sA(n)}function sA(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function lA(n){return lA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lA(n)}function hA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function vA(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return dA(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return dA(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dA(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function yA(n){var t,i;return(t=new eA({props:{selectedType:n[0]}})).$on("close",n[5]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};1&i&&(r.selectedType=n[0]),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function pA(n){var t,i,e,o,u,c,f,a,s,l,h,v,d,y,p=n[1].create&&yA(n);return{c:function(){t=vt("div"),i=vt("button"),e=vt("i"),o=pt(),u=vt("button"),c=vt("i"),f=pt(),a=vt("button"),s=vt("i"),l=pt(),p&&p.c(),h=bt(),_t(e,"class","icons-chat icons-chat_search"),_t(i,"class","chat-tools-panel__button"),_t(i,"title",r("search")),_t(c,"class","icons-chat icons-chat_add-group-chat"),_t(u,"class","chat-tools-panel__button"),_t(u,"title",r("createGroup")),_t(s,"class","icons-chat icons-chat_add-channel"),_t(a,"class","chat-tools-panel__button"),_t(a,"title",r("createChannel")),_t(t,"class","chat-tools-panel")},m:function(r,b){st(r,t,b),ot(t,i),ot(i,e),ot(t,o),ot(t,u),ot(u,c),ot(t,f),ot(t,a),ot(a,s),st(r,l,b),p&&p.m(r,b),st(r,h,b),v=!0,d||(y=[mt(i,"click",wt(n[2])),mt(u,"click",wt(n[3])),mt(a,"click",wt(n[4]))],d=!0)},p:function(n,t){var i=this,r=vA(t,1)[0];n[1].create?p?(p.p(n,r),2&r&&fi(p,1)):((p=yA(n)).c(),fi(p,1),p.m(h.parentNode,h)):p&&(ui(),ai(p,1,1,function(){hA(this,i),p=null}.bind(this)),ci())},i:function(n){v||(fi(p),v=!0)},o:function(n){ai(p),v=!1},d:function(n){n&&lt(t),n&&lt(l),p&&p.d(n),n&&lt(h),d=!1,Dn(y)}}}function bA(n,t,i){var r,e=this;qn(n,qi,function(n){return hA(this,e),i(1,r=n)}.bind(this));var o=j,u=function(){hA(this,e),Yn(qi,r.search=!0,r)}.bind(this),c=function(){hA(this,e),i(0,o=j),Yn(qi,r.create=!0,r)}.bind(this),f=function(){hA(this,e),i(0,o=O),Yn(qi,r.create=!0,r)}.bind(this),a=function(){hA(this,e),Yn(qi,r.create=!1,r)}.bind(this);return[o,r,u,c,f,a]}var mA=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&cA(n,t)}(o,n);var t,i,r,e=fA(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(sA(t=e.call(this)),n,bA,pA,Nn,{}),t}return t=o,i&&uA(t.prototype,i),r&&uA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),wA=mA;function _A(n){return _A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_A(n)}function gA(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function SA(n,t){return SA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},SA(n,t)}function jA(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=TA(n);if(t){var e=TA(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return OA(this,i)}}function OA(n,t){if(t&&("object"===_A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return EA(n)}function EA(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function TA(n){return TA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},TA(n)}function kA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function AA(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return xA(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return xA(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xA(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function CA(n,t,i){var r=n.slice();return r[4]=t[i],r}function RA(n){for(var t,i=n[0],r=[],e=0;e<i.length;e+=1)r[e]=IA(CA(n,i,e));return{c:function(){t=vt("div");for(var n=0;n<r.length;n+=1)r[n].c();_t(t,"class","chat-choice-type")},m:function(n,i){st(n,t,i);for(var e=0;e<r.length;e+=1)r[e].m(t,null)},p:function(n,e){if(7&e){var o;for(i=n[0],o=0;o<i.length;o+=1){var u=CA(n,i,o);r[o]?r[o].p(u,e):(r[o]=IA(u),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=i.length}},d:function(n){n&&lt(t),ht(r,n)}}}function IA(n){var t,i,r,e,o,u,c;function f(){return n[3](n[4])}return{c:function(){t=vt("button"),_t(i=vt("i"),"class",r="icons-chat icons-chat_"+n[2][n[4]].icon),_t(t,"class",e="chat-choice-type__item"+(n[1]===n[4]?" chat-choice-type__item_active":"")),_t(t,"title",o=n[2][n[4]].title)},m:function(n,r){st(n,t,r),ot(t,i),u||(c=mt(t,"click",wt(f)),u=!0)},p:function(u,c){n=u,1&c&&r!==(r="icons-chat icons-chat_"+n[2][n[4]].icon)&&_t(i,"class",r),3&c&&e!==(e="chat-choice-type__item"+(n[1]===n[4]?" chat-choice-type__item_active":""))&&_t(t,"class",e),1&c&&o!==(o=n[2][n[4]].title)&&_t(t,"title",o)},d:function(n){n&&lt(t),u=!1,c()}}}function MA(n){var t,i=n[0].length&&RA(n);return{c:function(){i&&i.c(),t=bt()},m:function(n,r){i&&i.m(n,r),st(n,t,r)},p:function(n,r){var e=AA(r,1)[0];n[0].length?i?i.p(n,e):((i=RA(n)).c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:Rn,o:Rn,d:function(n){i&&i.d(n),n&&lt(t)}}}function UA(n,t,i){var e,o,u=this;qn(n,XO,function(n){return kA(this,u),i(0,e=n)}.bind(this)),qn(n,ZO,function(n){return kA(this,u),i(1,o=n)}.bind(this));var c=[{icon:"flat-chats",title:r("allChats")},{icon:"flat-personal-chats",title:r("privateChats")},{icon:"flat-group-chats",title:r("groupChats")},{icon:"flat-channels",title:r("channels")}],f=function(n){kA(this,u),Yn(ZO,o=n,o)}.bind(this);return[e,o,c,f]}var PA=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&SA(n,t)}(o,n);var t,i,r,e=jA(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(EA(t=e.call(this)),n,UA,MA,Nn,{}),t}return t=o,i&&gA(t.prototype,i),r&&gA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),DA=PA,BA=undefined;function NA(n){return NA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},NA(n)}function $A(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var LA=Ei([]),zA=Ei([]),WA=!1,qA=!1;function FA(n,t){for(var i=undefined,r=0,e=t.length;r<e;r++){var o=t[r];if(o.topMessage&&o.topMessage.messageId===n){i=o;break}}return i}function GA(n){qA=!0,n&&n.length?LA.set(n):(zA.subscribe(dx),function(){var n=this,i=Rj()||C.et;AO(z,i,W,200).then(function(r){var e=this;$A(this,n),SE!==N.wt?r.length||i===C.et?LA.set(r):AO(z,C.et,W,200).then(function(n){$A(this,e),LA.set(n)}.bind(this))["catch"](function(n){var i=n.error;$A(this,e),y.error(t.System,i,"New list")}.bind(this)):LA.set(r)}.bind(this))["catch"](function(i){var r=i.error;$A(this,n),y.error(t.System,r,"New list")}.bind(this))}())}function HA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}LA.subscribe(function(n){var i,r,e,o,u,c,f=this;if($A(this,BA),qA){var a=Rj()||C.et,s=[],l=0,h=[];if(SE!==N.wt){for(var v=function(t,i){var r=this,f=n[t];if(!f.topMessage)return"continue";if(~h.indexOf(f.topMessage.messageId))return"continue";if(f.topMessage.recType===_.Gn){var a=f.topMessage.collection;if(!a||f.topMessage.data)return"continue";a.text&&a.text.forEach(function(t){$A(this,r);var i=FA(t,n);i&&i.topMessage&&f.topMessage&&(h.push(i.topMessage.messageId),f.topMessage.data,f.topMessage.data={text:i.topMessage})}.bind(this)),a.file&&a.file.forEach(function(t){$A(this,r);var i=FA(t,n);if(i&&i.topMessage&&f.topMessage){h.push(i.topMessage.messageId);var e=i.topMessage;if("object"===NA(e.data)&&e.recType===_.zn){var o=e.data;if(o)0===o.mime.toLowerCase().indexOf("image")&&(f.topMessage.data?f.topMessage.data.files||(f.topMessage.data.files=[]):f.topMessage.data={files:[]},f.topMessage.data.files.push(i.topMessage))}}}.bind(this))}else if(f.topMessage.recType===_.zn){if(f.topMessage.data&&("preview"in f.topMessage.data&&f.topMessage.data.preview&&f.topMessage.data.preview.type!==F||!f.topMessage.data.preview))return h.push(f.topMessage.messageId),"continue"}else if(f.topMessage.recType===_.Ln){var v=100;switch(f.language){case C.ct:case C.st:case C.yt:v=30}if(f.topMessage.data&&"text"in f.topMessage.data&&"string"==typeof f.topMessage.data.text&&f.topMessage.data.text.length<v&&!(null===(o=null===(e=f.topMessage.tags)||void 0===e?void 0:e.files)||void 0===o?void 0:o.linkedIds))return h.push(f.topMessage.messageId),"continue";(null===(c=null===(u=f.topMessage.tags)||void 0===u?void 0:u.files)||void 0===c?void 0:c.linkedIds)&&f.topMessage.tags.files.linkedIds.forEach(function(t){$A(this,r);var i=FA(t,n);if(i&&i.topMessage&&f.topMessage){h.push(i.topMessage.messageId);var e=i.topMessage;if("object"===NA(e.data)&&e.recType===_.zn){var o=e.data;if(o)0===o.mime.toLowerCase().indexOf("image")&&(f.topMessage.data?f.topMessage.data.files||(f.topMessage.data.files=[]):f.topMessage.data={files:[]},f.topMessage.data.files.push(i.topMessage))}}}.bind(this))}return s.push(f),l++,h.push(f.topMessage.messageId),l>=32?"break":void 0},d=0,p=n.length;d<p;d++){var b=v(d);if("continue"!==b&&"break"===b)break}s.length<32&&!WA&&a!==C.et&&(WA=!0,AO(z,C.et,W,200).then(function(n){var t=this;$A(this,f),LA.update(function(i){return $A(this,t),i.concat(n)}.bind(this))}.bind(this))["catch"](function(n){var i=n.error;$A(this,f),y.error(t.System,i,"New list")}.bind(this))),zA.set(s)}else{for(var m=function(t,e){var o=this,u=n[t];if(!u.topMessage)return"continue";if(~h.indexOf(u.topMessage.messageId))return"continue";if(u.topMessage.recType===_.Gn){var c=u.topMessage.collection;if(!c||u.topMessage.data)return"continue";c.text&&c.text.forEach(function(t){$A(this,o);var i=FA(t,n);i&&i.topMessage&&u.topMessage&&(h.push(i.topMessage.messageId),u.topMessage.data,u.topMessage.data={text:i.topMessage})}.bind(this)),c.file&&c.file.forEach(function(t){$A(this,o);var i=FA(t,n);if(i&&i.topMessage&&u.topMessage){h.push(i.topMessage.messageId);var r=i.topMessage;if("object"===NA(r.data)&&r.recType===_.zn){var e=r.data;if(e)0===e.mime.toLowerCase().indexOf("image")&&(u.topMessage.data?u.topMessage.data.files||(u.topMessage.data.files=[]):u.topMessage.data={files:[]},u.topMessage.data.files.push(i.topMessage))}}}.bind(this))}else(null===(r=null===(i=u.topMessage.tags)||void 0===i?void 0:i.files)||void 0===r?void 0:r.linkedIds)&&u.topMessage.tags.files.linkedIds.forEach(function(t){$A(this,o);var i=FA(t,n);if(i&&i.topMessage&&u.topMessage){h.push(i.topMessage.messageId);var r=i.topMessage;if("object"===NA(r.data)&&r.recType===_.zn){var e=r.data;if(e)0===e.mime.toLowerCase().indexOf("image")&&(u.topMessage.data?u.topMessage.data.files||(u.topMessage.data.files=[]):u.topMessage.data={files:[]},u.topMessage.data.files.push(i.topMessage))}}}.bind(this));return s.push(u),l++,h.push(u.topMessage.messageId),l>=32?"break":void 0},w=0,g=n.length;w<g;w++){var S=m(w);if("continue"!==S&&"break"===S)break}zA.set(s)}}}.bind(undefined));var VA=Ei([]);function QA(n){n&&n.length?VA.set(n):(VA.subscribe(dx),function(){var n=this,i=Rj()||C.et;AO(L,i,q,32).then(function(r){var e=this;HA(this,n),SE!==N.wt?r.length||i===C.et?(r.length<32&&i!==C.et&&AO(L,C.et,q,32).then(function(n){var t=this;HA(this,e),VA.update(function(i){return HA(this,t),i.concat(n)}.bind(this))}.bind(this))["catch"](function(n){var i=n.error;HA(this,e),y.error(t.System,i,"Popular list")}.bind(this)),VA.set(r)):AO(L,C.et,q,32).then(function(n){HA(this,e),VA.set(n)}.bind(this))["catch"](function(n){var i=n.error;HA(this,e),y.error(t.System,i,"Popular list")}.bind(this)):VA.set(r)}.bind(this))["catch"](function(i){var r=i.error;HA(this,n),y.error(t.System,r,"Popular list")}.bind(this))}())}function YA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var JA=Ei([]);function KA(n){n&&n.length?JA.set(n):(JA.subscribe(dx),function(){var n=this,i=Rj()||C.et;AO($,i,q,32).then(function(r){var e=this;YA(this,n),SE!==N.wt?r.length||i===C.et?(r.length<32&&i!==C.et&&AO($,C.et,q,32).then(function(n){var t=this;YA(this,e),JA.update(function(i){return YA(this,t),i.concat(n)}.bind(this))}.bind(this))["catch"](function(n){var i=n.error;YA(this,e),y.error(t.System,i,"Test list")}.bind(this)),JA.set(r)):AO($,C.et,q,32).then(function(n){YA(this,e),JA.set(n)}.bind(this))["catch"](function(n){var i=n.error;YA(this,e),y.error(t.System,i,"Test list")}.bind(this)):JA.set(r)}.bind(this))["catch"](function(i){var r=i.error;YA(this,n),y.error(t.System,r,"Test list")}.bind(this))}())}function XA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ZA(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function nx(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function tx(n,t,i){return t&&nx(n.prototype,t),i&&nx(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}var ix,rx,ex,ox=undefined&&undefined.__classPrivateFieldGet||function(n,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(n):r?r.value:t.get(n)},ux=[],cx=function(){function n(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];ZA(this,n),this.name=t,this.keys=i,ux.push(this)}return tx(n,[{key:"add",value:function(n){var t=this;return new Promise(function(i,r){XA(this,t),ex?ex.add(this,n).then(i)["catch"](r):r("Database not ready")}.bind(this))}},{key:"getAll",value:function(n){var t=this;return new Promise(function(i,r){XA(this,t),ex?ex.getAll(this,n).then(i)["catch"](r):r("Database not ready")}.bind(this))}},{key:"clear",value:function(){var n=this;return new Promise(function(t,i){XA(this,n),ex?ex.clear(this).then(t)["catch"](i):i("Database not ready")}.bind(this))}}]),n}(),fx=function(){function n(){var t=arguments.length>0&&arguments[0]!==undefined&&arguments[0];ZA(this,n),ix.add(this),this.name="chats",this.debug=!1,this.version=3,this.debug=t}return tx(n,[{key:"outputDebug",value:function(n,i){this.debug&&y.debug(t.u,"".concat(i,": ").concat(n))}},{key:"connect",value:function(){var n=this;return new Promise(function(i,r){var e=this;XA(this,n);var u=indexedDB.open(this.name,this.version);u.onerror=function(n){XA(this,e);var i=o(n);y.error(t.u,i),r(n)}.bind(this),u.onsuccess=function(){XA(this,e),i(u.result)}.bind(this),u.onupgradeneeded=function(){var n=this;XA(this,e);var i=u.result;ux.forEach(function(r){var e=this;XA(this,n);try{i.objectStoreNames.contains(r.name)&&i.deleteObjectStore(r.name)}catch(u){y.error(t.u,u)}var o=i.createObjectStore(r.name,{keyPath:r.keys[0].keyPath,autoIncrement:r.keys[0].autoIncrement});r.keys.forEach(function(n){XA(this,e),o.createIndex(n.keyPath,[n.keyPath],{unique:!1})}.bind(this))}.bind(this))}.bind(this)}.bind(this))}},{key:"add",value:function(n,t){var i=this;return this.outputDebug("add",n.name),new Promise(function(r,e){var o=this;if(XA(this,i),Array.isArray(t)){var u=0,c=function(){var i=this;XA(this,o),ox(this,ix,"m",rx).call(this,n,t.slice(u,u+100)).then(function(){XA(this,i),u+=100,t.length>u?c():r()}.bind(this))["catch"](e)}.bind(this);c()}else ox(this,ix,"m",rx).call(this,n,t).then(r)["catch"](e)}.bind(this))}},{key:"getAll",value:function(n,t){var i=this;return this.outputDebug("getAll",n.name),new Promise(function(r,e){var o=this;XA(this,i),this.connect().then(function(i){var e=this;XA(this,o);var u=i.transaction(n.name,"readonly").objectStore(n.name);if(t&&u.indexNames.contains(t)&&(u=u.index(t)),"undefined"!=typeof IDBObjectStore.prototype.getAll){var c=u.getAll();c.onsuccess=function(){XA(this,e),i.close(),r(c.result)}.bind(this)}else{var f=[],a=u.openCursor();a.onsuccess=function(){XA(this,e);var n=a.result;n?(f.push(n.value),n["continue"]()):r(f)}.bind(this)}}.bind(this))["catch"](e)}.bind(this))}},{key:"clear",value:function(n){var i=this;return this.outputDebug("clear",n.name),new Promise(function(r,e){var o=this;XA(this,i),this.connect().then(function(i){var u=this;XA(this,o);var c=i.transaction(n.name,"readwrite").objectStore(n.name).clear();c.onsuccess=function(){XA(this,u),i.close(),r()}.bind(this),c.onerror=function(n){XA(this,u),i.close(),y.error(t.u,n),e(n)}.bind(this)}.bind(this))["catch"](e)}.bind(this))}}]),n}();ix=new WeakSet,rx=function(n,i){var r=this;return this.outputDebug("put",n.name),new Promise(function(e,o){var u=this;XA(this,r),this.connect().then(function(r){var c=this;XA(this,u);var f,a=r.transaction(n.name,"readwrite").objectStore(n.name);if(Array.isArray(i)?i.forEach(function(n){XA(this,c),f=a.put(n)}.bind(this)):f=a.put(i),!f)return r.close(),void e();f.onsuccess=function(){XA(this,c),r.close(),e()}.bind(this),f.onerror=function(n){XA(this,c),r.close(),y.error(t.u,n),o(n)}.bind(this)}.bind(this))["catch"](o)}.bind(this))};var ax,sx,lx,hx=undefined;function vx(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var dx=Or(function(){var n=this;vx(this,hx),ax&&sx&&lx&&(ax.clear().then(function(){vx(this,n),null==ax||ax.add(Wn(zA))}.bind(this)),sx.clear().then(function(){vx(this,n),null==sx||sx.add(Wn(VA))}.bind(this)),lx.clear().then(function(){vx(this,n),null==lx||lx.add(Wn(JA))}.bind(this)))}.bind(undefined),1e3);function yx(n,i){var r=this;n.getAll().then(function(n){if(vx(this,r),n&&n.length){var t=Rj();(new Date).getTime()-n[0].timestamp>6e4||n[0].language!==t?i([]):i(function(n){var t=this;return n.forEach(function(n){var i,r=this;vx(this,t);var e=n.topMessage;if(e&&(e.recType===_.zn||e.recType===_.Gn)){var o=e.data;o&&(e.recType===_.zn&&(null===(i=null==o?void 0:o.preview)||void 0===i?void 0:i.blob)&&(o.preview.src=URL.createObjectURL(o.preview.blob)),e.recType===_.Gn&&"files"in o&&o.files&&o.files.length&&o.files.forEach(function(n){var t;if(vx(this,r),n.recType===_.zn){var i=null===(t=null==n?void 0:n.data)||void 0===t?void 0:t.preview;(null==i?void 0:i.blob)&&(i.src=URL.createObjectURL(i.blob))}}.bind(this)))}}.bind(this)),n}(n))}else i([])}.bind(this))["catch"](function(n){vx(this,r),y.error(t.System,n,"Selections"),i([])}.bind(this))}function px(n){return px="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},px(n)}function bx(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function mx(n,t){return mx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},mx(n,t)}function wx(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Sx(n);if(t){var e=Sx(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return _x(this,i)}}function _x(n,t){if(t&&("object"===px(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gx(n)}function gx(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Sx(n){return Sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sx(n)}function jx(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ox(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Ex(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ex(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ex(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function Tx(n){var t,i,e,o=n[0].countMembers+"";return{c:function(){t=vt("div"),i=vt("i"),e=yt(o),_t(i,"class","icons-chat icons-chat_members"),_t(t,"class","chat-block__members"),_t(t,"title",r("members"))},m:function(n,r){st(n,t,r),ot(t,i),ot(t,e)},p:function(n,t){1&t&&o!==(o=n[0].countMembers+"")&&St(e,o)},d:function(n){n&&lt(t)}}}function kx(n){var t,i,r=n[0].description+"";return{c:function(){t=vt("div"),i=yt(r),_t(t,"class","chat-block__desc")},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,t){1&t&&r!==(r=n[0].description+"")&&St(i,r)},d:function(n){n&&lt(t)}}}function Ax(n){var t,i,r,e,o,u,c,f,a,s,l,h,v,d=n[0].name+"";r=new zw({props:{data:n[0],size:xx}});var y=n[1]&&Tx(n),p=n[0].description&&kx(n);return{c:function(){t=vt("div"),i=vt("a"),yi(r.$$.fragment),e=pt(),o=vt("div"),u=vt("div"),c=vt("a"),f=yt(d),a=pt(),y&&y.c(),s=pt(),p&&p.c(),_t(i,"href",n[2]),_t(i,"class","chat-block__avatar"),_t(c,"href",n[2]),_t(u,"class","chat-block__name"),_t(o,"class","chat-block__content"),_t(t,"class","chat-block")},m:function(d,b){st(d,t,b),ot(t,i),pi(r,i,null),ot(t,e),ot(t,o),ot(o,u),ot(u,c),ot(c,f),ot(o,a),y&&y.m(o,null),ot(o,s),p&&p.m(o,null),l=!0,h||(v=[mt(i,"click",wt(n[3])),mt(c,"click",wt(n[3]))],h=!0)},p:function(n,t){var e=Ox(t,1)[0],u={};1&e&&(u.data=n[0]),r.$set(u),(!l||4&e)&&_t(i,"href",n[2]),(!l||1&e)&&d!==(d=n[0].name+"")&&St(f,d),(!l||4&e)&&_t(c,"href",n[2]),n[1]?y?y.p(n,e):((y=Tx(n)).c(),y.m(o,s)):y&&(y.d(1),y=null),n[0].description?p?p.p(n,e):((p=kx(n)).c(),p.m(o,null)):p&&(p.d(1),p=null)},i:function(n){l||(fi(r.$$.fragment,n),l=!0)},o:function(n){ai(r.$$.fragment,n),l=!1},d:function(n){n&&lt(t),bi(r),y&&y.d(),p&&p.d(),h=!1,Dn(v)}}}var xx=80;function Cx(n,t,i){var r,e=this,o=t.chat,u=t.showCountMembers,c=void 0!==u&&u;return n.$$set=function(n){jx(this,e),"chat"in n&&i(0,o=n.chat),"showCountMembers"in n&&i(1,c=n.showCountMembers)}.bind(this),n.$$.update=function(){jx(this,e),1&n.$$.dirty&&i(2,r=nT(o))}.bind(this),[o,c,r,function(){vT(o.chatId)}]}var Rx=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&mx(n,t)}(o,n);var t,i,r,e=wx(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(gx(t=e.call(this)),n,Cx,Ax,Nn,{chat:0,showCountMembers:1}),t}return t=o,i&&bx(t.prototype,i),r&&bx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Ix=Rx;function Mx(n){return Mx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Mx(n)}var Ux=undefined;function Px(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Dx(n,t){return Dx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Dx(n,t)}function Bx(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=Lx(n);if(t){var e=Lx(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return Nx(this,i)}}function Nx(n,t){if(t&&("object"===Mx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $x(n)}function $x(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Lx(n){return Lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lx(n)}function zx(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return Wx(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Wx(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wx(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function qx(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Fx(n,t,i){var r=n.slice();return r[4]=t[i],r}var Gx=function(n){return qx(this,Ux),{}}.bind(undefined),Hx=function(n){return qx(this,Ux),{}}.bind(undefined);function Vx(n,t){var i,r,e;return r=new Ix({props:{chat:t[4],showCountMembers:t[1]}}),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),e=!0},p:function(n,i){t=n;var e={};1&i&&(e.chat=t[4]),2&i&&(e.showCountMembers=t[1]),r.$set(e)},i:function(n){e||(fi(r.$$.fragment,n),e=!0)},o:function(n){ai(r.$$.fragment,n),e=!1},d:function(n){n&&lt(i),bi(r,n)}}}function Qx(n){for(var t,i,r,e=this,o=[],u=new Map,c=n[3].title,f=Fn(c,n,n[2],Hx),a=n[0],s=function(n){return qx(this,e),n[4].chatId}.bind(this),l=0;l<a.length;l+=1){var h=Fx(n,a,l),v=s(h);u.set(v,o[l]=Vx(v,h))}return{c:function(){t=vt("div"),f&&f.c(),i=pt();for(var n=0;n<o.length;n+=1)o[n].c();_t(t,"class","chat-intro__list-box")},m:function(n,e){st(n,t,e),f&&f.m(t,null),ot(t,i);for(var u=0;u<o.length;u+=1)o[u].m(t,null);r=!0},p:function(n,i){var e=zx(i,1)[0];f&&f.p&&(!r||4&e)&&Vn(f,c,n,n[2],r?Hn(c,n[2],e,Gx):Qn(n[2]),Hx),3&e&&(a=n[0],ui(),o=vi(o,e,s,1,n,a,u,t,hi,Vx,null,Fx),ci())},i:function(n){if(!r){fi(f,n);for(var t=0;t<a.length;t+=1)fi(o[t]);r=!0}},o:function(n){ai(f,n);for(var t=0;t<o.length;t+=1)ai(o[t]);r=!1},d:function(n){n&&lt(t),f&&f.d(n);for(var i=0;i<o.length;i+=1)o[i].d()}}}function Yx(n,t,i){var r=this,e=t.$$slots,o=void 0===e?{}:e,u=t.$$scope,c=t.chatList,f=void 0===c?[]:c,a=t.showCountMembers,s=void 0!==a&&a;return n.$$set=function(n){qx(this,r),"chatList"in n&&i(0,f=n.chatList),"showCountMembers"in n&&i(1,s=n.showCountMembers),"$$scope"in n&&i(2,u=n.$$scope)}.bind(this),[f,s,u,o]}var Jx=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Dx(n,t)}(o,n);var t,i,r,e=Bx(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi($x(t=e.call(this)),n,Yx,Qx,Nn,{chatList:0,showCountMembers:1}),t}return t=o,i&&Px(t.prototype,i),r&&Px(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),Kx=Jx;function Xx(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Zx(n,t){return Zx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Zx(n,t)}function nC(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=rC(n);if(t){var e=rC(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return tC(this,i)}}function tC(n,t){if(t&&("object"===eC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return iC(n)}function iC(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function rC(n){return rC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rC(n)}function eC(n){return eC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},eC(n)}function oC(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function uC(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return cC(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return cC(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cC(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function fC(n){var t,i,r,e=Xr({dateTime:n[0].date,type:"smart"})+"";return{c:function(){t=vt("span"),i=yt(e),_t(t,"title",r=n[0].dateText)},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,o){1&o&&e!==(e=Xr({dateTime:n[0].date,type:"smart"})+"")&&St(i,e),1&o&&r!==(r=n[0].dateText)&&_t(t,"title",r)},d:function(n){n&&lt(t)}}}function aC(n){var t,i,r,e,o=Xr({dateTime:n[0].topMessage.date,type:"smart"})+"",u=n[0].type===j&&sC(n);return{c:function(){u&&u.c(),t=pt(),i=vt("span"),r=yt(o),_t(i,"title",e=n[0].topMessage.dateText)},m:function(n,e){u&&u.m(n,e),st(n,t,e),st(n,i,e),ot(i,r)},p:function(n,c){n[0].type===j?u?u.p(n,c):((u=sC(n)).c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),1&c&&o!==(o=Xr({dateTime:n[0].topMessage.date,type:"smart"})+"")&&St(r,o),1&c&&e!==(e=n[0].topMessage.dateText)&&_t(i,"title",e)},d:function(n){u&&u.d(n),n&&lt(t),n&&lt(i)}}}function sC(n){var t,i,r=n[0].topMessage.authorName+"";return{c:function(){t=yt(r),i=yt(",")},m:function(n,r){st(n,t,r),st(n,i,r)},p:function(n,i){1&i&&r!==(r=n[0].topMessage.authorName+"")&&St(t,r)},d:function(n){n&&lt(t),n&&lt(i)}}}function lC(n){var t,i=n[0].description+"";return{c:function(){t=yt(i)},m:function(n,i){st(n,t,i)},p:function(n,r){1&r&&i!==(i=n[0].description+"")&&St(t,i)},d:function(n){n&&lt(t)}}}function hC(n){var t;function i(n,t){return n[0].topMessage.recType===_.Ln||n[0].topMessage.recType===_.Gn?dC:n[0].topMessage.recType===_.zn?vC:void 0}var r=i(n),e=r&&r(n);return{c:function(){e&&e.c(),t=bt()},m:function(n,i){e&&e.m(n,i),st(n,t,i)},p:function(n,o){r===(r=i(n))&&e?e.p(n,o):(e&&e.d(1),(e=r&&r(n))&&(e.c(),e.m(t.parentNode,t)))},d:function(n){e&&e.d(n),n&&lt(t)}}}function vC(n){var t,i=n[0].topMessage.data.preview&&n[0].topMessage.data.preview.type===F&&yC(n);return{c:function(){i&&i.c(),t=bt()},m:function(n,r){i&&i.m(n,r),st(n,t,r)},p:function(n,r){n[0].topMessage.data.preview&&n[0].topMessage.data.preview.type===F?i?i.p(n,r):((i=yC(n)).c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d:function(n){i&&i.d(n),n&&lt(t)}}}function dC(n){var t,i,r=n[3]&&pC(n),e=n[2]&&bC(n);return{c:function(){r&&r.c(),t=pt(),e&&e.c(),i=bt()},m:function(n,o){r&&r.m(n,o),st(n,t,o),e&&e.m(n,o),st(n,i,o)},p:function(n,o){n[3]?r?r.p(n,o):((r=pC(n)).c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),n[2]?e?e.p(n,o):((e=bC(n)).c(),e.m(i.parentNode,i)):e&&(e.d(1),e=null)},d:function(n){r&&r.d(n),n&&lt(t),e&&e.d(n),n&&lt(i)}}}function yC(n){var t,i,r,e,o;return{c:function(){var e;t=vt("a"),$n((i=vt("img")).src,r=n[0].topMessage.data.url)||_t(i,"src",r),_t(i,"loading","lazy"),_t(i,"alt",""),_t(t,"class","chat-top-message__image"),_t(t,"href",n[4]),Ot(t,"background-image","url('"+((null===(e=n[0].topMessage.data.preview)||void 0===e?void 0:e.src)||"")+"')")},m:function(r,u){st(r,t,u),ot(t,i),e||(o=mt(t,"click",wt(n[5])),e=!0)},p:function(n,e){var o;(1&e&&!$n(i.src,r=n[0].topMessage.data.url)&&_t(i,"src",r),16&e&&_t(t,"href",n[4]),1&e)&&Ot(t,"background-image","url('"+((null===(o=n[0].topMessage.data.preview)||void 0===o?void 0:o.src)||"")+"')")},d:function(n){n&&lt(t),e=!1,o()}}}function pC(n){var t,i,r,e,o;return{c:function(){var e;t=vt("a"),$n((i=vt("img")).src,r=n[3].url)||_t(i,"src",r),_t(i,"loading","lazy"),_t(i,"alt",""),_t(t,"class","chat-top-message__image"),_t(t,"href",n[4]),Ot(t,"background-image","url('"+((null===(e=n[3].preview)||void 0===e?void 0:e.src)||"")+"')")},m:function(r,u){st(r,t,u),ot(t,i),e||(o=mt(t,"click",wt(n[5])),e=!0)},p:function(n,e){var o;(8&e&&!$n(i.src,r=n[3].url)&&_t(i,"src",r),16&e&&_t(t,"href",n[4]),8&e)&&Ot(t,"background-image","url('"+((null===(o=n[3].preview)||void 0===o?void 0:o.src)||"")+"')")},d:function(n){n&&lt(t),e=!1,o()}}}function bC(n){var t,i;return{c:function(){t=vt("div"),i=yt(n[2]),_t(t,"class","chat-top-message__text")},m:function(n,r){st(n,t,r),ot(t,i)},p:function(n,t){4&t&&St(i,n[2])},d:function(n){n&&lt(t)}}}function mC(n){var t,i,r,e,o,u,c,f,a,s,l,h,v,d,y,p,b,m=n[0].name+"";function w(n,t){return n[0].topMessage?aC:fC}o=new zw({props:{data:n[0],size:wC}});var _=w(n),g=_(n);function S(n,t){return n[0].topMessage?hC:lC}var j=S(n),O=j(n);return{c:function(){t=vt("div"),i=vt("div"),r=vt("div"),e=vt("a"),yi(o.$$.fragment),u=pt(),c=vt("div"),f=vt("div"),a=vt("a"),s=yt(m),l=pt(),h=vt("div"),g.c(),v=pt(),d=vt("div"),O.c(),_t(e,"href",n[4]),_t(e,"class","chat-top-message__avatar"),_t(a,"href",n[4]),_t(f,"class","chat-top-message__name"),_t(h,"class","chat-top-message__date"),_t(c,"class","chat-top-message__info"),_t(r,"class","chat-top-message__header"),_t(d,"class","chat-top-message__desc"),_t(i,"class","chat-top-message__box"),_t(t,"class","chat-top-message"),_t(t,"data-colimn",n[1])},m:function(m,w){st(m,t,w),ot(t,i),ot(i,r),ot(r,e),pi(o,e,null),ot(r,u),ot(r,c),ot(c,f),ot(f,a),ot(a,s),ot(c,l),ot(c,h),g.m(h,null),ot(i,v),ot(i,d),O.m(d,null),y=!0,p||(b=[mt(e,"click",wt(n[5])),mt(a,"click",wt(n[5]))],p=!0)},p:function(n,i){var r=uC(i,1)[0],u={};1&r&&(u.data=n[0]),o.$set(u),(!y||16&r)&&_t(e,"href",n[4]),(!y||1&r)&&m!==(m=n[0].name+"")&&St(s,m),(!y||16&r)&&_t(a,"href",n[4]),_===(_=w(n))&&g?g.p(n,r):(g.d(1),(g=_(n))&&(g.c(),g.m(h,null))),j===(j=S(n))&&O?O.p(n,r):(O.d(1),(O=j(n))&&(O.c(),O.m(d,null))),(!y||2&r)&&_t(t,"data-colimn",n[1])},i:function(n){y||(fi(o.$$.fragment,n),y=!0)},o:function(n){ai(o.$$.fragment,n),y=!1},d:function(n){n&&lt(t),bi(o),g.d(),O.d(),p=!1,Dn(b)}}}var wC=48;function _C(n,t,i){var r,e,o,u=this,c=t.chat,f=t.column;return n.$$set=function(n){oC(this,u),"chat"in n&&i(0,c=n.chat),"column"in n&&i(1,f=n.column)}.bind(this),n.$$.update=function(){if(oC(this,u),1&n.$$.dirty&&i(4,o=nT(c)),1&n.$$.dirty&&c.topMessage&&(c.topMessage.recType===_.Gn||c.topMessage.recType===_.Ln)&&c.topMessage.data){if(c.topMessage.data.files)for(var t=0,f=c.topMessage.data.files.length;t<f;t++){var a=c.topMessage.data.files[t];if("object"===eC(a)){var s=a.data;if(s.preview&&s.preview.type===F){i(3,e=s);break}}}if(c.topMessage.data.text){var l=c.topMessage.data.text;"object"==eC(l)?"object"==eC(l.data)&&l.data.text&&i(2,r=l.data.text):"string"==typeof l&&i(2,r=l)}}}.bind(this),[c,f,r,e,o,function(){vT(c.chatId)}]}var gC=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Zx(n,t)}(o,n);var t,i,r,e=nC(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(iC(t=e.call(this)),n,_C,mC,Nn,{chat:0,column:1}),t}return t=o,i&&Xx(t.prototype,i),r&&Xx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),SC=gC;function jC(n){return jC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},jC(n)}function OC(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function EC(n,t){return EC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},EC(n,t)}function TC(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=xC(n);if(t){var e=xC(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return kC(this,i)}}function kC(n,t){if(t&&("object"===jC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return AC(n)}function AC(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function xC(n){return xC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xC(n)}function CC(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return RC(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return RC(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RC(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function IC(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function MC(n,t,i){var r=n.slice();return r[7]=t[i],r[9]=i,r}function UC(n,t,i){var r=n.slice();return r[10]=t[i],r[11]=t,r[12]=i,r}function PC(n){for(var t,i,r=this,e=n[1],o=[],u=0;u<e.length;u+=1)o[u]=BC(MC(n,e,u));var c=function(n){var t=this;return IC(this,r),ai(o[n],1,1,function(){IC(this,t),o[n]=null}.bind(this))}.bind(this);return{c:function(){for(var n=0;n<o.length;n+=1)o[n].c();t=bt()},m:function(n,r){for(var e=0;e<o.length;e+=1)o[e].m(n,r);st(n,t,r),i=!0},p:function(n,i){if(2&i){var r;for(e=n[1],r=0;r<e.length;r+=1){var u=MC(n,e,r);o[r]?(o[r].p(u,i),fi(o[r],1)):(o[r]=BC(u),o[r].c(),fi(o[r],1),o[r].m(t.parentNode,t))}for(ui(),r=e.length;r<o.length;r+=1)c(r);ci()}},i:function(n){if(!i){for(var t=0;t<e.length;t+=1)fi(o[t]);i=!0}},o:function(n){o=o.filter(Boolean);for(var t=0;t<o.length;t+=1)ai(o[t]);i=!1},d:function(n){ht(o,n),n&&lt(t)}}}function DC(n,t){var i,r,e,o,u=this;function c(n){t[5](n,t[10],t[11],t[12])}var f={column:t[9]};return void 0!==t[10]&&(f.chat=t[10]),r=new SC({props:f}),Wt.push(function(){return IC(this,u),di(r,"chat",c)}.bind(this)),{key:n,first:null,c:function(){i=bt(),yi(r.$$.fragment),this.first=i},m:function(n,t){st(n,i,t),pi(r,n,t),o=!0},p:function(n,i){var o=this;t=n;var u={};!e&&2&i&&(e=!0,u.chat=t[10],Jt(function(){return IC(this,o),e=!1}.bind(this))),r.$set(u)},i:function(n){o||(fi(r.$$.fragment,n),o=!0)},o:function(n){ai(r.$$.fragment,n),o=!1},d:function(n){n&&lt(i),bi(r,n)}}}function BC(n){for(var t,i,r,e=this,o=[],u=new Map,c=n[7],f=function(n){var t;return IC(this,e),n[10].chatId+(null===(t=n[10].topMessage)||void 0===t?void 0:t.messageId)}.bind(this),a=0;a<c.length;a+=1){var s=UC(n,c,a),l=f(s);u.set(l,o[a]=DC(l,s))}return{c:function(){t=vt("div");for(var n=0;n<o.length;n+=1)o[n].c();i=pt(),_t(t,"class","chat-list-columns__column")},m:function(n,e){st(n,t,e);for(var u=0;u<o.length;u+=1)o[u].m(t,null);ot(t,i),r=!0},p:function(n,r){2&r&&(c=n[7],ui(),o=vi(o,r,f,1,n,c,u,t,hi,DC,i,UC),ci())},i:function(n){if(!r){for(var t=0;t<c.length;t+=1)fi(o[t]);r=!0}},o:function(n){for(var t=0;t<o.length;t+=1)ai(o[t]);r=!1},d:function(n){n&&lt(t);for(var i=0;i<o.length;i+=1)o[i].d()}}}function NC(n){var t,i,r,e=n[1].length&&PC(n);return{c:function(){t=vt("div"),e&&e.c(),_t(t,"class",i="chat-list-columns"+(n[1].length?"":" chat-list-columns_loading"))},m:function(n,i){st(n,t,i),e&&e.m(t,null),r=!0},p:function(n,o){var u=this,c=CC(o,1)[0];n[1].length?e?(e.p(n,c),2&c&&fi(e,1)):((e=PC(n)).c(),fi(e,1),e.m(t,null)):e&&(ui(),ai(e,1,1,function(){IC(this,u),e=null}.bind(this)),ci()),(!r||2&c&&i!==(i="chat-list-columns"+(n[1].length?"":" chat-list-columns_loading")))&&_t(t,"class",i)},i:function(n){r||(fi(e),r=!0)},o:function(n){ai(e),r=!1},d:function(n){n&&lt(t),e&&e.d()}}}function $C(n,t,i){var r,e=this,o=Rn,u=function(){var n=this;return IC(this,e),o(),o=zn(c,function(t){return IC(this,n),i(4,r=t)}.bind(this)),c}.bind(this);n.$$.on_destroy.push(function(){return IC(this,e),o()}.bind(this));var c=t.list;u();var f=t.maxCountToShow,a=[],s=6;function l(){var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;i(3,s=4),n>=2400?i(3,s=6):n<=1366?i(3,s=2):n<=1600&&i(3,s=3)}return Nt(function(){var n=this;IC(this,e);var t=po(l,100,undefined);return window.addEventListener("resize",t),t(),function(){IC(this,n),window.removeEventListener("resize",t)}.bind(this)}.bind(this)),n.$$set=function(n){IC(this,e),"list"in n&&u(i(0,c=n.list)),"maxCountToShow"in n&&i(2,f=n.maxCountToShow)}.bind(this),n.$$.update=function(){if(IC(this,e),30&n.$$.dirty){i(1,a=[]);for(var t=0;t<s;t++)a.push([]);for(var o=0,u=r.length;o<u&&!(o>=f);o++)a[o%s].push(r[o])}}.bind(this),[c,a,f,s,r,function(n,t,e,o){e[o]=n,i(1,a),i(3,s),i(4,r),i(2,f)}]}var LC=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&EC(n,t)}(o,n);var t,i,r,e=TC(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(AC(t=e.call(this)),n,$C,NC,Nn,{list:0,maxCountToShow:2}),t}return t=o,i&&OC(t.prototype,i),r&&OC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),zC=LC;function WC(n){return WC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},WC(n)}function qC(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function FC(n,t){return FC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},FC(n,t)}function GC(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=QC(n);if(t){var e=QC(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return HC(this,i)}}function HC(n,t){if(t&&("object"===WC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return VC(n)}function VC(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function QC(n){return QC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},QC(n)}function YC(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return JC(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return JC(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JC(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function KC(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function XC(n){var t,i,e,o,u,c=r("new")+"";return{c:function(){t=vt("div"),i=yt(c),_t(t,"class",e="chat-tabs__item"+("new"===n[0]?" chat-tabs__item_active":""))},m:function(r,e){st(r,t,e),ot(t,i),o||(u=mt(t,"click",n[6]),o=!0)},p:function(n,i){1&i&&e!==(e="chat-tabs__item"+("new"===n[0]?" chat-tabs__item_active":""))&&_t(t,"class",e)},d:function(n){n&&lt(t),o=!1,u()}}}function ZC(n){var t,i,e,o,u,c=r("popular")+"";return{c:function(){t=vt("div"),i=yt(c),_t(t,"class",e="chat-tabs__item"+("popular"===n[0]?" chat-tabs__item_active":""))},m:function(r,e){st(r,t,e),ot(t,i),o||(u=mt(t,"click",n[7]),o=!0)},p:function(n,i){1&i&&e!==(e="chat-tabs__item"+("popular"===n[0]?" chat-tabs__item_active":""))&&_t(t,"class",e)},d:function(n){n&&lt(t),o=!1,u()}}}function nR(n){var t,i,e,o,u,c=r("my")+"";return{c:function(){t=vt("div"),i=yt(c),_t(t,"class",e="chat-tabs__item"+("my"===n[0]?" chat-tabs__item_active":""))},m:function(r,e){st(r,t,e),ot(t,i),o||(u=mt(t,"click",n[8]),o=!0)},p:function(n,i){1&i&&e!==(e="chat-tabs__item"+("my"===n[0]?" chat-tabs__item_active":""))&&_t(t,"class",e)},d:function(n){n&&lt(t),o=!1,u()}}}function tR(n){var t,i,r,e,o;return{c:function(){t=vt("div"),i=yt("Тест"),_t(t,"class",r="chat-tabs__item"+("test"===n[0]?" chat-tabs__item_active":""))},m:function(r,u){st(r,t,u),ot(t,i),e||(o=mt(t,"click",n[9]),e=!0)},p:function(n,i){1&i&&r!==(r="chat-tabs__item"+("test"===n[0]?" chat-tabs__item_active":""))&&_t(t,"class",r)},d:function(n){n&&lt(t),e=!1,o()}}}function iR(n){var t,i,r,e;return i=new zC({props:{list:zA,maxCountToShow:32}}),{c:function(){t=vt("div"),yi(i.$$.fragment),_t(t,"class",r="chat-tabs__content"+("new"===n[0]?"":" hidden"))},m:function(n,r){st(n,t,r),pi(i,t,null),e=!0},p:function(n,i){(!e||1&i&&r!==(r="chat-tabs__content"+("new"===n[0]?"":" hidden")))&&_t(t,"class",r)},i:function(n){e||(fi(i.$$.fragment,n),e=!0)},o:function(n){ai(i.$$.fragment,n),e=!1},d:function(n){n&&lt(t),bi(i)}}}function rR(n){var t,i,r,e;return i=new Kx({props:{chatList:n[2]}}),{c:function(){t=vt("div"),yi(i.$$.fragment),_t(t,"class",r="chat-tabs__content"+("popular"===n[0]?"":" hidden"))},m:function(n,r){st(n,t,r),pi(i,t,null),e=!0},p:function(n,o){var u={};4&o&&(u.chatList=n[2]),i.$set(u),(!e||1&o&&r!==(r="chat-tabs__content"+("popular"===n[0]?"":" hidden")))&&_t(t,"class",r)},i:function(n){e||(fi(i.$$.fragment,n),e=!0)},o:function(n){ai(i.$$.fragment,n),e=!1},d:function(n){n&&lt(t),bi(i)}}}function eR(n){var t,i,r,e,o=n[3].length&&oR(n),u=n[4].length&&cR(n);return{c:function(){t=vt("div"),o&&o.c(),i=pt(),u&&u.c(),_t(t,"class",r="chat-tabs__content"+("my"===n[0]?"":" hidden"))},m:function(n,r){st(n,t,r),o&&o.m(t,null),ot(t,i),u&&u.m(t,null),e=!0},p:function(n,c){var f=this;n[3].length?o?(o.p(n,c),8&c&&fi(o,1)):((o=oR(n)).c(),fi(o,1),o.m(t,i)):o&&(ui(),ai(o,1,1,function(){KC(this,f),o=null}.bind(this)),ci()),n[4].length?u?(u.p(n,c),16&c&&fi(u,1)):((u=cR(n)).c(),fi(u,1),u.m(t,null)):u&&(ui(),ai(u,1,1,function(){KC(this,f),u=null}.bind(this)),ci()),(!e||1&c&&r!==(r="chat-tabs__content"+("my"===n[0]?"":" hidden")))&&_t(t,"class",r)},i:function(n){e||(fi(o),fi(u),e=!0)},o:function(n){ai(o),ai(u),e=!1},d:function(n){n&&lt(t),o&&o.d(),u&&u.d()}}}function oR(n){var t,i;return t=new Kx({props:{chatList:n[3],showCountMembers:!0,$$slots:{title:[uR]},$$scope:{ctx:n}}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};8&i&&(r.chatList=n[3]),1024&i&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function uR(n){var t;return{c:function(){(t=vt("div")).textContent="".concat(r("groupChatsShort")),_t(t,"class","chat-intro__title-list"),_t(t,"slot","title")},m:function(n,i){st(n,t,i)},p:Rn,d:function(n){n&&lt(t)}}}function cR(n){var t,i;return t=new Kx({props:{chatList:n[4],showCountMembers:!0,$$slots:{title:[fR]},$$scope:{ctx:n}}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};16&i&&(r.chatList=n[4]),1024&i&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function fR(n){var t;return{c:function(){(t=vt("div")).textContent="".concat(r("channels")),_t(t,"class","chat-intro__title-list"),_t(t,"slot","title")},m:function(n,i){st(n,t,i)},p:Rn,d:function(n){n&&lt(t)}}}function aR(n){var t,i,r,e;return i=new Kx({props:{chatList:n[5]}}),{c:function(){t=vt("div"),yi(i.$$.fragment),_t(t,"class",r="chat-tabs__content"+("test"===n[0]?"":" hidden"))},m:function(n,r){st(n,t,r),pi(i,t,null),e=!0},p:function(n,o){var u={};32&o&&(u.chatList=n[5]),i.$set(u),(!e||1&o&&r!==(r="chat-tabs__content"+("test"===n[0]?"":" hidden")))&&_t(t,"class",r)},i:function(n){e||(fi(i.$$.fragment,n),e=!0)},o:function(n){ai(i.$$.fragment,n),e=!1},d:function(n){n&&lt(t),bi(i)}}}function sR(n){var t,i,r,e,o,u,c,f,a,s,l=n[1].length&&XC(n),h=n[2].length&&ZC(n),v=(n[3].length||n[4].length)&&nR(n),d=yr&&n[5].length&&tR(n),y=n[1].length&&iR(n),p=n[2].length&&rR(n),b=(n[3].length||n[4].length)&&eR(n),m=yr&&n[5].length&&aR(n);return{c:function(){t=vt("div"),l&&l.c(),i=pt(),h&&h.c(),r=pt(),v&&v.c(),e=pt(),d&&d.c(),o=pt(),y&&y.c(),u=pt(),p&&p.c(),c=pt(),b&&b.c(),f=pt(),m&&m.c(),a=bt(),_t(t,"class","chat-tabs__list")},m:function(n,w){st(n,t,w),l&&l.m(t,null),ot(t,i),h&&h.m(t,null),ot(t,r),v&&v.m(t,null),ot(t,e),d&&d.m(t,null),st(n,o,w),y&&y.m(n,w),st(n,u,w),p&&p.m(n,w),st(n,c,w),b&&b.m(n,w),st(n,f,w),m&&m.m(n,w),st(n,a,w),s=!0},p:function(n,o){var s=this,w=YC(o,1)[0];n[1].length?l?l.p(n,w):((l=XC(n)).c(),l.m(t,i)):l&&(l.d(1),l=null),n[2].length?h?h.p(n,w):((h=ZC(n)).c(),h.m(t,r)):h&&(h.d(1),h=null),n[3].length||n[4].length?v?v.p(n,w):((v=nR(n)).c(),v.m(t,e)):v&&(v.d(1),v=null),yr&&n[5].length?d?d.p(n,w):((d=tR(n)).c(),d.m(t,null)):d&&(d.d(1),d=null),n[1].length?y?(y.p(n,w),2&w&&fi(y,1)):((y=iR(n)).c(),fi(y,1),y.m(u.parentNode,u)):y&&(ui(),ai(y,1,1,function(){KC(this,s),y=null}.bind(this)),ci()),n[2].length?p?(p.p(n,w),4&w&&fi(p,1)):((p=rR(n)).c(),fi(p,1),p.m(c.parentNode,c)):p&&(ui(),ai(p,1,1,function(){KC(this,s),p=null}.bind(this)),ci()),n[3].length||n[4].length?b?(b.p(n,w),24&w&&fi(b,1)):((b=eR(n)).c(),fi(b,1),b.m(f.parentNode,f)):b&&(ui(),ai(b,1,1,function(){KC(this,s),b=null}.bind(this)),ci()),yr&&n[5].length?m?(m.p(n,w),32&w&&fi(m,1)):((m=aR(n)).c(),fi(m,1),m.m(a.parentNode,a)):m&&(ui(),ai(m,1,1,function(){KC(this,s),m=null}.bind(this)),ci())},i:function(n){s||(fi(y),fi(p),fi(b),fi(m),s=!0)},o:function(n){ai(y),ai(p),ai(b),ai(m),s=!1},d:function(n){n&&lt(t),l&&l.d(),h&&h.d(),v&&v.d(),d&&d.d(),n&&lt(o),y&&y.d(n),n&&lt(u),p&&p.d(n),n&&lt(c),b&&b.d(n),n&&lt(f),m&&m.d(n),n&&lt(a)}}}function lR(n,t,i){var r,e,o,u,c,f=this;qn(n,zA,function(n){return KC(this,f),i(1,r=n)}.bind(this)),qn(n,VA,function(n){return KC(this,f),i(2,e=n)}.bind(this)),qn(n,NO,function(n){return KC(this,f),i(3,o=n)}.bind(this)),qn(n,$O,function(n){return KC(this,f),i(4,u=n)}.bind(this)),qn(n,JA,function(n){return KC(this,f),i(5,c=n)}.bind(this));var a="new";Nt(function(){KC(this,f),ax=new cx("chats_new",[{keyPath:"id",autoIncrement:!0}]),sx=new cx("chats_popular",[{keyPath:"id",autoIncrement:!0}]),yx(ax,GA),yx(sx,QA),yr&&yx(lx=new cx("chats_test",[{keyPath:"id",autoIncrement:!0}]),KA)}.bind(this));var s=function(){KC(this,f),i(0,a="new")}.bind(this),l=function(){KC(this,f),i(0,a="popular")}.bind(this),h=function(){KC(this,f),i(0,a="my")}.bind(this),v=function(){KC(this,f),i(0,a="test")}.bind(this);return[a,r,e,o,u,c,s,l,h,v]}var hR=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&FC(n,t)}(o,n);var t,i,r,e=GC(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(VC(t=e.call(this)),n,lR,sR,Nn,{}),t}return t=o,i&&qC(t.prototype,i),r&&qC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),vR=hR;function dR(n){return dR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},dR(n)}function yR(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function pR(n,t){return pR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},pR(n,t)}function bR(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=_R(n);if(t){var e=_R(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return mR(this,i)}}function mR(n,t){if(t&&("object"===dR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wR(n)}function wR(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _R(n){return _R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_R(n)}function gR(n){var t,i,r=!YE&&function(n){var t,i;return t=new vR({}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}();return{c:function(){t=vt("div"),r&&r.c(),_t(t,"class","chat-intro")},m:function(n,e){st(n,t,e),r&&r.m(t,null),i=!0},p:Rn,i:function(n){i||(fi(r),i=!0)},o:function(n){ai(r),i=!1},d:function(n){n&&lt(t),r&&r.d()}}}function SR(n){return[]}var jR=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&pR(n,t)}(o,n);var t,i,r,e=bR(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(wR(t=e.call(this)),n,SR,gR,Nn,{}),t}return t=o,i&&yR(t.prototype,i),r&&yR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),OR=jR;function ER(n){return ER="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ER(n)}function TR(n,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function kR(n,t){return kR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},kR(n,t)}function AR(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var i,r=RR(n);if(t){var e=RR(this).constructor;i=Reflect.construct(r,arguments,e)}else i=r.apply(this,arguments);return xR(this,i)}}function xR(n,t){if(t&&("object"===ER(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return CR(n)}function CR(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function RR(n){return RR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},RR(n)}function IR(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var i=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==i)return;var r,e,o=[],u=!0,c=!1;try{for(i=i.call(n);!(u=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(f){c=!0,e=f}finally{try{u||null==i["return"]||i["return"]()}finally{if(c)throw e}}return o}(n,t)||function(n,t){if(!n)return;if("string"==typeof n)return MR(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return MR(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MR(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function UR(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function PR(n){var t,i,r,e,o,u,c,f,a,s,l,h;t=new wA({});var v=n[1].search&&DR(n);e=new OR({});var d=[NR,BR],y=[];function p(n,t){return n[1].error?0:n[1].window?1:-1}return~(u=p(n))&&(c=y[u]=d[u](n)),a=new gS({}),l=new DA({}),{c:function(){yi(t.$$.fragment),i=pt(),v&&v.c(),r=pt(),yi(e.$$.fragment),o=pt(),c&&c.c(),f=pt(),yi(a.$$.fragment),s=pt(),yi(l.$$.fragment)},m:function(n,c){pi(t,n,c),st(n,i,c),v&&v.m(n,c),st(n,r,c),pi(e,n,c),st(n,o,c),~u&&y[u].m(n,c),st(n,f,c),pi(a,n,c),st(n,s,c),pi(l,n,c),h=!0},p:function(n,t){var i=this;n[1].search?v?2&t&&fi(v,1):((v=DR(n)).c(),fi(v,1),v.m(r.parentNode,r)):v&&(ui(),ai(v,1,1,function(){UR(this,i),v=null}.bind(this)),ci());var e=u;(u=p(n))===e?~u&&y[u].p(n,t):(c&&(ui(),ai(y[e],1,1,function(){UR(this,i),y[e]=null}.bind(this)),ci()),~u?((c=y[u])?c.p(n,t):(c=y[u]=d[u](n)).c(),fi(c,1),c.m(f.parentNode,f)):c=null)},i:function(n){h||(fi(t.$$.fragment,n),fi(v),fi(e.$$.fragment,n),fi(c),fi(a.$$.fragment,n),fi(l.$$.fragment,n),h=!0)},o:function(n){ai(t.$$.fragment,n),ai(v),ai(e.$$.fragment,n),ai(c),ai(a.$$.fragment,n),ai(l.$$.fragment,n),h=!1},d:function(n){bi(t,n),n&&lt(i),v&&v.d(n),n&&lt(r),bi(e,n),n&&lt(o),~u&&y[u].d(n),n&&lt(f),bi(a,n),n&&lt(s),bi(l,n)}}}function DR(n){var t,i;return t=new kk({}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function BR(n){var t,i;return t=new zg({props:{chat:iT}}),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:Rn,i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function NR(n){var t,i;return(t=new so({props:{$$slots:{content:[$R]},$$scope:{ctx:n}}})).$on("close",n[3]),{c:function(){yi(t.$$.fragment)},m:function(n,r){pi(t,n,r),i=!0},p:function(n,i){var r={};20&i&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i:function(n){i||(fi(t.$$.fragment,n),i=!0)},o:function(n){ai(t.$$.fragment,n),i=!1},d:function(n){bi(t,n)}}}function $R(n){var t;return{c:function(){_t(t=vt("div"),"slot","content")},m:function(i,r){st(i,t,r),t.innerHTML=n[2]},p:function(n,i){4&i&&(t.innerHTML=n[2])},d:function(n){n&&lt(t)}}}function LR(n){var t,i,r=n[0]&&PR(n);return{c:function(){r&&r.c(),t=bt()},m:function(n,e){r&&r.m(n,e),st(n,t,e),i=!0},p:function(n,i){var e=this,o=IR(i,1)[0];n[0]?r?(r.p(n,o),1&o&&fi(r,1)):((r=PR(n)).c(),fi(r,1),r.m(t.parentNode,t)):r&&(ui(),ai(r,1,1,function(){UR(this,e),r=null}.bind(this)),ci())},i:function(n){i||(fi(r),i=!0)},o:function(n){ai(r),i=!1},d:function(n){r&&r.d(n),n&&lt(t)}}}function zR(){var n=document.getElementById("left-panel"),t=document.getElementById("footer");if(n&&t){var i=n.getBoundingClientRect(),r=t.getBoundingClientRect();n.style.minHeight="".concat(i.height+(window.innerHeight-r.bottom),"px")}}function WR(n,i,r){var e,o,u=this;qn(n,qi,function(n){return UR(this,u),r(1,e=n)}.bind(this)),qn(n,Gi,function(n){return UR(this,u),r(2,o=n)}.bind(this));var c=!1;window.addEventListener("resize",po(zR,100,undefined)),Nt(function(){var n=this;UR(this,u),zR(),LS()["catch"](function(i){UR(this,n),y.error(t.WebSocket,i)}.bind(this))["finally"](function(){var t=this;UR(this,n),Ve("/".concat(TE,"/users/").concat(EE.toLowerCase(),"/messages")),Ge({path:"/{language}/users/{login}/messages",callback:function(){UR(this,t),Oj(),oT()}.bind(this)}),Ge({path:"/{language}/messages/{id}",callback:function(n){UR(this,t),n&&n.id&&hT(n.id)}.bind(this)}),Ge({path:"/{language}/channels/{id}",callback:function(n){UR(this,t),n&&n.id&&hT(n.id)}.bind(this)}),r(0,c=!0)}.bind(this))}.bind(this));var f=function(){UR(this,u),Gi.set(undefined)}.bind(this);return[c,e,o,f]}var qR=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&kR(n,t)}(o,n);var t,i,r,e=AR(o);function o(n){var t;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),wi(CR(t=e.call(this)),n,WR,LR,Nn,{}),t}return t=o,i&&TR(t.prototype,i),r&&TR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(_i),FR=qR;function GR(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function HR(){var n=this;return new Promise(function(t,i){var r=this;GR(this,n);var e=document.getElementById("chatContainer");e?$j().then(function(){var n=this;GR(this,r),Cj(),function(){var n=this;return new Promise(function(t){XA(this,n),ex=new fx(ZE),t()}.bind(this))}().then(function(){GR(this,n),new FR({target:e}),t()}.bind(this))}.bind(this))["catch"](function(n){GR(this,r),e.innerHTML='<div class="chat-errors-block">\n      <div class="alert alert_danger">'.concat(n,"</div>\n      </div>"),i(n)}.bind(this)):i("There is no container here")}.bind(this))}var VR=undefined;function QR(n){return QR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},QR(n)}function YR(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var JR,KR=!1;function XR(n){var e=this;return new Promise(function(o,u){YR(this,e),n&&"object"===QR(n)?(!function(){var n=document.getElementById("chatTranslates");if(n){var t=n.innerHTML;if(t)try{i=JSON.parse(t)}catch(r){i={},console.warn(r)}}}(),window.WebSocket&&window.indexedDB&&"Set"===(new Set).constructor.name?(y.enable(),function(n){var i=this;return new Promise(function(r){var e=this;VE(this,i),GE("chat_extended_logs").then(function(n){VE(this,e),1===parseInt(n,10)&&(ZE=!0),r()}.bind(this))["catch"](function(n){VE(this,e),y.error(t.System,n),r()}.bind(this)),SE=n.mode,jE=n.complaintKey,OE=n.userId,EE=n.userLogin,TE=n.language,n.playSounds,n.accessLevel,kE=n.friendlyHosts,AE=n.readonly,CE=n.token,RE=n.url,IE=n.version,QE=n.uniq;var o=document.documentElement.clientWidth;YE=o<=414,SE===N.wt&&(ZE=!0),xE=n.type===V,JE=xE?Q:Y,KE=xE?J:K,XE=xE||YE?X:Z}.bind(this))}(n).then(o)):u(r("notSupportedWebsoket"))):u("Settings in empty")}.bind(this))}function ZR(n,t){var i=this;XR(n).then(function(){return YR(this,i),t()}.bind(this)).then(function(){YR(this,i),KR=!0,JR&&(JR(),JR=undefined)}.bind(this))["catch"](function(n){var t,r;YR(this,i),t=n,(r=document.getElementById("chatContainer")||document.getElementById("chatsWidget"))&&(r.innerHTML='<div class="chat-errors-block">\n  <div class="alert alert_danger">'.concat(t,"</div>\n  </div>"))}.bind(this))}function nI(n){return function(){for(var t=this,i=arguments.length,r=new Array(i),e=0;e<i;e++)r[e]=arguments[e];yj.set(!0),KR?n.apply(null,r):JR=function(){YR(this,t),n.apply(null,r)}.bind(this)}}window.initChat=function(n){ZR(n,HR)},window.initChatWidget=function(n){ZR(n,Sj)},window.closeAllPopupsChat=nI(Oj),window.openChatWith=function(n,t){YR(this,VR),YE&&xE?window.doPost(null,"/".concat(TE,"/users/").concat(EE,"/messages"),null,{user:n}):nI(lT)(n,t)}.bind(undefined),window.openChatByName=nI(hT)}();